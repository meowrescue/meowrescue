var e,t,a=Object.defineProperty,r=(e,t,r)=>((e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);import{jsx as n,Fragment as i,jsxs as s}from"react/jsx-runtime";import o from"react-dom/server";import{StaticRouter as l}from"react-router-dom/server.mjs";import*as c from"react";import d,{Component as m,createContext as u,useState as h,useEffect as p,useContext as g,forwardRef as f,createElement as y,lazy as v,Suspense as b,useCallback as w,useMemo as x,useRef as N}from"react";import C from"react-fast-compare";import _ from"invariant";import k from"shallowequal";import{useQuery as S,useQueryClient as E,useMutation as D,QueryClient as A,QueryClientProvider as M}from"@tanstack/react-query";import{createClient as P}from"@supabase/supabase-js";import*as T from"react-dom";import R from"react-dom";import{useFloating as F,offset as L,shift as I,flip as q,size as O,arrow as j,hide as $,limitShift as z,autoUpdate as U}from"@floating-ui/react-dom";import{clsx as V}from"clsx";import{twMerge as B}from"tailwind-merge";import{cva as H}from"class-variance-authority";import{useTheme as K}from"next-themes";import{Toaster as W,toast as Y}from"sonner";import{Navigate as G,useLocation as Q,Link as X,useNavigate as Z,useParams as J,useSearchParams as ee,NavLink as te,Routes as ae,Route as re}from"react-router-dom";import{hideOthers as ne}from"aria-hidden";import{RemoveScroll as ie}from"react-remove-scroll";import{useSyncExternalStore as se}from"use-sync-external-store/shim";import{motion as oe}from"framer-motion";import{format as le,formatDistanceToNow as ce,startOfMonth as de,addMonths as me,endOfMonth as ue,differenceInYears as he,differenceInMonths as pe}from"date-fns";import{useFormContext as ge,FormProvider as fe,Controller as ye,useForm as ve}from"react-hook-form";import{zodResolver as be}from"@hookform/resolvers/zod";import*as we from"zod";import{z as xe}from"zod";import{DayPicker as Ne}from"react-day-picker";import*as Ce from"recharts";import{ResponsiveContainer as _e,BarChart as ke,CartesianGrid as Se,XAxis as Ee,YAxis as De,Legend as Ae,Bar as Me}from"recharts";var Pe=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Pe||{}),Te={rel:["amphtml","canonical","alternate"]},Re={type:["application/ld+json"]},Fe={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},Le=Object.values(Pe),Ie={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},qe=Object.entries(Ie).reduce(((e,[t,a])=>(e[a]=t,e)),{}),Oe="data-rh",je="defaultTitle",$e="defer",ze="encodeSpecialCharacters",Ue="onChangeClientState",Ve="titleTemplate",Be="prioritizeSeoTags",He=(e,t)=>{for(let a=e.length-1;a>=0;a-=1){const r=e[a];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},Ke=e=>{let t=He(e,"title");const a=He(e,Ve);if(Array.isArray(t)&&(t=t.join("")),a&&t)return a.replace(/%s/g,(()=>t));const r=He(e,je);return t||r||void 0},We=e=>He(e,Ue)||(()=>{}),Ye=(e,t)=>t.filter((t=>void 0!==t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),Ge=(e,t)=>t.filter((e=>void 0!==e.base)).map((e=>e.base)).reverse().reduce(((t,a)=>{if(!t.length){const r=Object.keys(a);for(let n=0;n<r.length;n+=1){const i=r[n].toLowerCase();if(-1!==e.indexOf(i)&&a[i])return t.concat(a)}}return t}),[]),Qe=(e,t,a)=>{const r={};return a.filter((t=>{return!!Array.isArray(t[e])||(void 0!==t[e]&&(a=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"==typeof console.warn&&console.warn(a)),!1);var a})).map((t=>t[e])).reverse().reduce(((e,a)=>{const n={};a.filter((e=>{let a;const i=Object.keys(e);for(let r=0;r<i.length;r+=1){const n=i[r],s=n.toLowerCase();-1===t.indexOf(s)||"rel"===a&&"canonical"===e[a].toLowerCase()||"rel"===s&&"stylesheet"===e[s].toLowerCase()||(a=s),-1===t.indexOf(n)||"innerHTML"!==n&&"cssText"!==n&&"itemprop"!==n||(a=n)}if(!a||!e[a])return!1;const s=e[a].toLowerCase();return r[a]||(r[a]={}),n[a]||(n[a]={}),!r[a][s]&&(n[a][s]=!0,!0)})).reverse().forEach((t=>e.push(t)));const i=Object.keys(n);for(let t=0;t<i.length;t+=1){const e=i[t],a={...r[e],...n[e]};r[e]=a}return e}),[]).reverse()},Xe=(e,t)=>{if(Array.isArray(e)&&e.length)for(let a=0;a<e.length;a+=1){if(e[a][t])return!0}return!1},Ze=e=>Array.isArray(e)?e.join(""):e,Je=(e,t)=>Array.isArray(e)?e.reduce(((e,a)=>(((e,t)=>{const a=Object.keys(e);for(let r=0;r<a.length;r+=1)if(t[a[r]]&&t[a[r]].includes(e[a[r]]))return!0;return!1})(a,t)?e.priority.push(a):e.default.push(a),e)),{priority:[],default:[]}):{default:e,priority:[]},et=(e,t)=>({...e,[t]:void 0}),tt=["noscript","script","style"],at=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),rt=e=>Object.keys(e).reduce(((t,a)=>{const r=void 0!==e[a]?`${a}="${e[a]}"`:`${a}`;return t?`${t} ${r}`:r}),""),nt=(e,t={})=>Object.keys(e).reduce(((t,a)=>(t[Ie[a]||a]=e[a],t)),t),it=(e,t)=>t.map(((t,a)=>{const r={key:a,[Oe]:!0};return Object.keys(t).forEach((e=>{const a=Ie[e]||e;if("innerHTML"===a||"cssText"===a){const e=t.innerHTML||t.cssText;r.dangerouslySetInnerHTML={__html:e}}else r[a]=t[e]})),d.createElement(e,r)})),st=(e,t,a=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,a)=>{const r=nt(a,{key:t,[Oe]:!0});return[d.createElement("title",r,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,a,r)=>{const n=rt(a),i=Ze(t);return n?`<${e} ${Oe}="true" ${n}>${at(i,r)}</${e}>`:`<${e} ${Oe}="true">${at(i,r)}</${e}>`})(e,t.title,t.titleAttributes,a)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>nt(t),toString:()=>rt(t)};default:return{toComponent:()=>it(e,t),toString:()=>((e,t,a=!0)=>t.reduce(((t,r)=>{const n=r,i=Object.keys(n).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const r=void 0===n[t]?t:`${t}="${at(n[t],a)}"`;return e?`${e} ${r}`:r}),""),s=n.innerHTML||n.cssText||"",o=-1===tt.indexOf(e);return`${t}<${e} ${Oe}="true" ${i}${o?"/>":`>${s}</${e}>`}`}),""))(e,t,a)}}},ot=e=>{const{baseTag:t,bodyAttributes:a,encode:r=!0,htmlAttributes:n,noscriptTags:i,styleTags:s,title:o="",titleAttributes:l,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:m,scriptTags:u}=e,h={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:h,linkTags:d,metaTags:m,scriptTags:u}=(({metaTags:e,linkTags:t,scriptTags:a,encode:r})=>{const n=Je(e,Fe),i=Je(t,Te),s=Je(a,Re);return{priorityMethods:{toComponent:()=>[...it("meta",n.priority),...it("link",i.priority),...it("script",s.priority)],toString:()=>`${st("meta",n.priority,r)} ${st("link",i.priority,r)} ${st("script",s.priority,r)}`},metaTags:n.default,linkTags:i.default,scriptTags:s.default}})(e)),{priority:h,base:st("base",t,r),bodyAttributes:st("bodyAttributes",a,r),htmlAttributes:st("htmlAttributes",n,r),link:st("link",d,r),meta:st("meta",m,r),noscript:st("noscript",i,r),script:st("script",u,r),style:st("style",s,r),title:st("title",{title:o,titleAttributes:l},r)}},lt=[],ct=!("undefined"==typeof window||!window.document||!window.document.createElement),dt=class{constructor(e,t){r(this,"instances",[]),r(this,"canUseDOM",ct),r(this,"context"),r(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?lt:this.instances,add:e=>{(this.canUseDOM?lt:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?lt:this.instances).indexOf(e);(this.canUseDOM?lt:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=ot({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},mt=d.createContext({}),ut=(e=class extends m{constructor(t){super(t),r(this,"helmetData"),this.helmetData=new dt(this.props.context||{},e.canUseDOM)}render(){return d.createElement(mt.Provider,{value:this.helmetData.value},this.props.children)}},r(e,"canUseDOM",ct),e),ht=(e,t)=>{const a=document.head||document.querySelector("head"),r=a.querySelectorAll(`${e}[${Oe}]`),n=[].slice.call(r),i=[];let s;return t&&t.length&&t.forEach((t=>{const a=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)a.innerHTML=t.innerHTML;else if("cssText"===e)a.styleSheet?a.styleSheet.cssText=t.cssText:a.appendChild(document.createTextNode(t.cssText));else{const r=e,n=void 0===t[r]?"":t[r];a.setAttribute(e,n)}a.setAttribute(Oe,"true"),n.some(((e,t)=>(s=t,a.isEqualNode(e))))?n.splice(s,1):i.push(a)})),n.forEach((e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),i.forEach((e=>a.appendChild(e))),{oldTags:n,newTags:i}},pt=(e,t)=>{const a=document.getElementsByTagName(e)[0];if(!a)return;const r=a.getAttribute(Oe),n=r?r.split(","):[],i=[...n],s=Object.keys(t);for(const o of s){const e=t[o]||"";a.getAttribute(o)!==e&&a.setAttribute(o,e),-1===n.indexOf(o)&&n.push(o);const r=i.indexOf(o);-1!==r&&i.splice(r,1)}for(let o=i.length-1;o>=0;o-=1)a.removeAttribute(i[o]);n.length===i.length?a.removeAttribute(Oe):a.getAttribute(Oe)!==s.join(",")&&a.setAttribute(Oe,s.join(","))},gt=(e,t)=>{const{baseTag:a,bodyAttributes:r,htmlAttributes:n,linkTags:i,metaTags:s,noscriptTags:o,onChangeClientState:l,scriptTags:c,styleTags:d,title:m,titleAttributes:u}=e;pt("body",r),pt("html",n),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=Ze(e)),pt("title",t)})(m,u);const h={baseTag:ht("base",a),linkTags:ht("link",i),metaTags:ht("meta",s),noscriptTags:ht("noscript",o),scriptTags:ht("script",c),styleTags:ht("style",d)},p={},g={};Object.keys(h).forEach((e=>{const{newTags:t,oldTags:a}=h[e];t.length&&(p[e]=t),a.length&&(g[e]=h[e].oldTags)})),t&&t(),l(e,p,g)},ft=null,yt=e=>{ft&&cancelAnimationFrame(ft),e.defer?ft=requestAnimationFrame((()=>{gt(e,(()=>{ft=null}))})):(gt(e),ft=null)},vt=class extends m{constructor(){super(...arguments),r(this,"rendered",!1)}shouldComponentUpdate(e){return!k(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let a=null;const r=(n=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:Ge(["href"],n),bodyAttributes:Ye("bodyAttributes",n),defer:He(n,$e),encode:He(n,ze),htmlAttributes:Ye("htmlAttributes",n),linkTags:Qe("link",["rel","href"],n),metaTags:Qe("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Qe("noscript",["innerHTML"],n),onChangeClientState:We(n),scriptTags:Qe("script",["src","innerHTML"],n),styleTags:Qe("style",["cssText"],n),title:Ke(n),titleAttributes:Ye("titleAttributes",n),prioritizeSeoTags:Xe(n,Be)});var n;ut.canUseDOM?yt(r):ot&&(a=ot(r)),t(a)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},bt=(r(t=class extends m{shouldComponentUpdate(e){return!C(et(this.props,"helmetData"),et(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,a,r){return{...t,[e.type]:[...t[e.type]||[],{...a,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,a,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...a}};case"body":return{...t,bodyAttributes:{...a}};case"html":return{...t,htmlAttributes:{...a}};default:return{...t,[e.type]:{...a}}}}mapArrayTypeChildrenToProps(e,t){let a={...t};return Object.keys(e).forEach((t=>{a={...a,[t]:e[t]}})),a}warnOnInvalidChildren(e,t){return _(Le.some((t=>e.type===t)),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Le.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),_(!t||"string"==typeof t||Array.isArray(t)&&!t.some((e=>"string"!=typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let a={};return d.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:r,...n}=e.props,i=Object.keys(n).reduce(((e,t)=>(e[qe[t]||t]=n[t],e)),{});let{type:s}=e;switch("symbol"==typeof s?s=s.toString():this.warnOnInvalidChildren(e,r),s){case"Symbol(react.fragment)":t=this.mapChildrenToProps(r,t);break;case"link":case"meta":case"noscript":case"script":case"style":a=this.flattenArrayTypeChildren(e,a,i,r);break;default:t=this.mapObjectTypeChildren(e,t,i,r)}})),this.mapArrayTypeChildrenToProps(a,t)}render(){const{children:e,...t}=this.props;let a={...t},{helmetData:r}=t;if(e&&(a=this.mapChildrenToProps(e,a)),r&&!(r instanceof dt)){r=new dt(r.context,!0),delete a.helmetData}return r?d.createElement(vt,{...a,context:r.value}):d.createElement(mt.Consumer,null,(e=>d.createElement(vt,{...a,context:e})))}},"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),t);let wt=null;const xt=()=>{if(wt)return wt;try{const e="",t="";return e&&t?(wt=P(e,t,{auth:{autoRefreshToken:!0,persistSession:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}}),wt):(console.error("Supabase credentials missing. Please check Netlify environment variables."),{from:()=>({select:()=>({order:()=>({limit:()=>Promise.resolve({data:[],error:new Error("Supabase credentials missing")})}),limit:()=>Promise.resolve({data:[],error:new Error("Supabase credentials missing")}),eq:()=>Promise.resolve({data:[],error:new Error("Supabase credentials missing")})}),insert:()=>Promise.resolve({data:null,error:new Error("Supabase credentials missing")}),update:()=>Promise.resolve({data:null,error:new Error("Supabase credentials missing")}),delete:()=>Promise.resolve({data:null,error:new Error("Supabase credentials missing")})}),channel:()=>({on:()=>({subscribe:()=>({unsubscribe:()=>{}})})}),auth:{onAuthStateChange:()=>({data:null,error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),signOut:()=>Promise.resolve({error:null})}})}catch(e){return console.error("Error initializing Supabase client:",e),{from:()=>({select:()=>({limit:()=>Promise.resolve({data:[],error:e})}),insert:()=>Promise.resolve({data:null,error:e}),update:()=>Promise.resolve({data:null,error:e}),delete:()=>Promise.resolve({data:null,error:e})}),channel:()=>({on:()=>({subscribe:()=>({unsubscribe:()=>{}})})}),auth:{onAuthStateChange:()=>({data:null,error:null}),getSession:()=>Promise.resolve({data:{session:null},error:null}),signOut:()=>Promise.resolve({error:null})}}}},Nt=async()=>{try{console.log("Checking Supabase connection...");const e=xt(),{data:t,error:a}=await e.from("donations").select("id").limit(1);return a?(console.error("Supabase connection error:",a.message),{connected:!1,error:a.message,details:a}):(console.log("Supabase connection successful, test data:",t),{connected:!0,data:t})}catch(e){return console.error("Exception checking Supabase connection:",e),{connected:!1,error:e instanceof Error?e.message:"Unknown error",details:e}}},Ct=xt(),_t=async(e,t)=>(xt(),xt().rpc("log_activity",{p_activity_type:"login",p_description:`User logged in: ${t}`,p_metadata:JSON.stringify({user_id:e,email:t})}).then((({data:e,error:t})=>t?(console.error("Error logging activity:",t),null):e))),kt=async(e,t)=>(xt(),xt().rpc("log_activity",{p_activity_type:"logout",p_description:`User logged out: ${t}`,p_metadata:JSON.stringify({user_id:e,email:t})}).then((({data:e,error:t})=>t?(console.error("Error logging activity:",t),null):e))),St=async(e,t)=>(xt(),xt().rpc("log_activity",{p_activity_type:"create",p_description:`New user registered: ${t}`,p_metadata:JSON.stringify({user_id:e,email:t})}).then((({data:e,error:t})=>t?(console.error("Error logging activity:",t),null):e))),Et=u(void 0),Dt=({children:e})=>{const[t,a]=h(null),[r,i]=h(null),[s,o]=h(!0),[l,c]=h(null);p((()=>{let e=()=>{};try{const t=xt();if(!t.auth)return console.error("Supabase client auth property is not available. Check initialization."),c("Authentication service is not available. Please check environment configuration."),void o(!1);const{data:r,error:n}=t.auth.onAuthStateChange(((e,t)=>{console.log("Auth state changed:",e),a(t),(null==t?void 0:t.user)?setTimeout((async()=>{try{console.log("Auth change: fetching profile for user ID:",t.user.id);const{data:e,error:a}=await xt().from("profiles").select("*").eq("id",t.user.id).single();a&&"PGRST116"!==a.code&&console.error("Auth change: error fetching profile:",a),e?(console.log("Auth change: profile found, merging data"),i({...t.user,...e})):(console.log("Auth change: no profile, using basic user data"),i(t.user))}catch(e){console.error("Auth change: exception fetching profile:",e),i(t.user)}}),0):i(null)}));if(n)return console.error("Error setting up auth state change listener:",n),c(n.message),void o(!1);r&&r.subscription&&(e=r.subscription.unsubscribe.bind(r.subscription))}catch(t){return console.error("Exception setting up auth state change listener:",t),c(t instanceof Error?t.message:"Unknown error occurred during auth initialization"),void o(!1)}return(async()=>{try{console.log("Getting session...");const{data:t,error:r}=await xt().auth.getSession();if(r)return console.error("Error getting session:",r),c(r.message),void o(!1);const{session:n}=t;if(console.log("Session result:",n?"Session found":"No session"),a(n),null==n?void 0:n.user){console.log("Fetching user profile for ID:",n.user.id);try{const{data:e,error:t}=await xt().from("profiles").select("*").eq("id",n.user.id).single();t&&"PGRST116"!==t.code&&console.error("Error fetching profile:",t),e?(console.log("Profile found, merging with user data"),i({...n.user,...e})):(console.log("No profile found, using basic user data"),i(n.user))}catch(e){console.error("Exception fetching profile:",e),i(n.user)}}else i(null)}catch(t){console.error("Exception in getSession:",t),c(t instanceof Error?t.message:"Unknown error occurred")}finally{o(!1)}})(),()=>{e()}}),[]);const d={session:t,user:r,loading:s,error:l,isLoading:s,signIn:async(e,t)=>{var a;o(!0),c(null);try{console.info("Attempting to sign in user:",e);const{data:n,error:i}=await xt().auth.signInWithPassword({email:e,password:t});if(i)return console.error("Sign in error:",i),c(i.message),{success:!1,error:i.message};if(console.log("Sign in successful, user ID:",null==(a=n.user)?void 0:a.id),n.user)try{await _t(n.user.id,n.user.email||e)}catch(r){console.error("Error logging authentication:",r)}return{success:!0}}catch(n){console.error("Exception during sign in:",n);const e=n.message||"An error occurred during sign in";return c(e),{success:!1,error:e}}finally{o(!1)}},signUp:async(e,t)=>{o(!0);try{const{data:a,error:r}=await xt().auth.signUp({email:e,password:t});return r?(c(r.message),{success:!1,error:r.message}):(a.user&&await St(a.user.id,a.user.email||e),{success:!0})}catch(a){return c(a.message||"An error occurred during sign up"),{success:!1,error:a.message||"An error occurred during sign up"}}finally{o(!1)}},signOut:async()=>{try{r&&await kt(r.id,r.email||"");const{error:e}=await xt().auth.signOut();if(e)throw e;i(null)}catch(e){throw console.error("Error signing out:",e.message),e}},resetPassword:async e=>{o(!0);try{const{error:t}=await xt().auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/update-password`});return t?(c(t.message),{success:!1,error:t.message}):{success:!0}}catch(t){return c(t.message||"An error occurred during password reset"),{success:!1,error:t.message||"An error occurred during password reset"}}finally{o(!1)}}};return n(Et.Provider,{value:d,children:e})},At=()=>{const e=g(Et);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};function Mt(e,t,{checkForDefaultPrevented:a=!0}={}){return function(r){if(null==e||e(r),!1===a||!r.defaultPrevented)return null==t?void 0:t(r)}}function Pt(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Tt(...e){return t=>{let a=!1;const r=e.map((e=>{const r=Pt(e,t);return a||"function"!=typeof r||(a=!0),r}));if(a)return()=>{for(let t=0;t<r.length;t++){const a=r[t];"function"==typeof a?a():Pt(e[t],null)}}}}function Rt(...e){return c.useCallback(Tt(...e),e)}function Ft(e,t=[]){let a=[];const r=()=>{const t=a.map((e=>c.createContext(e)));return function(a){const r=(null==a?void 0:a[e])||t;return c.useMemo((()=>({[`__scope${e}`]:{...a,[e]:r}})),[a,r])}};return r.scopeName=e,[function(t,r){const i=c.createContext(r),s=a.length;a=[...a,r];const o=t=>{var a;const{scope:r,children:o,...l}=t,d=(null==(a=null==r?void 0:r[e])?void 0:a[s])||i,m=c.useMemo((()=>l),Object.values(l));return n(d.Provider,{value:m,children:o})};return o.displayName=t+"Provider",[o,function(a,n){var o;const l=(null==(o=null==n?void 0:n[e])?void 0:o[s])||i,d=c.useContext(l);if(d)return d;if(void 0!==r)return r;throw new Error(`\`${a}\` must be used within \`${t}\``)}]},Lt(r,...t)]}function Lt(...e){const t=e[0];if(1===e.length)return t;const a=()=>{const a=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const r=a.reduce(((t,{useScope:a,scopeName:r})=>({...t,...a(e)[`__scope${r}`]})),{});return c.useMemo((()=>({[`__scope${t.scopeName}`]:r})),[r])}};return a.scopeName=t.scopeName,a}function It(e){const t=Ot(e),a=c.forwardRef(((e,a)=>{const{children:r,...i}=e,s=c.Children.toArray(r),o=s.find(zt);if(o){const e=o.props.children,r=s.map((t=>t===o?c.Children.count(e)>1?c.Children.only(null):c.isValidElement(e)?e.props.children:null:t));return n(t,{...i,ref:a,children:c.isValidElement(e)?c.cloneElement(e,void 0,r):null})}return n(t,{...i,ref:a,children:r})}));return a.displayName=`${e}.Slot`,a}var qt=It("Slot");function Ot(e){const t=c.forwardRef(((e,t)=>{const{children:a,...r}=e;if(c.isValidElement(a)){const e=function(e){var t,a;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(a),n=function(e,t){const a={...t};for(const r in t){const n=e[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?a[r]=(...e)=>{i(...e),n(...e)}:n&&(a[r]=n):"style"===r?a[r]={...n,...i}:"className"===r&&(a[r]=[n,i].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==c.Fragment&&(n.ref=t?Tt(t,e):e),c.cloneElement(a,n)}return c.Children.count(a)>1?c.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var jt=Symbol("radix.slottable");function $t(e){const t=({children:e})=>n(i,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=jt,t}function zt(e){return c.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===jt}var Ut=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce(((e,t)=>{const a=It(`Primitive.${t}`),r=c.forwardRef(((e,r)=>{const{asChild:i,...s}=e,o=i?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),n(o,{...s,ref:r})}));return r.displayName=`Primitive.${t}`,{...e,[t]:r}}),{});function Vt(e,t){e&&T.flushSync((()=>e.dispatchEvent(t)))}function Bt(e){const t=c.useRef(e);return c.useEffect((()=>{t.current=e})),c.useMemo((()=>(...e)=>{var a;return null==(a=t.current)?void 0:a.call(t,...e)}),[])}var Ht,Kt="dismissableLayer.update",Wt="dismissableLayer.pointerDownOutside",Yt="dismissableLayer.focusOutside",Gt=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qt=c.forwardRef(((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...d}=e,m=c.useContext(Gt),[u,h]=c.useState(null),p=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,g]=c.useState({}),f=Rt(t,(e=>h(e))),y=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=u?y.indexOf(u):-1,x=m.layersWithOutsidePointerEventsDisabled.size>0,N=w>=b,C=function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Bt(e),r=c.useRef(!1),n=c.useRef((()=>{}));return c.useEffect((()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Jt(Wt,a,i,{discrete:!0})};const i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=r,t.addEventListener("click",n.current,{once:!0})):r()}else t.removeEventListener("click",n.current);r.current=!1},i=window.setTimeout((()=>{t.addEventListener("pointerdown",e)}),0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}}),[t,a]),{onPointerDownCapture:()=>r.current=!0}}((e=>{const t=e.target,a=[...m.branches].some((e=>e.contains(t)));N&&!a&&(null==i||i(e),null==o||o(e),e.defaultPrevented||null==l||l())}),p),_=function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Bt(e),r=c.useRef(!1);return c.useEffect((()=>{const e=e=>{if(e.target&&!r.current){Jt(Yt,a,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)}),[t,a]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}((e=>{const t=e.target;[...m.branches].some((e=>e.contains(t)))||(null==s||s(e),null==o||o(e),e.defaultPrevented||null==l||l())}),p);return function(e,t=(null==globalThis?void 0:globalThis.document)){const a=Bt(e);c.useEffect((()=>{const e=e=>{"Escape"===e.key&&a(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})}),[a,t])}((e=>{w===m.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))}),p),c.useEffect((()=>{if(u)return a&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(Ht=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(u)),m.layers.add(u),Zt(),()=>{a&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Ht)}}),[u,p,a,m]),c.useEffect((()=>()=>{u&&(m.layers.delete(u),m.layersWithOutsidePointerEventsDisabled.delete(u),Zt())}),[u,m]),c.useEffect((()=>{const e=()=>g({});return document.addEventListener(Kt,e),()=>document.removeEventListener(Kt,e)}),[]),n(Ut.div,{...d,ref:f,style:{pointerEvents:x?N?"auto":"none":void 0,...e.style},onFocusCapture:Mt(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Mt(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Mt(e.onPointerDownCapture,C.onPointerDownCapture)})}));Qt.displayName="DismissableLayer";var Xt=c.forwardRef(((e,t)=>{const a=c.useContext(Gt),r=c.useRef(null),i=Rt(t,r);return c.useEffect((()=>{const e=r.current;if(e)return a.branches.add(e),()=>{a.branches.delete(e)}}),[a.branches]),n(Ut.div,{...e,ref:i})}));function Zt(){const e=new CustomEvent(Kt);document.dispatchEvent(e)}function Jt(e,t,a,{discrete:r}){const n=a.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),r?Vt(n,i):n.dispatchEvent(i)}Xt.displayName="DismissableLayerBranch";var ea=Qt,ta=Xt,aa=(null==globalThis?void 0:globalThis.document)?c.useLayoutEffect:()=>{},ra=c[" useId ".trim().toString()]||(()=>{}),na=0;function ia(e){const[t,a]=c.useState(ra());return aa((()=>{a((e=>e??String(na++)))}),[e]),t?`radix-${t}`:""}var sa=c.forwardRef(((e,t)=>{const{children:a,width:r=10,height:i=5,...s}=e;return n(Ut.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:n("polygon",{points:"0,0 30,0 15,10"})})}));sa.displayName="Arrow";var oa=sa;function la(e){const[t,a]=c.useState(void 0);return aa((()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let n,i;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,i=t.blockSize}else n=e.offsetWidth,i=e.offsetHeight;a({width:n,height:i})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)}),[e]),t}var ca="Popper",[da,ma]=Ft(ca),[ua,ha]=da(ca),pa=e=>{const{__scopePopper:t,children:a}=e,[r,i]=c.useState(null);return n(ua,{scope:t,anchor:r,onAnchorChange:i,children:a})};pa.displayName=ca;var ga="PopperAnchor",fa=c.forwardRef(((e,t)=>{const{__scopePopper:a,virtualRef:r,...i}=e,s=ha(ga,a),o=c.useRef(null),l=Rt(t,o);return c.useEffect((()=>{s.onAnchorChange((null==r?void 0:r.current)||o.current)})),r?null:n(Ut.div,{...i,ref:l})}));fa.displayName=ga;var ya="PopperContent",[va,ba]=da(ya),wa=c.forwardRef(((e,t)=>{var a,r,i,s,o,l;const{__scopePopper:d,side:m="bottom",sideOffset:u=0,align:h="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:f=!0,collisionBoundary:y=[],collisionPadding:v=0,sticky:b="partial",hideWhenDetached:w=!1,updatePositionStrategy:x="optimized",onPlaced:N,...C}=e,_=ha(ya,d),[k,S]=c.useState(null),E=Rt(t,(e=>S(e))),[D,A]=c.useState(null),M=la(D),P=(null==M?void 0:M.width)??0,T=(null==M?void 0:M.height)??0,R=m+("center"!==h?"-"+h:""),V="number"==typeof v?v:{top:0,right:0,bottom:0,left:0,...v},B=Array.isArray(y)?y:[y],H=B.length>0,K={padding:V,boundary:B.filter(_a),altBoundary:H},{refs:W,floatingStyles:Y,placement:G,isPositioned:Q,middlewareData:X}=F({strategy:"fixed",placement:R,whileElementsMounted:(...e)=>U(...e,{animationFrame:"always"===x}),elements:{reference:_.anchor},middleware:[L({mainAxis:u+T,alignmentAxis:p}),f&&I({mainAxis:!0,crossAxis:!1,limiter:"partial"===b?z():void 0,...K}),f&&q({...K}),O({...K,apply:({elements:e,rects:t,availableWidth:a,availableHeight:r})=>{const{width:n,height:i}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${a}px`),s.setProperty("--radix-popper-available-height",`${r}px`),s.setProperty("--radix-popper-anchor-width",`${n}px`),s.setProperty("--radix-popper-anchor-height",`${i}px`)}}),D&&j({element:D,padding:g}),ka({arrowWidth:P,arrowHeight:T}),w&&$({strategy:"referenceHidden",...K})]}),[Z,J]=Sa(G),ee=Bt(N);aa((()=>{Q&&(null==ee||ee())}),[Q,ee]);const te=null==(a=X.arrow)?void 0:a.x,ae=null==(r=X.arrow)?void 0:r.y,re=0!==(null==(i=X.arrow)?void 0:i.centerOffset),[ne,ie]=c.useState();return aa((()=>{k&&ie(window.getComputedStyle(k).zIndex)}),[k]),n("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:Q?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[null==(s=X.transformOrigin)?void 0:s.x,null==(o=X.transformOrigin)?void 0:o.y].join(" "),...(null==(l=X.hide)?void 0:l.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n(va,{scope:d,placedSide:Z,onArrowChange:A,arrowX:te,arrowY:ae,shouldHideArrow:re,children:n(Ut.div,{"data-side":Z,"data-align":J,...C,ref:E,style:{...C.style,animation:Q?void 0:"none"}})})})}));wa.displayName=ya;var xa="PopperArrow",Na={top:"bottom",right:"left",bottom:"top",left:"right"},Ca=c.forwardRef((function(e,t){const{__scopePopper:a,...r}=e,i=ba(xa,a),s=Na[i.placedSide];return n("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n(oa,{...r,ref:t,style:{...r.style,display:"block"}})})}));function _a(e){return null!==e}Ca.displayName=xa;var ka=e=>({name:"transformOrigin",options:e,fn(t){var a,r,n;const{placement:i,rects:s,middlewareData:o}=t,l=0!==(null==(a=o.arrow)?void 0:a.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[m,u]=Sa(i),h={start:"0%",center:"50%",end:"100%"}[u],p=((null==(r=o.arrow)?void 0:r.x)??0)+c/2,g=((null==(n=o.arrow)?void 0:n.y)??0)+d/2;let f="",y="";return"bottom"===m?(f=l?h:`${p}px`,y=-d+"px"):"top"===m?(f=l?h:`${p}px`,y=`${s.floating.height+d}px`):"right"===m?(f=-d+"px",y=l?h:`${g}px`):"left"===m&&(f=`${s.floating.width+d}px`,y=l?h:`${g}px`),{data:{x:f,y:y}}}});function Sa(e){const[t,a="center"]=e.split("-");return[t,a]}var Ea=pa,Da=fa,Aa=wa,Ma=Ca,Pa=c.forwardRef(((e,t)=>{var a;const{container:r,...i}=e,[s,o]=c.useState(!1);aa((()=>o(!0)),[]);const l=r||s&&(null==(a=null==globalThis?void 0:globalThis.document)?void 0:a.body);return l?R.createPortal(n(Ut.div,{...i,ref:t}),l):null}));Pa.displayName="Portal";var Ta=e=>{const{present:t,children:a}=e,r=function(e){const[t,a]=c.useState(),r=c.useRef(null),n=c.useRef(e),i=c.useRef("none"),s=e?"mounted":"unmounted",[o,l]=function(e,t){return c.useReducer(((e,a)=>t[e][a]??e),e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect((()=>{const e=Ra(r.current);i.current="mounted"===o?e:"none"}),[o]),aa((()=>{const t=r.current,a=n.current;if(a!==e){const r=i.current,s=Ra(t);if(e)l("MOUNT");else if("none"===s||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(a&&r!==s?"ANIMATION_OUT":"UNMOUNT")}n.current=e}}),[e,l]),aa((()=>{if(t){let e;const a=t.ownerDocument.defaultView??window,s=i=>{const s=Ra(r.current).includes(i.animationName);if(i.target===t&&s&&(l("ANIMATION_END"),!n.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=a.setTimeout((()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)}))}},o=e=>{e.target===t&&(i.current=Ra(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{a.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}l("ANIMATION_END")}),[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:c.useCallback((e=>{r.current=e?getComputedStyle(e):null,a(e)}),[])}}(t),n="function"==typeof a?a({present:r.isPresent}):c.Children.only(a),i=Rt(r.ref,function(e){var t,a;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n));return"function"==typeof a||r.isPresent?c.cloneElement(n,{ref:i}):null};function Ra(e){return(null==e?void 0:e.animationName)||"none"}Ta.displayName="Presence";var Fa=c[" useInsertionEffect ".trim().toString()]||aa;function La({prop:e,defaultProp:t,onChange:a=()=>{},caller:r}){const[n,i,s]=function({defaultProp:e,onChange:t}){const[a,r]=c.useState(e),n=c.useRef(a),i=c.useRef(t);return Fa((()=>{i.current=t}),[t]),c.useEffect((()=>{var e;n.current!==a&&(null==(e=i.current)||e.call(i,a),n.current=a)}),[a,n]),[a,r,i]}({defaultProp:t,onChange:a}),o=void 0!==e,l=o?e:n;{const t=c.useRef(void 0!==e);c.useEffect((()=>{const e=t.current;if(e!==o){const t=e?"controlled":"uncontrolled",a=o?"controlled":"uncontrolled";console.warn(`${r} is changing from ${t} to ${a}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=o}),[o,r])}const d=c.useCallback((t=>{var a;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(a=s.current)||a.call(s,r))}else i(t)}),[o,e,i,s]);return[l,d]}var Ia=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qa=c.forwardRef(((e,t)=>n(Ut.span,{...e,ref:t,style:{...Ia,...e.style}})));qa.displayName="VisuallyHidden";var Oa=qa,[ja,$a]=Ft("Tooltip",[ma]),za=ma(),Ua="TooltipProvider",Va=700,Ba="tooltip.open",[Ha,Ka]=ja(Ua),Wa=e=>{const{__scopeTooltip:t,delayDuration:a=Va,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=e,o=c.useRef(!0),l=c.useRef(!1),d=c.useRef(0);return c.useEffect((()=>{const e=d.current;return()=>window.clearTimeout(e)}),[]),n(Ha,{scope:t,isOpenDelayedRef:o,delayDuration:a,onOpen:c.useCallback((()=>{window.clearTimeout(d.current),o.current=!1}),[]),onClose:c.useCallback((()=>{window.clearTimeout(d.current),d.current=window.setTimeout((()=>o.current=!0),r)}),[r]),isPointerInTransitRef:l,onPointerInTransitChange:c.useCallback((e=>{l.current=e}),[]),disableHoverableContent:i,children:s})};Wa.displayName=Ua;var Ya="Tooltip",[Ga,Qa]=ja(Ya),Xa="TooltipTrigger";c.forwardRef(((e,t)=>{const{__scopeTooltip:a,...r}=e,i=Qa(Xa,a),s=Ka(Xa,a),o=za(a),l=Rt(t,c.useRef(null),i.onTriggerChange),d=c.useRef(!1),m=c.useRef(!1),u=c.useCallback((()=>d.current=!1),[]);return c.useEffect((()=>()=>document.removeEventListener("pointerup",u)),[u]),n(Da,{asChild:!0,...o,children:n(Ut.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Mt(e.onPointerMove,(e=>{"touch"!==e.pointerType&&(m.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),m.current=!0))})),onPointerLeave:Mt(e.onPointerLeave,(()=>{i.onTriggerLeave(),m.current=!1})),onPointerDown:Mt(e.onPointerDown,(()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})})),onFocus:Mt(e.onFocus,(()=>{d.current||i.onOpen()})),onBlur:Mt(e.onBlur,i.onClose),onClick:Mt(e.onClick,i.onClose)})})})).displayName=Xa;var[Za,Ja]=ja("TooltipPortal",{forceMount:void 0}),er="TooltipContent",tr=c.forwardRef(((e,t)=>{const a=Ja(er,e.__scopeTooltip),{forceMount:r=a.forceMount,side:i="top",...s}=e,o=Qa(er,e.__scopeTooltip);return n(Ta,{present:r||o.open,children:o.disableHoverableContent?n(sr,{side:i,...s,ref:t}):n(ar,{side:i,...s,ref:t})})})),ar=c.forwardRef(((e,t)=>{const a=Qa(er,e.__scopeTooltip),r=Ka(er,e.__scopeTooltip),i=c.useRef(null),s=Rt(t,i),[o,l]=c.useState(null),{trigger:d,onClose:m}=a,u=i.current,{onPointerInTransitChange:h}=r,p=c.useCallback((()=>{l(null),h(!1)}),[h]),g=c.useCallback(((e,t)=>{const a=e.currentTarget,r={x:e.clientX,y:e.clientY},n=function(e,t,a=5){const r=[];switch(t){case"top":r.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":r.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":r.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":r.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a})}return r}(r,function(e,t){const a=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(a,r,n,i)){case i:return"left";case n:return"right";case a:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,a.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(a.y-r.y)>=(e.y-r.y)*(a.x-r.x)))break;t.pop()}t.push(a)}t.pop();const a=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;a.length>=2;){const e=a[a.length-1],r=a[a.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;a.pop()}a.push(t)}return a.pop(),1===t.length&&1===a.length&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}(t)}([...n,...function(e){const{top:t,right:a,bottom:r,left:n}=e;return[{x:n,y:t},{x:a,y:t},{x:a,y:r},{x:n,y:r}]}(t.getBoundingClientRect())]);l(i),h(!0)}),[h]);return c.useEffect((()=>()=>p()),[p]),c.useEffect((()=>{if(d&&u){const e=e=>g(e,u),t=e=>g(e,d);return d.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}}),[d,u,g,p]),c.useEffect((()=>{if(o){const e=e=>{const t=e.target,a={x:e.clientX,y:e.clientY},r=(null==d?void 0:d.contains(t))||(null==u?void 0:u.contains(t)),n=!function(e,t){const{x:a,y:r}=e;let n=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i],o=t[s],l=e.x,c=e.y,d=o.x,m=o.y;c>r!=m>r&&a<(d-l)*(r-c)/(m-c)+l&&(n=!n)}return n}(a,o);r?p():n&&(p(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[d,u,o,m,p]),n(sr,{...e,ref:s})})),[rr,nr]=ja(Ya,{isInside:!1}),ir=$t("TooltipContent"),sr=c.forwardRef(((e,t)=>{const{__scopeTooltip:a,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:l,...d}=e,m=Qa(er,a),u=za(a),{onClose:h}=m;return c.useEffect((()=>(document.addEventListener(Ba,h),()=>document.removeEventListener(Ba,h))),[h]),c.useEffect((()=>{if(m.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(m.trigger))&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[m.trigger,h]),n(Qt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:s(Aa,{"data-state":m.stateAttribute,...u,...d,ref:t,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n(ir,{children:r}),n(rr,{scope:a,isInside:!0,children:n(Oa,{id:m.contentId,role:"tooltip",children:i||r})})]})})}));tr.displayName=er;var or="TooltipArrow";c.forwardRef(((e,t)=>{const{__scopeTooltip:a,...r}=e,i=za(a);return nr(or,a).isInside?null:n(Ma,{...i,...r,ref:t})})).displayName=or;var lr=tr;function cr(...e){return B(V(e))}function dr(e){if(null==e||""===e)return"$0.00";let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"$0.00";return`$${Number(t).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function mr(e){let t="string"==typeof e?e:e.toString();t=t.replace(/[^0-9.]/g,"");const a=t.split(".");return 2===a.length?(a[1]=a[1].slice(0,2),t=`${a[0]}.${a[1]}`):a.length>2&&(t=`${a[0]}.${a[1].slice(0,2)}`),t&&-1===t.indexOf(".")&&(t+=".00"),t&&t.match(/^\d+\.\d$/)&&(t+="0"),t&&t.match(/^\d+\.$/)&&(t+="00"),t=t.replace(/^0+(?!\.)/,""),t}const ur=Wa;c.forwardRef((({className:e,sideOffset:t=4,...a},r)=>n(lr,{ref:r,sideOffset:t,className:cr("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}))).displayName=lr.displayName;let hr=0;const pr=new Map,gr=e=>{if(pr.has(e))return;const t=setTimeout((()=>{pr.delete(e),br({type:"REMOVE_TOAST",toastId:e})}),1e6);pr.set(e,t)},fr=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case"DISMISS_TOAST":{const{toastId:a}=t;return a?gr(a):e.toasts.forEach((e=>{gr(e.id)})),{...e,toasts:e.toasts.map((e=>e.id===a||void 0===a?{...e,open:!1}:e))}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))}}},yr=[];let vr={toasts:[]};function br(e){vr=fr(vr,e),yr.forEach((e=>{e(vr)}))}function wr({...e}){const t=(hr=(hr+1)%Number.MAX_SAFE_INTEGER,hr.toString()),a=()=>br({type:"DISMISS_TOAST",toastId:t});return br({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>br({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function xr(){const[e,t]=c.useState(vr);return c.useEffect((()=>(yr.push(t),()=>{const e=yr.indexOf(t);e>-1&&yr.splice(e,1)})),[e]),{...e,toast:wr,dismiss:e=>br({type:"DISMISS_TOAST",toastId:e})}}function Nr(e){const t=e+"CollectionProvider",[a,r]=Ft(t),[i,s]=a(t,{collectionRef:{current:null},itemMap:new Map}),o=e=>{const{scope:t,children:a}=e,r=d.useRef(null),s=d.useRef(new Map).current;return n(i,{scope:t,itemMap:s,collectionRef:r,children:a})};o.displayName=t;const l=e+"CollectionSlot",c=It(l),m=d.forwardRef(((e,t)=>{const{scope:a,children:r}=e,i=Rt(t,s(l,a).collectionRef);return n(c,{ref:i,children:r})}));m.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",p=It(u),g=d.forwardRef(((e,t)=>{const{scope:a,children:r,...i}=e,o=d.useRef(null),l=Rt(t,o),c=s(u,a);return d.useEffect((()=>(c.itemMap.set(o,{ref:o,...i}),()=>{c.itemMap.delete(o)}))),n(p,{[h]:"",ref:l,children:r})}));return g.displayName=u,[{Provider:o,Slot:m,ItemSlot:g},function(t){const a=s(e+"CollectionConsumer",t);return d.useCallback((()=>{const e=a.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(a.itemMap.values()).sort(((e,a)=>t.indexOf(e.ref.current)-t.indexOf(a.ref.current)))}),[a.collectionRef,a.itemMap])},r]}var Cr="ToastProvider",[_r,kr,Sr]=Nr("Toast"),[Er,Dr]=Ft("Toast",[Sr]),[Ar,Mr]=Er(Cr),Pr=e=>{const{__scopeToast:t,label:a="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=e,[l,d]=c.useState(null),[m,u]=c.useState(0),h=c.useRef(!1),p=c.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cr}\`. Expected non-empty \`string\`.`),n(_r.Provider,{scope:t,children:n(Ar,{scope:t,label:a,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:m,viewport:l,onViewportChange:d,onToastAdd:c.useCallback((()=>u((e=>e+1))),[]),onToastRemove:c.useCallback((()=>u((e=>e-1))),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};Pr.displayName=Cr;var Tr="ToastViewport",Rr=["F8"],Fr="toast.viewportPause",Lr="toast.viewportResume",Ir=c.forwardRef(((e,t)=>{const{__scopeToast:a,hotkey:r=Rr,label:i="Notifications ({hotkey})",...o}=e,l=Mr(Tr,a),d=kr(a),m=c.useRef(null),u=c.useRef(null),h=c.useRef(null),p=c.useRef(null),g=Rt(t,p,l.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=l.toastCount>0;c.useEffect((()=>{const e=e=>{var t;0!==r.length&&r.every((t=>e[t]||e.code===t))&&(null==(t=p.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[r]),c.useEffect((()=>{const e=m.current,t=p.current;if(y&&e&&t){const a=()=>{if(!l.isClosePausedRef.current){const e=new CustomEvent(Fr);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},r=()=>{if(l.isClosePausedRef.current){const e=new CustomEvent(Lr);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},n=t=>{!e.contains(t.relatedTarget)&&r()},i=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",a),e.addEventListener("focusout",n),e.addEventListener("pointermove",a),e.addEventListener("pointerleave",i),window.addEventListener("blur",a),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",a),e.removeEventListener("focusout",n),e.removeEventListener("pointermove",a),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",a),window.removeEventListener("focus",r)}}}),[y,l.isClosePausedRef]);const v=c.useCallback((({tabbingDirection:e})=>{const t=d().map((t=>{const a=t.ref.current,r=[a,...tn(a)];return"forwards"===e?r:r.reverse()}));return("forwards"===e?t.reverse():t).flat()}),[d]);return c.useEffect((()=>{const e=p.current;if(e){const t=t=>{var a,r,n;const i=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!i){const i=document.activeElement,s=t.shiftKey;if(t.target===e&&s)return void(null==(a=u.current)||a.focus());const o=v({tabbingDirection:s?"backwards":"forwards"}),l=o.findIndex((e=>e===i));an(o.slice(l+1))?t.preventDefault():s?null==(r=u.current)||r.focus():null==(n=h.current)||n.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}}),[d,v]),s(ta,{ref:m,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n(Or,{ref:u,onFocusFromOutsideViewport:()=>{an(v({tabbingDirection:"forwards"}))}}),n(_r.Slot,{scope:a,children:n(Ut.ol,{tabIndex:-1,...o,ref:g})}),y&&n(Or,{ref:h,onFocusFromOutsideViewport:()=>{an(v({tabbingDirection:"backwards"}))}})]})}));Ir.displayName=Tr;var qr="ToastFocusProxy",Or=c.forwardRef(((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:r,...i}=e,s=Mr(qr,a);return n(qa,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const a=e.relatedTarget;!(null==(t=s.viewport)?void 0:t.contains(a))&&r()}})}));Or.displayName=qr;var jr="Toast",$r=c.forwardRef(((e,t)=>{const{forceMount:a,open:r,defaultOpen:i,onOpenChange:s,...o}=e,[l,c]=La({prop:r,defaultProp:i??!0,onChange:s,caller:jr});return n(Ta,{present:a||l,children:n(Vr,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Bt(e.onPause),onResume:Bt(e.onResume),onSwipeStart:Mt(e.onSwipeStart,(e=>{e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:Mt(e.onSwipeMove,(e=>{const{x:t,y:a}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${a}px`)})),onSwipeCancel:Mt(e.onSwipeCancel,(e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:Mt(e.onSwipeEnd,(e=>{const{x:t,y:a}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${a}px`),c(!1)}))})})}));$r.displayName=jr;var[zr,Ur]=Er(jr,{onClose(){}}),Vr=c.forwardRef(((e,t)=>{const{__scopeToast:a,type:r="foreground",duration:o,open:l,onClose:d,onEscapeKeyDown:m,onPause:u,onResume:h,onSwipeStart:p,onSwipeMove:g,onSwipeCancel:f,onSwipeEnd:y,...v}=e,b=Mr(jr,a),[w,x]=c.useState(null),N=Rt(t,(e=>x(e))),C=c.useRef(null),_=c.useRef(null),k=o||b.duration,S=c.useRef(0),E=c.useRef(k),D=c.useRef(0),{onToastAdd:A,onToastRemove:M}=b,P=Bt((()=>{var e;(null==w?void 0:w.contains(document.activeElement))&&(null==(e=b.viewport)||e.focus()),d()})),R=c.useCallback((e=>{e&&e!==1/0&&(window.clearTimeout(D.current),S.current=(new Date).getTime(),D.current=window.setTimeout(P,e))}),[P]);c.useEffect((()=>{const e=b.viewport;if(e){const t=()=>{R(E.current),null==h||h()},a=()=>{const e=(new Date).getTime()-S.current;E.current=E.current-e,window.clearTimeout(D.current),null==u||u()};return e.addEventListener(Fr,a),e.addEventListener(Lr,t),()=>{e.removeEventListener(Fr,a),e.removeEventListener(Lr,t)}}}),[b.viewport,k,u,h,R]),c.useEffect((()=>{l&&!b.isClosePausedRef.current&&R(k)}),[l,k,b.isClosePausedRef,R]),c.useEffect((()=>(A(),()=>M())),[A,M]);const F=c.useMemo((()=>w?Zr(w):null),[w]);return b.viewport?s(i,{children:[F&&n(Br,{__scopeToast:a,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:F}),n(zr,{scope:a,onClose:P,children:T.createPortal(n(_r.ItemSlot,{scope:a,children:n(ea,{asChild:!0,onEscapeKeyDown:Mt(m,(()=>{b.isFocusedToastEscapeKeyDownRef.current||P(),b.isFocusedToastEscapeKeyDownRef.current=!1})),children:n(Ut.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":b.swipeDirection,...v,ref:N,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Mt(e.onKeyDown,(e=>{"Escape"===e.key&&(null==m||m(e.nativeEvent),e.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,P()))})),onPointerDown:Mt(e.onPointerDown,(e=>{0===e.button&&(C.current={x:e.clientX,y:e.clientY})})),onPointerMove:Mt(e.onPointerMove,(e=>{if(!C.current)return;const t=e.clientX-C.current.x,a=e.clientY-C.current.y,r=Boolean(_.current),n=["left","right"].includes(b.swipeDirection),i=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,s=n?i(0,t):0,o=n?0:i(0,a),l="touch"===e.pointerType?10:2,c={x:s,y:o},d={originalEvent:e,delta:c};r?(_.current=c,Jr("toast.swipeMove",g,d,{discrete:!1})):en(c,b.swipeDirection,l)?(_.current=c,Jr("toast.swipeStart",p,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(a)>l)&&(C.current=null)})),onPointerUp:Mt(e.onPointerUp,(e=>{const t=_.current,a=e.target;if(a.hasPointerCapture(e.pointerId)&&a.releasePointerCapture(e.pointerId),_.current=null,C.current=null,t){const a=e.currentTarget,r={originalEvent:e,delta:t};en(t,b.swipeDirection,b.swipeThreshold)?Jr("toast.swipeEnd",y,r,{discrete:!0}):Jr("toast.swipeCancel",f,r,{discrete:!0}),a.addEventListener("click",(e=>e.preventDefault()),{once:!0})}}))})})}),b.viewport)})]}):null})),Br=e=>{const{__scopeToast:t,children:a,...r}=e,o=Mr(jr,t),[l,d]=c.useState(!1),[m,u]=c.useState(!1);return function(e=()=>{}){const t=Bt(e);aa((()=>{let e=0,a=0;return e=window.requestAnimationFrame((()=>a=window.requestAnimationFrame(t))),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(a)}}),[t])}((()=>d(!0))),c.useEffect((()=>{const e=window.setTimeout((()=>u(!0)),1e3);return()=>window.clearTimeout(e)}),[]),m?null:n(Pa,{asChild:!0,children:n(qa,{...r,children:l&&s(i,{children:[o.label," ",a]})})})},Hr=c.forwardRef(((e,t)=>{const{__scopeToast:a,...r}=e;return n(Ut.div,{...r,ref:t})}));Hr.displayName="ToastTitle";var Kr=c.forwardRef(((e,t)=>{const{__scopeToast:a,...r}=e;return n(Ut.div,{...r,ref:t})}));Kr.displayName="ToastDescription";var Wr="ToastAction",Yr=c.forwardRef(((e,t)=>{const{altText:a,...r}=e;return a.trim()?n(Xr,{altText:a,asChild:!0,children:n(Qr,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Wr}\`. Expected non-empty \`string\`.`),null)}));Yr.displayName=Wr;var Gr="ToastClose",Qr=c.forwardRef(((e,t)=>{const{__scopeToast:a,...r}=e,i=Ur(Gr,a);return n(Xr,{asChild:!0,children:n(Ut.button,{type:"button",...r,ref:t,onClick:Mt(e.onClick,i.onClose)})})}));Qr.displayName=Gr;var Xr=c.forwardRef(((e,t)=>{const{__scopeToast:a,altText:r,...i}=e;return n(Ut.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})}));function Zr(e){const t=[];return Array.from(e.childNodes).forEach((e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const a=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!a)if(r){const a=e.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Zr(e))}})),t}function Jr(e,t,a,{discrete:r}){const n=a.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),r?Vt(n,i):n.dispatchEvent(i)}var en=(e,t,a=0)=>{const r=Math.abs(e.x),n=Math.abs(e.y),i=r>n;return"left"===t||"right"===t?i&&r>a:!i&&n>a};function tn(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function an(e){const t=document.activeElement;return e.some((e=>e===t||(e.focus(),document.activeElement!==t)))}var rn=Pr,nn=Ir,sn=$r,on=Hr,ln=Kr,cn=Yr,dn=Qr;
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mn=(...e)=>e.filter(((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t)).join(" ").trim()
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */;var un={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=f((({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:s,...o},l)=>y("svg",{ref:l,...un,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:mn("lucide",n),...o},[...s.map((([e,t])=>y(e,t))),...Array.isArray(i)?i:[i]]))),pn=(e,t)=>{const a=f((({className:a,...r},n)=>{return y(hn,{ref:n,iconNode:t,className:mn(`lucide-${i=e,i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...r});var i}));return a.displayName=`${e}`,a},gn=pn("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),fn=pn("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),yn=pn("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),vn=pn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),bn=pn("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),wn=pn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),xn=pn("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Nn=pn("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Cn=pn("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),_n=pn("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),kn=pn("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Sn=pn("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]),En=pn("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Dn=pn("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),An=pn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Mn=pn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Pn=pn("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),Tn=pn("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),Rn=pn("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Fn=pn("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Ln=pn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),In=pn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qn=pn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),On=pn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),jn=pn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),$n=pn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),zn=pn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Un=pn("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Vn=pn("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Bn=pn("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Hn=pn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Kn=pn("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Wn=pn("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),Yn=pn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Gn=pn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Qn=pn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Xn=pn("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Zn=pn("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Jn=pn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ei=pn("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ti=pn("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),ai=pn("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]),ri=pn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ni=pn("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ii=pn("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),si=pn("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),oi=pn("HandHeart",[["path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1ifwr1"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"17abbs"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",key:"1h3036"}]]),li=pn("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),ci=pn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),di=pn("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),mi=pn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ui=pn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),hi=pn("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),pi=pn("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),gi=pn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),fi=pn("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),yi=pn("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),vi=pn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),bi=pn("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),wi=pn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),xi=pn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ni=pn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ci=pn("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),_i=pn("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),ki=pn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Si=pn("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Ei=pn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Di=pn("MoveDown",[["path",{d:"M8 18L12 22L16 18",key:"cskvfv"}],["path",{d:"M12 2V22",key:"r89rzk"}]]),Ai=pn("MoveUp",[["path",{d:"M8 6L12 2L16 6",key:"1yvkyx"}],["path",{d:"M12 2V22",key:"r89rzk"}]]),Mi=pn("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Pi=pn("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),Ti=pn("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Ri=pn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Fi=pn("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),Li=pn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ii=pn("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),qi=pn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Oi=pn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ji=pn("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),$i=pn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),zi=pn("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ui=pn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Vi=pn("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Bi=pn("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Hi=pn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ki=pn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Wi=pn("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Yi=pn("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),Gi=pn("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),Qi=pn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Xi=pn("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Zi=pn("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Ji=pn("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),es=pn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ts=pn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),as=pn("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),rs=pn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ns=pn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),is=pn("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]),ss=pn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),os=rn,ls=c.forwardRef((({className:e,...t},a)=>n(nn,{ref:a,className:cr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t})));
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */ls.displayName=nn.displayName;const cs=H("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ds=c.forwardRef((({className:e,variant:t,...a},r)=>n(sn,{ref:r,className:cr(cs({variant:t}),e),...a})));ds.displayName=sn.displayName;c.forwardRef((({className:e,...t},a)=>n(cn,{ref:a,className:cr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}))).displayName=cn.displayName;const ms=c.forwardRef((({className:e,...t},a)=>n(dn,{ref:a,className:cr("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n(ss,{className:"h-4 w-4"})})));ms.displayName=dn.displayName;const us=c.forwardRef((({className:e,...t},a)=>n(on,{ref:a,className:cr("text-sm font-semibold",e),...t})));us.displayName=on.displayName;const hs=c.forwardRef((({className:e,...t},a)=>n(ln,{ref:a,className:cr("text-sm opacity-90",e),...t})));function ps(){const{toasts:e}=xr();return s(os,{children:[e.map((function({id:e,title:t,description:a,action:r,...i}){return s(ds,{...i,children:[s("div",{className:"grid gap-1",children:[t&&n(us,{children:t}),a&&n(hs,{children:a})]}),r,n(ms,{})]},e)})),n(ls,{})]})}hs.displayName=ln.displayName;const gs=({...e})=>{const{theme:t="system"}=K();return n(W,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},fs=({children:e,requireAdmin:t=!1})=>{var a;const{user:r,session:o,loading:l}=At(),{toast:c}=xr(),[d,m]=h(!0),[u,g]=h(!1),[f,y]=h(null);if(p((()=>{(async()=>{try{console.log("Checking Supabase connection from ProtectedRoute...");const e=await Nt();e.connected?console.log("Supabase connection successful from ProtectedRoute"):(console.error("Supabase connection error in ProtectedRoute:",e.error),y(e.error),c({title:"Connection Issue",description:"Unable to connect to our services. Some features may not work properly.",variant:"destructive"}))}catch(e){console.error("Exception checking Supabase connection:",e),y(e instanceof Error?e.message:"Unknown connection error")}finally{g(!0)}})()}),[c]),p((()=>{const e=setTimeout((()=>{m(l)}),200);return()=>clearTimeout(e)}),[l]),d||!u)return s("div",{className:"flex flex-col h-screen items-center justify-center",children:[n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary mb-4"}),f&&s("div",{className:"text-red-500 text-center max-w-md px-4",children:[s("p",{children:["Connection error: ",f]}),n("p",{className:"mt-2 text-sm",children:"Try refreshing the page or checking your network connection."})]})]});if(!r||!o)return console.log("User not logged in, redirecting to login"),n(G,{to:"/login"});if(t){if(!((null==(a=r.email)?void 0:a.endsWith("@meowrescue.org"))||"admin"===r.role))return console.log("User is not an admin, redirecting to home"),n(G,{to:"/"})}return n(i,{children:e})};let ys=null;function vs(){const e=(()=>{if(ys)return ys;try{const e="",t="";if(!e||!t)throw console.error("Supabase credentials missing. Please check environment variables."),new Error("Supabase credentials missing");return ys=P(e,t,{auth:{autoRefreshToken:!0,persistSession:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}}),ys}catch(e){throw console.error("Error initializing Supabase client:",e),e}})();if("undefined"!=typeof window&&e&&e.rest&&e.rest.headers)try{e.rest.headers.Accept="application/json",e.rest.headers["Content-Type"]||e.rest.headers["content-type"]||(e.rest.headers["Content-Type"]="application/json")}catch(t){console.warn("Could not set Supabase headers directly:",t)}return e}function bs(){const[e,t]=c.useState(void 0);return c.useEffect((()=>{const e=window.matchMedia("(max-width: 767px)"),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)}),[]),!!e}const ws=({onClick:e})=>(Q(),s(X,{to:"/",className:"flex items-center gap-2",onClick:e,children:[n("div",{className:"bg-meow-primary rounded-full p-1",children:n(Pn,{className:"h-5 w-5 text-white"})}),s("span",{className:"font-bold text-xl",children:[n("span",{className:"text-meow-primary",children:"Meow"}),n("span",{className:"text-meow-secondary",children:"Rescue"})]})]})),xs=()=>{const e=Q();return n(ws,{onClick:t=>{"/"===e.pathname&&(t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}))}})},Ns=[{name:"About",path:"/about"},{name:"Adopt",path:"/cats",id:"adopt-dropdown",dropdown:[{name:"Adoptable Cats",path:"/cats"},{name:"Adoption Process",path:"/adopt"},{name:"Success Stories",path:"/success-stories"}]},{name:"Get Involved",path:"/volunteer",id:"involve-dropdown",dropdown:[{name:"Volunteer",path:"/volunteer"},{name:"Foster",path:"/foster"},{name:"Donate",path:"/donate"}]},{name:"Resources",path:"/resources",id:"resources-dropdown",dropdown:[{name:"Cat Care Tips",path:"/resources"},{name:"Lost & Found",path:"/lost-found"},{name:"Financial Transparency",path:"/financial-transparency"}]},{name:"Events",path:"/events"},{name:"Blog",path:"/blog"},{name:"Contact",path:"/contact"}],Cs=({navItems:e,openDropdown:t,toggleDropdown:a,isActive:r,setOpenDropdown:i})=>{const o="undefined"!=typeof window?Z():null,[l,c]=h(!1),[d,m]=h(null),u=()=>{c(!1),console.log("Mouse left dropdown area"),d&&clearTimeout(d);const e=setTimeout((()=>{l||(console.log("Closing dropdown after delay"),i(null))}),500);m(e)};return n("nav",{className:"hidden lg:flex items-center space-x-1",children:e.map((e=>e.dropdown?s("div",{className:"relative dropdown-menu-container",onMouseEnter:()=>{return e.id&&(t=e.id,d&&(clearTimeout(d),m(null)),i(t),c(!0),void console.log("Mouse entered dropdown:",t));var t},onMouseLeave:u,children:[s("button",{className:"flex items-center px-3 py-2 rounded-md text-medium font-medium transition-colors "+(t===e.id?"text-meow-primary":"text-gray-700 hover:text-meow-primary"),"aria-expanded":t===e.id,children:[e.name,n(In,{className:"ml-1 h-4 w-4 transform transition-transform "+(t===e.id?"rotate-180":"")})]}),t===e.id&&n("div",{className:"absolute left-0 mt-1 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50",onMouseEnter:()=>{c(!0),console.log("Mouse entered dropdown content"),d&&(clearTimeout(d),m(null))},onMouseLeave:()=>{c(!1),console.log("Mouse left dropdown content"),d&&clearTimeout(d);const e=setTimeout((()=>{l||(console.log("Closing dropdown content after delay"),i(null))}),500);m(e)},children:n("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:e.dropdown.map((e=>n("a",{href:e.path,className:"block w-full text-left px-4 py-2 text-medium text-gray-700 hover:bg-gray-100 hover:text-meow-primary",role:"menuitem",onClick:t=>{var a;o&&(t.preventDefault(),a=e.path,o&&(o(a),setTimeout((()=>i(null)),50)))},children:e.name},e.path)))})})]},e.name):n("a",{href:e.path,className:"px-3 py-2 rounded-md text-medium font-medium transition-colors "+(r(e.path||"/")?"text-meow-primary":"text-gray-700 hover:text-meow-primary"),onClick:t=>{o&&(t.preventDefault(),o(e.path||"/"))},role:"menuitem",children:e.name},e.name)))})},_s=({item:e,openDropdown:t,toggleDropdown:a,handleNavigation:r,isActive:i})=>{const o="undefined"!=typeof window?Z():null;return s("div",{className:"space-y-0",children:[s("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),a(e.id)},className:"flex items-center justify-between w-full font-medium text-gray-700 text-base",type:"button",children:[n("span",{children:e.name}),n(In,{className:"h-4 w-4 transform transition-transform "+(t===e.id?"rotate-180":"")})]}),t===e.id&&n("ul",{className:"pl-4 mt-4 border-l border-gray-200",children:e.dropdown.map(((e,t)=>n("li",{className:"mt-4 mb-4",children:n("a",{href:e.path,className:"block w-full text-left py-0 transition-colors text-base "+(i(e.path)?"text-meow-primary":"text-gray-600"),onClick:t=>{o&&(t.preventDefault(),t.stopPropagation(),r(e.path))},children:e.name})},e.path)))})]})},ks=({item:e,isActive:t,handleNavigation:a})=>{const r="undefined"!=typeof window?Z():null;return n("a",{href:e.path||"/",className:"block w-full text-left font-medium transition-colors hover:text-meow-primary text-base "+(t(e.path||"/")?"text-meow-primary":"text-gray-700"),onClick:t=>{r&&(t.preventDefault(),t.stopPropagation(),a(e.path||"/"))},children:e.name})},Ss=({isMenuOpen:e,navLinks:t,onClose:a})=>{const r="undefined"!=typeof window?Z():null,[i,o]=d.useState(null),l=e=>window.location.pathname===e,c=e=>{r&&(r(e),setTimeout((()=>{a()}),500))},m=e=>{o(i===e?null:e)};return e?n("div",{className:"lg:hidden bg-white border-t border-gray-200 max-h-[80vh] overflow-y-auto",children:n("div",{className:"container mx-auto px-4 py-4",children:s("ul",{className:"flex flex-col space-y-4",children:[t.map((e=>n("li",{children:e.dropdown?n(_s,{item:{name:e.name,id:e.id||e.name,dropdown:e.dropdown},openDropdown:i,toggleDropdown:m,handleNavigation:c,isActive:l}):n(ks,{item:e,isActive:l,handleNavigation:c})},e.name))),n("li",{children:n("a",{href:"/donate",className:"block w-full text-left font-bold text-meow-primary hover:text-meow-primary/90 text-lg py-2 px-3 rounded-md bg-meow-secondary/10 border border-meow-secondary/20",onClick:e=>{r&&(e.preventDefault(),e.stopPropagation(),c("/donate"))},children:s("div",{className:"flex items-center justify-center",children:[n(ci,{className:"mr-2 h-5 w-5 fill-meow-primary"}),"Donate Now"]})})})]})})}):null},Es=H("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-[#003366]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary text-primary bg-transparent hover:bg-[#F5F7FA] hover:text-primary",secondary:"bg-secondary text-secondary-foreground hover:bg-[#388e3c]",ghost:"hover:bg-[#F5F7FA] hover:text-primary",link:"text-primary underline-offset-4 hover:underline",meow:"bg-primary text-white hover:bg-[#003366] shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",meowSecondary:"bg-accent text-white hover:bg-[#cc6400] shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",meowOutline:"border-2 border-primary text-primary bg-transparent hover:bg-primary/10 transform hover:translate-y-[-2px] transition-all",meowSecondaryOutline:"border-2 border-accent text-accent bg-transparent hover:bg-accent/10 transform hover:translate-y-[-2px] transition-all",meowGlass:"bg-white/90 backdrop-blur-sm border border-[#E9ECEF] text-primary shadow-sm hover:shadow transition-all",success:"bg-secondary text-white hover:bg-[#388e3c] shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",info:"bg-primary text-white hover:bg-[#003366] shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",warning:"bg-accent text-white hover:bg-[#cc6400] shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",danger:"bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all",dangerOutline:"border-2 border-red-600 text-red-600 bg-transparent hover:bg-red-50 transform hover:translate-y-[-2px] transition-all"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-md px-10 py-6 text-lg",icon:"h-10 w-10",full:"h-10 w-full px-4 py-2",auto:"h-auto px-4 py-2"},align:{default:"inline-flex",center:"mx-auto",left:"mr-auto",right:"ml-auto",block:"block w-full"}},defaultVariants:{variant:"default",size:"default",align:"default"}}),Ds=c.forwardRef((({className:e,variant:t,size:a,align:r,asChild:i=!1,...s},o)=>n(i?qt:"button",{className:cr(Es({variant:t,size:a,align:r,className:e})),ref:o,...s})));Ds.displayName="Button";var As=c.createContext(void 0);function Ms(e){const t=c.useContext(As);return e||t||"ltr"}var Ps=0;function Ts(){c.useEffect((()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Rs()),document.body.insertAdjacentElement("beforeend",e[1]??Rs()),Ps++,()=>{1===Ps&&document.querySelectorAll("[data-radix-focus-guard]").forEach((e=>e.remove())),Ps--}}),[])}function Rs(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fs="focusScope.autoFocusOnMount",Ls="focusScope.autoFocusOnUnmount",Is={bubbles:!1,cancelable:!0},qs=c.forwardRef(((e,t)=>{const{loop:a=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=e,[l,d]=c.useState(null),m=Bt(i),u=Bt(s),h=c.useRef(null),p=Rt(t,(e=>d(e))),g=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect((()=>{if(r){let e=function(e){if(g.paused||!l)return;const t=e.target;l.contains(t)?h.current=t:zs(h.current,{select:!0})},t=function(e){if(g.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||zs(h.current,{select:!0}))},a=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&zs(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(a);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}}),[r,l,g.paused]),c.useEffect((()=>{if(l){Us.add(g);const t=document.activeElement;if(!l.contains(t)){const a=new CustomEvent(Fs,Is);l.addEventListener(Fs,m),l.dispatchEvent(a),a.defaultPrevented||(!function(e,{select:t=!1}={}){const a=document.activeElement;for(const r of e)if(zs(r,{select:t}),document.activeElement!==a)return}((e=Os(l),e.filter((e=>"A"!==e.tagName))),{select:!0}),document.activeElement===t&&zs(l))}return()=>{l.removeEventListener(Fs,m),setTimeout((()=>{const e=new CustomEvent(Ls,Is);l.addEventListener(Ls,u),l.dispatchEvent(e),e.defaultPrevented||zs(t??document.body,{select:!0}),l.removeEventListener(Ls,u),Us.remove(g)}),0)}}var e}),[l,m,u,g]);const f=c.useCallback((e=>{if(!a&&!r)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[r,i]=function(e){const t=Os(e),a=js(t,e),r=js(t.reverse(),e);return[a,r]}(t);r&&i?e.shiftKey||n!==i?e.shiftKey&&n===r&&(e.preventDefault(),a&&zs(i,{select:!0})):(e.preventDefault(),a&&zs(r,{select:!0})):n===t&&e.preventDefault()}}),[a,r,g.paused]);return n(Ut.div,{tabIndex:-1,...o,ref:p,onKeyDown:f})}));function Os(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function js(e,t){for(const a of e)if(!$s(a,{upTo:t}))return a}function $s(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function zs(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}qs.displayName="FocusScope";var Us=function(){let e=[];return{add(t){const a=e[0];t!==a&&(null==a||a.pause()),e=Vs(e,t),e.unshift(t)},remove(t){var a;e=Vs(e,t),null==(a=e[0])||a.resume()}}}();function Vs(e,t){const a=[...e],r=a.indexOf(t);return-1!==r&&a.splice(r,1),a}var Bs="rovingFocusGroup.onEntryFocus",Hs={bubbles:!1,cancelable:!0},Ks="RovingFocusGroup",[Ws,Ys,Gs]=Nr(Ks),[Qs,Xs]=Ft(Ks,[Gs]),[Zs,Js]=Qs(Ks),eo=c.forwardRef(((e,t)=>n(Ws.Provider,{scope:e.__scopeRovingFocusGroup,children:n(Ws.Slot,{scope:e.__scopeRovingFocusGroup,children:n(to,{...e,ref:t})})})));eo.displayName=Ks;var to=c.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:m,preventScrollOnEntryFocus:u=!1,...h}=e,p=c.useRef(null),g=Rt(t,p),f=Ms(s),[y,v]=La({prop:o,defaultProp:l??null,onChange:d,caller:Ks}),[b,w]=c.useState(!1),x=Bt(m),N=Ys(a),C=c.useRef(!1),[_,k]=c.useState(0);return c.useEffect((()=>{const e=p.current;if(e)return e.addEventListener(Bs,x),()=>e.removeEventListener(Bs,x)}),[x]),n(Zs,{scope:a,orientation:r,dir:f,loop:i,currentTabStopId:y,onItemFocus:c.useCallback((e=>v(e)),[v]),onItemShiftTab:c.useCallback((()=>w(!0)),[]),onFocusableItemAdd:c.useCallback((()=>k((e=>e+1))),[]),onFocusableItemRemove:c.useCallback((()=>k((e=>e-1))),[]),children:n(Ut.div,{tabIndex:b||0===_?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Mt(e.onMouseDown,(()=>{C.current=!0})),onFocus:Mt(e.onFocus,(e=>{const t=!C.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(Bs,Hs);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=N().filter((e=>e.focusable));io([e.find((e=>e.active)),e.find((e=>e.id===y)),...e].filter(Boolean).map((e=>e.ref.current)),u)}}C.current=!1})),onBlur:Mt(e.onBlur,(()=>w(!1)))})})})),ao="RovingFocusGroupItem",ro=c.forwardRef(((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=e,d=ia(),m=s||d,u=Js(ao,a),h=u.currentTabStopId===m,p=Ys(a),{onFocusableItemAdd:g,onFocusableItemRemove:f,currentTabStopId:y}=u;return c.useEffect((()=>{if(r)return g(),()=>f()}),[r,g,f]),n(Ws.ItemSlot,{scope:a,id:m,focusable:r,active:i,children:n(Ut.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Mt(e.onMouseDown,(e=>{r?u.onItemFocus(m):e.preventDefault()})),onFocus:Mt(e.onFocus,(()=>u.onItemFocus(m))),onKeyDown:Mt(e.onKeyDown,(e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,a){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,a);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:no[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=p().filter((e=>e.focusable)).map((e=>e.ref.current));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const i=n.indexOf(e.currentTarget);n=u.loop?(r=i+1,(a=n).map(((e,t)=>a[(r+t)%a.length]))):n.slice(i+1)}setTimeout((()=>io(n)))}var a,r})),children:"function"==typeof o?o({isCurrentTabStop:h,hasTabStop:null!=y}):o})})}));ro.displayName=ao;var no={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function io(e,t=!1){const a=document.activeElement;for(const r of e){if(r===a)return;if(r.focus({preventScroll:t}),document.activeElement!==a)return}}var so=eo,oo=ro,lo=["Enter"," "],co=["ArrowUp","PageDown","End"],mo=["ArrowDown","PageUp","Home",...co],uo={ltr:[...lo,"ArrowRight"],rtl:[...lo,"ArrowLeft"]},ho={ltr:["ArrowLeft"],rtl:["ArrowRight"]},po="Menu",[go,fo,yo]=Nr(po),[vo,bo]=Ft(po,[yo,ma,Xs]),wo=ma(),xo=Xs(),[No,Co]=vo(po),[_o,ko]=vo(po),So=e=>{const{__scopeMenu:t,open:a=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=e,l=wo(t),[d,m]=c.useState(null),u=c.useRef(!1),h=Bt(s),p=Ms(i);return c.useEffect((()=>{const e=()=>{u.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>u.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),n(Ea,{...l,children:n(No,{scope:t,open:a,onOpenChange:h,content:d,onContentChange:m,children:n(_o,{scope:t,onClose:c.useCallback((()=>h(!1)),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};So.displayName=po;var Eo=c.forwardRef(((e,t)=>{const{__scopeMenu:a,...r}=e,i=wo(a);return n(Da,{...i,...r,ref:t})}));Eo.displayName="MenuAnchor";var Do="MenuPortal",[Ao,Mo]=vo(Do,{forceMount:void 0}),Po=e=>{const{__scopeMenu:t,forceMount:a,children:r,container:i}=e,s=Co(Do,t);return n(Ao,{scope:t,forceMount:a,children:n(Ta,{present:a||s.open,children:n(Pa,{asChild:!0,container:i,children:r})})})};Po.displayName=Do;var To="MenuContent",[Ro,Fo]=vo(To),Lo=c.forwardRef(((e,t)=>{const a=Mo(To,e.__scopeMenu),{forceMount:r=a.forceMount,...i}=e,s=Co(To,e.__scopeMenu),o=ko(To,e.__scopeMenu);return n(go.Provider,{scope:e.__scopeMenu,children:n(Ta,{present:r||s.open,children:n(go.Slot,{scope:e.__scopeMenu,children:o.modal?n(Io,{...i,ref:t}):n(qo,{...i,ref:t})})})})})),Io=c.forwardRef(((e,t)=>{const a=Co(To,e.__scopeMenu),r=c.useRef(null),i=Rt(t,r);return c.useEffect((()=>{const e=r.current;if(e)return ne(e)}),[]),n(jo,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Mt(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})})),qo=c.forwardRef(((e,t)=>{const a=Co(To,e.__scopeMenu);return n(jo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})})),Oo=It("MenuContent.ScrollLock"),jo=c.forwardRef(((e,t)=>{const{__scopeMenu:a,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:m,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:f,...y}=e,v=Co(To,a),b=ko(To,a),w=wo(a),x=xo(a),N=fo(a),[C,_]=c.useState(null),k=c.useRef(null),S=Rt(t,k,v.onContentChange),E=c.useRef(0),D=c.useRef(""),A=c.useRef(0),M=c.useRef(null),P=c.useRef("right"),T=c.useRef(0),R=f?ie:c.Fragment,F=f?{as:Oo,allowPinchZoom:!0}:void 0,L=e=>{var t,a;const r=D.current+e,n=N().filter((e=>!e.disabled)),i=document.activeElement,s=null==(t=n.find((e=>e.ref.current===i)))?void 0:t.textValue,o=function(e,t,a){const r=t.length>1&&Array.from(t).every((e=>e===t[0])),n=r?t[0]:t,i=a?e.indexOf(a):-1;let s=(o=e,l=Math.max(i,0),o.map(((e,t)=>o[(l+t)%o.length])));var o,l;1===n.length&&(s=s.filter((e=>e!==a)));const c=s.find((e=>e.toLowerCase().startsWith(n.toLowerCase())));return c!==a?c:void 0}(n.map((e=>e.textValue)),r,s),l=null==(a=n.find((e=>e.textValue===o)))?void 0:a.ref.current;!function e(t){D.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout((()=>e("")),1e3))}(r),l&&setTimeout((()=>l.focus()))};c.useEffect((()=>()=>window.clearTimeout(E.current)),[]),Ts();const I=c.useCallback((e=>{var t,a;return P.current===(null==(t=M.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const a={x:e.clientX,y:e.clientY};return function(e,t){const{x:a,y:r}=e;let n=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i],o=t[s],l=e.x,c=e.y,d=o.x,m=o.y;c>r!=m>r&&a<(d-l)*(r-c)/(m-c)+l&&(n=!n)}return n}(a,t)}(e,null==(a=M.current)?void 0:a.area)}),[]);return n(Ro,{scope:a,searchRef:D,onItemEnter:c.useCallback((e=>{I(e)&&e.preventDefault()}),[I]),onItemLeave:c.useCallback((e=>{var t;I(e)||(null==(t=k.current)||t.focus(),_(null))}),[I]),onTriggerLeave:c.useCallback((e=>{I(e)&&e.preventDefault()}),[I]),pointerGraceTimerRef:A,onPointerGraceIntentChange:c.useCallback((e=>{M.current=e}),[]),children:n(R,{...F,children:n(qs,{asChild:!0,trapped:i,onMountAutoFocus:Mt(s,(e=>{var t;e.preventDefault(),null==(t=k.current)||t.focus({preventScroll:!0})})),onUnmountAutoFocus:o,children:n(Qt,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:m,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:n(so,{asChild:!0,...x,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:_,onEntryFocus:Mt(d,(e=>{b.isUsingKeyboardRef.current||e.preventDefault()})),preventScrollOnEntryFocus:!0,children:n(Aa,{role:"menu","aria-orientation":"vertical","data-state":ml(v.open),"data-radix-menu-content":"",dir:b.dir,...w,...y,ref:S,style:{outline:"none",...y.style},onKeyDown:Mt(y.onKeyDown,(e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,a=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!a&&r&&L(e.key));const n=k.current;if(e.target!==n)return;if(!mo.includes(e.key))return;e.preventDefault();const i=N().filter((e=>!e.disabled)).map((e=>e.ref.current));co.includes(e.key)&&i.reverse(),function(e){const t=document.activeElement;for(const a of e){if(a===t)return;if(a.focus(),document.activeElement!==t)return}}(i)})),onBlur:Mt(e.onBlur,(e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),D.current="")})),onPointerMove:Mt(e.onPointerMove,pl((e=>{const t=e.target,a=T.current!==e.clientX;if(e.currentTarget.contains(t)&&a){const t=e.clientX>T.current?"right":"left";P.current=t,T.current=e.clientX}})))})})})})})})}));Lo.displayName=To;var $o=c.forwardRef(((e,t)=>{const{__scopeMenu:a,...r}=e;return n(Ut.div,{role:"group",...r,ref:t})}));$o.displayName="MenuGroup";var zo=c.forwardRef(((e,t)=>{const{__scopeMenu:a,...r}=e;return n(Ut.div,{...r,ref:t})}));zo.displayName="MenuLabel";var Uo="MenuItem",Vo="menu.itemSelect",Bo=c.forwardRef(((e,t)=>{const{disabled:a=!1,onSelect:r,...i}=e,s=c.useRef(null),o=ko(Uo,e.__scopeMenu),l=Fo(Uo,e.__scopeMenu),d=Rt(t,s),m=c.useRef(!1);return n(Ho,{...i,ref:d,disabled:a,onClick:Mt(e.onClick,(()=>{const e=s.current;if(!a&&e){const t=new CustomEvent(Vo,{bubbles:!0,cancelable:!0});e.addEventListener(Vo,(e=>null==r?void 0:r(e)),{once:!0}),Vt(e,t),t.defaultPrevented?m.current=!1:o.onClose()}})),onPointerDown:t=>{var a;null==(a=e.onPointerDown)||a.call(e,t),m.current=!0},onPointerUp:Mt(e.onPointerUp,(e=>{var t;m.current||null==(t=e.currentTarget)||t.click()})),onKeyDown:Mt(e.onKeyDown,(e=>{const t=""!==l.searchRef.current;a||t&&" "===e.key||lo.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))})}));Bo.displayName=Uo;var Ho=c.forwardRef(((e,t)=>{const{__scopeMenu:a,disabled:r=!1,textValue:i,...s}=e,o=Fo(Uo,a),l=xo(a),d=c.useRef(null),m=Rt(t,d),[u,h]=c.useState(!1),[p,g]=c.useState("");return c.useEffect((()=>{const e=d.current;e&&g((e.textContent??"").trim())}),[s.children]),n(go.ItemSlot,{scope:a,disabled:r,textValue:i??p,children:n(oo,{asChild:!0,...l,focusable:!r,children:n(Ut.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:m,onPointerMove:Mt(e.onPointerMove,pl((e=>{if(r)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}}))),onPointerLeave:Mt(e.onPointerLeave,pl((e=>o.onItemLeave(e)))),onFocus:Mt(e.onFocus,(()=>h(!0))),onBlur:Mt(e.onBlur,(()=>h(!1)))})})})})),Ko=c.forwardRef(((e,t)=>{const{checked:a=!1,onCheckedChange:r,...i}=e;return n(el,{scope:e.__scopeMenu,checked:a,children:n(Bo,{role:"menuitemcheckbox","aria-checked":ul(a)?"mixed":a,...i,ref:t,"data-state":hl(a),onSelect:Mt(i.onSelect,(()=>null==r?void 0:r(!!ul(a)||!a)),{checkForDefaultPrevented:!1})})})}));Ko.displayName="MenuCheckboxItem";var Wo="MenuRadioGroup",[Yo,Go]=vo(Wo,{value:void 0,onValueChange:()=>{}}),Qo=c.forwardRef(((e,t)=>{const{value:a,onValueChange:r,...i}=e,s=Bt(r);return n(Yo,{scope:e.__scopeMenu,value:a,onValueChange:s,children:n($o,{...i,ref:t})})}));Qo.displayName=Wo;var Xo="MenuRadioItem",Zo=c.forwardRef(((e,t)=>{const{value:a,...r}=e,i=Go(Xo,e.__scopeMenu),s=a===i.value;return n(el,{scope:e.__scopeMenu,checked:s,children:n(Bo,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":hl(s),onSelect:Mt(r.onSelect,(()=>{var e;return null==(e=i.onValueChange)?void 0:e.call(i,a)}),{checkForDefaultPrevented:!1})})})}));Zo.displayName=Xo;var Jo="MenuItemIndicator",[el,tl]=vo(Jo,{checked:!1}),al=c.forwardRef(((e,t)=>{const{__scopeMenu:a,forceMount:r,...i}=e,s=tl(Jo,a);return n(Ta,{present:r||ul(s.checked)||!0===s.checked,children:n(Ut.span,{...i,ref:t,"data-state":hl(s.checked)})})}));al.displayName=Jo;var rl=c.forwardRef(((e,t)=>{const{__scopeMenu:a,...r}=e;return n(Ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})}));rl.displayName="MenuSeparator";var nl=c.forwardRef(((e,t)=>{const{__scopeMenu:a,...r}=e,i=wo(a);return n(Ma,{...i,...r,ref:t})}));nl.displayName="MenuArrow";var[il,sl]=vo("MenuSub"),ol="MenuSubTrigger",ll=c.forwardRef(((e,t)=>{const a=Co(ol,e.__scopeMenu),r=ko(ol,e.__scopeMenu),i=sl(ol,e.__scopeMenu),s=Fo(ol,e.__scopeMenu),o=c.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=s,m={__scopeMenu:e.__scopeMenu},u=c.useCallback((()=>{o.current&&window.clearTimeout(o.current),o.current=null}),[]);return c.useEffect((()=>u),[u]),c.useEffect((()=>{const e=l.current;return()=>{window.clearTimeout(e),d(null)}}),[l,d]),n(Eo,{asChild:!0,...m,children:n(Ho,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":i.contentId,"data-state":ml(a.open),...e,ref:Tt(t,i.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Mt(e.onPointerMove,pl((t=>{s.onItemEnter(t),t.defaultPrevented||e.disabled||a.open||o.current||(s.onPointerGraceIntentChange(null),o.current=window.setTimeout((()=>{a.onOpenChange(!0),u()}),100))}))),onPointerLeave:Mt(e.onPointerLeave,pl((e=>{var t,r;u();const n=null==(t=a.content)?void 0:t.getBoundingClientRect();if(n){const t=null==(r=a.content)?void 0:r.dataset.side,i="right"===t,o=i?-5:5,c=n[i?"left":"right"],d=n[i?"right":"left"];s.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:c,y:n.top},{x:d,y:n.top},{x:d,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(l.current),l.current=window.setTimeout((()=>s.onPointerGraceIntentChange(null)),300)}else{if(s.onTriggerLeave(e),e.defaultPrevented)return;s.onPointerGraceIntentChange(null)}}))),onKeyDown:Mt(e.onKeyDown,(t=>{var n;const i=""!==s.searchRef.current;e.disabled||i&&" "===t.key||uo[r.dir].includes(t.key)&&(a.onOpenChange(!0),null==(n=a.content)||n.focus(),t.preventDefault())}))})})}));ll.displayName=ol;var cl="MenuSubContent",dl=c.forwardRef(((e,t)=>{const a=Mo(To,e.__scopeMenu),{forceMount:r=a.forceMount,...i}=e,s=Co(To,e.__scopeMenu),o=ko(To,e.__scopeMenu),l=sl(cl,e.__scopeMenu),d=c.useRef(null),m=Rt(t,d);return n(go.Provider,{scope:e.__scopeMenu,children:n(Ta,{present:r||s.open,children:n(go.Slot,{scope:e.__scopeMenu,children:n(jo,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:m,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null==(t=d.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Mt(e.onFocusOutside,(e=>{e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:Mt(e.onEscapeKeyDown,(e=>{o.onClose(),e.preventDefault()})),onKeyDown:Mt(e.onKeyDown,(e=>{var t;const a=e.currentTarget.contains(e.target),r=ho[o.dir].includes(e.key);a&&r&&(s.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())}))})})})})}));function ml(e){return e?"open":"closed"}function ul(e){return"indeterminate"===e}function hl(e){return ul(e)?"indeterminate":e?"checked":"unchecked"}function pl(e){return t=>"mouse"===t.pointerType?e(t):void 0}dl.displayName=cl;var gl=So,fl=Eo,yl=Po,vl=Lo,bl=$o,wl=zo,xl=Bo,Nl=Ko,Cl=Qo,_l=Zo,kl=al,Sl=rl,El=nl,Dl=ll,Al=dl,Ml="DropdownMenu",[Pl,Tl]=Ft(Ml,[bo]),Rl=bo(),[Fl,Ll]=Pl(Ml),Il=e=>{const{__scopeDropdownMenu:t,children:a,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,d=Rl(t),m=c.useRef(null),[u,h]=La({prop:i,defaultProp:s??!1,onChange:o,caller:Ml});return n(Fl,{scope:t,triggerId:ia(),triggerRef:m,contentId:ia(),open:u,onOpenChange:h,onOpenToggle:c.useCallback((()=>h((e=>!e))),[h]),modal:l,children:n(gl,{...d,open:u,onOpenChange:h,dir:r,modal:l,children:a})})};Il.displayName=Ml;var ql="DropdownMenuTrigger",Ol=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,disabled:r=!1,...i}=e,s=Ll(ql,a),o=Rl(a);return n(fl,{asChild:!0,...o,children:n(Ut.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Tt(t,s.triggerRef),onPointerDown:Mt(e.onPointerDown,(e=>{r||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:Mt(e.onKeyDown,(e=>{r||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})})}));Ol.displayName=ql;var jl=e=>{const{__scopeDropdownMenu:t,...a}=e,r=Rl(t);return n(yl,{...r,...a})};jl.displayName="DropdownMenuPortal";var $l="DropdownMenuContent",zl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Ll($l,a),s=Rl(a),o=c.useRef(!1);return n(vl,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:t,onCloseAutoFocus:Mt(e.onCloseAutoFocus,(e=>{var t;o.current||null==(t=i.triggerRef.current)||t.focus(),o.current=!1,e.preventDefault()})),onInteractOutside:Mt(e.onInteractOutside,(e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey,r=2===t.button||a;i.modal&&!r||(o.current=!0)})),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));zl.displayName=$l;c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(bl,{...i,...r,ref:t})})).displayName="DropdownMenuGroup";var Ul=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(wl,{...i,...r,ref:t})}));Ul.displayName="DropdownMenuLabel";var Vl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(xl,{...i,...r,ref:t})}));Vl.displayName="DropdownMenuItem";var Bl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(Nl,{...i,...r,ref:t})}));Bl.displayName="DropdownMenuCheckboxItem";c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(Cl,{...i,...r,ref:t})})).displayName="DropdownMenuRadioGroup";var Hl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(_l,{...i,...r,ref:t})}));Hl.displayName="DropdownMenuRadioItem";var Kl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(kl,{...i,...r,ref:t})}));Kl.displayName="DropdownMenuItemIndicator";var Wl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(Sl,{...i,...r,ref:t})}));Wl.displayName="DropdownMenuSeparator";c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(El,{...i,...r,ref:t})})).displayName="DropdownMenuArrow";var Yl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(Dl,{...i,...r,ref:t})}));Yl.displayName="DropdownMenuSubTrigger";var Gl=c.forwardRef(((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,i=Rl(a);return n(Al,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}));Gl.displayName="DropdownMenuSubContent";var Ql=jl,Xl=zl,Zl=Ul,Jl=Vl,ec=Bl,tc=Hl,ac=Kl,rc=Wl,nc=Yl,ic=Gl;const sc=Il,oc=Ol;c.forwardRef((({className:e,inset:t,children:a,...r},i)=>s(nc,{ref:i,className:cr("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[a,n(On,{className:"ml-auto h-4 w-4"})]}))).displayName=nc.displayName;c.forwardRef((({className:e,...t},a)=>n(ic,{ref:a,className:cr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}))).displayName=ic.displayName;const lc=c.forwardRef((({className:e,sideOffset:t=4,...a},r)=>n(Ql,{children:n(Xl,{ref:r,sideOffset:t,className:cr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})})));lc.displayName=Xl.displayName;const cc=c.forwardRef((({className:e,inset:t,...a},r)=>n(Jl,{ref:r,className:cr("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a})));cc.displayName=Jl.displayName;c.forwardRef((({className:e,children:t,checked:a,...r},i)=>s(ec,{ref:i,className:cr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[n("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n(ac,{children:n(Ln,{className:"h-4 w-4"})})}),t]}))).displayName=ec.displayName;c.forwardRef((({className:e,children:t,...a},r)=>s(tc,{ref:r,className:cr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[n("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n(ac,{children:n(Hn,{className:"h-2 w-2 fill-current"})})}),t]}))).displayName=tc.displayName;const dc=c.forwardRef((({className:e,inset:t,...a},r)=>n(Zl,{ref:r,className:cr("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a})));dc.displayName=Zl.displayName;const mc=c.forwardRef((({className:e,...t},a)=>n(rc,{ref:a,className:cr("-mx-1 my-1 h-px bg-muted",e),...t})));function uc(){return()=>{}}mc.displayName=rc.displayName;var hc="Avatar",[pc,gc]=Ft(hc),[fc,yc]=pc(hc),vc=c.forwardRef(((e,t)=>{const{__scopeAvatar:a,...r}=e,[i,s]=c.useState("idle");return n(fc,{scope:a,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:n(Ut.span,{...r,ref:t})})}));vc.displayName=hc;var bc="AvatarImage",wc=c.forwardRef(((e,t)=>{const{__scopeAvatar:a,src:r,onLoadingStatusChange:i=()=>{},...s}=e,o=yc(bc,a),l=function(e,{referrerPolicy:t,crossOrigin:a}){const r=se(uc,(()=>!0),(()=>!1)),n=c.useRef(null),i=r?(n.current||(n.current=new window.Image),n.current):null,[s,o]=c.useState((()=>Cc(i,e)));return aa((()=>{o(Cc(i,e))}),[i,e]),aa((()=>{const e=e=>()=>{o(e)};if(!i)return;const r=e("loaded"),n=e("error");return i.addEventListener("load",r),i.addEventListener("error",n),t&&(i.referrerPolicy=t),"string"==typeof a&&(i.crossOrigin=a),()=>{i.removeEventListener("load",r),i.removeEventListener("error",n)}}),[i,a,t]),s}(r,s),d=Bt((e=>{i(e),o.onImageLoadingStatusChange(e)}));return aa((()=>{"idle"!==l&&d(l)}),[l,d]),"loaded"===l?n(Ut.img,{...s,ref:t,src:r}):null}));wc.displayName=bc;var xc="AvatarFallback",Nc=c.forwardRef(((e,t)=>{const{__scopeAvatar:a,delayMs:r,...i}=e,s=yc(xc,a),[o,l]=c.useState(void 0===r);return c.useEffect((()=>{if(void 0!==r){const e=window.setTimeout((()=>l(!0)),r);return()=>window.clearTimeout(e)}}),[r]),o&&"loaded"!==s.imageLoadingStatus?n(Ut.span,{...i,ref:t}):null}));function Cc(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Nc.displayName=xc;var _c=vc,kc=wc,Sc=Nc;const Ec=c.forwardRef((({className:e,...t},a)=>n(_c,{ref:a,className:cr("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t})));Ec.displayName=_c.displayName;const Dc=c.forwardRef((({className:e,...t},a)=>n(kc,{ref:a,className:cr("aspect-square h-full w-full",e),...t})));Dc.displayName=kc.displayName;const Ac=c.forwardRef((({className:e,...t},a)=>n(Sc,{ref:a,className:cr("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t})));Ac.displayName=Sc.displayName;const Mc=({user:e,signOut:t,getUserInitials:a})=>{var r;const i="undefined"!=typeof window?Z():null;return e?s(sc,{children:[n(oc,{asChild:!0,children:n(Ds,{variant:"outline",size:"icon",className:"rounded-full p-0 h-10 w-10 overflow-hidden",children:s(Ec,{children:[n(Dc,{src:e.avatar_url||"",alt:e.first_name||"User"}),n(Ac,{children:a(e.first_name,e.last_name)})]})})}),s(lc,{align:"end",className:"w-56",children:[s("div",{className:"flex items-center justify-start gap-2 p-2 border-b border-gray-100",children:[s(Ec,{className:"h-8 w-8",children:[n(Dc,{src:e.avatar_url||"",alt:e.first_name||"User"}),n(Ac,{children:a(e.first_name,e.last_name)})]}),s("div",{className:"flex flex-col space-y-0.5",children:[s("p",{className:"text-sm font-medium",children:[e.first_name," ",e.last_name]}),n("p",{className:"text-xs text-gray-500",children:e.email})]})]}),n(cc,{asChild:!0,children:n("a",{href:"/profile",className:"w-full cursor-pointer",onClick:e=>{i&&(e.preventDefault(),i("/profile"))},children:"Profile"})}),n(cc,{asChild:!0,children:n("a",{href:"/settings",className:"w-full cursor-pointer",onClick:e=>{i&&(e.preventDefault(),i("/settings"))},children:"Settings"})}),("admin"===e.role||(null==(r=e.email)?void 0:r.endsWith("@meowrescue.org")))&&n(cc,{asChild:!0,children:n("a",{href:"/admin",className:"w-full cursor-pointer",onClick:e=>{i&&(e.preventDefault(),i("/admin"))},children:"Admin Dashboard"})}),n(cc,{onClick:t,className:"cursor-pointer",children:"Logout"})]})]}):n("a",{href:"/login",children:s(Ds,{variant:"ghost",size:"sm",onClick:e=>{i&&(e.preventDefault(),i("/login"))},children:[n(bi,{className:"mr-1 h-4 w-4"})," Login"]})})},Pc=({user:e,signOut:t,getUserInitials:a,isMenuOpen:r,onMobileToggle:i})=>s("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[n("a",{href:"/donate",className:"mr-1",onClick:e=>{if("undefined"!=typeof window&&Z){const t=Z();e.preventDefault(),t("/donate")}},children:s(Ds,{variant:"meowSecondary",size:"sm",className:"hidden sm:flex",children:[n(ci,{className:"mr-1 h-4 w-4"})," Donate"]})}),n(Mc,{user:e,signOut:t,getUserInitials:a}),n(Ds,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:i,"aria-label":"Toggle mobile menu",children:n(r?ss:ki,{className:"h-6 w-6"})})]}),Tc=()=>{const[e,t]=h(!1),[a,r]=h(!1),[i,o]=h(null),l=Q(),c=bs(),{user:d,signOut:m}=At();p((()=>{console.log("Navbar mounted/updated - isMobile:",c)}),[c]),p((()=>{console.log("Route changed to:",l.pathname)}),[l.pathname]);const u=()=>{console.log("Closing mobile menu"),t(!1)};p((()=>{const e=()=>r(window.scrollY>20);return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),p((()=>{u(),o(null)}),[l.pathname]);return p((()=>{const t=t=>{i&&!t.target.closest(".dropdown-menu-container")&&o(null),!e||t.target.closest(".mobile-menu-container")||t.target.closest('button[aria-label="Toggle mobile menu"]')||u()};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}}),[e,i]),s("div",{className:"w-full z-50 transition-all duration-300 "+(a?"bg-white shadow-md":"bg-white/90"),children:[n("div",{className:"container mx-auto px-4",children:s("div",{className:"flex items-center justify-between h-16",children:[n(xs,{}),n(Cs,{navItems:Ns,openDropdown:i,toggleDropdown:e=>{console.log("Toggling dropdown:",e,"current:",i),o(i===e?null:e)},isActive:e=>{const t=l.pathname===e;return c&&console.log(`Checking active path: ${e}, result:`,t),t},setOpenDropdown:o}),n(Pc,{user:d,signOut:m,getUserInitials:(e,t)=>{if(!e&&!t)return"U";return`${e?e.charAt(0):""}${t?t.charAt(0):""}`.toUpperCase()},isMenuOpen:e,onMobileToggle:()=>{console.log("Toggling mobile menu, current state:",e),t(!e)}})]})}),n("div",{className:"mobile-menu-container",children:n(Ss,{isMenuOpen:e,navLinks:Ns,onClose:u})})]})},Rc=()=>{window.scrollTo({top:0,behavior:"smooth"})},Fc=()=>{const[e,t]=h(null),a=(new Date).getFullYear();return p((()=>{(async()=>{try{const e=xt(),{data:a,error:r}=await e.from("business_licenses").select("license_number, issue_date").eq("license_type","Business License").limit(1);!r&&a&&a.length>0?t(a[0]):(r&&"PGRST116"!==r.code&&console.warn("Error fetching license info:",r.message),t({license_number:"MR-2023-001",issue_date:"2023-01-15"}))}catch(e){t({license_number:"MR-2023-001",issue_date:"2023-01-15"})}})()}),[]),n("footer",{className:"bg-primary text-white",children:s("div",{className:"container mx-auto px-4 py-12",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s("div",{children:[s(X,{to:"/",className:"inline-flex items-center mb-4",onClick:Rc,children:[n("div",{className:"bg-white rounded-full p-2 mr-2",children:n(Pn,{className:"h-6 w-6 text-primary"})}),s("span",{className:"text-xl font-bold",children:[n("span",{className:"text-white",children:"Meow"}),n("span",{className:"text-accent",children:"Rescue"})]})]}),n("p",{className:"mb-4 text-white/80",children:"A home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need."}),s("div",{className:"flex space-x-3",children:[n("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition-colors","aria-label":"Facebook",children:n(ei,{className:"h-5 w-5 text-white"})}),n("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition-colors","aria-label":"Instagram",children:n(hi,{className:"h-5 w-5 text-white"})}),n("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition-colors","aria-label":"Twitter",children:n(Ji,{className:"h-5 w-5 text-white"})})]})]}),s("div",{className:"md:col-span-2",children:[n("h3",{className:"text-lg font-semibold mb-4 border-b border-white/20 pb-2",children:"Quick Links"}),s("div",{className:"grid grid-cols-2 gap-4",children:[n("ul",{className:"space-y-2",children:[{path:"/",label:"Home"},{path:"/about",label:"About Us"},{path:"/cats",label:"Adoptable Cats"},{path:"/adopt",label:"Adoption Process"},{path:"/success-stories",label:"Success Stories"},{path:"/volunteer",label:"Volunteer"}].map(((e,t)=>n("li",{children:n(X,{to:e.path,className:"text-white/80 hover:text-white transition-colors",onClick:Rc,children:e.label})},t)))}),n("ul",{className:"space-y-2",children:[{path:"/foster",label:"Foster"},{path:"/donate",label:"Donate"},{path:"/events",label:"Events"},{path:"/blog",label:"Blog"},{path:"/lost-found",label:"Lost & Found"},{path:"/financial-transparency",label:"Financial Transparency"},{path:"/contact",label:"Contact"}].map(((e,t)=>n("li",{children:n(X,{to:e.path,className:"text-white/80 hover:text-white transition-colors",onClick:Rc,children:e.label})},t)))})]})]}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-4 border-b border-white/20 pb-2",children:"Contact Us"}),s("ul",{className:"space-y-3",children:[s("li",{className:"flex items-center",children:[n(Ri,{className:"h-5 w-5 mr-2 text-accent"}),n("a",{href:"tel:7272570037",className:"text-white/80 hover:text-white transition-colors",children:"(727) 257-0037"})]}),s("li",{className:"flex items-center",children:[n(xi,{className:"h-5 w-5 mr-2 text-accent"}),n("a",{href:"mailto:info@meowrescue.org",className:"text-white/80 hover:text-white transition-colors",children:"info@meowrescue.org"})]})]}),s("div",{className:"mt-6",children:[n("h4",{className:"font-semibold mb-2",children:"Support Our Mission"}),n(X,{to:"/donate",onClick:Rc,children:s(Ds,{variant:"meowSecondary",size:"sm",className:"flex items-center",children:[n(ci,{className:"mr-1 h-4 w-4"}),n("span",{children:"Donate Now"})]})})]})]})]}),n("div",{className:"border-t border-white/20 mt-8 pt-8",children:s("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[n("div",{className:"mb-4 md:mb-0 text-center md:text-left space-y-2",children:s("p",{className:"text-white/80",children:[" ",a," Meow Rescue Network, Inc.",n("span",{className:"block text-sm",children:"DBA: Meow Rescue"}),e&&s("span",{className:"block text-sm",children:["License #: ",e.license_number,e.issue_date&&s(i,{children:["  Issued: ",new Date(e.issue_date).toLocaleDateString()]})]})]})}),s("div",{className:"flex space-x-4",children:[n(X,{to:"/privacy-policy",onClick:Rc,className:"text-white/80 hover:text-white transition-colors",children:"Privacy Policy"}),n(X,{to:"/terms-of-service",onClick:Rc,className:"text-white/80 hover:text-white transition-colors",children:"Terms of Service"})]})]})})]})})},Lc={enabled:!0,hours:[{day:1,startHour:9,endHour:17},{day:2,startHour:9,endHour:17},{day:3,startHour:9,endHour:17},{day:4,startHour:9,endHour:17},{day:5,startHour:9,endHour:17}]},Ic=u({isBusinessHours:!1,isAdminOnline:!1,businessHoursSettings:Lc,updateBusinessHours:async()=>{}}),qc=({children:e})=>{const{user:t}=At(),[a,r]=h(!1),[i,s]=h(!1),[o,l]=h(Lc),[c,d]=h(!0);p((()=>{(async()=>{try{const t=xt(),{data:a,error:r}=await t.from("content_blocks").select("content").eq("block_identifier","business_hours_settings").limit(1);if(!r&&a&&a.length>0){const t=a[0];if(t&&t.content)try{const e=JSON.parse(t.content);l(e)}catch(e){console.error("Error parsing business hours settings, using defaults:",e),l(Lc)}else l(Lc)}else r&&"PGRST116"!==r.code?console.log("Using default business hours settings due to Supabase error:",r.message):console.log("Using default business hours settings (no record found)."),l(Lc)}catch(t){console.log("Error in business hours fetch, using defaults"),l(Lc)}finally{d(!1)}})()}),[]);p((()=>{if(!t)return void s(!1);(async()=>{try{const e=xt(),{data:a,error:r}=await e.from("profiles").select("role").eq("id",t.id).single();if(r)return console.error("Error checking admin status:",r),void s(!1);s("admin"===(null==a?void 0:a.role))}catch(e){console.error("Error in admin check:",e),s(!1)}})()}),[t]);const m=(()=>{if(!o.enabled)return!1;const e=new Date,t=e.getDay(),a=e.getHours();return o.hours.some((e=>e.day===t&&a>=e.startHour&&a<e.endHour))})();return n(Ic.Provider,{value:{isBusinessHours:m,isAdminOnline:i,businessHoursSettings:o,updateBusinessHours:async e=>{try{const a=xt(),{count:r,error:n}=await a.from("content_blocks").select("*",{count:"exact",head:!0});if(n)return console.warn("Content blocks table not found, only updating local state:",n),void l(e);const{error:i}=await a.from("content_blocks").upsert({block_identifier:"business_hours_settings",content:JSON.stringify(e),page:"settings",updated_by:null==t?void 0:t.id},{onConflict:"block_identifier"});if(i)throw console.error("Error updating business hours settings:",i),i;return void l(e)}catch(a){throw console.error("Error in updateBusinessHours:",a),a}}},children:e})},Oc=v((()=>import("./ChatWidget-BGqvdo6n.js"))),jc=({children:e,hideFooter:t=!1})=>{const a=Q();p((()=>{Rc(),document.body.classList.add("content-loaded");const e=document.querySelector(".fallback-content");e&&(e.style.display="none",e.setAttribute("aria-hidden","true"));const t=document.querySelector(".react-only-content");t&&(t.style.opacity="1")}),[a.pathname]);return a.pathname.startsWith("/admin")?n(i,{children:e}):s(qc,{children:[n("a",{href:"#main-content",className:"skip-to-content",children:"Skip to main content"}),s("div",{className:"flex flex-col min-h-screen",children:[n("header",{className:"site-header",children:n(Tc,{})}),n("main",{id:"main-content",className:"flex-grow",children:e}),!t&&n(Fc,{}),n(b,{fallback:null,children:n(Oc,{})})]})]})},$c=({title:e,description:t="MeowRescue is a home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need.",keywords:a,image:r,url:i,type:o="website",publishedTime:l,modifiedTime:c="2025-04-21T12:00:00Z",canonicalUrl:d,structuredData:m,noindex:u=!1,nextUrl:h,prevUrl:p,alternateLanguages:g,children:f})=>{const y="https://meowrescue.org",v=e=>e?e.startsWith("http")?e:`${y}${e.startsWith("/")?"":"/"}${e}`:"",b=d?d.startsWith("http")?d:v(d):i?v(i):y,w=`${y}/images/meow-rescue-logo.jpg`,x=m?Array.isArray(m)?m:[m]:[];return"/"!==i&&i||x.some((e=>"WebSite"===e["@type"]))||x.push({"@context":"https://schema.org","@type":"WebSite",name:"Meow Rescue",url:y,potentialAction:{"@type":"SearchAction",target:`${y}/search?q={search_term_string}`,"query-input":"required name=search_term_string"},description:t,dateModified:c}),x.forEach((e=>{e.dateModified||(e.dateModified=c)})),s(bt,{children:[n("title",{children:e}),n("meta",{name:"description",content:t}),a&&n("meta",{name:"keywords",content:a}),u&&n("meta",{name:"robots",content:"noindex,nofollow"}),!u&&n("meta",{name:"robots",content:"index,follow"}),n("link",{rel:"canonical",href:b}),h&&n("link",{rel:"next",href:h.startsWith("http")?h:v(h)}),p&&n("link",{rel:"prev",href:p.startsWith("http")?p:v(p)}),g&&g.map((e=>n("link",{rel:"alternate",hrefLang:e.lang,href:e.url.startsWith("http")?e.url:v(e.url)},e.lang))),g&&n("link",{rel:"alternate",hrefLang:"x-default",href:y}),n("meta",{property:"og:title",content:e}),n("meta",{property:"og:description",content:t}),n("meta",{property:"og:type",content:o}),n("meta",{property:"og:image",content:r||w}),n("meta",{property:"og:url",content:i?v(i):y}),n("meta",{property:"og:site_name",content:"Meow Rescue"}),n("meta",{property:"og:updated_time",content:c}),n("meta",{name:"last-modified",content:c}),n("meta",{"http-equiv":"last-modified",content:c}),n("meta",{name:"twitter:card",content:"summary_large_image"}),n("meta",{name:"twitter:title",content:e}),n("meta",{name:"twitter:description",content:t}),n("meta",{name:"twitter:image",content:r||w}),"article"===o&&l&&n("meta",{property:"article:published_time",content:l}),"article"===o&&c&&n("meta",{property:"article:modified_time",content:c}),x.map(((e,t)=>n("script",{type:"application/ld+json",children:JSON.stringify(e)},t))),n("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),n("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),n("link",{rel:"preconnect",href:"https://images.unsplash.com"}),n("link",{rel:"sitemap",type:"application/xml",href:`${y}/sitemap.xml`}),n("meta",{"http-equiv":"Content-Security-Policy",content:"\n          default-src 'self'; \n          script-src 'self' 'unsafe-inline' 'unsafe-eval'; \n          style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; \n          img-src 'self' https://sfrlnidbiviniuqhryyc.supabase.co data:; \n          font-src 'self' https://fonts.gstatic.com; \n          connect-src 'self' https://sfrlnidbiviniuqhryyc.supabase.co; \n          frame-src 'self' https://sfrlnidbiviniuqhryyc.supabase.co;\n        "}),f]})},zc=({title:e,subtitle:t,imageSrc:a,imageAlt:r="Hero image",ctaText:i,ctaLink:o,secondaryCtaText:l,secondaryCtaLink:c})=>s("section",{className:"relative min-h-[90vh] flex items-center justify-center overflow-hidden",children:[s("div",{className:"absolute inset-0 z-0",children:[n("img",{src:a,alt:r,className:"w-full h-full object-cover",loading:"eager",fetchPriority:"high",width:"1920",height:"1080"}),n("div",{className:"absolute inset-0 bg-black/60"})]}),n("div",{className:"absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-meow-light to-transparent z-10"}),n("div",{className:"absolute inset-0 bg-[url('/pattern.svg')] opacity-5 z-5"}),n("div",{className:"container mx-auto px-4 relative z-20 text-center max-w-4xl",children:s(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[n(oe.h2,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2},className:"text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight tracking-tight drop-shadow-lg font-display",children:e}),n(oe.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4},className:"text-xl md:text-2xl text-white/90 mb-10 max-w-3xl mx-auto drop-shadow-md leading-relaxed",children:t}),s(oe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},className:"flex flex-col sm:flex-row justify-center gap-4",children:[n(Ds,{asChild:!0,variant:"meow",size:"xl",className:"rounded-full px-8 py-6 text-lg font-semibold border-2 border-primary hover:border-[#003366] transform hover:translate-y-[-2px] transition-all",children:n(X,{to:o,children:i})}),l&&c&&n(Ds,{asChild:!0,variant:"outline",size:"xl",className:"rounded-full border-2 border-white text-white bg-white/10 backdrop-filter backdrop-blur-sm hover:bg-white/20 px-8 py-6 text-lg font-semibold transform hover:translate-y-[-2px] transition-all",children:n(X,{to:c,children:l})})]})]})})]}),Uc=()=>{const{toast:e}=xr(),{data:t,isLoading:a}=S({queryKey:["supabase-connection-check"],queryFn:async()=>(console.log("Checking Supabase connection from StatsSection..."),await Nt()),retry:2,retryDelay:1e3});p((()=>{t&&!t.connected&&(console.error("Supabase connection failed in StatsSection:",t.error),e({title:"Connection Issue",description:"Unable to load statistics. Please try refreshing the page.",variant:"destructive"}))}),[t,e]);const{data:r=0,isError:i,error:o}=S({queryKey:["cats-in-care-count"],queryFn:async()=>{try{if(console.log("Fetching cats in care count..."),!(null==t?void 0:t.connected))throw new Error("Supabase connection is not available");const{count:e,error:a}=await supabase.from("cats").select("*",{count:"exact",head:!0});if(a)throw console.error("Error fetching cats in care:",a),a;return console.log("Cats in care count result:",e),e||0}catch(e){throw console.error("Exception fetching cats in care:",e),e}},enabled:!!(null==t?void 0:t.connected),retry:2,retryDelay:1e3}),{data:l=0,isError:c,error:d}=S({queryKey:["cats-rescued-count"],queryFn:async()=>{try{if(console.log("Fetching total rescued cats count..."),!(null==t?void 0:t.connected))throw new Error("Supabase connection is not available");const{count:e,error:a}=await supabase.from("cats").select("*",{count:"exact",head:!0});if(a)throw console.error("Error fetching total rescued cats:",a),a;return console.log("Total rescued cats result:",e),e||0}catch(e){throw console.error("Exception fetching total rescued cats:",e),e}},enabled:!!(null==t?void 0:t.connected),retry:2,retryDelay:1e3}),{data:m=0,isError:u,error:h}=S({queryKey:["adoptions-count"],queryFn:async()=>{try{if(console.log("Fetching total adoptions count..."),!(null==t?void 0:t.connected))throw new Error("Supabase connection is not available");const{count:e,error:a}=await supabase.from("cats").select("*",{count:"exact",head:!0}).eq("status","Adopted");if(a)throw console.error("Error fetching total adoptions:",a),a;return console.log("Total adoptions result:",e),e||0}catch(e){throw console.error("Exception fetching total adoptions:",e),e}},enabled:!!(null==t?void 0:t.connected),retry:2,retryDelay:1e3});p((()=>{i&&console.error("Cats in care error:",o),c&&console.error("Total rescued error:",d),u&&console.error("Total adoptions error:",h)}),[i,c,u,o,d,h]);const g=a||!t,f=t&&!t.connected;return n("section",{className:"py-16 bg-meow-primary/5",children:n("div",{className:"container mx-auto px-4",children:s("div",{className:"max-w-4xl mx-auto",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s("div",{className:"text-center",children:[n("div",{className:"bg-meow-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:n(Pn,{className:"w-8 h-8 text-meow-primary"})}),n("div",{className:"text-4xl font-bold text-meow-primary mb-2",children:g?n("div",{className:"inline-block w-8 h-8 animate-spin rounded-full border-4 border-meow-primary/20 border-t-meow-primary"}):f||i?"?":`${r}+`}),n("p",{className:"text-gray-600",children:"Cats in Care"})]}),s("div",{className:"text-center",children:[n("div",{className:"bg-meow-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:n(ci,{className:"w-8 h-8 text-meow-primary"})}),n("div",{className:"text-4xl font-bold text-meow-primary mb-2",children:g?n("div",{className:"inline-block w-8 h-8 animate-spin rounded-full border-4 border-meow-primary/20 border-t-meow-primary"}):f||c?"?":l}),n("p",{className:"text-gray-600",children:"Cats Rescued"})]}),s("div",{className:"text-center",children:[n("div",{className:"bg-meow-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:n(di,{className:"w-8 h-8 text-meow-primary"})}),n("div",{className:"text-4xl font-bold text-meow-primary mb-2",children:g?n("div",{className:"inline-block w-8 h-8 animate-spin rounded-full border-4 border-meow-primary/20 border-t-meow-primary"}):f||u?"?":m}),n("p",{className:"text-gray-600",children:"Adoptions"})]})]}),f&&n("div",{className:"mt-6 text-center text-sm text-red-500",children:n("p",{children:"Unable to load current statistics. Please try refreshing the page."})})]})})})},Vc=({title:e,subtitle:t,centered:a=!0,className:r=""})=>s("div",{className:`mb-8 ${a?"text-center":""} ${r}`,children:[n("h2",{className:"text-3xl md:text-4xl font-bold text-meow-primary relative inline-block",children:e}),n("div",{className:"h-1 bg-meow-secondary w-20 mt-4 mb-2 "+(a?"mx-auto":"")}),t&&n("p",{className:"text-lg text-gray-600 mt-4",children:t})]}),Bc=()=>n("section",{className:"py-16 px-4",children:s("div",{className:"container mx-auto",children:[n(Vc,{title:"Our Mission",subtitle:"Saving one cat at a time",centered:!0}),s("div",{className:"max-w-4xl mx-auto mb-10 text-center",children:[n("p",{className:"text-lg text-gray-700 mb-6",children:"Meow Rescue is a home-based cat rescue dedicated to saving cats and kittens in need throughout Pasco County, Florida. Our mission is to rescue, rehabilitate, and rehome cats while promoting responsible pet ownership."}),n("p",{className:"text-lg text-gray-700",children:"As a personal rescue effort, we operate from our home to provide temporary care and find loving forever homes for abandoned, stray, and surrendered cats. We're making a difference one cat at a time."})]}),s("div",{className:"flex flex-wrap justify-center gap-4",children:[n(Ds,{asChild:!0,variant:"meow",size:"lg",children:n(X,{to:"/cats",children:"Meet Our Cats"})}),n(Ds,{asChild:!0,variant:"meowOutline",size:"lg",children:n(X,{to:"/donate",children:"Support Our Efforts"})})]})]})}),Hc=()=>n("section",{className:"py-16 bg-gray-50",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Urgent Needs",subtitle:"Critical items we need now",centered:!0}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center flex flex-col",children:[n("div",{className:"p-4 bg-meow-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n(ci,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-bold text-meow-primary mb-2",children:"Kitten Formula"}),n("p",{className:"text-gray-700 mb-auto",children:"We urgently need KMR kitten formula for our orphaned bottle babies. We currently have 12 kittens under 4 weeks old."}),n("div",{className:"mt-4 flex justify-center",children:n(Ds,{variant:"meow",className:"w-full",asChild:!0,children:n("a",{href:"https://www.amazon.com/hz/wishlist/ls/example",target:"_blank",rel:"noopener noreferrer",children:"Donate KMR"})})})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center flex flex-col",children:[n("div",{className:"p-4 bg-meow-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n(ci,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-bold text-meow-primary mb-2",children:"Foster Homes"}),n("p",{className:"text-gray-700 mb-auto",children:"We need temporary foster homes for 6 adult cats who were recently rescued from a hoarding situation. Can you help?"}),n("div",{className:"mt-4 flex justify-center",children:n(Ds,{variant:"meow",className:"w-full",asChild:!0,children:n(X,{to:"/volunteer#volunteer-form",children:"Apply to Foster"})})})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center flex flex-col",children:[n("div",{className:"p-4 bg-meow-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:n(ci,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-bold text-meow-primary mb-2",children:"Medical Funds"}),n("p",{className:"text-gray-700 mb-auto",children:"Fluffy needs dental surgery that will cost $450. Your donation of any amount helps cover his medical care."}),n("div",{className:"mt-4 flex justify-center",children:n(Ds,{variant:"meow",className:"w-full",asChild:!0,children:n(X,{to:"/donate",children:"Donate Now"})})})]})]})]})}),Kc=H("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Wc({className:e,variant:t,...a}){return n("div",{className:cr(Kc({variant:t}),e),...a})}const Yc={Available:"bg-emerald-500 text-white",Pending:"bg-amber-500 text-white",Adopted:"bg-blue-500 text-white"},Gc=({id:e,name:t,imageUrl:a,age:r,gender:i,description:o,status:l})=>n(oe.div,{whileHover:{y:-10},transition:{type:"spring",stiffness:400,damping:10},children:n(X,{to:`/cats/${e}`,className:"group block h-full",children:s("div",{className:"bg-white rounded-xl overflow-hidden transition-all duration-300 shadow-lg h-full flex flex-col",children:[s("div",{className:"relative h-64 overflow-hidden",children:[n("img",{src:a||"/placeholder-cat.jpg",alt:`${t} - ${r} ${i} cat available for adoption`,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",loading:"eager",width:"400",height:"300"}),n("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l&&n("div",{className:"absolute top-4 right-4",children:n(Wc,{className:`${Yc[l]} shadow-md px-3 py-1 text-xs font-semibold`,children:l})})]}),s("div",{className:"p-5 flex-grow flex flex-col",children:[s("div",{className:"mb-auto",children:[n("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-[#F97316] transition-colors duration-300",children:t}),s("div",{className:"flex gap-2 mb-3 text-sm text-gray-600",children:[n("span",{className:"bg-meow-primary/10 px-2 py-0.5 rounded-full text-meow-primary",children:r}),n("span",{children:""}),n("span",{className:"bg-meow-primary/10 px-2 py-0.5 rounded-full text-meow-primary",children:i})]}),n("p",{className:"text-gray-600 line-clamp-3 mb-4 text-sm",children:o})]}),n("div",{className:"mt-auto",children:n("button",{className:"w-full py-3 px-4 bg-meow-primary text-white rounded-lg shadow-md transform transition-all duration-300 hover:shadow-lg hover:translate-y-[-2px] hover:bg-[#003366]",children:s("span",{className:"block transform transition-transform duration-300",children:["Meet ",t]})})})]})]})})}),Qc=()=>{const{data:e=[],isLoading:t,isError:a}=S({queryKey:["featured-cats"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("cats").select("*").eq("status","Available").order("created_at",{ascending:!1}).limit(3);if(t)throw t;return e||[]}}),r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return t||0!==e.length?n("section",{className:"py-16 bg-gray-50",id:"featured-cats",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Meet Our Adoptable Cats",subtitle:"Find your new best friend",centered:!0}),t?n("div",{className:"flex justify-center items-center h-40",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-meow-primary"})}):e.length>0?s(i,{children:[n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-12",children:e.map((e=>n(Gc,{id:e.id,name:e.name,imageUrl:e.photos_urls?e.photos_urls[0]:"",age:e.age_estimate||"Unknown",gender:e.gender||"Unknown",description:e.description||"",status:"Available"},e.id)))}),n("div",{className:"mt-12 text-center",children:n(Ds,{asChild:!0,variant:"meow",className:"hover:scale-105 transition-transform",size:"lg",children:n(X,{to:"/cats",onClick:r,children:"See All Cats"})})})]}):s("div",{className:"flex flex-col items-center justify-center py-16",children:[n("p",{className:"text-gray-500 text-center mb-6",children:"We currently don't have any cats available for adoption. Please check back soon or contact us for more information."}),n(Ds,{asChild:!0,variant:"outline",className:"border-2 border-meow-primary hover:scale-105 transition-transform",children:n(X,{to:"/contact",onClick:r,children:"Contact Us"})})]})]})}):null},Xc=({photo_url:e,cat_name:t,imageSizeClass:a="w-16 h-16",className:r=""})=>{const[o,l]=h(!1);return s(i,{children:[n("div",{className:`\n          ${a} rounded-full overflow-hidden border-2 border-meow-primary shadow\n          flex items-center justify-center bg-gray-100 mx-auto\n          cursor-zoom-in transition-colors duration-150\n          ${r}\n        `,style:{minWidth:64,minHeight:64,maxWidth:64,maxHeight:64,border:"none",boxShadow:"none"},tabIndex:0,"aria-label":"Show full size photo",role:"button",onClick:e?()=>l(!0):void 0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||!e||l(!0)},children:e?n("img",{src:e,alt:t??"Adopted Cat",className:"object-cover w-full h-full",width:64,height:64,loading:"lazy",draggable:!1,style:{border:"none",boxShadow:"none"}}):n("div",{className:"bg-gray-200 flex items-center justify-center w-full h-full text-3xl text-meow-primary font-bold",children:""})}),o&&e&&n("div",{className:"fixed z-[100] inset-0 bg-black/70 flex items-center justify-center","aria-modal":"true",role:"dialog",onClick:()=>l(!1),children:s("div",{className:"relative flex items-center justify-center max-w-full max-h-full",onClick:e=>e.stopPropagation(),children:[n("button",{className:"absolute top-2 right-2 p-2 text-gray-300 hover:text-meow-primary z-10",onClick:()=>l(!1),"aria-label":"Close full size photo",type:"button",style:{background:"rgba(255,255,255,0.7)",borderRadius:8},children:n(ss,{className:"h-5 w-5"})}),n("img",{src:e,alt:t??"Adopted Cat",className:"object-contain rounded-xl shadow-2xl bg-white max-h-[90vh] max-w-[90vw]"})]})})]})},Zc=({story_text:e,className:t="",size:a="sm"})=>s("div",{className:`\n        text-center text-meow-dark\n        leading-relaxed font-medium\n        font-playfair\n        px-6 py-4 rounded-lg\n        ${"sm"===a?"text-sm min-h-[72px]":"text-base"}\n        flex items-center justify-center\n        m-0\n        ${t}\n      `,style:{border:"none",background:"none",boxShadow:"none",outline:"none"},children:[n("span",{className:"text-4xl text-meow-primary font-serif leading-none align-top","aria-hidden":"true",children:""}),n("span",{className:"inline px-1",children:e}),n("span",{className:"text-4xl text-meow-primary font-serif leading-none align-bottom","aria-hidden":"true",children:""})]});function Jc(e){if(!e)return null;return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const ed="w-16 h-16",td=({photo_url:e,cat_name:t,adoption_date:a,story_text:r})=>{const[o,l]=h(!1);return s(i,{children:[s("div",{className:"\n          bg-white rounded-xl shadow-lg border border-gray-50 transition-all hover:shadow-xl\n          flex flex-col items-center relative h-[265px] group\n          cursor-pointer hover:ring-2 hover:ring-meow-primary/30\n          focus:outline-none\n        ",style:{minHeight:"265px",maxHeight:"265px",width:"100%",outline:"none",userSelect:"none"},tabIndex:0,role:"button","aria-label":"Read the full success story",onClick:()=>l(!0),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||l(!0)},onFocus:e=>{e.currentTarget.style.outline="none",e.currentTarget.style.boxShadow="none"},onBlur:e=>{e.currentTarget.style.outline="none",e.currentTarget.style.boxShadow="none"},children:[n("div",{className:"flex flex-col items-center w-full pt-6",children:n(Xc,{photo_url:e,cat_name:t,imageSizeClass:ed})}),s("div",{className:"flex flex-col items-center flex-1 justify-center w-full px-6",children:[t&&n("div",{className:"text-meow-primary text-lg font-bold mt-4 mb-1 text-center",children:t}),a&&s("div",{className:"flex items-center gap-1 text-gray-500 text-sm mb-2",children:[n(An,{className:"h-4 w-4"}),n("span",{children:Jc(a)})]}),n("div",{className:"relative w-full flex-1 flex flex-col justify-center mt-1.5",children:n(Zc,{story_text:r})})]}),n("div",{className:"pb-7"})]}),o&&n("div",{className:"fixed z-50 inset-0 bg-black/40 flex items-center justify-center","aria-modal":"true",role:"dialog",onClick:()=>l(!1),children:s("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-[90vw] px-7 py-10 relative",onClick:e=>e.stopPropagation(),children:[n("button",{className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-meow-primary",onClick:()=>l(!1),"aria-label":"Close",type:"button",children:n(ss,{className:"h-5 w-5"})}),s("div",{className:"flex flex-col items-center",children:[n(Xc,{photo_url:e,cat_name:t,imageSizeClass:ed,className:"mb-5"}),t&&n("div",{className:"text-meow-primary text-lg font-bold mb-1 text-center",children:t}),a&&s("div",{className:"flex items-center gap-1 text-gray-500 text-sm mb-4",children:[n(An,{className:"h-4 w-4"}),n("span",{children:Jc(a)})]}),n(Zc,{story_text:r,size:"base"})]})]})})]})},ad=()=>{const{data:e,isLoading:t}=S({queryKey:["homepage-testimonials"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("success_stories").select("*, cats(name)").eq("show_on_homepage",!0).order("created_at",{ascending:!1}).limit(3);if(t)throw t;return e||[]}});return t?n("section",{className:"py-16 bg-gradient-to-b from-white to-gray-50",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Success Stories",subtitle:"Hear from our happy adopters",centered:!0}),n("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[1,2,3].map((e=>n("div",{className:"bg-white rounded-lg min-h-[265px] shadow-md"},e)))})]})}):e&&0!==e.length?n("section",{className:"py-20 bg-gradient-to-br from-white via-gray-50 to-white",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Success Stories",subtitle:"Hear from our happy adopters",centered:!0}),n("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:e.map((e=>{var t;return n(td,{photo_url:e.photo_url,cat_name:null==(t=e.cats)?void 0:t.name,adoption_date:e.adoption_date,story_text:e.story_text},e.id)}))})]})}):null},rd=()=>{const[e,t]=h(0),a=()=>{t((e=>e+1))};return p((()=>{const e=xt().channel("featured-cats-updates").on("postgres_changes",{event:"*",schema:"public",table:"cats"},(e=>{console.log("Cat update received:",e),a()})).subscribe();return()=>{e.unsubscribe()}}),[a]),s(jc,{children:[n($c,{title:"Meow Rescue | Feline Friends Finding Forever Homes",description:"Heartwarming stories of cats finding their perfect families through Meow Rescue - a home-based cat rescue in Pasco County, Florida dedicated to rescuing and rehoming cats.",keywords:"cat rescue, cat adoption, feline rescue, kitten adoption, Florida cat rescue, Pasco County animal rescue, pet adoption",url:"/",structuredData:[{"@context":"https://schema.org","@type":"Organization",name:"Meow Rescue",url:"https://meowrescue.org",logo:{"@type":"ImageObject",url:"https://meowrescue.org/images/meow-rescue-logo.jpg",width:"512",height:"512"},sameAs:["https://facebook.com/meowrescue","https://instagram.com/meowrescue"],address:{"@type":"PostalAddress",addressLocality:"New Port Richey",addressRegion:"FL",postalCode:"34653",addressCountry:"US"},contactPoint:{"@type":"ContactPoint",telephone:"+1-555-555-5555",contactType:"customer service"},description:"Meow Rescue is a home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need."},{"@context":"https://schema.org","@type":"LocalBusiness",name:"Meow Rescue",image:"https://meowrescue.org/images/meow-rescue-logo.jpg",priceRange:"$$",address:{"@type":"PostalAddress",streetAddress:"123 Cat Avenue",addressLocality:"New Port Richey",addressRegion:"FL",postalCode:"34653",addressCountry:"US"},geo:{"@type":"GeoCoordinates",latitude:"28.2442",longitude:"-82.7218"},openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],opens:"10:00",closes:"17:00"},{"@type":"OpeningHoursSpecification",dayOfWeek:["Saturday"],opens:"10:00",closes:"15:00"}],telephone:"+1-555-555-5555",url:"https://meowrescue.org"},{"@context":"https://schema.org","@type":"WebSite",name:"Meow Rescue",url:"https://meowrescue.org",potentialAction:{"@type":"SearchAction",target:"https://meowrescue.org/search?q={search_term_string}","query-input":"required name=search_term_string"},description:"Meow Rescue is a home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need."}],alternateLanguages:[{lang:"en",url:"https://meowrescue.org/"},{lang:"es",url:"https://meowrescue.org/es/"}]}),n(zc,{title:"Saving Local Lives, One Paw at a Time",subtitle:"We're a home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need.",imageSrc:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1143&q=80",imageAlt:"A beautiful cat looking into the camera, representing the cats available for adoption at Meow Rescue",ctaText:"Adopt a Cat",ctaLink:"/cats",secondaryCtaText:"Donate Now",secondaryCtaLink:"/donate"}),n(Uc,{}),n(Bc,{}),n(Hc,{}),n(Qc,{},e),n(ad,{})]})},nd=({member:e})=>{return s("div",{className:"flex flex-col items-center space-y-3 p-4 text-center",children:[n(Ec,{className:"h-24 w-24 border-2 border-meow-primary/20",children:e.avatar_url?n(Dc,{src:e.avatar_url,alt:`${e.first_name} ${e.last_name}`,className:"object-cover"}):n(Ac,{className:"text-2xl bg-gradient-to-br from-meow-primary/20 to-meow-primary/40 text-meow-primary",children:(t=e.first_name||"",a=e.last_name||"",`${t.charAt(0)}${a.charAt(0)}`)})}),s("div",{className:"flex flex-col",children:[s("h3",{className:"text-lg font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),e.role_title&&n("p",{className:"text-sm text-gray-500",children:e.role_title})]})]});var t,a},id=({title:e,subtitle:t})=>s("div",{className:"relative bg-gradient-to-r from-meow-primary/90 to-meow-primary py-20 md:py-28 overflow-hidden",children:[n("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba')] bg-cover bg-center mix-blend-overlay opacity-20"}),n("div",{className:"container mx-auto px-4 relative z-10",children:s("div",{className:"max-w-3xl mx-auto text-center",children:[n("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-4 tracking-tight",children:e}),t&&n("p",{className:"text-xl md:text-2xl text-white/90 max-w-2xl mx-auto leading-relaxed",children:t})]})}),n("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white to-transparent"})]}),sd=()=>{const{data:e=[],isLoading:t}=S({queryKey:["team-members"],queryFn:async()=>{const{data:e,error:t}=await xt().from("profiles").select("id, first_name, last_name, avatar_url, role, role_title, bio, show_in_team, created_at").eq("show_in_team",!0).order("created_at");return t?(console.error("Error fetching team members:",t),[]):e||[]}}),a=(new Date).toISOString();return s(jc,{children:[n($c,{title:"About Us | Meow Rescue",description:"Learn about Meow Rescue's mission to save and improve the lives of cats in need.",modifiedTime:a,structuredData:{"@context":"https://schema.org","@type":"AboutPage",name:"About Meow Rescue",description:"Learn about Meow Rescue's mission to save and improve the lives of cats in need.",url:"https://meowrescue.org/about",dateModified:a,publisher:{"@type":"Organization",name:"Meow Rescue",logo:{"@type":"ImageObject",url:"https://meowrescue.org/images/meow-rescue-logo.jpg",width:"512",height:"512"}}},url:"/about",keywords:"cat rescue mission, cat adoption mission, animal shelter about us, Pasco County cat rescue mission, Florida animal rescue organization"}),n(id,{title:"About Meow Rescue",subtitle:"Our mission, our story, and our vision"}),s("div",{className:"container mx-auto py-16",children:[n("section",{className:"mb-16",children:s("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start mt-8",children:[n("div",{children:n("img",{src:"https://images.unsplash.com/photo-1595433707802-6b2626ef1c91",alt:"Founder with rescued cat",className:"rounded-lg shadow-xl w-full h-auto object-cover",width:"600",height:"400",loading:"eager"})}),s("div",{children:[n(Vc,{title:"Our Founder's Story",subtitle:"The journey that led to Meow Rescue",centered:!1}),s("div",{className:"text-lg text-gray-700 leading-relaxed",children:[n("p",{className:"mb-4",children:"Patrick has had a deep connection with animals since childhood, often feeling a special ability to understand them when others couldn't. After years in IT, he decided to follow his true passion for animal welfarerealizing this brings genuine happiness and allows him to use his unique gift."}),n("p",{className:"mb-4",children:"His long-term dream is to open a dedicated animal sanctuary for all kinds of animals in need. While skilled in IT, Patrick acknowledges the learning curve in running a rescue operation but is committed to his dream despite the challenges."}),n("p",{className:"mb-4",children:"The catalyst for Meow Rescue came when Patrick moved to Pasco County (near Moon Lake) about three years ago and observed a significant stray cat population. Cats in distressinjured, starvingbegan appearing at his home, seemingly sensing it was a safe place."}),n("p",{children:'What started as personally funding vet care and feeding for these animals has now formalized into "Meow Rescue," as Patrick seeks community support to continue and expand this vital work.'})]})]})]})}),n("hr",{className:"section-divider mb-16"}),s("section",{children:[n(Vc,{title:"Our Mission",subtitle:"Saving lives, one meow at a time",centered:!0}),n("div",{className:"max-w-3xl mx-auto text-center text-lg text-gray-700 leading-relaxed",children:n("p",{children:"Our mission is to provide a safe haven for abandoned, neglected, and abused cats. We strive to find loving forever homes for each cat in our care, ensuring they live happy and healthy lives. Through community outreach and education, we aim to promote responsible pet ownership and reduce cat overpopulation."})})]}),n("hr",{className:"section-divider my-16"}),s("section",{children:[n(Vc,{title:"Meet the Team",subtitle:"The dedicated individuals behind Meow Rescue",centered:!0}),n("div",t?{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}:{className:"container mx-auto px-4 py-12",children:n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((e=>n(nd,{member:e},e.id)))})})]})]})]})},od=c.forwardRef((({className:e,type:t,...a},r)=>n("input",{type:t,className:cr("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a})));od.displayName="Input";const ld=()=>{const[e,t]=h(""),[a,r]=h("all"),[o,l]=h("all"),{data:c=[],isLoading:d,isError:m,error:u,refetch:g}=S({queryKey:["adoptable-cats"],queryFn:async()=>{try{const{data:e,error:t}=await supabase.from("cats").select("*").eq("status","Available").order("name");if(t)throw t;return e}catch(e){return console.error("Error fetching cats:",e),[]}},retry:2,retryDelay:1e3});p((()=>{const e=supabase.channel("adoptable-cats-updates").on("postgres_changes",{event:"*",schema:"public",table:"cats"},(e=>{console.log("Cat update received:",e),g()})).subscribe();return()=>{e.unsubscribe()}}),[g]);const f=c.filter((t=>{var r,n,i,s,l,c;const d=t.name.toLowerCase().includes(e.toLowerCase())||(null==(r=t.breed)?void 0:r.toLowerCase().includes(e.toLowerCase()))||(null==(n=t.description)?void 0:n.toLowerCase().includes(e.toLowerCase())),m="all"===a||"kitten"===a&&(null==(i=t.age_estimate)?void 0:i.toLowerCase().includes("month"))||"young"===a&&(null==(s=t.age_estimate)?void 0:s.toLowerCase().includes("year"))&&parseInt(t.age_estimate)<=3||"adult"===a&&(null==(l=t.age_estimate)?void 0:l.toLowerCase().includes("year"))&&parseInt(t.age_estimate)>3,u="all"===o||(null==(c=t.gender)?void 0:c.toLowerCase())===o.toLowerCase();return d&&m&&u}));return s(jc,{children:[n($c,{title:"Adoptable Cats | Meow Rescue",description:"Meet our adorable cats available for adoption. Find your perfect feline companion today!"}),n(id,{title:"Adoptable Cats",subtitle:"Find your perfect feline companion"}),s("div",{className:"container mx-auto px-4 py-8",children:[n("p",{className:"mt-6 max-w-2xl mx-auto text-gray-600 text-center",children:"All of our cats are spayed/neutered, vaccinated, and microchipped before adoption. Adoption fees help cover these medical costs and support our rescue efforts."}),n("div",{className:"bg-white rounded-lg shadow-md p-4 mb-8 mt-8 backdrop-blur-sm hover:shadow-lg transition-all",children:s("div",{className:"flex flex-col md:flex-row gap-4",children:[s("div",{className:"relative flex-grow",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n(od,{type:"text",placeholder:"Search by name, breed, or description...",value:e,onChange:e=>t(e.target.value),className:"pl-10 w-full border-gray-200 focus:border-meow-primary focus:ring focus:ring-meow-primary/20"})]}),n("div",{className:"flex-shrink-0",children:s("select",{value:a,onChange:e=>r(e.target.value),className:"w-full md:w-auto px-3 py-2 border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-meow-primary/20 focus:border-meow-primary",children:[n("option",{value:"all",children:"All Ages"}),n("option",{value:"kitten",children:"Kittens (< 1 year)"}),n("option",{value:"young",children:"Young (1-3 years)"}),n("option",{value:"adult",children:"Adult (3+ years)"})]})}),n("div",{className:"flex-shrink-0",children:s("select",{value:o,onChange:e=>l(e.target.value),className:"w-full md:w-auto px-3 py-2 border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-meow-primary/20 focus:border-meow-primary",children:[n("option",{value:"all",children:"All Genders"}),n("option",{value:"male",children:"Male"}),n("option",{value:"female",children:"Female"})]})})]})}),d?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):m?s("div",{className:"text-center py-12",children:[n("p",{className:"text-lg text-red-500 mb-4",children:"We encountered an error loading our adoptable cats."}),n(Ds,{onClick:()=>g(),variant:"outline",className:"border-2 border-meow-primary",children:"Try Again"})]}):f.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((e=>{var t;return n(X,{to:`/cats/${e.id}`,className:"group",children:s("div",{className:"bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg hover:translate-y-[-5px] h-full flex flex-col",children:[n("div",{className:"h-64 overflow-hidden",children:n("img",{src:(null==(t=e.photos_urls)?void 0:t[0])||"/placeholder-cat.jpg",alt:`${e.name} - ${e.age_estimate} ${e.gender} cat available for adoption`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy",width:"400",height:"300"})}),s("div",{className:"p-4 flex-grow",children:[s("div",{className:"flex justify-between items-start mb-2",children:[n("h3",{className:"text-xl font-semibold text-meow-primary",children:e.name}),n(Wc,{className:"bg-green-500 text-white",children:e.status})]}),s("div",{className:"flex gap-2 mb-3 text-sm text-gray-600",children:[n("span",{children:e.age_estimate}),n("span",{children:""}),n("span",{children:e.gender}),e.breed&&s(i,{children:[n("span",{children:""}),n("span",{children:e.breed})]})]}),n("p",{className:"text-gray-600 line-clamp-3",children:e.description})]}),n("div",{className:"p-4 pt-0",children:s(Ds,{className:"w-full",variant:"meow",children:["Meet ",e.name]})})]})},e.id)}))}):s("div",{className:"text-center py-12",children:[n("p",{className:"text-lg text-gray-500 mb-4",children:e||"all"!==a||"all"!==o?"No cats match your current filters. Try adjusting your search criteria.":"No cats are currently available for adoption. Please check back soon!"}),(e||"all"!==a||"all"!==o)&&n(Ds,{onClick:()=>{t(""),r("all"),l("all")},variant:"outline",className:"border-2 border-meow-primary",children:"Clear Filters"})]})]}),n("div",{className:"bg-gray-50 py-16",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Adoption Process",subtitle:"How to bring your new feline friend home",centered:!0}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center hover:shadow-lg hover:translate-y-[-5px] transition-all",children:[n("div",{className:"w-16 h-16 bg-meow-primary/10 rounded-full flex items-center justify-center text-meow-primary text-2xl font-bold mx-auto mb-4",children:"1"}),n("h3",{className:"text-xl font-semibold mb-3",children:"Apply"}),n("p",{className:"text-gray-600",children:"Fill out our adoption application to start the process. We'll review your application and contact you within 48 hours."})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center hover:shadow-lg hover:translate-y-[-5px] transition-all",children:[n("div",{className:"w-16 h-16 bg-meow-primary/10 rounded-full flex items-center justify-center text-meow-primary text-2xl font-bold mx-auto mb-4",children:"2"}),n("h3",{className:"text-xl font-semibold mb-3",children:"Meet"}),n("p",{className:"text-gray-600",children:"Schedule a meet and greet with your potential new family member. Spend time getting to know each other."})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md text-center hover:shadow-lg hover:translate-y-[-5px] transition-all",children:[n("div",{className:"w-16 h-16 bg-meow-primary/10 rounded-full flex items-center justify-center text-meow-primary text-2xl font-bold mx-auto mb-4",children:"3"}),n("h3",{className:"text-xl font-semibold mb-3",children:"Adopt"}),n("p",{className:"text-gray-600",children:"Complete the adoption contract, pay the adoption fee, and welcome your new cat home!"})]})]}),n("div",{className:"text-center mt-12",children:n(Ds,{asChild:!0,size:"lg",variant:"meow",className:"hover:translate-y-[-2px] transition-all",onClick:Rc,children:n(X,{to:"/adopt",children:"Start Adoption Process"})})})]})})]})},cd=u(null),dd=({initialData:e=null,children:t})=>{const[a]=d.useState((()=>{if("undefined"!=typeof window){const e=document.getElementById("__PAGE_DATA__");if(e)try{return JSON.parse(e.textContent||"{}")}catch(t){console.error("Failed to parse page data:",t)}}return e}));return n(cd.Provider,{value:a,children:t})};function md(e){const t=g(cd),a="catDetail"===(null==t?void 0:t.pageType)?t.cat:null,r="catDetail"===(null==t?void 0:t.pageType)?t.medicalRecords:null,{data:n,isLoading:i,isError:s,error:o}=S({queryKey:["cat",e],queryFn:async()=>{if(!e)throw new Error("Cat ID is required");if(a)return console.log("Using preloaded cat data from SSR"),a;const{data:t,error:r}=await supabase.from("cats").select("*").eq("id",e).single();if(r)throw r;return t},enabled:!!e&&!a,initialData:a}),{data:l}=S({queryKey:["cat-medical-records",e],queryFn:async()=>{if(!e)return[];if(r)return console.log("Using preloaded medical records from SSR"),r;const{data:t,error:a}=await supabase.from("cat_medical_records").select("*").eq("cat_id",e).order("record_date",{ascending:!1});if(a)throw a;return t},enabled:!!e&&!r,initialData:r});return{cat:n,medicalRecords:l,isLoading:i,isError:s,error:o}}const ud=(e,t)=>{if(t){const e=Math.floor(((new Date).getTime()-new Date(t).getTime())/315576e5),a=Math.floor(((new Date).getTime()-new Date(t).getTime())/2630016000.0000005);return 0===e?`${a} month${1===a?"":"s"} old`:`${e} year${1===e?"":"s"} old`}if(e){const t=e.toLowerCase();if(t.includes("month"))return`${e} old`;if(t.includes("year"))return`${e} old`}return"Unknown age"},hd=()=>s(Ds,{variant:"outline",size:"sm",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm",onClick:()=>{window.history.back()},children:[n(vn,{className:"h-4 w-4 mr-2"}),"Back"]}),pd=({name:e})=>{const t=t=>{const a=window.location.href,r=`Meet ${e} at Meow Rescue`;switch(t){case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}&text=${encodeURIComponent(r)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`,"_blank");break;case"email":window.open(`mailto:?subject=${encodeURIComponent(r)}&body=${encodeURIComponent(a)}`,"_blank")}};return s(i,{children:[s("div",{className:"hidden md:flex flex-col space-y-2",children:[n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>t("facebook"),children:n(ei,{className:"h-4 w-4 text-blue-600"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>t("twitter"),children:n(Ji,{className:"h-4 w-4 text-sky-500"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>t("linkedin"),children:n(fi,{className:"h-4 w-4 text-blue-700"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>t("email"),children:n(xi,{className:"h-4 w-4 text-gray-600"})})]}),s("div",{className:"md:hidden flex justify-center gap-3 -mt-6 mb-8",children:[n(Ds,{variant:"outline",size:"icon",className:"bg-primary/10 backdrop-blur-sm hover:bg-primary/20 border border-primary/20 rounded-full shadow-sm w-12 h-12",onClick:()=>t("facebook"),children:n(ei,{className:"h-5 w-5 text-blue-600"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-primary/10 backdrop-blur-sm hover:bg-primary/20 border border-primary/20 rounded-full shadow-sm w-12 h-12",onClick:()=>t("twitter"),children:n(Ji,{className:"h-5 w-5 text-sky-500"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-primary/10 backdrop-blur-sm hover:bg-primary/20 border border-primary/20 rounded-full shadow-sm w-12 h-12",onClick:()=>t("linkedin"),children:n(fi,{className:"h-5 w-5 text-blue-700"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-primary/10 backdrop-blur-sm hover:bg-primary/20 border border-primary/20 rounded-full shadow-sm w-12 h-12",onClick:()=>t("email"),children:n(xi,{className:"h-5 w-5 text-gray-600"})})]})]})},gd=({name:e,age:t,gender:a})=>((()=>{const{hash:e,pathname:t}=Q();p((()=>{if(e){const t=document.getElementById(e.substring(1));if(t){const e=80,a=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:a,behavior:"smooth"})}}else window.scrollTo(0,0)}),[e,t])})(),s(i,{children:[s("div",{className:"fixed top-24 left-4 z-30 flex flex-col gap-2",children:[n(hd,{}),n(pd,{name:e})]}),n(id,{title:e,subtitle:`Meet ${e}, a ${t} ${a.toLowerCase()} looking for a loving home.`})]})),fd=({photos:e,status:t,name:a,onImageClick:r})=>n("div",{className:"space-y-6",children:s("div",{className:"relative overflow-hidden rounded-lg shadow-lg cursor-pointer group",onClick:()=>r((null==e?void 0:e[0])||"/placeholder-cat.jpg"),children:[n("img",{src:(null==e?void 0:e[0])||"/placeholder-cat.jpg",alt:a,className:"w-full h-[400px] object-cover transition-transform duration-300 group-hover:scale-105"}),n("div",{className:"absolute top-4 right-4",children:n(Wc,{className:"text-white "+("Available"===t?"bg-green-500":"Pending"===t?"bg-yellow-500":"bg-blue-500"),children:t})}),n("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:n("div",{className:"text-white text-lg font-medium",children:"Click to enlarge"})})]})}),yd=({name:e,description:t,age_estimate:a,gender:r,breed:i,weight:o,color:l,pattern:c,eye_color:d,coat_type:m})=>s("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n(ui,{className:"mr-2 h-5 w-5 text-meow-primary"}),"About ",e]}),n("p",{className:"text-gray-600 mb-6",children:t}),s("div",{className:"grid grid-cols-2 gap-4 text-gray-600",children:[s("div",{className:"space-y-2",children:[s("p",{children:[n("strong",{children:"Age:"})," ",a]}),s("p",{children:[n("strong",{children:"Gender:"})," ",r]}),s("p",{children:[n("strong",{children:"Breed:"})," ",i||"Unknown"]}),s("p",{children:[n("strong",{children:"Weight:"})," ",o?`${o} lbs`:"Unknown"]})]}),s("div",{className:"space-y-2",children:[s("p",{children:[n("strong",{children:"Color:"})," ",l||"Unknown"]}),s("p",{children:[n("strong",{children:"Pattern:"})," ",c||"Unknown"]}),s("p",{children:[n("strong",{children:"Eye Color:"})," ",d||"Unknown"]}),s("p",{children:[n("strong",{children:"Coat Type:"})," ",m||"Unknown"]})]})]})]}),vd=({medical_notes:e})=>e?s("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n(ci,{className:"mr-2 h-5 w-5 text-meow-primary"}),"Special Care Notes"]}),n("p",{className:"text-gray-600",children:e})]}):null,bd=({intake_date:e})=>s("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n(An,{className:"mr-2 h-5 w-5 text-meow-primary"}),"Intake Information"]}),n("div",{className:"space-y-2 text-gray-600",children:s("p",{className:"flex items-center",children:[n(Yn,{className:"mr-2 h-4 w-4"}),"Intake Date: ",le(new Date(e),"MMMM d, yyyy")]})})]}),wd=({medicalRecords:e})=>e.length?s("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[n(_i,{className:"mr-2 h-5 w-5 text-meow-primary"}),"Medical History"]}),n("div",{className:"space-y-4",children:e.map((e=>s("div",{className:"border-b last:border-b-0 pb-4 last:pb-0",children:[s("div",{className:"flex justify-between items-start mb-2",children:[n("h4",{className:"font-medium",children:e.procedure_type}),n("span",{className:"text-sm text-gray-500",children:le(new Date(e.record_date),"MMM d, yyyy")})]}),n("p",{className:"text-gray-600 mb-2",children:e.description}),e.veterinarian&&s("p",{className:"text-sm text-gray-500",children:["Veterinarian: ",e.veterinarian]}),e.notes&&s("p",{className:"text-sm text-gray-500 mt-1",children:["Notes: ",e.notes]})]},e.id)))})]}):null,xd=({cat:e,medicalRecords:t})=>s("div",{className:"space-y-6",children:[n(yd,{...e}),n(vd,{medical_notes:e.medical_notes}),n(bd,{intake_date:e.intake_date}),n(wd,{medicalRecords:t})]}),Nd=()=>n("div",{className:"bg-gray-50 py-12",children:s("div",{className:"container mx-auto px-4",children:[n(Vc,{title:"Adoption Process",subtitle:"Here's what you need to know about adopting from us",centered:!0}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-8",children:[s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("div",{className:"text-xl font-semibold mb-3",children:"1. Application"}),n("p",{className:"text-gray-600",children:"Fill out our adoption application form. We'll review your information and get back to you within 48 hours."})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("div",{className:"text-xl font-semibold mb-3",children:"2. Meet & Greet"}),n("p",{className:"text-gray-600",children:"Schedule a time to meet your potential new family member. This helps ensure it's a perfect match."})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("div",{className:"text-xl font-semibold mb-3",children:"3. Welcome Home"}),n("p",{className:"text-gray-600",children:"Complete the adoption fee and paperwork. We'll provide you with all necessary medical records and care instructions."})]})]}),n("div",{className:"flex justify-center mt-8",children:n(Ds,{asChild:!0,size:"lg",className:"bg-meow-primary hover:bg-meow-primary/90",children:n("a",{href:"/adopt",children:"Start Adoption Process"})})})]})});var Cd="Dialog",[_d,kd]=Ft(Cd),[Sd,Ed]=_d(Cd),Dd=e=>{const{__scopeDialog:t,children:a,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=c.useRef(null),d=c.useRef(null),[m,u]=La({prop:r,defaultProp:i??!1,onChange:s,caller:Cd});return n(Sd,{scope:t,triggerRef:l,contentRef:d,contentId:ia(),titleId:ia(),descriptionId:ia(),open:m,onOpenChange:u,onOpenToggle:c.useCallback((()=>u((e=>!e))),[u]),modal:o,children:a})};Dd.displayName=Cd;var Ad="DialogTrigger",Md=c.forwardRef(((e,t)=>{const{__scopeDialog:a,...r}=e,i=Ed(Ad,a),s=Rt(t,i.triggerRef);return n(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Qd(i.open),...r,ref:s,onClick:Mt(e.onClick,i.onOpenToggle)})}));Md.displayName=Ad;var Pd="DialogPortal",[Td,Rd]=_d(Pd,{forceMount:void 0}),Fd=e=>{const{__scopeDialog:t,forceMount:a,children:r,container:i}=e,s=Ed(Pd,t);return n(Td,{scope:t,forceMount:a,children:c.Children.map(r,(e=>n(Ta,{present:a||s.open,children:n(Pa,{asChild:!0,container:i,children:e})})))})};Fd.displayName=Pd;var Ld="DialogOverlay",Id=c.forwardRef(((e,t)=>{const a=Rd(Ld,e.__scopeDialog),{forceMount:r=a.forceMount,...i}=e,s=Ed(Ld,e.__scopeDialog);return s.modal?n(Ta,{present:r||s.open,children:n(Od,{...i,ref:t})}):null}));Id.displayName=Ld;var qd=It("DialogOverlay.RemoveScroll"),Od=c.forwardRef(((e,t)=>{const{__scopeDialog:a,...r}=e,i=Ed(Ld,a);return n(ie,{as:qd,allowPinchZoom:!0,shards:[i.contentRef],children:n(Ut.div,{"data-state":Qd(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})})),jd="DialogContent",$d=c.forwardRef(((e,t)=>{const a=Rd(jd,e.__scopeDialog),{forceMount:r=a.forceMount,...i}=e,s=Ed(jd,e.__scopeDialog);return n(Ta,{present:r||s.open,children:s.modal?n(zd,{...i,ref:t}):n(Ud,{...i,ref:t})})}));$d.displayName=jd;var zd=c.forwardRef(((e,t)=>{const a=Ed(jd,e.__scopeDialog),r=c.useRef(null),i=Rt(t,a.contentRef,r);return c.useEffect((()=>{const e=r.current;if(e)return ne(e)}),[]),n(Vd,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),null==(t=a.triggerRef.current)||t.focus()})),onPointerDownOutside:Mt(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()})),onFocusOutside:Mt(e.onFocusOutside,(e=>e.preventDefault()))})})),Ud=c.forwardRef(((e,t)=>{const a=Ed(jd,e.__scopeDialog),r=c.useRef(!1),i=c.useRef(!1);return n(Vd,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,s;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(r.current||null==(s=a.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var n,s;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target;(null==(s=a.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})})),Vd=c.forwardRef(((e,t)=>{const{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,...d}=e,m=Ed(jd,a),u=c.useRef(null),h=Rt(t,u);return Ts(),s(i,{children:[n(qs,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:l,children:n(Qt,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":Qd(m.open),...d,ref:h,onDismiss:()=>m.onOpenChange(!1)})}),s(i,{children:[n(em,{titleId:m.titleId}),n(tm,{contentRef:u,descriptionId:m.descriptionId})]})]})})),Bd="DialogTitle",Hd=c.forwardRef(((e,t)=>{const{__scopeDialog:a,...r}=e,i=Ed(Bd,a);return n(Ut.h2,{id:i.titleId,...r,ref:t})}));Hd.displayName=Bd;var Kd="DialogDescription",Wd=c.forwardRef(((e,t)=>{const{__scopeDialog:a,...r}=e,i=Ed(Kd,a);return n(Ut.p,{id:i.descriptionId,...r,ref:t})}));Wd.displayName=Kd;var Yd="DialogClose",Gd=c.forwardRef(((e,t)=>{const{__scopeDialog:a,...r}=e,i=Ed(Yd,a);return n(Ut.button,{type:"button",...r,ref:t,onClick:Mt(e.onClick,(()=>i.onOpenChange(!1)))})}));function Qd(e){return e?"open":"closed"}Gd.displayName=Yd;var Xd="DialogTitleWarning",[Zd,Jd]=function(e,t){const a=c.createContext(t),r=e=>{const{children:t,...r}=e,i=c.useMemo((()=>r),Object.values(r));return n(a.Provider,{value:i,children:t})};return r.displayName=e+"Provider",[r,function(r){const n=c.useContext(a);if(n)return n;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(Xd,{contentName:jd,titleName:Bd,docsSlug:"dialog"}),em=({titleId:e})=>{const t=Jd(Xd),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect((()=>{if(e){document.getElementById(e)||console.error(a)}}),[a,e]),null},tm=({contentRef:e,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jd("DialogDescriptionWarning").contentName}}.`;return c.useEffect((()=>{var r;const n=null==(r=e.current)?void 0:r.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)||console.warn(a)}}),[a,e,t]),null},am=Dd,rm=Md,nm=Fd,im=Id,sm=$d,om=Hd,lm=Wd,cm=Gd;const dm=am,mm=rm,um=nm,hm=c.forwardRef((({className:e,...t},a)=>n(im,{ref:a,className:cr("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})));hm.displayName=im.displayName;const pm=c.forwardRef((({className:e,children:t,...a},r)=>s(um,{children:[n(hm,{}),s(sm,{ref:r,className:cr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,s(cm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n(ss,{className:"h-4 w-4"}),n("span",{className:"sr-only",children:"Close"})]})]})]})));pm.displayName=sm.displayName;const gm=({className:e,...t})=>n("div",{className:cr("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});gm.displayName="DialogHeader";const fm=({className:e,...t})=>n("div",{className:cr("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fm.displayName="DialogFooter";const ym=c.forwardRef((({className:e,...t},a)=>n(om,{ref:a,className:cr("text-lg font-semibold leading-none tracking-tight",e),...t})));ym.displayName=om.displayName;const vm=c.forwardRef((({className:e,...t},a)=>n(lm,{ref:a,className:cr("text-sm text-muted-foreground",e),...t})));vm.displayName=lm.displayName;const bm=()=>{const{id:e}=J(),[t,a]=h(null),{cat:r,medicalRecords:i,isLoading:o,isError:l,error:c}=md(e);return p((()=>{if(!e)return;const t=supabase.channel(`cat-${e}-updates`).on("postgres_changes",{event:"*",schema:"public",table:"cats",filter:`id=eq.${e}`},(e=>{console.log("Cat update received:",e),window.location.reload()})).subscribe();return()=>{t.unsubscribe()}}),[e]),o?n(jc,{children:n("div",{className:"flex justify-center items-center h-screen",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})})}):l||!r?n(jc,{children:n("div",{className:"flex justify-center items-center h-screen",children:s("p",{className:"text-red-500",children:["Error: ",(null==c?void 0:c.message)||"Cat not found"]})})}):s(jc,{children:[n($c,{title:`${r.name} | Meow Rescue`,description:`Learn more about ${r.name} and our adoption process.`}),n(gd,{name:r.name,age:ud(r.age_estimate,r.birthday),gender:r.gender}),n("div",{className:"container mx-auto px-4 py-8 md:py-16",children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n(fd,{photos:r.photos_urls,status:r.status,name:r.name,onImageClick:e=>{a(e)}}),n(xd,{cat:r,medicalRecords:i||[]})]})}),n(Nd,{}),n(dm,{open:!!t,onOpenChange:()=>a(null),children:n(pm,{className:"max-w-4xl w-[90vw] p-1 bg-transparent border-0",children:s("div",{className:"relative bg-black/80 p-1 rounded-lg",children:[n("img",{src:t||"",alt:`${r.name} enlarged photo`,className:"w-full h-auto max-h-[90vh] object-contain rounded-lg"}),n("button",{className:"absolute top-2 right-2 h-8 w-8 flex items-center justify-center rounded-full bg-black/50 text-white hover:bg-black/70",onClick:()=>a(null),children:""})]})})})]})},wm=c.forwardRef((({className:e,...t},a)=>n("div",{ref:a,className:cr("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})));wm.displayName="Card";const xm=c.forwardRef((({className:e,...t},a)=>n("div",{ref:a,className:cr("flex flex-col space-y-1.5 p-6",e),...t})));xm.displayName="CardHeader";const Nm=c.forwardRef((({className:e,...t},a)=>n("h3",{ref:a,className:cr("text-2xl font-semibold leading-none tracking-tight",e),...t})));Nm.displayName="CardTitle";const Cm=c.forwardRef((({className:e,...t},a)=>n("p",{ref:a,className:cr("text-sm text-muted-foreground",e),...t})));Cm.displayName="CardDescription";const _m=c.forwardRef((({className:e,...t},a)=>n("div",{ref:a,className:cr("p-6 pt-0",e),...t})));_m.displayName="CardContent";const km=c.forwardRef((({className:e,...t},a)=>n("div",{ref:a,className:cr("flex items-center p-6 pt-0",e),...t})));km.displayName="CardFooter";var Sm="Tabs",[Em,Dm]=Ft(Sm,[Xs]),Am=Xs(),[Mm,Pm]=Em(Sm),Tm=c.forwardRef(((e,t)=>{const{__scopeTabs:a,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,m=Ms(l),[u,h]=La({prop:r,onChange:i,defaultProp:s??"",caller:Sm});return n(Mm,{scope:a,baseId:ia(),value:u,onValueChange:h,orientation:o,dir:m,activationMode:c,children:n(Ut.div,{dir:m,"data-orientation":o,...d,ref:t})})}));Tm.displayName=Sm;var Rm="TabsList",Fm=c.forwardRef(((e,t)=>{const{__scopeTabs:a,loop:r=!0,...i}=e,s=Pm(Rm,a),o=Am(a);return n(so,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:n(Ut.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})}));Fm.displayName=Rm;var Lm="TabsTrigger",Im=c.forwardRef(((e,t)=>{const{__scopeTabs:a,value:r,disabled:i=!1,...s}=e,o=Pm(Lm,a),l=Am(a),c=jm(o.baseId,r),d=$m(o.baseId,r),m=r===o.value;return n(oo,{asChild:!0,...l,focusable:!i,active:m,children:n(Ut.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:t,onMouseDown:Mt(e.onMouseDown,(e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(r)})),onKeyDown:Mt(e.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(r)})),onFocus:Mt(e.onFocus,(()=>{const e="manual"!==o.activationMode;m||i||!e||o.onValueChange(r)}))})})}));Im.displayName=Lm;var qm="TabsContent",Om=c.forwardRef(((e,t)=>{const{__scopeTabs:a,value:r,forceMount:i,children:s,...o}=e,l=Pm(qm,a),d=jm(l.baseId,r),m=$m(l.baseId,r),u=r===l.value,h=c.useRef(u);return c.useEffect((()=>{const e=requestAnimationFrame((()=>h.current=!1));return()=>cancelAnimationFrame(e)}),[]),n(Ta,{present:i||u,children:({present:a})=>n(Ut.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!a,id:m,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:a&&s})})}));function jm(e,t){return`${e}-trigger-${t}`}function $m(e,t){return`${e}-content-${t}`}Om.displayName=qm;var zm=Fm,Um=Im,Vm=Om;const Bm=Tm,Hm=c.forwardRef((({className:e,...t},a)=>n(zm,{ref:a,className:cr("flex h-auto items-center justify-center rounded-lg bg-muted/80 p-1 text-muted-foreground",e),...t})));Hm.displayName=zm.displayName;const Km=c.forwardRef((({className:e,...t},a)=>n(Um,{ref:a,className:cr("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-meow-primary data-[state=active]:shadow-sm w-full",e),...t})));Km.displayName=Um.displayName;const Wm=c.forwardRef((({className:e,...t},a)=>n(Vm,{ref:a,className:cr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})));Wm.displayName=Vm.displayName;const Ym=()=>{const e=Z(),t=()=>{Rc(),e("/adopt/apply")};return s(jc,{children:[n($c,{title:"Adopt a Cat | Meow Rescue",description:"Learn about our adoption process and how you can adopt a loving cat into your home"}),n(id,{title:"Adopt a Furry Friend",subtitle:"Give a loving cat a forever home and change both your lives for the better."}),s("div",{className:"bg-gray-50",children:[s("div",{className:"py-16 container mx-auto px-4",children:[s("div",{className:"text-center mb-12",children:[n("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Our Adoption Process"}),n("div",{className:"h-1 w-20 bg-meow-secondary mx-auto mb-4"}),n("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"We want to ensure our cats find the perfect forever homes. Here's our straightforward adoption process."})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[s(wm,{className:"transition-all hover:shadow-lg hover:translate-y-[-5px]",children:[s(xm,{children:[n("div",{className:"bg-meow-primary/10 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:n(Kn,{className:"h-6 w-6 text-meow-primary"})}),n(Nm,{children:"1. Application"})]}),n(_m,{children:n("p",{className:"text-gray-600",children:"Fill out our adoption application to tell us about yourself, your home, and what you're looking for in a cat."})}),n(km,{children:s(Ds,{variant:"ghost",className:"text-meow-primary px-0 hover:bg-transparent hover:text-meow-secondary",onClick:t,children:["Apply Now ",n(wn,{className:"ml-2 h-4 w-4"})]})})]}),s(wm,{className:"transition-all hover:shadow-lg hover:translate-y-[-5px]",children:[s(xm,{children:[n("div",{className:"bg-meow-primary/10 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:n(An,{className:"h-6 w-6 text-meow-primary"})}),n(Nm,{children:"2. Meet & Greet"})]}),n(_m,{children:n("p",{className:"text-gray-600",children:"Once your application is approved, we'll schedule a time for you to meet the cat(s) you're interested in adopting."})})]}),s(wm,{className:"transition-all hover:shadow-lg hover:translate-y-[-5px]",children:[s(xm,{children:[n("div",{className:"bg-meow-primary/10 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:n(di,{className:"h-6 w-6 text-meow-primary"})}),n(Nm,{children:"3. Take Home"})]}),n(_m,{children:n("p",{className:"text-gray-600",children:"After a successful meet & greet, complete the adoption paperwork, pay the adoption fee, and welcome your new family member!"})})]})]})]}),n("div",{className:"py-16 bg-white",children:s("div",{className:"container mx-auto px-4",children:[s("div",{className:"text-center mb-12",children:[n("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Frequently Asked Questions"}),n("div",{className:"h-1 w-20 bg-meow-secondary mx-auto mb-4"}),n("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Got questions about adopting from Meow Rescue? We've got answers."})]}),n("div",{className:"max-w-3xl mx-auto",children:s(Bm,{defaultValue:"requirements",className:"w-full",children:[s(Hm,{className:"grid w-full grid-cols-3 mb-2",children:[n(Km,{value:"requirements",children:"Requirements"}),n(Km,{value:"fees",children:"Adoption Fees"}),n(Km,{value:"process",children:"After Adoption"})]}),n(Wm,{value:"requirements",className:"mt-6",children:s(wm,{children:[s(xm,{children:[n(Nm,{children:"Adoption Requirements"}),n(Cm,{children:"What you need to qualify for adoption"})]}),s(_m,{className:"space-y-4",children:[s("div",{children:[n("h4",{className:"font-semibold",children:"Age Requirement"}),n("p",{className:"text-gray-600",children:"Adopters must be at least 21 years old."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Housing Information"}),n("p",{className:"text-gray-600",children:"If renting, we need landlord verification that pets are allowed."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Current Pets"}),n("p",{className:"text-gray-600",children:"Information about current pets and their vaccination status."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Valid ID"}),n("p",{className:"text-gray-600",children:"A valid government-issued photo ID is required."})]})]})]})}),n(Wm,{value:"fees",className:"mt-6",children:s(wm,{children:[s(xm,{children:[n(Nm,{children:"Adoption Fees"}),n(Cm,{children:"What's included in our adoption fees"})]}),s(_m,{className:"space-y-4",children:[s("div",{children:[n("h4",{className:"font-semibold",children:"Kittens (under 1 year)"}),n("p",{className:"text-gray-600",children:"$150 - Includes spay/neuter, vaccinations, microchip, and health check."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Adult Cats (1-7 years)"}),n("p",{className:"text-gray-600",children:"$100 - Includes spay/neuter, vaccinations, microchip, and health check."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Senior Cats (8+ years)"}),n("p",{className:"text-gray-600",children:"$50 - Includes spay/neuter, vaccinations, microchip, and health check."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Special Needs Cats"}),n("p",{className:"text-gray-600",children:"Fee may be reduced or waived depending on medical needs."})]})]})]})}),n(Wm,{value:"process",className:"mt-6",children:s(wm,{children:[s(xm,{children:[n(Nm,{children:"After You Adopt"}),n(Cm,{children:"What to expect after bringing your cat home"})]}),s(_m,{className:"space-y-4",children:[s("div",{children:[n("h4",{className:"font-semibold",children:"Follow-Up Support"}),n("p",{className:"text-gray-600",children:"We're here to help with advice and support as your cat adjusts to their new home."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Check-Ins"}),n("p",{className:"text-gray-600",children:"We'll check in with you after 2 weeks, 1 month, and 3 months to see how things are going."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Returns"}),n("p",{className:"text-gray-600",children:"If for any reason the adoption doesn't work out, you must return the cat to Meow Rescue."})]}),s("div",{children:[n("h4",{className:"font-semibold",children:"Resources"}),n("p",{className:"text-gray-600",children:"Access to our resource library for cat care, behavior tips, and recommended products."})]})]})]})})]})})]})}),n("div",{className:"py-16 mb-16 container mx-auto px-4",children:n("div",{className:"bg-meow-primary py-12 px-6 rounded-lg shadow-lg",children:s("div",{className:"max-w-2xl mx-auto text-center",children:[n("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Meet Your New Best Friend?"}),n("div",{className:"h-1 w-16 bg-white mx-auto mb-4"}),n("p",{className:"text-white mb-8",children:"Browse our adoptable cats or start your adoption application today."}),s("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s(Ds,{onClick:()=>{Rc(),e("/cats")},variant:"default",size:"lg",className:"bg-white text-meow-primary hover:bg-gray-100 hover:translate-y-[-2px] transition-all",children:[n(Pn,{className:"mr-2 h-5 w-5"}),"Browse Adoptable Cats"]}),s(Ds,{onClick:t,variant:"outline",size:"lg",className:"border-2 border-white text-white hover:bg-white/10 hover:translate-y-[-2px] transition-all",children:[n(ci,{className:"mr-2 h-5 w-5"}),"Start Adoption Process"]})]})]})})})]})]})};var Gm=c.forwardRef(((e,t)=>n(Ut.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));Gm.displayName="Label";var Qm=Gm;const Xm=H("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zm=c.forwardRef((({className:e,...t},a)=>n(Qm,{ref:a,className:cr(Xm(),e),...t})));Zm.displayName=Qm.displayName;const Jm=fe,eu=c.createContext({}),tu=({...e})=>n(eu.Provider,{value:{name:e.name},children:n(ye,{...e})}),au=()=>{const e=c.useContext(eu),t=c.useContext(ru),{getFieldState:a,formState:r}=ge(),n=a(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},ru=c.createContext({}),nu=c.forwardRef((({className:e,...t},a)=>{const r=c.useId();return n(ru.Provider,{value:{id:r},children:n("div",{ref:a,className:cr("space-y-2",e),...t})})}));nu.displayName="FormItem";const iu=c.forwardRef((({className:e,...t},a)=>{const{error:r,formItemId:i}=au();return n(Zm,{ref:a,className:cr(r&&"text-destructive",e),htmlFor:i,...t})}));iu.displayName="FormLabel";const su=c.forwardRef((({...e},t)=>{const{error:a,formItemId:r,formDescriptionId:i,formMessageId:s}=au();return n(qt,{ref:t,id:r,"aria-describedby":a?`${i} ${s}`:`${i}`,"aria-invalid":!!a,...e})}));su.displayName="FormControl";const ou=c.forwardRef((({className:e,...t},a)=>{const{formDescriptionId:r}=au();return n("p",{ref:a,id:r,className:cr("text-sm text-muted-foreground",e),...t})}));ou.displayName="FormDescription";const lu=c.forwardRef((({className:e,children:t,...a},r)=>{const{error:i,formMessageId:s}=au(),o=i?String(null==i?void 0:i.message):t;return o?n("p",{ref:r,id:s,className:cr("text-sm font-medium text-destructive",e),...a,children:o}):null}));lu.displayName="FormMessage";const cu=c.forwardRef((({className:e,...t},a)=>n("textarea",{className:cr("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t})));function du(e){const t=c.useRef({value:e,previous:e});return c.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}cu.displayName="Textarea";var mu="Radio",[uu,hu]=Ft(mu),[pu,gu]=uu(mu),fu=c.forwardRef(((e,t)=>{const{__scopeRadio:a,name:r,checked:i=!1,required:o,disabled:l,value:d="on",onCheck:m,form:u,...h}=e,[p,g]=c.useState(null),f=Rt(t,(e=>g(e))),y=c.useRef(!1),v=!p||(u||!!p.closest("form"));return s(pu,{scope:a,checked:i,disabled:l,children:[n(Ut.button,{type:"button",role:"radio","aria-checked":i,"data-state":wu(i),"data-disabled":l?"":void 0,disabled:l,value:d,...h,ref:f,onClick:Mt(e.onClick,(e=>{i||null==m||m(),v&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())}))}),v&&n(bu,{control:p,bubbles:!y.current,name:r,value:d,checked:i,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})}));fu.displayName=mu;var yu="RadioIndicator",vu=c.forwardRef(((e,t)=>{const{__scopeRadio:a,forceMount:r,...i}=e,s=gu(yu,a);return n(Ta,{present:r||s.checked,children:n(Ut.span,{"data-state":wu(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:t})})}));vu.displayName=yu;var bu=c.forwardRef((({__scopeRadio:e,control:t,checked:a,bubbles:r=!0,...i},s)=>{const o=c.useRef(null),l=Rt(o,s),d=du(a),m=la(t);return c.useEffect((()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(d!==a&&n){const t=new Event("click",{bubbles:r});n.call(e,a),e.dispatchEvent(t)}}),[d,a,r]),n(Ut.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function wu(e){return e?"checked":"unchecked"}bu.displayName="RadioBubbleInput";var xu=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nu="RadioGroup",[Cu,_u]=Ft(Nu,[Xs,hu]),ku=Xs(),Su=hu(),[Eu,Du]=Cu(Nu),Au=c.forwardRef(((e,t)=>{const{__scopeRadioGroup:a,name:r,defaultValue:i,value:s,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:m=!0,onValueChange:u,...h}=e,p=ku(a),g=Ms(d),[f,y]=La({prop:s,defaultProp:i??"",onChange:u,caller:Nu});return n(Eu,{scope:a,name:r,required:o,disabled:l,value:f,onValueChange:y,children:n(so,{asChild:!0,...p,orientation:c,dir:g,loop:m,children:n(Ut.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})}));Au.displayName=Nu;var Mu="RadioGroupItem",Pu=c.forwardRef(((e,t)=>{const{__scopeRadioGroup:a,disabled:r,...i}=e,s=Du(Mu,a),o=s.disabled||r,l=ku(a),d=Su(a),m=c.useRef(null),u=Rt(t,m),h=s.value===i.value,p=c.useRef(!1);return c.useEffect((()=>{const e=e=>{xu.includes(e.key)&&(p.current=!0)},t=()=>p.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),n(oo,{asChild:!0,...l,focusable:!o,active:h,children:n(fu,{disabled:o,required:s.required,checked:h,...d,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:Mt((e=>{"Enter"===e.key&&e.preventDefault()})),onFocus:Mt(i.onFocus,(()=>{var e;p.current&&(null==(e=m.current)||e.click())}))})})}));Pu.displayName=Mu;var Tu=c.forwardRef(((e,t)=>{const{__scopeRadioGroup:a,...r}=e,i=Su(a);return n(vu,{...i,...r,ref:t})}));Tu.displayName="RadioGroupIndicator";var Ru=Au,Fu=Pu,Lu=Tu;const Iu=c.forwardRef((({className:e,...t},a)=>n(Ru,{className:cr("grid gap-2",e),...t,ref:a})));Iu.displayName=Ru.displayName;const qu=c.forwardRef((({className:e,...t},a)=>n(Fu,{ref:a,className:cr("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n(Lu,{className:"flex items-center justify-center",children:n(Hn,{className:"h-2.5 w-2.5 fill-current text-current"})})})));qu.displayName=Fu.displayName;var Ou="Checkbox",[ju,$u]=Ft(Ou),[zu,Uu]=ju(Ou),Vu=c.forwardRef(((e,t)=>{const{__scopeCheckbox:a,name:r,checked:i,defaultChecked:o,required:l,disabled:d,value:m="on",onCheckedChange:u,form:h,...p}=e,[g,f]=c.useState(null),y=Rt(t,(e=>f(e))),v=c.useRef(!1),b=!g||(h||!!g.closest("form")),[w,x]=La({prop:i,defaultProp:o??!1,onChange:u,caller:Ou}),N=c.useRef(w);return c.useEffect((()=>{const e=null==g?void 0:g.form;if(e){const t=()=>x(N.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[g,x]),s(zu,{scope:a,state:w,disabled:d,children:[n(Ut.button,{type:"button",role:"checkbox","aria-checked":Wu(w)?"mixed":w,"aria-required":l,"data-state":Yu(w),"data-disabled":d?"":void 0,disabled:d,value:m,...p,ref:y,onKeyDown:Mt(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:Mt(e.onClick,(e=>{x((e=>!!Wu(e)||!e)),b&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())}))}),b&&n(Ku,{control:g,bubbles:!v.current,name:r,value:m,checked:w,required:l,disabled:d,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!Wu(o)&&o})]})}));Vu.displayName=Ou;var Bu="CheckboxIndicator",Hu=c.forwardRef(((e,t)=>{const{__scopeCheckbox:a,forceMount:r,...i}=e,s=Uu(Bu,a);return n(Ta,{present:r||Wu(s.state)||!0===s.state,children:n(Ut.span,{"data-state":Yu(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})}));Hu.displayName=Bu;var Ku=c.forwardRef((({__scopeCheckbox:e,control:t,checked:a,bubbles:r=!0,defaultChecked:i,...s},o)=>{const l=c.useRef(null),d=Rt(l,o),m=du(a),u=la(t);c.useEffect((()=>{const e=l.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(m!==a&&n){const t=new Event("click",{bubbles:r});e.indeterminate=Wu(a),n.call(e,!Wu(a)&&a),e.dispatchEvent(t)}}),[m,a,r]);const h=c.useRef(!Wu(a)&&a);return n(Ut.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??h.current,...s,tabIndex:-1,ref:d,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function Wu(e){return"indeterminate"===e}function Yu(e){return Wu(e)?"indeterminate":e?"checked":"unchecked"}Ku.displayName="CheckboxBubbleInput";var Gu=Vu,Qu=Hu;const Xu=c.forwardRef((({className:e,...t},a)=>n(Gu,{ref:a,className:cr("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n(Qu,{className:cr("flex items-center justify-center text-current"),children:n(Ln,{className:"h-4 w-4"})})})));Xu.displayName=Gu.displayName;const Zu=(e=80)=>{const{hash:t,pathname:a}=Q();p((()=>{if(!t)return void window.scrollTo({top:0,behavior:"smooth"});const a=setTimeout((()=>{const a=document.getElementById(t.slice(1));if(a){const t=a.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:t,behavior:"smooth"})}}),100);return()=>clearTimeout(a)}),[t,a,e])},Ju=we.object({firstName:we.string().min(2,"First name is required"),lastName:we.string().min(2,"Last name is required"),email:we.string().email("Please enter a valid email"),phone:we.string().min(10,"Please enter a valid phone number"),address:we.string().min(5,"Address is required"),city:we.string().min(2,"City is required"),state:we.string().min(2,"State is required"),zip:we.string().min(5,"ZIP code is required"),homeType:we.enum(["apartment","house","condo","other"]),rentOrOwn:we.enum(["rent","own"]),landlordPermission:we.boolean().optional().default(!1),landlordName:we.string().optional(),landlordPhone:we.string().optional(),adultsInHome:we.string(),childrenInHome:we.string(),hasOtherPets:we.enum(["yes","no"]),otherPetsDetails:we.string().optional(),previousPetExperience:we.string(),veterinarianInfo:we.string().optional(),whyAdopt:we.string().min(10,"Please tell us why you want to adopt"),primaryCaregiver:we.string(),hoursAlone:we.string(),willingToTrain:we.boolean(),keepUpdated:we.boolean(),returnPolicy:we.boolean().refine((e=>!0===e),{message:"You must agree to the return policy"}),agreeToTerms:we.boolean().refine((e=>!0===e),{message:"You must agree to the terms and conditions"}),specificCat:we.string().optional(),catId:we.string().optional()}).refine((e=>!("rent"===e.rentOrOwn&&!e.landlordPermission)),{message:"If you're renting, you must confirm landlord permission",path:["landlordPermission"]}),eh=()=>{Zu();const{user:e}=At(),[t,a]=h(!1),[r]=ee(),i=Z(),{toast:o}=xr(),l=r.get("catId"),c=r.get("catName"),d=ve({resolver:be(Ju),defaultValues:{firstName:"",lastName:"",email:(null==e?void 0:e.email)||"",phone:"",address:"",city:"",state:"",zip:"",homeType:"house",rentOrOwn:"own",landlordPermission:!1,landlordName:"",landlordPhone:"",adultsInHome:"1",childrenInHome:"0",hasOtherPets:"no",otherPetsDetails:"",previousPetExperience:"",veterinarianInfo:"",whyAdopt:"",primaryCaregiver:"",hoursAlone:"",willingToTrain:!0,keepUpdated:!0,returnPolicy:!1,agreeToTerms:!1,specificCat:c||"",catId:l||""}}),m=d.watch("rentOrOwn"),u=d.watch("hasOtherPets");p((()=>{if(c){d.setValue("specificCat",c);d.getValues("whyAdopt")||d.setValue("whyAdopt",`I'm interested in adopting ${c}...`)}l&&d.setValue("catId",l)}),[c,l,d]);return s(jc,{children:[n($c,{title:"Adoption Application | Meow Rescue",description:"Apply to adopt a cat from Meow Rescue. Complete our application form to begin the adoption process."}),n(id,{title:"Adoption Application",subtitle:"Find your perfect feline companion"}),n("div",{className:"container mx-auto py-8 px-4 md:px-6 max-w-4xl",children:s(wm,{className:"border shadow-sm",children:[s(xm,{children:[n(Nm,{children:"Adoption Application"}),n(Cm,{children:"Please complete all fields below. This information helps us find the perfect match for both you and our cats."})]}),n(_m,{children:n(Jm,{...d,children:s("form",{onSubmit:d.handleSubmit((async t=>{a(!0);try{const{error:a}=await xt().from("applications").insert({applicant_id:null==e?void 0:e.id,application_type:"adoption",status:"pending",form_data:t,cat_id:t.catId||null});if(a)throw a;o({title:"Application Submitted",description:"Your adoption application has been received. We will contact you soon!"}),i("/thank-you-adoption")}catch(r){console.error("Error submitting application:",r),o({title:"Submission Failed",description:r.message||"There was a problem submitting your application. Please try again.",variant:"destructive"})}finally{a(!1)}})),className:"space-y-6",children:[s("div",{className:"space-y-4",children:[n("h3",{className:"text-lg font-medium",children:"Personal Information"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:d.control,name:"firstName",render:({field:e})=>s(nu,{children:[n(iu,{children:"First Name*"}),n(su,{children:n(od,{placeholder:"Enter your first name",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"lastName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Last Name*"}),n(su,{children:n(od,{placeholder:"Enter your last name",...e})}),n(lu,{})]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:d.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{children:"Email*"}),n(su,{children:n(od,{placeholder:"Enter your email address",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"phone",render:({field:e})=>s(nu,{children:[n(iu,{children:"Phone Number*"}),n(su,{children:n(od,{placeholder:"Enter your phone number",...e})}),n(lu,{})]})})]}),n(tu,{control:d.control,name:"address",render:({field:e})=>s(nu,{children:[n(iu,{children:"Street Address*"}),n(su,{children:n(od,{placeholder:"Enter your street address",...e})}),n(lu,{})]})}),s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n(tu,{control:d.control,name:"city",render:({field:e})=>s(nu,{children:[n(iu,{children:"City*"}),n(su,{children:n(od,{placeholder:"City",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"state",render:({field:e})=>s(nu,{children:[n(iu,{children:"State*"}),n(su,{children:n(od,{placeholder:"State",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"zip",render:({field:e})=>s(nu,{className:"md:col-span-2",children:[n(iu,{children:"ZIP Code*"}),n(su,{children:n(od,{placeholder:"ZIP Code",...e})}),n(lu,{})]})})]})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Housing Information"}),n(tu,{control:d.control,name:"homeType",render:({field:e})=>s(nu,{children:[n(iu,{children:"Type of Home*"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1 sm:flex-row sm:space-x-4 sm:space-y-0",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"house"})}),n(iu,{className:"font-normal",children:"House"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"apartment"})}),n(iu,{className:"font-normal",children:"Apartment"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"condo"})}),n(iu,{className:"font-normal",children:"Condo"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"other"})}),n(iu,{className:"font-normal",children:"Other"})]})]})}),n(lu,{})]})}),n(tu,{control:d.control,name:"rentOrOwn",render:({field:e})=>s(nu,{children:[n(iu,{children:"Do you rent or own your home?*"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1 sm:flex-row sm:space-x-4 sm:space-y-0",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"own"})}),n(iu,{className:"font-normal",children:"Own"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"rent"})}),n(iu,{className:"font-normal",children:"Rent"})]})]})}),n(lu,{})]})}),"rent"===m&&s("div",{className:"space-y-4 pl-4 border-l-2 border-gray-200",children:[n(tu,{control:d.control,name:"landlordPermission",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n("div",{className:"space-y-1 leading-none",children:n(iu,{children:"I confirm I have permission from my landlord to have a cat*"})}),n(lu,{})]})}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:d.control,name:"landlordName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Landlord/Property Manager Name"}),n(su,{children:n(od,{placeholder:"Enter name",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"landlordPhone",render:({field:e})=>s(nu,{children:[n(iu,{children:"Landlord/Property Manager Phone"}),n(su,{children:n(od,{placeholder:"Enter phone number",...e})}),n(lu,{})]})})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:d.control,name:"adultsInHome",render:({field:e})=>s(nu,{children:[n(iu,{children:"Number of Adults in Home*"}),n(su,{children:n(od,{placeholder:"Enter number",type:"number",min:"1",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"childrenInHome",render:({field:e})=>s(nu,{children:[n(iu,{children:"Number of Children in Home*"}),n(su,{children:n(od,{placeholder:"Enter number",type:"number",min:"0",...e})}),n(lu,{})]})})]})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Pet Experience"}),n(tu,{control:d.control,name:"hasOtherPets",render:({field:e})=>s(nu,{children:[n(iu,{children:"Do you have other pets?*"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1 sm:flex-row sm:space-x-4 sm:space-y-0",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"yes"})}),n(iu,{className:"font-normal",children:"Yes"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"no"})}),n(iu,{className:"font-normal",children:"No"})]})]})}),n(lu,{})]})}),"yes"===u&&n(tu,{control:d.control,name:"otherPetsDetails",render:({field:e})=>s(nu,{children:[n(iu,{children:"Please list all other pets in your home*"}),n(ou,{children:"Include species, breed, age, gender, and if they are spayed/neutered"}),n(su,{children:n(cu,{placeholder:"Example: Dog, Lab mix, 5 years, female, spayed",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"previousPetExperience",render:({field:e})=>s(nu,{children:[n(iu,{children:"Previous Pet Experience*"}),n(ou,{children:"Tell us about your experience with cats or other pets"}),n(su,{children:n(cu,{placeholder:"Describe any past experiences with pets, including how long you've had them and what happened to them.",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"veterinarianInfo",render:({field:e})=>s(nu,{children:[n(iu,{children:"Current Veterinarian Information"}),n(ou,{children:"Name, clinic, and phone number"}),n(su,{children:n(cu,{placeholder:"If you have a current veterinarian, please provide their information.",...e})}),n(lu,{})]})})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Adoption Details"}),c&&n(tu,{control:d.control,name:"specificCat",render:({field:e})=>s(nu,{children:[n(iu,{children:"Cat You're Interested In"}),n(su,{children:n(od,{...e,readOnly:!0,className:"bg-gray-50"})}),n(lu,{})]})}),n(tu,{control:d.control,name:"whyAdopt",render:({field:e})=>s(nu,{children:[n(iu,{children:"Why do you want to adopt a cat?*"}),n(su,{children:n(cu,{placeholder:"Please tell us why you want to adopt a cat and what you're looking for in a feline companion.",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"primaryCaregiver",render:({field:e})=>s(nu,{children:[n(iu,{children:"Who will be the primary caregiver for the cat?*"}),n(su,{children:n(od,{placeholder:"Enter name(s)",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"hoursAlone",render:({field:e})=>s(nu,{children:[n(iu,{children:"How many hours will the cat be left alone each day?*"}),n(su,{children:n(od,{placeholder:"Enter number of hours",...e})}),n(lu,{})]})}),n(tu,{control:d.control,name:"willingToTrain",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n("div",{className:"space-y-1 leading-none",children:n(iu,{children:"I'm willing to invest time in training if needed"})}),n(lu,{})]})}),n(tu,{control:d.control,name:"keepUpdated",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n("div",{className:"space-y-1 leading-none",children:n(iu,{children:"I'm willing to provide updates on my adopted cat"})}),n(lu,{})]})})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Agreements"}),n(tu,{control:d.control,name:"returnPolicy",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md bg-gray-50",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"I agree that if I can no longer keep the cat, I will return it to Meow Rescue*"}),n(ou,{children:"We require that all adopted cats be returned to us if you can no longer keep them, rather than being rehomed elsewhere or surrendered to another shelter."})]}),n(lu,{})]})}),n(tu,{control:d.control,name:"agreeToTerms",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"I agree to the terms and conditions of adoption*"}),n(ou,{children:"By checking this box, I certify that the information provided is true and accurate. I understand that Meow Rescue has the right to deny any application. I agree to provide proper care, including veterinary care, food, water, shelter, and companionship for any cat I adopt."})]}),n(lu,{})]})})]}),n(Ds,{type:"submit",className:"w-full",disabled:t,children:t?"Submitting...":"Submit Application"})]})})})]})})]})};var th=c.forwardRef(((e,t)=>{const{ratio:a=1,style:r,...i}=e;return n("div",{style:{position:"relative",width:"100%",paddingBottom:100/a+"%"},"data-radix-aspect-ratio-wrapper":"",children:n(Ut.div,{...i,ref:t,style:{...r,position:"absolute",top:0,right:0,bottom:0,left:0}})})}));th.displayName="AspectRatio";const ah=th,rh=()=>{const e=Z();E();const{data:t,isLoading:a,isError:r,refetch:i}=S({queryKey:["blogPosts"],queryFn:async()=>{try{const{data:e,error:t}=await xt().from("blog_posts").select("*").eq("is_published",!0).order("is_featured",{ascending:!1}).order("published_at",{ascending:!1});if(t)throw t;return e||[]}catch(e){return console.error("Error fetching blog posts:",e),[]}},retry:2,retryDelay:1e3});p((()=>{const e=xt().channel("blog-posts-updates").on("postgres_changes",{event:"*",schema:"public",table:"blog_posts"},(e=>{console.log("Blog post update received:",e),i()})).subscribe();return()=>{e.unsubscribe()}}),[i]);const o=t=>{e(`/blog/${t}`)},l={"@context":"https://schema.org","@type":"CollectionPage",mainEntity:{"@type":"ItemList",itemListElement:t?t.map(((e,t)=>({"@type":"ListItem",position:t+1,item:{"@type":"BlogPosting",headline:e.title,url:`https://meowrescue.org/blog/${e.slug}`,datePublished:e.published_at,dateModified:e.updated_at||e.published_at,image:e.featured_image_url||"https://meowrescue.org/images/meow-rescue-logo.jpg",author:{"@type":"Organization",name:"Meow Rescue"}}}))):[]}},c=e=>{const t=e.replace(/<[^>]*>/g,"").split(/\s+/).length;return Math.ceil(t/200)},d=(null==t?void 0:t.find((e=>e.is_featured)))||null,m=d?(null==t?void 0:t.filter((e=>e.id!==d.id)))||[]:t||[];return s(jc,{children:[n($c,{title:"Blog | Meow Rescue",description:"Read the latest news, updates, and stories from Meow Rescue - a home-based cat rescue in Pasco County, Florida.",type:"blog",canonicalUrl:"/blog",structuredData:l,keywords:"cat rescue blog, cat adoption stories, rescue cats, feline care, cat foster stories, meow rescue"}),n(id,{title:"Our Stories",subtitle:"Tales of rescue, recovery, and finding forever homes"}),n("div",{className:"bg-white py-16",children:s("div",{className:"container mx-auto px-4",children:[n("div",{className:"max-w-xl mx-auto mb-12 relative",children:s("div",{className:"relative flex items-center",children:[n($i,{className:"absolute left-4 h-5 w-5 text-gray-400"}),n("input",{type:"text",placeholder:"Search articles...",className:"w-full pl-12 pr-4 py-3 rounded-full border border-gray-200 focus:border-meow-primary focus:ring focus:ring-meow-primary/20 transition-all shadow-sm"})]})}),a?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):r?s("div",{className:"text-center py-12",children:[n("p",{className:"text-lg text-red-500 mb-4",children:"We encountered an error loading the blog posts."}),n(Ds,{variant:"outline",onClick:()=>window.location.reload(),children:"Try Again"})]}):t&&t.length>0?s("div",{children:[d&&s("div",{className:"mb-20",children:[s("div",{className:"mb-6",children:[n("h2",{className:"text-2xl font-bold text-gray-900",children:"Featured Story"}),n("div",{className:"h-1 bg-meow-secondary w-20 mt-3"})]}),s("div",{className:"grid md:grid-cols-2 gap-8 bg-gray-50 rounded-2xl overflow-hidden shadow-md transition-transform hover:shadow-lg cursor-pointer",onClick:()=>o(d.slug),children:[n("div",{className:"relative h-64 md:h-full",children:d.featured_image_url?n("img",{src:d.featured_image_url,alt:d.title,className:"w-full h-full object-cover"}):n("div",{className:"w-full h-full bg-meow-primary/20 flex items-center justify-center",children:n("span",{className:"text-meow-primary font-semibold",children:"Meow Rescue"})})}),s("div",{className:"p-8 flex flex-col",children:[s("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[n(An,{className:"h-4 w-4 mr-2"}),n("time",{dateTime:d.published_at,children:new Date(d.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),n("span",{className:"mx-2",children:""}),n(Yn,{className:"h-4 w-4 mr-2"}),s("span",{children:[c(d.content)," min read"]})]}),n("h3",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4 hover:text-meow-primary transition-colors",children:d.title}),s("p",{className:"text-gray-600 mb-6 flex-grow",children:[d.content.replace(/<[^>]*>/g,"").substring(0,200),"..."]}),s(Ds,{className:"self-start group bg-meow-primary hover:bg-meow-primary/90 flex items-center",children:["Read Full Story",n(On,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]})]}),s("div",{children:[s("div",{className:"mb-8",children:[n("h2",{className:"text-2xl font-bold text-gray-900",children:d?"All Stories":"Stories"}),n("div",{className:"h-1 bg-meow-secondary w-20 mt-3"})]}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map((e=>s(wm,{className:"h-full flex flex-col overflow-hidden bg-white border border-gray-100 rounded-xl shadow-sm transition-all hover:shadow-md hover:-translate-y-1 cursor-pointer",onClick:()=>o(e.slug),children:[n("div",{className:"relative",children:n(ah,{ratio:16/9,children:e.featured_image_url?n("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):n("div",{className:"w-full h-full bg-meow-primary/10 flex items-center justify-center",children:n("span",{className:"text-meow-primary",children:"Meow Rescue"})})})}),s(xm,{className:"p-6 pb-3",children:[n(Nm,{className:"text-xl text-gray-900 line-clamp-2 group-hover:text-meow-primary transition-colors",children:e.title}),s(Cm,{className:"flex items-center text-sm mt-2",children:[n(An,{className:"h-4 w-4 mr-2"}),n("time",{dateTime:e.published_at,children:new Date(e.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),n("span",{className:"mx-2",children:""}),n(Yn,{className:"h-4 w-4 mr-2"}),s("span",{children:[c(e.content)," min read"]})]})]}),n(_m,{className:"px-6 py-2 flex-grow",children:s("p",{className:"text-gray-600 line-clamp-3",children:[e.content.replace(/<[^>]*>/g,"").substring(0,150),"..."]})}),n(km,{className:"p-6 pt-3",children:n(Ds,{variant:"ghost",className:"group text-meow-primary hover:text-meow-primary/90 hover:bg-meow-primary/5 p-0",asChild:!0,children:s("div",{className:"flex items-center",children:["Continue Reading",n(On,{className:"ml-1 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})})]},e.id)))})]})]}):n("div",{className:"text-center py-16 bg-gray-50 rounded-2xl",children:s("div",{className:"max-w-md mx-auto",children:[n("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"No posts yet"}),n("p",{className:"text-gray-600 mb-8",children:"We're working on creating amazing content. Check back soon for updates!"}),n(Ds,{onClick:()=>e("/"),className:"bg-meow-primary hover:bg-meow-primary/90",children:"Back to Home"})]})})]})})]})},nh=()=>{const e=Q();return p((()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)}),[e.pathname]),n(jc,{children:n("div",{className:"min-h-[70vh] flex flex-col items-center justify-center py-12 px-4",children:s("div",{className:"max-w-md w-full text-center",children:[n("div",{className:"mb-6",children:n("svg",{className:"mx-auto h-24 w-24 text-meow-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n("h1",{className:"text-4xl md:text-5xl font-bold text-meow-primary mb-4",children:"404"}),n("p",{className:"text-xl text-gray-600 mb-8",children:"Oops! We can't seem to find the page you're looking for."}),n("p",{className:"text-gray-600 mb-8",children:"The page might have been moved, deleted, or maybe never existed. Let's get you back on track."}),s("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[n(Ds,{className:"bg-meow-primary hover:bg-meow-primary/90",asChild:!0,children:n(X,{to:"/",children:"Return Home"})}),n(Ds,{variant:"outline",className:"border-meow-primary text-meow-primary hover:bg-meow-primary/10",asChild:!0,children:n(X,{to:"/cats",children:"See Our Cats"})})]})]})})})},ih=()=>{const{slug:e}=J(),t=Z(),[a,r]=h([]);E();const{data:o,isLoading:l,error:c,refetch:d}=S({queryKey:["blogPost",e],queryFn:async()=>{const t=xt(),{data:a,error:r}=await t.from("blog_posts").select("*").eq("slug",e).eq("is_published",!0).single();if(r){if("PGRST116"===r.code)return null;throw r}return a}});if(p((()=>{o&&(async()=>{if(o){const e=xt(),{data:t}=await e.from("blog_posts").select("*").eq("is_published",!0).neq("id",o.id).limit(3);r(t||[])}})()}),[o]),p((()=>{if(!(null==o?void 0:o.id))return;const e=xt().channel(`blog-post-${o.id}-updates`).on("postgres_changes",{event:"*",schema:"public",table:"blog_posts",filter:`id=eq.${o.id}`},(e=>{console.log("Blog post update received:",e),d()})).subscribe();return()=>{e.unsubscribe()}}),[null==o?void 0:o.id,d]),!l&&!o&&!c)return n(nh,{});const m=o?{"@context":"https://schema.org","@type":"BlogPosting",headline:o.title,image:o.featured_image_url||"https://meowrescue.org/images/meow-rescue-logo.jpg",datePublished:o.published_at,dateModified:o.updated_at||o.published_at,author:{"@type":"Organization",name:"Meow Rescue"},publisher:{"@type":"Organization",name:"Meow Rescue",logo:{"@type":"ImageObject",url:"https://meowrescue.org/images/meow-rescue-logo.jpg"}},description:o.content.substring(0,160).replace(/<[^>]*>/g,""),mainEntityOfPage:{"@type":"WebPage","@id":`https://meowrescue.org/blog/${o.slug}`}}:null,u=e=>{const t=window.location.href,a=(null==o?void 0:o.title)||"Blog post";switch(e){case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(a)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}`,"_blank");break;case"email":window.open(`mailto:?subject=${encodeURIComponent(a)}&body=${encodeURIComponent(t)}`,"_blank");break;default:navigator.clipboard.writeText(t),alert("Link copied to clipboard")}};return s(jc,{children:[n($c,{title:o?`${o.title} | Meow Rescue Blog`:"Blog Post | Meow Rescue",description:o?o.content.substring(0,160).replace(/<[^>]*>/g,""):"Read our latest blog post",image:null==o?void 0:o.featured_image_url,type:"article",publishedTime:null==o?void 0:o.published_at,modifiedTime:(null==o?void 0:o.updated_at)||(null==o?void 0:o.published_at),canonicalUrl:o?`/blog/${o.slug}`:void 0,structuredData:m,keywords:(null==o?void 0:o.keywords)||"cat rescue, cat adoption, feline care, meow rescue"}),l?n("div",{className:"min-h-[50vh] flex items-center justify-center",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):c?n("div",{className:"min-h-[50vh] flex items-center justify-center",children:s("div",{className:"text-center max-w-md",children:[n("p",{className:"text-red-500 mb-4",children:"Error loading blog post. Please try again later."}),n(Ds,{variant:"outline",onClick:()=>t("/blog"),children:"Return to Blog"})]})}):o?s(i,{children:[n("div",{className:"fixed top-24 left-4 z-30 md:block hidden",children:s(Ds,{variant:"outline",size:"sm",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm",onClick:()=>t("/blog"),children:[n(qn,{className:"h-4 w-4 mr-1"}),"Back"]})}),s("div",{className:"fixed top-36 left-4 z-30 space-y-2 md:flex hidden flex-col",children:[n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>u("facebook"),children:n(ei,{className:"h-4 w-4 text-blue-600"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>u("twitter"),children:n(Ji,{className:"h-4 w-4 text-sky-500"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>u("linkedin"),children:n(fi,{className:"h-4 w-4 text-blue-700"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm hover:bg-white border border-gray-200 rounded-full shadow-sm w-9 h-9 p-2",onClick:()=>u("email"),children:n(xi,{className:"h-4 w-4 text-gray-600"})})]}),s("div",{className:"relative bg-meow-primary/80",children:[o.featured_image_url&&s("div",{className:"absolute inset-0 z-0",children:[n("div",{className:"absolute inset-0 bg-gradient-to-b from-meow-primary/90 to-meow-primary/60 mix-blend-multiply z-10"}),n("img",{src:o.featured_image_url,alt:o.title,className:"w-full h-full object-cover"})]}),s("div",{className:"container mx-auto px-4 py-16 md:py-24 relative z-10",children:[n("div",{className:"mb-6 md:hidden",children:s(Ds,{variant:"outline",onClick:()=>t("/blog"),className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white border-white/30",children:[n(vn,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),s("div",{className:"max-w-3xl mx-auto text-center",children:[s("div",{className:"flex justify-center items-center space-x-3 text-white/80 mb-4",children:[s("div",{className:"flex items-center",children:[n(An,{className:"h-4 w-4 mr-2"}),n("time",{dateTime:o.published_at,children:new Date(o.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),n("span",{className:"text-white/60",children:""}),s("div",{className:"flex items-center",children:[n(Yn,{className:"h-4 w-4 mr-2"}),s("span",{children:[(e=>{const t=(null==e?void 0:e.replace(/<[^>]*>/g,"").split(/\s+/).length)||0;return Math.ceil(t/200)})(o.content)," min read"]})]})]}),n("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-6 leading-tight",children:o.title}),s("div",{className:"flex justify-center space-x-3 md:hidden",children:[n(Ds,{variant:"outline",size:"icon",className:"bg-white/20 hover:bg-white/30 border-white/30 rounded-full w-9 h-9 p-2",onClick:()=>u("facebook"),children:n(ei,{className:"h-4 w-4 text-white"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/20 hover:bg-white/30 border-white/30 rounded-full w-9 h-9 p-2",onClick:()=>u("twitter"),children:n(Ji,{className:"h-4 w-4 text-white"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/20 hover:bg-white/30 border-white/30 rounded-full w-9 h-9 p-2",onClick:()=>u("linkedin"),children:n(fi,{className:"h-4 w-4 text-white"})}),n(Ds,{variant:"outline",size:"icon",className:"bg-white/20 hover:bg-white/30 border-white/30 rounded-full w-9 h-9 p-2",onClick:()=>u("copy"),children:n(Vi,{className:"h-4 w-4 text-white"})})]})]})]})]}),n("div",{className:"py-12",children:n("div",{className:"container mx-auto px-4",children:s("div",{className:"max-w-3xl mx-auto",children:[n(wm,{className:"border-0 shadow-none",children:n(_m,{className:"p-0",children:n("article",{className:"prose prose-lg md:prose-xl max-w-none prose-headings:text-gray-900 prose-headings:font-semibold prose-p:text-gray-700 prose-a:text-meow-primary prose-a:no-underline hover:prose-a:underline prose-img:rounded-lg",dangerouslySetInnerHTML:{__html:o.content}})})}),o.keywords&&s("div",{className:"mt-12 pt-8 border-t border-gray-100",children:[n("h3",{className:"text-lg font-semibold mb-3",children:"Related Topics"}),n("div",{className:"flex flex-wrap gap-2",children:o.keywords.split(",").map(((e,t)=>n("span",{className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 transition-colors rounded-full text-sm text-gray-700",children:e.trim()},t)))})]})]})})}),a.length>0&&n("div",{className:"bg-gray-50 py-16",children:n("div",{className:"container mx-auto px-4",children:s("div",{className:"max-w-6xl mx-auto",children:[n("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Continue Reading"}),n("div",{className:"grid md:grid-cols-3 gap-8",children:a.map((e=>s(wm,{className:"h-full flex flex-col overflow-hidden border border-gray-100 rounded-xl shadow-sm transition-all hover:shadow-md hover:-translate-y-1 cursor-pointer",onClick:()=>{t(`/blog/${e.slug}`),window.scrollTo(0,0)},children:[n("div",{className:"relative",children:n(ah,{ratio:16/9,children:e.featured_image_url?n("img",{src:e.featured_image_url,alt:e.title,className:"w-full h-full object-cover",loading:"lazy"}):n("div",{className:"w-full h-full bg-meow-primary/10 flex items-center justify-center",children:n("span",{className:"text-meow-primary",children:"Meow Rescue"})})})}),s(_m,{className:"p-5 flex-grow flex flex-col",children:[s("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[n(An,{className:"h-3 w-3 mr-1"}),n("time",{dateTime:e.published_at,children:new Date(e.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),n("h3",{className:"text-lg font-semibold mb-3 line-clamp-2 hover:text-meow-primary transition-colors",children:e.title}),s("p",{className:"text-sm text-gray-600 line-clamp-3 mb-3 flex-grow",children:[e.content.replace(/<[^>]*>/g,"").substring(0,120),"..."]}),s(Ds,{variant:"ghost",className:"justify-start p-0 h-auto text-meow-primary hover:text-meow-primary/90 hover:bg-transparent group",children:["Read Article ",n(On,{className:"ml-1 h-4 w-4 transition-transform group-hover:translate-x-1"})]})]})]},e.id)))}),n("div",{className:"text-center mt-12",children:n(Ds,{variant:"outline",onClick:()=>t("/blog"),className:"border-meow-primary text-meow-primary hover:bg-meow-primary/5",children:"View All Articles"})})]})})})]}):null]})},sh=({event:e})=>s(wm,{className:"overflow-hidden flex flex-col h-full",children:[n("div",{className:"h-48 overflow-hidden",children:n("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover transition-transform hover:scale-105 duration-300"})}),s(_m,{className:"flex-grow p-5",children:[n("h3",{className:"text-xl font-bold mb-2 text-meow-primary",children:e.title}),s("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s("div",{className:"flex items-center",children:[n(An,{className:"h-4 w-4 mr-2"}),n("span",{children:e.date})]}),s("div",{className:"flex items-center",children:[n(Yn,{className:"h-4 w-4 mr-2"}),n("span",{children:e.time})]}),s("div",{className:"flex items-center",children:[n(Ni,{className:"h-4 w-4 mr-2"}),n("span",{children:e.location})]})]}),n("p",{className:"text-gray-600 line-clamp-3",children:e.description})]}),n(km,{className:"px-5 pb-5 pt-0",children:n(Ds,{asChild:!0,variant:"meowOutline",className:"w-full",children:n(X,{to:`/events/${e.id}`,children:"Event Details"})})})]}),oh=()=>{const[e,t]=h([]),[a,r]=h(!0),[i,o]=h(null);Zu(),p((()=>{l()}),[]);const l=async()=>{r(!0);try{const{data:e,error:a}=await supabase.from("events").select("*").order("date_start",{ascending:!0});if(a)throw a;if(!e||0===e.length)return t([]),void r(!1);const n=e.map((e=>({id:e.id,title:e.title,date:new Date(e.date_start).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:`${new Date(e.date_start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})} - ${new Date(e.date_end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}`,location:e.location,description:e.description,imageUrl:e.image_url||"https://images.unsplash.com/photo-1570304816841-906a17d7b067?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"})));t(n)}catch(e){console.error("Error fetching events:",e),o(e.message)}finally{r(!1)}},c=async()=>{r(!0);try{const{data:e,error:a}=await supabase.from("events").select("*").order("date_start",{ascending:!0});if(a)throw a;if(!e||0===e.length)return t([]),void r(!1);const n=e.map((e=>({id:e.id,title:e.title,date:new Date(e.date_start).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:`${new Date(e.date_start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})} - ${new Date(e.date_end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}`,location:e.location,description:e.description,imageUrl:e.image_url||"https://images.unsplash.com/photo-1570304816841-906a17d7b067?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"})));t(n)}catch(e){console.error("Error refetching events:",e),o(e.message)}finally{r(!1)}};return p((()=>{const e=supabase.channel("events-updates").on("postgres_changes",{event:"*",schema:"public",table:"events"},(e=>{console.log("Event update received:",e),c()})).subscribe();return()=>{e.unsubscribe()}}),[c]),s(jc,{children:[n(id,{title:"Upcoming Events",subtitle:"Join us at our upcoming events and help support our mission"}),s("div",{className:"container mx-auto px-4 py-12 pt-24",id:"events-content",children:[a?n("div",{className:"flex justify-center py-12",children:n(vi,{className:"h-12 w-12 animate-spin text-meow-primary"})}):i?n("div",{className:"text-center py-12",children:s("p",{className:"text-red-500",children:["Error: ",i]})}):e.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:e.map((e=>n(sh,{event:e},e.id)))}):n("div",{className:"text-center py-12",children:n("p",{className:"text-xl text-gray-700",children:"No upcoming events at the moment. Check back soon!"})}),s("div",{className:"mt-16 max-w-3xl mx-auto text-center",children:[n("h2",{className:"text-2xl font-bold text-meow-primary mb-4",children:"Host an Event for Meow Rescue"}),n("p",{className:"text-gray-700 mb-6",children:"Interested in hosting a fundraiser, adoption event, or awareness event for Meow Rescue? We appreciate community support and would love to work with you!"}),n(Ds,{asChild:!0,variant:"meow",className:"inline-flex items-center",children:n(X,{to:"/contact",children:"Contact Us to Discuss"})})]})]})]})},lh=({event:e})=>{const{id:t}=J(),{data:a}=S({queryKey:["event",t],queryFn:async()=>{if(!t)throw new Error("Event ID is required");const e=xt(),{data:a,error:r}=await e.from("events").select("*").eq("id",t).single();if(r)throw r;return a},initialData:e,staleTime:3e5});p((()=>{if(!t)return;const e=xt().channel(`event-${t}-updates`).on("postgres_changes",{event:"*",schema:"public",table:"events",filter:`id=eq.${t}`},(e=>{console.log("Event update received:",e),window.location.reload()})).subscribe();return()=>{e.unsubscribe()}}),[t]);if(!a)return n(jc,{children:n("div",{className:"flex justify-center items-center h-screen",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})})});const r={...a,formattedDate:(i=a.date_start,i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""),formattedTime:((e,t)=>{if(!e||!t)return"";const a=new Date(e),r=new Date(t);return`${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})} - ${r.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric"})}`})(a.date_start,a.date_end)};var i;return s(jc,{children:[n($c,{title:`${r.title} | Meow Rescue Events`,description:r.description,structuredData:{"@context":"https://schema.org","@type":"Event",name:r.title,description:r.description,image:r.image_url,startDate:r.date_start,endDate:r.date_end,location:{"@type":"Place",name:r.location,address:r.location},organizer:{"@type":"Organization",name:"Meow Rescue",url:"https://meowrescue.org"}}}),s("div",{className:"container mx-auto px-4 pt-24 pb-12",children:[s(X,{to:"/events",className:"inline-flex items-center text-meow-primary hover:underline mb-6",children:[n(vn,{className:"h-4 w-4 mr-2"}),"Back to all events"]}),s("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s("div",{className:"lg:col-span-2",children:[n("img",{src:r.image_url,alt:r.title,className:"w-full h-[300px] md:h-[400px] object-cover rounded-lg mb-6"}),n("h1",{className:"text-3xl font-bold text-meow-primary mb-4",children:r.title}),s("div",{className:"flex flex-wrap gap-4 mb-6",children:[s("div",{className:"flex items-center text-gray-600",children:[n(An,{className:"h-5 w-5 mr-2 text-meow-primary"}),n("span",{children:r.formattedDate})]}),s("div",{className:"flex items-center text-gray-600",children:[n(Yn,{className:"h-5 w-5 mr-2 text-meow-primary"}),n("span",{children:r.formattedTime})]}),s("div",{className:"flex items-center text-gray-600",children:[n(Ni,{className:"h-5 w-5 mr-2 text-meow-primary"}),n("span",{children:r.location})]})]}),s("div",{className:"prose max-w-none",children:[n("p",{className:"text-lg mb-4",children:r.description}),n("p",{children:r.long_description})]})]}),n("div",{className:"lg:col-span-1",children:s("div",{className:"bg-gray-50 rounded-lg p-6 sticky top-24",children:[n("h3",{className:"text-xl font-bold mb-4",children:"Event Information"}),s("div",{className:"space-y-4 mb-6",children:[s("div",{children:[n("p",{className:"font-medium",children:"Date:"}),n("p",{children:r.formattedDate})]}),s("div",{children:[n("p",{className:"font-medium",children:"Time:"}),n("p",{children:r.formattedTime})]}),s("div",{children:[n("p",{className:"font-medium",children:"Location:"}),n("p",{children:r.location})]})]}),s("div",{className:"space-y-3",children:[n(Ds,{variant:"meow",className:"w-full",children:"Add to Calendar"}),n(Ds,{variant:"outline",className:"w-full",children:"Share Event"}),n(Ds,{asChild:!0,variant:"meowOutline",className:"w-full",children:n(X,{to:"/contact",children:"Contact Organizer"})})]})]})})]})]})]})},ch=({title:e,url:t,description:a})=>s("li",{className:"bg-gray-50 p-4 rounded",children:[s("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-meow-primary hover:underline flex items-center",children:[e,n(Xn,{size:14,className:"ml-1"})]}),n("p",{className:"text-gray-700 text-sm mt-1",children:a})]}),dh=()=>s("div",{children:[n("h2",{className:"text-2xl font-bold text-meow-primary mb-6 h-[32px] flex items-center",children:"Local Resources"}),s("div",{className:"space-y-6",children:[s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"Veterinary Care"}),s("ul",{className:"space-y-4",children:[n(ch,{title:"Pasco County Animal Services",url:"https://www.pascocountyfl.net/228/Animal-Services",description:"Low-cost spay/neuter services, vaccinations, and microchipping for Pasco County residents."}),n(ch,{title:"SPCA Suncoast",url:"https://spcasuncoast.org/",description:"Low-cost spay/neuter clinic and wellness services in New Port Richey."}),n(ch,{title:"Humane Society of Pasco County",url:"https://www.humanesocietyofpasco.org/",description:"Low-cost veterinary services and assistance programs."})]})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"Pet Food Assistance"}),s("ul",{className:"space-y-4",children:[n(ch,{title:"Pasco County Pet Food Pantry",url:"#",description:"Monthly pet food distribution for eligible Pasco County residents."}),n(ch,{title:"Metropolitan Ministries",url:"https://www.metromin.org/",description:"Offers pet food assistance as part of their family support programs."})]})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"Lost & Found Pets"}),s("ul",{className:"space-y-4",children:[n(ch,{title:"Pasco County Lost & Found Pets (Facebook Group)",url:"https://www.facebook.com/groups/pascolostfoundpets/",description:"Community group for reporting and finding lost pets in Pasco County."}),n(ch,{title:"Pasco County Animal Services - Lost Pets",url:"https://www.pascocountyfl.net/228/Animal-Services",description:"Check the county shelter for lost pets and report found animals."})]})]})]})]}),mh=({title:e,url:t,description:a})=>s("li",{className:"bg-gray-50 p-4 rounded",children:[s("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-meow-primary hover:underline flex items-center",children:[e,n(Xn,{size:14,className:"ml-1"})]}),n("p",{className:"text-gray-700 text-sm mt-1",children:a})]}),uh=()=>s("div",{children:[n("h2",{className:"text-2xl font-bold text-meow-primary mb-6 h-[32px] flex items-center",children:"Cat Care Guides"}),s("div",{className:"space-y-6",children:[s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"New Cat Owner Guides"}),s("ul",{className:"space-y-4",children:[n(mh,{title:"Bringing Your New Cat Home",url:"https://www.aspca.org/pet-care/cat-care/general-cat-care",description:"Tips for helping your new cat adjust to your home."}),n(mh,{title:"Essential Supplies for Your New Cat",url:"https://www.humanesociety.org/resources/shopping-list-new-cat-owners",description:"A shopping list of essentials for new cat owners."}),n(mh,{title:"Introducing Cats to Other Pets",url:"https://www.jacksongalaxy.com/blog/the-dos-and-donts-of-introducing-cats/",description:"How to safely introduce your new cat to existing pets."})]})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"Health & Wellness"}),s("ul",{className:"space-y-4",children:[n(mh,{title:"Common Cat Health Issues",url:"https://www.avma.org/resources/pet-owners/petcare/cat-care",description:"Information on common health issues in cats and when to see a vet."}),n(mh,{title:"Cat Nutrition Guide",url:"https://www.cornell.edu/video/feeding-your-cat",description:"Cornell University Feline Health Center's guide to proper cat nutrition."}),n(mh,{title:"Preventive Care Timeline",url:"https://www.aaha.org/your-pet/pet-owner-education/aaha-guidelines-for-pet-owners/life-stage-guidelines/",description:"Recommended schedule for vaccinations, check-ups, and preventive care."})]})]}),s("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n("h3",{className:"text-xl font-bold mb-4 text-meow-primary",children:"Behavior & Training"}),s("ul",{className:"space-y-4",children:[n(mh,{title:"Solving Litter Box Issues",url:"https://www.jacksongalaxy.com/blog/litter-box-avoidance-101/",description:"Troubleshooting common litter box problems."}),n(mh,{title:"Understanding Cat Body Language",url:"https://www.humanesociety.org/resources/cat-chat-understanding-feline-body-language",description:"Guide to understanding what your cat is trying to tell you."}),n(mh,{title:"Solving Scratching Problems",url:"https://www.humanesociety.org/resources/cats-destructive-scratching",description:"How to redirect scratching behavior to appropriate surfaces."})]})]})]})]}),hh=()=>s("div",{className:"bg-gray-50 p-8 rounded-lg mb-16",children:[n("h2",{className:"text-2xl font-bold text-meow-primary mb-6 text-center",children:"Emergency Resources"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s("div",{children:[n("h3",{className:"text-lg font-semibold mb-3 text-meow-primary",children:"Emergency Veterinary Clinics"}),s("ul",{className:"space-y-4",children:[s("li",{className:"bg-white p-4 rounded shadow-sm",children:[n("strong",{className:"block text-meow-primary",children:"BluePearl Pet Hospital"}),n("p",{className:"text-sm text-gray-600",children:"3000 Busch Lake Blvd, Tampa, FL 33614"}),n("p",{className:"text-sm text-gray-600",children:"(813) 933-8944"}),n("p",{className:"text-sm text-gray-600",children:"Open 24/7"})]}),s("li",{className:"bg-white p-4 rounded shadow-sm",children:[n("strong",{className:"block text-meow-primary",children:"Animal Emergency of Pasco"}),n("p",{className:"text-sm text-gray-600",children:"7121 State Road 54, New Port Richey, FL 34653"}),n("p",{className:"text-sm text-gray-600",children:"(727) 849-9999"}),n("p",{className:"text-sm text-gray-600",children:"Evenings, weekends, and holidays"})]})]})]}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-3 text-meow-primary",children:"Poison Control"}),s("ul",{className:"space-y-4",children:[s("li",{className:"bg-white p-4 rounded shadow-sm",children:[n("strong",{className:"block text-meow-primary",children:"ASPCA Animal Poison Control Center"}),n("p",{className:"text-sm text-gray-600",children:"(888) 426-4435"}),n("p",{className:"text-sm text-gray-600",children:"24/7 Emergency Hotline (fee may apply)"})]}),s("li",{className:"bg-white p-4 rounded shadow-sm",children:[n("strong",{className:"block text-meow-primary",children:"Pet Poison Helpline"}),n("p",{className:"text-sm text-gray-600",children:"(855) 764-7661"}),n("p",{className:"text-sm text-gray-600",children:"24/7 Emergency Hotline (fee may apply)"})]})]})]})]})]}),ph={"@context":"https://schema.org","@type":"WebPage",name:"Cat Care Resources",description:"Helpful information for cat owners and caregivers, including local resources and guides for pet care.",url:"https://meowrescue.org/resources",mainEntity:{"@type":"ItemList",itemListElement:[{"@type":"ListItem",position:1,name:"Veterinary Care Resources"},{"@type":"ListItem",position:2,name:"Pet Food Assistance"},{"@type":"ListItem",position:3,name:"New Cat Owner Guides"}]}},gh=()=>s(jc,{children:[n($c,{title:"Cat Care Resources | Meow Rescue",description:"Find helpful resources for cat owners including veterinary care, pet food assistance, new cat owner guides, and more.",keywords:"cat care, cat health, cat food, veterinary services, pet assistance, cat owner guide",canonicalUrl:"/resources",structuredData:ph}),n(id,{title:"Cat Care Resources",subtitle:"Helpful information for cat owners and caregivers"}),s("div",{className:"container mx-auto px-4 py-8 mt-2",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 mb-16",children:[n(dh,{}),n(uh,{})]}),n(hh,{}),s("div",{className:"text-center mb-8",children:[n("p",{className:"text-gray-700 max-w-3xl mx-auto mb-4",children:"Have a resource suggestion that would benefit our community? Please let us know!"}),n(Ds,{variant:"meow",asChild:!0,children:n(X,{to:"/contact",children:"Contact Us"})})]})]})]}),fh=we.object({name:we.string().min(2,{message:"Name must be at least 2 characters."}),email:we.string().email({message:"Please enter a valid email address."}),subject:we.string().min(2,{message:"Subject must be at least 2 characters."}),message:we.string().min(10,{message:"Message must be at least 10 characters."})});function yh(){const[e,t]=h(!1),{toast:a}=xr(),r=ve({resolver:be(fh),defaultValues:{name:"",email:"",subject:"",message:""}});return n(Jm,{...r,children:s("form",{onSubmit:r.handleSubmit((async e=>{t(!0);try{console.log("Submitting contact form with values:",e);const{data:t,error:n}=await supabase.from("contact_messages").insert([{name:e.name,email:e.email,subject:e.subject,message:e.message,status:"New",received_at:(new Date).toISOString()}]);if(n)throw console.error("Error submitting contact form:",n),n;console.log("Contact form submitted successfully:",t),a({title:"Message Sent",description:"Thank you for your message. We'll get back to you soon!"}),r.reset({name:"",email:"",subject:"",message:""})}catch(n){console.error("Error submitting contact form:",n),a({title:"Error",description:"There was a problem sending your message. Please try again later.",variant:"destructive"})}finally{t(!1)}})),className:"space-y-6","aria-label":"Contact form",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n(tu,{control:r.control,name:"name",render:({field:e})=>s(nu,{children:[n(iu,{className:"text-meow-dark",children:"Name"}),n(su,{children:n(od,{placeholder:"Your name",...e,className:"h-12","aria-required":"true","aria-invalid":!!r.formState.errors.name})}),n(lu,{})]})}),n(tu,{control:r.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{className:"text-meow-dark",children:"Email"}),n(su,{children:n(od,{placeholder:"Your email address",...e,className:"h-12",type:"email","aria-required":"true","aria-invalid":!!r.formState.errors.email})}),n(lu,{})]})})]}),n(tu,{control:r.control,name:"subject",render:({field:e})=>s(nu,{children:[n(iu,{className:"text-meow-dark",children:"Subject"}),n(su,{children:n(od,{placeholder:"Message subject",...e,className:"h-12","aria-required":"true","aria-invalid":!!r.formState.errors.subject})}),n(lu,{})]})}),n(tu,{control:r.control,name:"message",render:({field:e})=>s(nu,{children:[n(iu,{className:"text-meow-dark",children:"Message"}),n(su,{children:n(cu,{placeholder:"How can we help you?",...e,rows:6,className:"resize-none","aria-required":"true","aria-invalid":!!r.formState.errors.message})}),n(lu,{})]})}),n(Ds,{type:"submit",disabled:e,className:"w-full md:w-auto px-8 py-3 text-base font-medium bg-meow-primary hover:bg-meow-primary/90 text-white","aria-label":e?"Sending message...":"Send message",children:e?"Sending...":"Send Message"})]})})}const vh=()=>s(jc,{children:[n($c,{title:"Contact Us | Meow Rescue",description:"Get in touch with Meow Rescue. We're here to answer your questions about cat adoption, fostering, volunteering, and more.",canonicalUrl:"/contact",structuredData:{"@context":"https://schema.org","@type":"ContactPage",name:"Contact Meow Rescue",description:"Get in touch with Meow Rescue. We're here to answer your questions about cat adoption, fostering, volunteering, and more.",url:"https://meowrescue.org/contact",mainEntity:{"@type":"Organization",name:"Meow Rescue",telephone:"(727) 257-0037",email:"info@meowrescue.org",openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],opens:"09:00",closes:"17:00"},{"@type":"OpeningHoursSpecification",dayOfWeek:["Saturday"],opens:"10:00",closes:"16:00"}]}},keywords:"contact meow rescue, cat rescue contact, animal shelter contact, pet adoption contact, florida cat rescue"}),n(id,{title:"Get in Touch",subtitle:"Have questions about adoption, fostering, or ways to help? We'd love to hear from you!"}),s("div",{className:"relative",children:[n("div",{className:"absolute inset-0 bg-gradient-to-b from-meow-primary/5 to-transparent h-[500px] -z-10"}),n("div",{className:"container mx-auto px-4 py-8",children:s("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[n("div",{children:s("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[n("h2",{className:"text-2xl font-bold text-meow-primary mb-6",children:"Send Us a Message"}),n(yh,{})]})}),s("div",{className:"space-y-6 flex flex-col",children:[n(wm,{className:"overflow-hidden border-none shadow-sm bg-gradient-to-br from-meow-primary/5 to-white flex-grow",children:s(_m,{className:"p-8",children:[n("h3",{className:"text-2xl font-bold text-meow-primary mb-6",children:"Contact Information"}),s("div",{className:"space-y-6",children:[s("div",{className:"flex items-start gap-4",children:[n("div",{className:"p-3 rounded-xl bg-meow-primary/10",children:n(Ri,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("p",{className:"font-medium text-gray-900",children:"Call Us"}),n("a",{href:"tel:7272570037",className:"text-gray-600 hover:text-meow-primary transition-colors",children:"(727) 257-0037"})]})]}),s("div",{className:"flex items-start gap-4",children:[n("div",{className:"p-3 rounded-xl bg-meow-primary/10",children:n(xi,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("p",{className:"font-medium text-gray-900",children:"Email Us"}),n("a",{href:"mailto:info@meowrescue.org",className:"text-gray-600 hover:text-meow-primary transition-colors",children:"info@meowrescue.org"})]})]}),s("div",{className:"flex items-start gap-4",children:[n("div",{className:"p-3 rounded-xl bg-meow-primary/10",children:n(Yn,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("p",{className:"font-medium text-gray-900",children:"Hours"}),s("div",{className:"text-gray-600 mt-1 space-y-1",children:[n("p",{children:"Monday - Friday: 9AM - 5PM"}),n("p",{children:"Saturday: 10AM - 4PM"}),n("p",{children:"Sunday: Closed"})]})]})]})]})]})}),n(wm,{className:"overflow-hidden border-none shadow-sm",children:s(_m,{className:"p-8 bg-gradient-to-br from-meow-secondary/5 to-white",children:[n("h3",{className:"text-2xl font-bold text-meow-primary mb-4",children:"Need Immediate Help?"}),n("p",{className:"text-gray-600",children:"For emergency situations or urgent inquiries, please call our hotline. We're here to help!"})]})})]})]})})]})]}),bh=()=>{const[e,t]=h("25"),[a,r]=h(!1);return s(wm,{className:"border-0 shadow-lg overflow-hidden",children:[s(xm,{className:"bg-meow-primary text-white border-b border-meow-primary/20",children:[n(Nm,{className:"text-2xl",children:"Make a Donation"}),n(Cm,{className:"text-white/90",children:"Your support makes our work possible"})]}),n(_m,{className:"pt-6",children:s("form",{onSubmit:t=>{t.preventDefault(),console.log("Donation submitted:",{amount:e,isRecurring:a}),window.open(`https://example.com/donate?amount=${e}&recurring=${a}`,"_blank")},className:"space-y-6",children:[s("div",{className:"space-y-4",children:[n(Zm,{className:"text-lg font-medium text-meow-primary",children:"Select Amount"}),n("div",{className:"grid grid-cols-3 gap-3",children:["10","25","50","100","250","500"].map((a=>s("button",{type:"button",onClick:()=>t(a),className:"py-3 rounded-md transition-all "+(e===a?"bg-meow-primary text-white shadow-md":"bg-gray-50 border border-gray-200 text-gray-700 hover:border-meow-primary/50"),children:["$",a]},a)))}),s("div",{className:"pt-2",children:[n(Zm,{htmlFor:"custom-amount",className:"text-sm text-gray-600",children:"Custom Amount"}),s("div",{className:"relative mt-1",children:[n("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"$"}),n(od,{id:"custom-amount",type:"number",min:"1",step:"1",className:"pl-8 border-gray-300 focus:border-meow-primary focus:ring focus:ring-meow-primary/20",placeholder:"Enter amount",value:e,onChange:e=>t(e.target.value)})]})]})]}),n("div",{className:"pt-2",children:s(Iu,{defaultValue:"one-time",className:"flex flex-col space-y-3",children:[s("div",{className:"flex items-center space-x-2 bg-white p-3 border border-gray-200 rounded-md",children:[n(qu,{value:"one-time",id:"one-time",onClick:()=>r(!1)}),s(Zm,{htmlFor:"one-time",className:"cursor-pointer flex flex-col",children:[n("span",{className:"font-medium",children:"One-time donation"}),n("span",{className:"text-xs text-gray-500",children:"Make a single donation today"})]})]}),s("div",{className:"flex items-center space-x-2 bg-white p-3 border border-gray-200 rounded-md",children:[n(qu,{value:"monthly",id:"monthly",onClick:()=>r(!0)}),s(Zm,{htmlFor:"monthly",className:"cursor-pointer flex flex-col",children:[n("span",{className:"font-medium",children:"Monthly donation"}),n("span",{className:"text-xs text-gray-500",children:"Support our mission with a recurring donation"})]})]})]})}),n(Ds,{type:"submit",className:"w-full bg-meow-primary hover:bg-meow-primary/90 text-white font-semibold py-4 rounded-md",children:a?"Donate Monthly":"Donate Now"})]})}),n(km,{className:"bg-gray-50 border-t p-4 text-sm text-center text-gray-500",children:"Meow Rescue is a 501(c)(3) nonprofit organization. All donations are tax-deductible."})]})},wh=()=>s(wm,{className:"border-0 shadow-lg h-full",children:[n("div",{className:"bg-meow-primary/5 p-6",children:n("h3",{className:"text-xl text-meow-primary flex items-center gap-2",children:"Why Donate?"})}),n("div",{className:"p-6",children:s("div",{className:"space-y-4",children:[n(xh,{icon:n(Pi,{className:"h-5 w-5 text-meow-primary"}),title:"Medical Care",description:"Your donations help cover veterinary expenses, medications, and preventative care."}),n(xh,{icon:n(Mi,{className:"h-5 w-5 text-meow-primary"}),title:"Food and Supplies",description:"We need quality food, litter, and essential supplies for our cats."}),n(xh,{icon:n(ns,{className:"h-5 w-5 text-meow-primary"}),title:"Staff and Facilities",description:"Your donations help maintain our facilities and support our dedicated staff."}),n(xh,{icon:n(Yn,{className:"h-5 w-5 text-meow-primary"}),title:"Sustained Support",description:"Monthly donations help us plan and budget for the future."})]})})]}),xh=({icon:e,title:t,description:a})=>s("div",{className:"flex items-start",children:[n("div",{className:"bg-meow-primary/10 p-2 rounded-full mr-3",children:e}),s("div",{children:[n("h3",{className:"font-medium",children:t}),n("p",{className:"text-sm text-gray-600",children:a})]})]}),Nh=({icon:e,title:t,description:a,buttonText:r,buttonLink:i})=>s(wm,{className:"h-full flex flex-col",children:[s(xm,{children:[n("div",{className:"mb-2",children:e}),n(Nm,{children:t}),n(Cm,{className:"min-h-[80px]",children:a})]}),n(_m,{className:"flex-grow"}),n(km,{className:"pt-0",children:n(Ds,{asChild:!0,variant:"meow",className:"w-full",children:n("a",{href:i,children:r})})})]}),Ch=()=>s(i,{children:[n("h2",{className:"text-2xl font-bold mb-6 text-center text-meow-primary",children:"Other Ways to Support"}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n(Nh,{icon:n(oi,{className:"h-10 w-10 text-meow-primary"}),title:"Foster a Cat",description:"Open your home to a cat in need. Fostering saves lives and helps cats prepare for their forever homes.",buttonText:"Become a Foster",buttonLink:"/foster"}),n(Nh,{icon:n(li,{className:"h-10 w-10 text-meow-primary"}),title:"Volunteer",description:"Share your time and skills. We have volunteer opportunities for everyone, from cat care to administration.",buttonText:"Volunteer With Us",buttonLink:"/volunteer"}),n(Nh,{icon:n(Mi,{className:"h-10 w-10 text-meow-primary"}),title:"Donate Supplies",description:"We always need cat food, litter, toys, and other supplies. Check our wishlist for our current needs.",buttonText:"View Wishlist",buttonLink:"/wishlist"})]})]}),_h=()=>(Zu(),s(jc,{children:[n($c,{title:"Donate | Meow Rescue",description:"Support our mission to help cats in need by making a donation to Meow Rescue."}),n(id,{title:"Support Our Mission",subtitle:"Your donation helps us rescue, rehabilitate, and rehome cats in need"}),s("div",{className:"container mx-auto px-4 py-12",children:[s("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 mb-16",children:[n("div",{className:"lg:col-span-3",children:n(bh,{})}),n("div",{className:"lg:col-span-2",children:n(wh,{})})]}),n(Ch,{})]})]})),kh=({icon:e,title:t,description:a,timeCommitment:r})=>n(wm,{className:"hover-card-effect bg-white",children:s(_m,{className:"p-6",children:[n("div",{className:"w-12 h-12 rounded-full bg-meow-primary/10 flex items-center justify-center mb-4",children:e}),n("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t}),n("p",{className:"text-gray-600 mb-4",children:a}),s("div",{className:"text-sm text-gray-500 italic",children:["Time Commitment: ",r]})]})}),Sh=()=>{const e=[{icon:n(Pi,{className:"h-6 w-6 text-meow-primary"}),title:"Cat Care",description:"Help with feeding, grooming, socialization, and enrichment activities for our resident cats.",timeCommitment:"2-4 hours weekly"},{icon:n(Gi,{className:"h-6 w-6 text-meow-primary"}),title:"Adoption Events",description:"Assist with setting up, managing, and promoting our cats at adoption events throughout the community.",timeCommitment:"4-6 hours monthly"},{icon:n(Mn,{className:"h-6 w-6 text-meow-primary"}),title:"Photography",description:"Take high-quality photos of our cats for adoption profiles and social media promotion.",timeCommitment:"2-3 hours bi-weekly"},{icon:n(ns,{className:"h-6 w-6 text-meow-primary"}),title:"Social Media",description:"Help manage our social media accounts, create engaging content, and respond to inquiries.",timeCommitment:"2-5 hours weekly"},{icon:n(Sn,{className:"h-6 w-6 text-meow-primary"}),title:"Facility Maintenance",description:"Help with cleaning, organizing, laundry, and maintenance tasks at our adoption center.",timeCommitment:"2-4 hours weekly"},{icon:n(ci,{className:"h-6 w-6 text-meow-primary"}),title:"Fundraising",description:"Assist with planning and executing fundraising events and campaigns to support our mission.",timeCommitment:"Varies by project"}];return s("div",{className:"mt-16",children:[n(Vc,{title:"Volunteer Opportunities",subtitle:"Find the perfect role for your skills and interests"}),n("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8 mt-8",children:e.map(((e,t)=>n(kh,{...e},t)))})]})},Eh=({icon:e,title:t,description:a})=>s("div",{className:"flex items-start space-x-4",children:[n("div",{className:"bg-meow-primary/10 p-3 rounded-full flex-shrink-0",children:e}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:t}),n("p",{className:"text-gray-600",children:a})]})]}),Dh=()=>{const e=[{icon:n(ci,{className:"h-6 w-6 text-meow-primary"}),title:"Make a Real Impact",description:"Your time directly helps save and improve the lives of cats in need. Each hour you volunteer makes a difference."},{icon:n(ns,{className:"h-6 w-6 text-meow-primary"}),title:"Join a Community",description:"Connect with fellow animal lovers and make friends who share your passion for helping cats."},{icon:n(Yn,{className:"h-6 w-6 text-meow-primary"}),title:"Flexible Scheduling",description:"We work with your availability and understand that life gets busy. Volunteer when it works for you."},{icon:n(Dn,{className:"h-6 w-6 text-meow-primary"}),title:"Special Events",description:"Volunteers are invited to exclusive events, training opportunities, and appreciation gatherings."}];return s("div",{className:"mt-20 bg-white rounded-lg shadow-md p-8",children:[n(Vc,{title:"Benefits of Volunteering",subtitle:"Why join our volunteer team?"}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:e.map(((e,t)=>n(Eh,{...e},t)))})]})},Ah=["Be at least 18 years of age (youth volunteers 14-17 may participate with parental supervision)","Complete a volunteer orientation and required training for your specific role","Commit to at least 4 hours per month for a minimum of six months","Follow all shelter protocols and guidelines for animal handling and safety","Represent Meow Rescue professionally in the community"],Mh=()=>s("div",{className:"mt-20",children:[n(Vc,{title:"Volunteer Requirements",subtitle:"What we ask of our volunteers"}),n("div",{className:"bg-white rounded-lg shadow-md p-8 mt-8 w-fit mx-auto",children:n("ul",{className:"space-y-4",children:Ah.map(((e,t)=>s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:e})]},t)))})})]}),Ph=[{question:"How much time do I need to commit?",answer:"We ask for a minimum commitment of 4 hours per month for at least six months. Many volunteers choose to give more time, but we understand that everyone has different availability."},{question:"Do I need prior experience with cats?",answer:"While experience with cats is helpful, it's not required for all volunteer positions. We provide training for each role, and we can match you with tasks that suit your comfort level and experience."},{question:"Can I volunteer if I have allergies to cats?",answer:"If you have mild allergies, there are still ways to help! We have roles that involve minimal direct contact with cats, such as administrative tasks, social media management, or fundraising."},{question:"Is there a minimum age requirement?",answer:"Volunteers must be at least 18 years old to volunteer independently. Youth volunteers aged 14-17 can participate with a parent or guardian who is also a registered volunteer."}],Th=()=>s("div",{className:"mt-20",children:[n(Vc,{title:"Frequently Asked Questions",subtitle:"Common questions about volunteering"}),n("div",{className:"space-y-6 mt-8",children:Ph.map(((e,t)=>s("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:e.question}),n("p",{className:"text-gray-700",children:e.answer})]},t)))})]}),Rh=()=>n("div",{className:"mt-20 text-center",children:n("div",{className:"bg-meow-primary/10 rounded-lg px-8 py-12",children:s("div",{className:"max-w-3xl mx-auto",children:[n(di,{className:"h-16 w-16 text-meow-primary mx-auto mb-4"}),n("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Ready to Join Our Team?"}),n("p",{className:"text-lg text-gray-700 mb-8",children:"Take the first step toward making a difference in the lives of cats in need. Fill out our volunteer application today, and we'll contact you about upcoming orientation sessions."}),n(X,{to:"/volunteer/apply",onClick:Rc,children:n(Ds,{className:"bg-meow-primary hover:bg-meow-primary/90 text-white px-8 py-6 text-lg",children:"Apply to Volunteer"})})]})})}),Fh=()=>s(jc,{children:[n($c,{title:"Volunteer Opportunities | Meow Rescue",description:"Make a difference in the lives of cats in need by volunteering with Meow Rescue. Find various volunteer opportunities that match your skills and interests."}),n(id,{title:"Volunteer With Us",subtitle:"Help us save more feline lives"}),s("div",{className:"container mx-auto px-4 py-8 mt-2",children:[n("div",{className:"prose lg:prose-lg mx-auto mb-10 text-center max-w-3xl",children:n("p",{className:"text-lg text-gray-700",children:"Volunteers are the heart of our organization. Whether you can give a few hours a week or a few hours a month, your time and talents can make a meaningful difference in the lives of cats in need."})}),n(Sh,{}),n(Dh,{}),n(Mh,{}),n(Rh,{}),n(Th,{})]})]}),Lh=we.object({firstName:we.string().min(2,"First name is required"),lastName:we.string().min(2,"Last name is required"),email:we.string().email("Please enter a valid email"),phone:we.string().min(10,"Please enter a valid phone number"),address:we.string().min(5,"Address is required"),city:we.string().min(2,"City is required"),state:we.string().min(2,"State is required"),zip:we.string().min(5,"ZIP code is required"),birthdate:we.string().min(2,"Date of birth is required"),emergencyContactName:we.string().min(2,"Emergency contact name is required"),emergencyContactPhone:we.string().min(10,"Emergency contact phone is required"),volunteerAreas:we.array(we.string()).min(1,"Please select at least one volunteer area"),availability:we.object({weekdays:we.boolean(),weekends:we.boolean(),mornings:we.boolean(),afternoons:we.boolean(),evenings:we.boolean()}),specificAvailability:we.string(),experience:we.string(),skills:we.string(),whyVolunteer:we.string().min(10,"Please tell us why you want to volunteer"),references:we.array(we.object({name:we.string(),relationship:we.string(),phone:we.string()})).optional(),backgroundCheck:we.boolean().refine((e=>!0===e),{message:"You must agree to a background check"}),photoRelease:we.boolean(),liabilityWaiver:we.boolean().refine((e=>!0===e),{message:"You must agree to the liability waiver"}),confidentiality:we.boolean().refine((e=>!0===e),{message:"You must agree to the confidentiality agreement"}),agreeToTerms:we.boolean().refine((e=>!0===e),{message:"You must agree to the volunteer terms and conditions"})}),Ih=[{id:"catCare",label:"Cat Care & Socialization"},{id:"fostering",label:"Fostering"},{id:"transportation",label:"Transportation"},{id:"events",label:"Events & Fundraising"},{id:"photography",label:"Photography"},{id:"socialMedia",label:"Social Media"},{id:"administration",label:"Administrative Support"},{id:"maintenance",label:"Facility Maintenance"},{id:"other",label:"Other"}],qh=()=>{const{user:e}=At(),{toast:t}=xr(),a=Z(),[r,i]=h(!1),[o,l]=h([]),c=ve({resolver:be(Lh),defaultValues:{firstName:"",lastName:"",email:(null==e?void 0:e.email)||"",phone:"",address:"",city:"",state:"",zip:"",birthdate:"",emergencyContactName:"",emergencyContactPhone:"",volunteerAreas:[],availability:{weekdays:!1,weekends:!1,mornings:!1,afternoons:!1,evenings:!1},specificAvailability:"",experience:"",skills:"",whyVolunteer:"",references:[{name:"",relationship:"",phone:""},{name:"",relationship:"",phone:""}],backgroundCheck:!1,photoRelease:!1,liabilityWaiver:!1,confidentiality:!1,agreeToTerms:!1}});return s(jc,{children:[n($c,{title:"Volunteer Application | Meow Rescue"}),n(id,{title:"Volunteer Application",subtitle:"Join our team and help make a difference in the lives of cats"}),n("div",{className:"container mx-auto py-8 px-4 md:px-6 max-w-4xl",children:s(wm,{className:"border shadow-sm",children:[s(xm,{children:[n(Nm,{children:"Volunteer Application"}),n(Cm,{children:"Thank you for your interest in volunteering with Meow Rescue. Please complete all fields below to help us match you with the right volunteer opportunities."})]}),n(_m,{children:n(Jm,{...c,children:s("form",{onSubmit:c.handleSubmit((async r=>{i(!0);try{const{error:n}=await xt().from("applications").insert({applicant_id:null==e?void 0:e.id,application_type:"volunteer",status:"pending",form_data:r});if(n)throw n;t({title:"Application Submitted",description:"Your volunteer application has been submitted successfully. We'll contact you soon."}),a("/thank-you-volunteer")}catch(n){console.error("Error submitting application:",n),t({title:"Submission Error",description:n.message||"Failed to submit application. Please try again.",variant:"destructive"})}finally{i(!1)}})),className:"space-y-6",children:[s("div",{className:"space-y-4",children:[n("h3",{className:"text-lg font-medium",children:"Personal Information"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:c.control,name:"firstName",render:({field:e})=>s(nu,{children:[n(iu,{children:"First Name*"}),n(su,{children:n(od,{placeholder:"Enter your first name",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"lastName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Last Name*"}),n(su,{children:n(od,{placeholder:"Enter your last name",...e})}),n(lu,{})]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:c.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{children:"Email*"}),n(su,{children:n(od,{placeholder:"Enter your email address",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"phone",render:({field:e})=>s(nu,{children:[n(iu,{children:"Phone Number*"}),n(su,{children:n(od,{placeholder:"Enter your phone number",...e})}),n(lu,{})]})})]}),n(tu,{control:c.control,name:"birthdate",render:({field:e})=>s(nu,{children:[n(iu,{children:"Date of Birth*"}),n(ou,{children:"We require this information for insurance purposes. Volunteers under 18 need parental consent."}),n(su,{children:n(od,{type:"date",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"address",render:({field:e})=>s(nu,{children:[n(iu,{children:"Street Address*"}),n(su,{children:n(od,{placeholder:"Enter your street address",...e})}),n(lu,{})]})}),s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n(tu,{control:c.control,name:"city",render:({field:e})=>s(nu,{children:[n(iu,{children:"City*"}),n(su,{children:n(od,{placeholder:"City",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"state",render:({field:e})=>s(nu,{children:[n(iu,{children:"State*"}),n(su,{children:n(od,{placeholder:"State",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"zip",render:({field:e})=>s(nu,{className:"md:col-span-2",children:[n(iu,{children:"ZIP Code*"}),n(su,{children:n(od,{placeholder:"ZIP Code",...e})}),n(lu,{})]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:c.control,name:"emergencyContactName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Emergency Contact Name*"}),n(su,{children:n(od,{placeholder:"Enter name",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"emergencyContactPhone",render:({field:e})=>s(nu,{children:[n(iu,{children:"Emergency Contact Phone*"}),n(su,{children:n(od,{placeholder:"Enter phone number",...e})}),n(lu,{})]})})]})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Volunteer Interests"}),n(tu,{control:c.control,name:"volunteerAreas",render:()=>s(nu,{children:[n(iu,{children:"Areas of Interest*"}),n(ou,{children:"Select all areas you're interested in volunteering"}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Ih.map((e=>s("div",{className:"flex items-center space-x-2",children:[n(Xu,{id:e.id,checked:c.getValues("volunteerAreas").includes(e.id),onCheckedChange:t=>((e,t)=>{let a;a=t?[...c.getValues("volunteerAreas"),e]:c.getValues("volunteerAreas").filter((t=>t!==e)),c.setValue("volunteerAreas",a),l(a)})(e.id,t)}),n("label",{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.label})]},e.id)))}),n(lu,{})]})}),s("div",{className:"space-y-4",children:[n(iu,{children:"Availability*"}),n(ou,{children:"Please select all times you're typically available to volunteer"}),s("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[n(tu,{control:c.control,name:"availability.weekdays",render:({field:e})=>s(nu,{className:"flex items-center space-x-2",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n(iu,{className:"font-normal",children:"Weekdays"})]})}),n(tu,{control:c.control,name:"availability.weekends",render:({field:e})=>s(nu,{className:"flex items-center space-x-2",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n(iu,{className:"font-normal",children:"Weekends"})]})}),n(tu,{control:c.control,name:"availability.mornings",render:({field:e})=>s(nu,{className:"flex items-center space-x-2",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n(iu,{className:"font-normal",children:"Mornings"})]})}),n(tu,{control:c.control,name:"availability.afternoons",render:({field:e})=>s(nu,{className:"flex items-center space-x-2",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n(iu,{className:"font-normal",children:"Afternoons"})]})}),n(tu,{control:c.control,name:"availability.evenings",render:({field:e})=>s(nu,{className:"flex items-center space-x-2",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),n(iu,{className:"font-normal",children:"Evenings"})]})})]})]}),n(tu,{control:c.control,name:"specificAvailability",render:({field:e})=>s(nu,{children:[n(iu,{children:"Specific Availability"}),n(ou,{children:"Please provide more details about your availability, including specific days and times"}),n(su,{children:n(cu,{placeholder:"Example: Available Monday and Wednesday evenings from 5-8pm, and Saturday mornings",...e})}),n(lu,{})]})})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Experience and Skills"}),n(tu,{control:c.control,name:"experience",render:({field:e})=>s(nu,{children:[n(iu,{children:"Relevant Experience"}),n(ou,{children:"Please describe any experience you have with animals or in a volunteer capacity"}),n(su,{children:n(cu,{placeholder:"Include any volunteer work, animal handling experience, or relevant skills you may have",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"skills",render:({field:e})=>s(nu,{children:[n(iu,{children:"Special Skills"}),n(ou,{children:"List any special skills that might be useful (e.g., photography, social media, graphic design, etc.)"}),n(su,{children:n(cu,{placeholder:"Describe any special skills or talents you can contribute",...e})}),n(lu,{})]})}),n(tu,{control:c.control,name:"whyVolunteer",render:({field:e})=>s(nu,{children:[n(iu,{children:"Why do you want to volunteer with us?*"}),n(su,{children:n(cu,{placeholder:"Please tell us why you're interested in volunteering with Meow Rescue",...e})}),n(lu,{})]})})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"References"}),n("p",{className:"text-sm text-gray-500",children:"Please provide references who can speak to your character and responsibility (optional)"}),n("div",{className:"grid grid-cols-1 gap-4",children:[0,1].map((e=>s("div",{className:"border p-4 rounded-md",children:[s("p",{className:"font-medium mb-2",children:["Reference ",e+1]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n(tu,{control:c.control,name:`references.${e}.name`,render:({field:e})=>s(nu,{children:[n(iu,{children:"Name"}),n(su,{children:n(od,{placeholder:"Reference name",...e})})]})}),n(tu,{control:c.control,name:`references.${e}.relationship`,render:({field:e})=>s(nu,{children:[n(iu,{children:"Relationship"}),n(su,{children:n(od,{placeholder:"How you know them",...e})})]})}),n(tu,{control:c.control,name:`references.${e}.phone`,render:({field:e})=>s(nu,{children:[n(iu,{children:"Phone"}),n(su,{children:n(od,{placeholder:"Contact number",...e})})]})})]})]},e)))})]}),s("div",{className:"space-y-4 pt-4 border-t",children:[n("h3",{className:"text-lg font-medium",children:"Agreements"}),n(tu,{control:c.control,name:"backgroundCheck",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"I agree to a background check if required for my volunteer role*"}),n(ou,{children:"Some volunteer positions may require a background check for the safety of our animals and volunteers."})]}),n(lu,{})]})}),n(tu,{control:c.control,name:"photoRelease",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"Photo Release (Optional)"}),n(ou,{children:"I give permission for Meow Rescue to use photos of me for promotional purposes."})]}),n(lu,{})]})}),n(tu,{control:c.control,name:"liabilityWaiver",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md bg-gray-50",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"Liability Waiver*"}),n(ou,{children:"I understand that volunteering with animals carries inherent risks. I agree to hold Meow Rescue harmless from any liability, loss, cost, or damage that may occur in connection with my volunteer activities. I assume the risk of any injuries that may be sustained while volunteering."})]}),n(lu,{})]})}),n(tu,{control:c.control,name:"confidentiality",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"Confidentiality Agreement*"}),n(ou,{children:"I agree to maintain the confidentiality of all proprietary or privileged information to which I am exposed while serving as a volunteer, including information about animals, adopters, donors, and other volunteers."})]}),n(lu,{})]})}),n(tu,{control:c.control,name:"agreeToTerms",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-md",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"I agree to the terms and conditions of volunteering*"}),n(ou,{children:"By checking this box, I certify that the information provided is true and accurate. I understand that Meow Rescue has the right to refuse any volunteer for any reason. I agree to abide by Meow Rescue's policies and procedures."})]}),n(lu,{})]})})]}),n(Ds,{type:"submit",className:"w-full",disabled:r,children:r?"Submitting...":"Submit Application"})]})})})]})})]})},Oh=()=>s("div",{className:"mt-16",children:[n(Vc,{title:"Why Foster?",subtitle:"Make a difference in a cat's life"}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-8",children:[n(wm,{className:"hover-card-effect bg-white",children:s(_m,{className:"p-6 text-center",children:[n("div",{className:"w-16 h-16 rounded-full bg-meow-primary/10 flex items-center justify-center mx-auto mb-4",children:n(ci,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Save Lives"}),n("p",{className:"text-gray-600",children:"By fostering, you're directly helping to save cats' lives by giving them a safe place to stay until adoption."})]})}),n(wm,{className:"hover-card-effect bg-white",children:s(_m,{className:"p-6 text-center",children:[n("div",{className:"w-16 h-16 rounded-full bg-meow-primary/10 flex items-center justify-center mx-auto mb-4",children:n(di,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Temporary Commitment"}),n("p",{className:"text-gray-600",children:"Fostering allows you to help cats without the long-term commitment of adoption, perfect for those who travel or have busy schedules."})]})}),n(wm,{className:"hover-card-effect bg-white",children:s(_m,{className:"p-6 text-center",children:[n("div",{className:"w-16 h-16 rounded-full bg-meow-primary/10 flex items-center justify-center mx-auto mb-4",children:n(Pi,{className:"h-8 w-8 text-meow-primary"})}),n("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Rewarding Experience"}),n("p",{className:"text-gray-600",children:"Experience the joy of watching shy or injured cats blossom into confident, healthy companions ready for their forever homes."})]})})]})]}),jh=()=>n("div",{className:"mt-20 bg-white rounded-lg shadow-md overflow-hidden",children:s("div",{className:"p-8",children:[n(Vc,{title:"What We Provide",subtitle:"We support our foster families every step of the way",centered:!0}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:[s("div",{className:"flex items-start space-x-4",children:[n("div",{className:"bg-meow-primary/10 p-3 rounded-full",children:n(is,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Food and Supplies"}),n("p",{className:"text-gray-600",children:"We provide all necessary food, litter, beds, toys, and enrichment items your foster cats will need."})]})]}),s("div",{className:"flex items-start space-x-4",children:[n("div",{className:"bg-meow-primary/10 p-3 rounded-full",children:n(Fi,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Medical Care"}),n("p",{className:"text-gray-600",children:"All veterinary care is covered by our rescue. We ensure your foster cats get the medical attention they need."})]})]}),s("div",{className:"flex items-start space-x-4",children:[n("div",{className:"bg-meow-primary/10 p-3 rounded-full",children:n(Wn,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Training and Support"}),n("p",{className:"text-gray-600",children:"Our experienced team provides guidance on cat care, behavior, and health concerns."})]})]}),s("div",{className:"flex items-start space-x-4",children:[n("div",{className:"bg-meow-primary/10 p-3 rounded-full",children:n(An,{className:"h-6 w-6 text-meow-primary"})}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Flexible Scheduling"}),n("p",{className:"text-gray-600",children:"Going on vacation? We can arrange temporary care for your foster cats while you're away."})]})]})]})]})}),$h=()=>s("div",{className:"mt-20",children:[n(Vc,{title:"Foster Requirements",subtitle:"What we look for in potential foster homes"}),n("div",{className:"bg-white rounded-lg shadow-md p-8 mt-8 w-fit mx-auto",children:s("ul",{className:"space-y-4",children:[s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"Be at least 21 years of age and provide valid identification"})]}),s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"Have reliable transportation for vet appointments and adoption events"})]}),s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"Have a safe, secure indoor space for foster cats"})]}),s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"If renting, provide landlord approval for having foster cats"})]}),s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"Be willing to keep foster cats separate from resident pets, at least initially"})]}),s("li",{className:"flex items-start",children:[n(Bi,{className:"h-6 w-6 text-meow-primary mr-4 mt-1 flex-shrink-0"}),n("span",{className:"text-gray-700",children:"Provide regular updates and photos of foster cats for adoption promotion"})]})]})})]}),zh=()=>s(jc,{children:[n($c,{title:"Foster Program | Meow Rescue",description:"Become a foster parent for cats in need and help them find their forever homes. Learn about our foster program and apply today."}),n(id,{title:"Become a Foster",subtitle:"Open your heart and home to cats in need"}),s("div",{className:"container mx-auto px-4 py-8 mt-2",children:[n("div",{className:"prose lg:prose-lg mx-auto mb-10 text-center max-w-3xl",children:n("p",{className:"text-lg text-gray-700",children:"As a foster parent, you provide temporary care for cats until they find their forever homes. Fostering is a rewarding way to help save lives without a permanent commitment."})}),n(Oh,{}),n(jh,{}),n($h,{}),n("div",{className:"mt-20 text-center",children:n("div",{className:"bg-meow-primary/10 rounded-lg px-8 py-12",children:s("div",{className:"max-w-3xl mx-auto",children:[n(Pn,{className:"h-16 w-16 text-meow-primary mx-auto mb-4"}),n("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Ready to Make a Difference?"}),n("p",{className:"text-lg text-gray-700 mb-8",children:"Join our amazing network of foster parents and help save more feline lives. The application process is simple, and our team is ready to answer any questions you may have."}),n(X,{to:"/foster/apply",onClick:Rc,children:n(Ds,{className:"bg-meow-primary hover:bg-meow-primary/90 text-white px-8 py-6 text-lg",children:"Apply to Foster"})})]})})})]})]}),Uh=we.object({firstName:we.string().min(2,"First name is required"),lastName:we.string().min(2,"Last name is required"),email:we.string().email("Please enter a valid email"),phone:we.string().min(10,"Please enter a valid phone number"),address:we.string().min(5,"Address is required"),city:we.string().min(2,"City is required"),state:we.string().min(2,"State is required"),zip:we.string().min(5,"ZIP code is required"),hasExperience:we.enum(["yes","no"]),experienceDetails:we.string().optional(),hasOtherPets:we.enum(["yes","no"]),otherPetsDetails:we.string().optional(),homeType:we.enum(["apartment","house","condo","other"]),hasYard:we.enum(["yes","no"]),hoursAtHome:we.string(),commitment:we.enum(["short","medium","long"]),additionalInfo:we.string().optional(),agreeToTerms:we.boolean().refine((e=>!0===e),{message:"You must agree to the terms and conditions"})}),Vh=()=>{const{user:e}=At(),{toast:t}=xr(),a=Z(),[r,i]=h(!1),o=ve({resolver:be(Uh),defaultValues:{firstName:"",lastName:"",email:(null==e?void 0:e.email)||"",phone:"",address:"",city:"",state:"",zip:"",hasExperience:"no",experienceDetails:"",hasOtherPets:"no",otherPetsDetails:"",homeType:"apartment",hasYard:"no",hoursAtHome:"",commitment:"medium",additionalInfo:"",agreeToTerms:!1}});return s(jc,{children:[n($c,{title:"Foster Application | Meow Rescue"}),s("div",{className:"container mx-auto py-8 px-4 md:px-6 max-w-4xl",children:[n("h1",{className:"text-3xl font-bold text-center mb-2",children:"Foster Application"}),n("p",{className:"text-center mb-8 text-gray-600",children:"Thank you for your interest in fostering a cat! Please fill out this form so we can find the perfect match."}),s(wm,{children:[s(xm,{children:[n(Nm,{children:"Personal Information"}),n(Cm,{children:"Please provide your contact information so we can reach out to you."})]}),n(_m,{children:n(Jm,{...o,children:s("form",{onSubmit:o.handleSubmit((async r=>{i(!0);try{const{error:n}=await xt().from("applications").insert({applicant_id:null==e?void 0:e.id,application_type:"foster",status:"pending",form_data:r});if(n)throw n;t({title:"Application Submitted",description:"Your foster application has been submitted successfully. We'll contact you soon."}),a("/profile")}catch(n){console.error("Error submitting application:",n),t({title:"Submission Error",description:n.message||"Failed to submit application. Please try again.",variant:"destructive"})}finally{i(!1)}})),className:"space-y-6",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:o.control,name:"firstName",render:({field:e})=>s(nu,{children:[n(iu,{children:"First Name"}),n(su,{children:n(od,{placeholder:"John",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"lastName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Last Name"}),n(su,{children:n(od,{placeholder:"Doe",...e})}),n(lu,{})]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n(tu,{control:o.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{children:"Email"}),n(su,{children:n(od,{placeholder:"john.doe@example.com",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"phone",render:({field:e})=>s(nu,{children:[n(iu,{children:"Phone Number"}),n(su,{children:n(od,{placeholder:"(123) 456-7890",...e})}),n(lu,{})]})})]}),n(tu,{control:o.control,name:"address",render:({field:e})=>s(nu,{children:[n(iu,{children:"Address"}),n(su,{children:n(od,{placeholder:"123 Main St",...e})}),n(lu,{})]})}),s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n(tu,{control:o.control,name:"city",render:({field:e})=>s(nu,{children:[n(iu,{children:"City"}),n(su,{children:n(od,{placeholder:"New York",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"state",render:({field:e})=>s(nu,{children:[n(iu,{children:"State"}),n(su,{children:n(od,{placeholder:"NY",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"zip",render:({field:e})=>s(nu,{className:"md:col-span-2",children:[n(iu,{children:"ZIP Code"}),n(su,{children:n(od,{placeholder:"10001",...e})}),n(lu,{})]})})]}),s(xm,{className:"px-0",children:[n(Nm,{children:"Foster Information"}),n(Cm,{children:"Tell us more about your fostering capabilities."})]}),n(tu,{control:o.control,name:"hasExperience",render:({field:e})=>s(nu,{children:[n(iu,{children:"Do you have experience fostering cats?"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"yes"})}),n(iu,{className:"font-normal",children:"Yes"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"no"})}),n(iu,{className:"font-normal",children:"No"})]})]})}),n(lu,{})]})}),"yes"===o.watch("hasExperience")&&n(tu,{control:o.control,name:"experienceDetails",render:({field:e})=>s(nu,{children:[n(iu,{children:"Please describe your experience"}),n(su,{children:n(cu,{placeholder:"Tell us about your previous fostering experience...",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"hasOtherPets",render:({field:e})=>s(nu,{children:[n(iu,{children:"Do you have other pets at home?"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"yes"})}),n(iu,{className:"font-normal",children:"Yes"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"no"})}),n(iu,{className:"font-normal",children:"No"})]})]})}),n(lu,{})]})}),"yes"===o.watch("hasOtherPets")&&n(tu,{control:o.control,name:"otherPetsDetails",render:({field:e})=>s(nu,{children:[n(iu,{children:"Please describe your other pets"}),n(su,{children:n(cu,{placeholder:"Tell us about your other pets, including their species, breed, age, and temperament...",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"homeType",render:({field:e})=>s(nu,{children:[n(iu,{children:"What type of home do you live in?"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"apartment"})}),n(iu,{className:"font-normal",children:"Apartment"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"house"})}),n(iu,{className:"font-normal",children:"House"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"condo"})}),n(iu,{className:"font-normal",children:"Condo"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"other"})}),n(iu,{className:"font-normal",children:"Other"})]})]})}),n(lu,{})]})}),n(tu,{control:o.control,name:"hasYard",render:({field:e})=>s(nu,{children:[n(iu,{children:"Do you have a yard?"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"yes"})}),n(iu,{className:"font-normal",children:"Yes"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"no"})}),n(iu,{className:"font-normal",children:"No"})]})]})}),n(lu,{})]})}),n(tu,{control:o.control,name:"hoursAtHome",render:({field:e})=>s(nu,{children:[n(iu,{children:"How many hours per day are you typically at home?"}),n(su,{children:n(od,{placeholder:"8",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"commitment",render:({field:e})=>s(nu,{children:[n(iu,{children:"How long are you willing to foster?"}),n(su,{children:s(Iu,{onValueChange:e.onChange,defaultValue:e.value,className:"flex flex-col space-y-1",children:[s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"short"})}),n(iu,{className:"font-normal",children:"Short-term (1-4 weeks)"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"medium"})}),n(iu,{className:"font-normal",children:"Medium-term (1-3 months)"})]}),s(nu,{className:"flex items-center space-x-3 space-y-0",children:[n(su,{children:n(qu,{value:"long"})}),n(iu,{className:"font-normal",children:"Long-term (3+ months)"})]})]})}),n(lu,{})]})}),n(tu,{control:o.control,name:"additionalInfo",render:({field:e})=>s(nu,{children:[n(iu,{children:"Additional Information"}),n(su,{children:n(cu,{placeholder:"Is there anything else you'd like us to know about your fostering interest?",...e})}),n(lu,{})]})}),n(tu,{control:o.control,name:"agreeToTerms",render:({field:e})=>s(nu,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n(su,{children:n(Xu,{checked:e.value,onCheckedChange:e.onChange})}),s("div",{className:"space-y-1 leading-none",children:[n(iu,{children:"I agree to the terms and conditions of fostering"}),n(ou,{children:"By checking this box, you agree to provide proper care for any cats placed in your foster home."})]}),n(lu,{})]})}),n(Ds,{type:"submit",className:"w-full",disabled:r,children:r?"Submitting...":"Submit Application"})]})})})]})]})]})},Bh=we.object({email:we.string().email({message:"Please enter a valid email address."}),password:we.string().min(8,{message:"Password must be at least 8 characters."})}),Hh=()=>{const e=Z(),t=Q(),{toast:a}=xr(),[r,i]=h(!1),[o,l]=h({checked:!1,connected:!1}),{user:c,session:d,signIn:m,isLoading:u,error:g}=At();p((()=>{console.log("Login page - Auth state:",{user:c?"User exists":"No user",session:d?"Session exists":"No session",isLoading:r,authLoading:u,authError:g})}),[c,d,r,u,g]),p((()=>{(async()=>{try{const e=await Nt();l({checked:!0,connected:e.connected,error:e.error}),e.connected||(console.error("Supabase connection failed:",e.error),a({title:"Connection Issue",description:"Unable to connect to our services. Please try again later.",variant:"destructive"}))}catch(e){console.error("Error checking connection:",e),l({checked:!0,connected:!1,error:e instanceof Error?e.message:"Unknown error"})}})()}),[a]);const f=ve({resolver:be(Bh),defaultValues:{email:"",password:""}});p((()=>{var a,n;if(c&&!r&&!u){console.log("User is logged in, redirecting",c);const r=(null==(a=t.state)?void 0:a.from)||((null==(n=c.email)?void 0:n.endsWith("@meowrescue.org"))?"/admin":"/profile");e(r)}}),[c,e,t.state,r,u]);return p((()=>{g&&(console.error("Auth context error:",g),a({title:"Authentication Error",description:g,variant:"destructive"}))}),[g,a]),s(jc,{children:[n($c,{title:"Login | Meow Rescue"}),n("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:s(wm,{className:"w-full max-w-md p-4",children:[s(xm,{className:"space-y-4",children:[s("div",{className:"flex flex-col items-center",children:[n("div",{className:"bg-meow-primary rounded-full p-2 mb-2",children:n(Pn,{className:"h-6 w-6 text-white"})}),s("span",{className:"font-bold text-xl",children:[n("span",{className:"text-meow-primary",children:"Meow"}),n("span",{className:"text-meow-secondary",children:"Rescue"})]})]}),n(Nm,{className:"text-2xl font-bold text-center",children:"Login to Your Account"})]}),n(_m,{children:o.checked?o.connected?n(Jm,{...f,children:s("form",{onSubmit:f.handleSubmit((async e=>{if(console.log("Login attempt with email:",e.email),r||u)console.log("Already processing login, skipping");else if(o.connected){i(!0);try{console.log("Calling signIn method with:",e.email);const t=await m(e.email,e.password);if(console.log("Sign in result:",t),t.error)throw new Error(t.error);a({title:"Login Successful",description:"You have been logged in successfully."})}catch(t){console.error("Login error:",t),a({title:"Login Failed",description:t.message||"There was a problem with your login.",variant:"destructive"})}finally{i(!1)}}else a({title:"Connection Issue",description:"Can't log in due to connection problems. Please try again later.",variant:"destructive"})})),className:"space-y-4",children:[n(tu,{control:f.control,name:"email",render:({field:e})=>s(nu,{children:[n(Zm,{children:"Email"}),n(su,{children:n(od,{placeholder:"email@example.com",...e,type:"email"})}),n(lu,{})]})}),n(tu,{control:f.control,name:"password",render:({field:e})=>s(nu,{children:[n(Zm,{children:"Password"}),n(su,{children:n(od,{placeholder:"Password",...e,type:"password"})}),n(lu,{})]})}),n(Ds,{disabled:r||u,className:"w-full",type:"submit",children:r||u?"Signing in...":"Sign In"})]})}):s("div",{className:"text-center py-4 text-red-500",children:[n("p",{children:"Unable to connect to our services"}),n("p",{className:"text-sm mt-2",children:o.error}),n(Ds,{className:"mt-4",variant:"outline",onClick:()=>window.location.reload(),children:"Retry Connection"})]}):n("div",{className:"flex justify-center py-4",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-meow-primary"})})}),s(km,{className:"flex flex-col space-y-2",children:[n("div",{className:"text-center text-sm text-gray-500",children:n(X,{to:"/reset-password",className:"text-meow-primary hover:underline",children:"Forgot your password?"})}),s("div",{className:"text-center text-sm text-gray-500",children:["Don't have an account?"," ",n(X,{to:"/register",className:"text-meow-primary hover:underline",children:"Sign up"})]})]})]})})]})},Kh=we.object({email:we.string().email({message:"Please enter a valid email address."}),password:we.string().min(8,{message:"Password must be at least 8 characters."})}),Wh=()=>{const e=Z(),{toast:t}=xr(),[a,r]=h(!1),{signUp:i,user:o,isLoading:l}=At(),c=ve({resolver:be(Kh),defaultValues:{email:"",password:""}});p((()=>{!o||a||l||e("/profile")}),[o,e,a,l]);return s(jc,{children:[n($c,{title:"Register | Meow Rescue"}),n("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:s(wm,{className:"w-full max-w-md p-4",children:[s(xm,{className:"space-y-4",children:[s("div",{className:"flex flex-col items-center",children:[n("div",{className:"bg-meow-primary rounded-full p-2 mb-2",children:n(Pn,{className:"h-6 w-6 text-white"})}),s("span",{className:"font-bold text-xl",children:[n("span",{className:"text-meow-primary",children:"Meow"}),n("span",{className:"text-meow-secondary",children:"Rescue"})]})]}),n(Nm,{className:"text-2xl font-bold text-center",children:"Create an account"})]}),n(_m,{children:n(Jm,{...c,children:s("form",{onSubmit:c.handleSubmit((async n=>{if(!a){r(!0);try{const a=await i(n.email,n.password);if(a.error)throw new Error(a.error);t({title:"Registration Successful",description:"Please verify your email to log in."}),e("/login")}catch(s){t({title:"Registration Failed",description:s.message||"There was a problem with your registration.",variant:"destructive"})}finally{r(!1)}}})),className:"space-y-4",children:[n(tu,{control:c.control,name:"email",render:({field:e})=>s(nu,{children:[n(Zm,{children:"Email"}),n(su,{children:n(od,{placeholder:"email@example.com",...e,type:"email"})}),n(lu,{})]})}),n(tu,{control:c.control,name:"password",render:({field:e})=>s(nu,{children:[n(Zm,{children:"Password"}),n(su,{children:n(od,{placeholder:"Password",...e,type:"password"})}),n(lu,{})]})}),n(Ds,{disabled:a||l,className:"w-full",type:"submit",children:a||l?"Signing up...":"Sign Up"})]})})}),n(km,{className:"flex justify-center",children:s("div",{className:"text-center text-sm text-gray-500",children:["Already have an account?"," ",n(X,{to:"/login",className:"text-meow-primary hover:underline",children:"Log in"})]})})]})})]})},Yh=xe.object({email:xe.string().email({message:"Please enter a valid email address"})}),Gh=xe.object({password:xe.string().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:xe.string().min(6,{message:"Confirm password is required"})}).refine((e=>e.password===e.confirmPassword),{message:"Passwords don't match",path:["confirmPassword"]}),Qh=()=>{const[e,t]=h(!1),[a,r]=h(!1);Z();const{toast:i}=xr(),o=ve({resolver:be(Yh),defaultValues:{email:""}});ve({resolver:be(Gh),defaultValues:{password:"",confirmPassword:""}});return n(jc,{children:n("div",{className:"min-h-[80vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s(wm,{className:"w-full max-w-md p-4",children:[s(xm,{className:"space-y-4",children:[s("div",{className:"flex flex-col items-center",children:[n("div",{className:"bg-meow-primary rounded-full p-2 mb-2",children:n(Pn,{className:"h-6 w-6 text-white"})}),s("span",{className:"font-bold text-xl",children:[n("span",{className:"text-meow-primary",children:"Meow"}),n("span",{className:"text-meow-secondary",children:"Rescue"})]})]}),n(Nm,{className:"text-2xl font-bold text-center",children:"Reset Your Password"})]}),n(_m,{children:e?s("div",{className:"space-y-6 text-center",children:[n("p",{className:"text-gray-600",children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions to reset your password."}),n("p",{className:"text-gray-600",children:"If you don't receive an email within a few minutes, please check your spam folder or try again."}),n(Ds,{className:"w-full",onClick:()=>t(!1),children:"Try Again"})]}):n(Jm,{...o,children:s("form",{onSubmit:o.handleSubmit((async e=>{r(!0);try{const{error:a}=await xt().auth.resetPasswordForEmail(e.email,{redirectTo:`${window.location.origin}/reset-password`});if(a)throw a;t(!0),i({title:"Password Reset Email Sent",description:"Check your email for a link to reset your password."})}catch(a){i({title:"Error",description:a.message||"Failed to send password reset email",variant:"destructive"})}finally{r(!1)}})),className:"space-y-6",children:[n(tu,{control:o.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{children:"Email Address"}),n(su,{children:n(od,{type:"email",placeholder:"Enter your registered email",...e})}),n(lu,{})]})}),n(Ds,{type:"submit",className:"w-full",disabled:a,children:a?"Sending Reset Link...":"Send Password Reset Link"})]})})}),n(km,{className:"flex justify-center",children:s("div",{className:"text-center text-sm text-gray-500",children:["Remember your password?"," ",n(X,{to:"/login",className:"text-meow-primary hover:underline",children:"Sign in"})]})})]})})})};var Xh="AlertDialog",[Zh,Jh]=Ft(Xh,[kd]),ep=kd(),tp=e=>{const{__scopeAlertDialog:t,...a}=e,r=ep(t);return n(am,{...r,...a,modal:!0})};tp.displayName=Xh;var ap=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,i=ep(a);return n(rm,{...i,...r,ref:t})}));ap.displayName="AlertDialogTrigger";var rp=e=>{const{__scopeAlertDialog:t,...a}=e,r=ep(t);return n(nm,{...r,...a})};rp.displayName="AlertDialogPortal";var np=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,i=ep(a);return n(im,{...i,...r,ref:t})}));np.displayName="AlertDialogOverlay";var ip="AlertDialogContent",[sp,op]=Zh(ip),lp=$t("AlertDialogContent"),cp=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,children:r,...i}=e,o=ep(a),l=c.useRef(null),d=Rt(t,l),m=c.useRef(null);return n(Zd,{contentName:ip,titleName:dp,docsSlug:"alert-dialog",children:n(sp,{scope:a,cancelRef:m,children:s(sm,{role:"alertdialog",...o,...i,ref:d,onOpenAutoFocus:Mt(i.onOpenAutoFocus,(e=>{var t;e.preventDefault(),null==(t=m.current)||t.focus({preventScroll:!0})})),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[n(lp,{children:r}),n(yp,{contentRef:l})]})})})}));cp.displayName=ip;var dp="AlertDialogTitle",mp=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,i=ep(a);return n(om,{...i,...r,ref:t})}));mp.displayName=dp;var up="AlertDialogDescription",hp=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,i=ep(a);return n(lm,{...i,...r,ref:t})}));hp.displayName=up;var pp=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,i=ep(a);return n(cm,{...i,...r,ref:t})}));pp.displayName="AlertDialogAction";var gp="AlertDialogCancel",fp=c.forwardRef(((e,t)=>{const{__scopeAlertDialog:a,...r}=e,{cancelRef:i}=op(gp,a),s=ep(a),o=Rt(t,i);return n(cm,{...s,...r,ref:o})}));fp.displayName=gp;var yp=({contentRef:e})=>{const t=`\`${ip}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${ip}\` by passing a \`${up}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ip}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect((()=>{var a;document.getElementById(null==(a=e.current)?void 0:a.getAttribute("aria-describedby"))||console.warn(t)}),[t,e]),null},vp=np,bp=cp,wp=pp,xp=fp,Np=mp,Cp=hp;const _p=tp,kp=ap,Sp=rp,Ep=c.forwardRef((({className:e,...t},a)=>n(vp,{className:cr("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a})));Ep.displayName=vp.displayName;const Dp=c.forwardRef((({className:e,...t},a)=>s(Sp,{children:[n(Ep,{}),n(bp,{ref:a,className:cr("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]})));Dp.displayName=bp.displayName;const Ap=({className:e,...t})=>n("div",{className:cr("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ap.displayName="AlertDialogHeader";const Mp=({className:e,...t})=>n("div",{className:cr("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Mp.displayName="AlertDialogFooter";const Pp=c.forwardRef((({className:e,...t},a)=>n(Np,{ref:a,className:cr("text-lg font-semibold",e),...t})));Pp.displayName=Np.displayName;const Tp=c.forwardRef((({className:e,...t},a)=>n(Cp,{ref:a,className:cr("text-sm text-muted-foreground",e),...t})));Tp.displayName=Cp.displayName;const Rp=c.forwardRef((({className:e,...t},a)=>n(wp,{ref:a,className:cr(Es(),e),...t})));Rp.displayName=wp.displayName;const Fp=c.forwardRef((({className:e,...t},a)=>n(xp,{ref:a,className:cr(Es({variant:"outline"}),"mt-2 sm:mt-0",e),...t})));Fp.displayName=xp.displayName;const Lp=()=>{const{user:e,signOut:t,session:a}=At(),[r,o]=h(!1),[l,c]=h(!1),[d,m]=h(!1),[u,p]=h(!1),[g,f]=h(null),[y,v]=h(null),{toast:b}=xr(),w=ve({defaultValues:{email:(null==e?void 0:e.email)||"",firstName:(null==e?void 0:e.first_name)||"",lastName:(null==e?void 0:e.last_name)||""}}),x=ve({defaultValues:{password:"",confirmPassword:""}}),{data:N,refetch:C}=S({queryKey:["profile",null==e?void 0:e.id],queryFn:async()=>{if(!e)return null;const{data:t,error:a}=await supabase.from("profiles").select("*").eq("id",e.id).single();if(a)throw a;return(null==t?void 0:t.avatar_url)&&v(t.avatar_url),t},enabled:!!e}),{data:_}=S({queryKey:["lostFoundPosts",null==e?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:t,error:a}=await supabase.from("lost_found_posts").select("*").eq("profile_id",e.id);if(a)throw a;return t},enabled:!!e}),{data:k}=S({queryKey:["blogPosts",null==e?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:t,error:a}=await supabase.from("blog_posts").select("*").eq("author_profile_id",e.id);if(a)throw a;return t},enabled:!!e}),E=()=>{var t;const a=(null==e?void 0:e.first_name)||"",r=(null==e?void 0:e.last_name)||"";return a||r?`${a.charAt(0)}${r.charAt(0)}`:(null==(t=null==e?void 0:e.email)?void 0:t.charAt(0))||""};return n(fs,{children:s(jc,{children:[n($c,{title:"My Profile",description:"Manage your Meow Rescue profile, view your adoption applications, and track your donations."}),s("div",{className:"container mx-auto py-16 px-4",children:[n("h1",{className:"text-3xl font-bold mb-10 text-meow-primary",children:"My Profile"}),s(Bm,{defaultValue:"profile",className:"w-full",children:[s(Hm,{className:"mb-8",children:[n(Km,{value:"profile",children:"Profile"}),n(Km,{value:"applications",children:"Adoption Applications"}),n(Km,{value:"posts",children:"My Posts"}),n(Km,{value:"donations",children:"Donations"})]}),n(Wm,{value:"profile",children:s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s(wm,{className:"col-span-1",children:[s(xm,{className:"pb-6",children:[n(Nm,{children:"User Information"}),n(Cm,{children:"Your personal details"})]}),s(_m,{className:"flex flex-col items-center",children:[s("div",{className:"relative mb-6",children:[n(Ec,{className:"w-24 h-24",children:y?n(Dc,{src:y,alt:"Profile"}):n(Ac,{className:"text-2xl",children:E()})}),s(dm,{open:d,onOpenChange:m,children:[n(mm,{asChild:!0,children:n(Ds,{variant:"secondary",size:"icon",className:"absolute -bottom-2 -right-2 rounded-full",children:n(Mn,{className:"h-4 w-4"})})}),s(pm,{children:[s(gm,{children:[n(ym,{children:"Update Profile Photo"}),n(vm,{children:"Upload a new profile photo"})]}),n("div",{className:"space-y-4 py-4",children:s("div",{className:"flex flex-col items-center justify-center gap-4",children:[n(Ec,{className:"w-32 h-32",children:g?n(Dc,{src:URL.createObjectURL(g),alt:"Preview"}):y?n(Dc,{src:y,alt:"Profile"}):n(Ac,{className:"text-4xl",children:E()})}),s("div",{className:"flex flex-col items-center",children:[s("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:[s("div",{className:"flex items-center gap-2 px-4 py-2 bg-meow-primary/10 text-meow-primary rounded-md hover:bg-meow-primary/20 transition-colors",children:[n(es,{className:"h-4 w-4"}),n("span",{children:"Select Photo"})]}),n("input",{id:"photo-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{e.target.files&&e.target.files.length>0&&f(e.target.files[0])}})]}),g&&n("p",{className:"text-sm text-gray-500 mt-2",children:g.name})]})]})}),s(fm,{children:[n(Ds,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),n(Ds,{variant:"meow",onClick:async()=>{if(g&&e){p(!0);try{const t=g.name.split(".").pop(),a=`avatars/${`${e.id}-${Math.random().toString(36).substring(2,15)}.${t}`}`,{error:r}=await xt().storage.from("profiles").upload(a,g);if(r)throw r;const{data:n}=xt().storage.from("profiles").getPublicUrl(a);if(!n.publicUrl)throw new Error("Could not get public URL for uploaded image");const{error:i}=await supabase.from("profiles").update({avatar_url:n.publicUrl}).eq("id",e.id);if(i)throw i;v(n.publicUrl),b({title:"Profile Photo Updated",description:"Your profile photo has been updated successfully."}),m(!1),f(null),C()}catch(t){b({title:"Error",description:t.message||"Failed to upload profile photo. Please try again.",variant:"destructive"})}finally{p(!1)}}},disabled:u||!g,children:u?s(i,{children:[n("span",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Uploading..."]}):"Upload"})]})]})]})]}),s("div",{className:"text-center",children:[s("h3",{className:"font-medium text-lg",children:[(null==e?void 0:e.first_name)||""," ",(null==e?void 0:e.last_name)||""]}),n("p",{className:"text-gray-500 text-sm",children:null==e?void 0:e.email}),s("p",{className:"text-gray-500 text-sm mb-6",children:["Member since ",new Date((null==e?void 0:e.created_at)||"").toLocaleDateString()]}),s(dm,{open:r,onOpenChange:o,children:[n(mm,{asChild:!0,children:s(Ds,{size:"full",variant:"meow",className:"mb-4 w-full",children:[n(Ti,{className:"h-4 w-4 mr-2"})," Edit Profile"]})}),s(pm,{children:[s(gm,{children:[n(ym,{children:"Edit Profile"}),n(vm,{children:"Update your profile information below."})]}),n(Jm,{...w,children:s("form",{onSubmit:w.handleSubmit((async e=>{p(!0);try{if(!a)throw new Error("Authentication session is missing. Please log in again.");const{error:t}=await xt().auth.updateUser({data:{first_name:e.firstName,last_name:e.lastName}});if(t)throw t;b({title:"Profile Updated",description:"Your profile has been updated successfully."}),o(!1)}catch(t){b({title:"Error",description:t.message||"Failed to update profile. Please try again.",variant:"destructive"})}finally{p(!1)}})),className:"space-y-4",children:[n(tu,{control:w.control,name:"email",render:({field:e})=>s(nu,{children:[n(iu,{children:"Email"}),n(su,{children:n(od,{...e,disabled:!0})}),n(lu,{})]})}),n(tu,{control:w.control,name:"firstName",render:({field:e})=>s(nu,{children:[n(iu,{children:"First Name"}),n(su,{children:n(od,{...e,placeholder:"Your first name"})}),n(lu,{})]})}),n(tu,{control:w.control,name:"lastName",render:({field:e})=>s(nu,{children:[n(iu,{children:"Last Name"}),n(su,{children:n(od,{...e,placeholder:"Your last name"})}),n(lu,{})]})}),n(fm,{className:"mt-6",children:n(Ds,{type:"submit",variant:"meow",disabled:u,children:u?s(i,{children:[n("span",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):"Save changes"})})]})})]})]})]})]})]}),s(wm,{className:"col-span-2",children:[s(xm,{className:"pb-6",children:[n(Nm,{children:"Account Details"}),n(Cm,{children:"Manage your account information"})]}),n(_m,{children:s("div",{className:"space-y-6",children:[s("div",{children:[n("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Name"}),s("p",{children:[(null==e?void 0:e.first_name)||"Not provided"," ",(null==e?void 0:e.last_name)||""]})]}),s("div",{children:[n("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Email Address"}),n("p",{children:null==e?void 0:e.email})]}),s("div",{className:"pt-8 flex flex-wrap gap-4",children:[s(dm,{open:l,onOpenChange:c,children:[n(mm,{asChild:!0,children:s(Ds,{variant:"outline",className:"flex items-center",children:[n(pi,{className:"mr-2 h-4 w-4"})," Change Password"]})}),s(pm,{children:[s(gm,{children:[n(ym,{children:"Change Password"}),n(vm,{children:"Enter your new password below."})]}),n(Jm,{...x,children:s("form",{onSubmit:x.handleSubmit((async e=>{p(!0);try{if(e.password!==e.confirmPassword)return void b({title:"Error",description:"Passwords do not match.",variant:"destructive"});if(!a)throw new Error("Authentication session is missing. Please log in again.");const{error:t}=await xt().auth.updateUser({password:e.password});if(t)throw t;b({title:"Password Updated",description:"Your password has been updated successfully."}),c(!1),x.reset()}catch(t){b({title:"Error",description:t.message||"Failed to update password. Please try again.",variant:"destructive"})}finally{p(!1)}})),className:"space-y-4",children:[n(tu,{control:x.control,name:"password",render:({field:e})=>s(nu,{children:[n(iu,{children:"New Password"}),n(su,{children:n(od,{type:"password",...e,placeholder:"New password"})}),n(lu,{})]})}),n(tu,{control:x.control,name:"confirmPassword",render:({field:e})=>s(nu,{children:[n(iu,{children:"Confirm Password"}),n(su,{children:n(od,{type:"password",...e,placeholder:"Confirm new password"})}),n(lu,{})]})}),n(fm,{className:"mt-6",children:n(Ds,{type:"submit",variant:"meow",disabled:u,children:u?s(i,{children:[n("span",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Updating..."]}):"Change Password"})})]})})]})]}),s(_p,{children:[n(kp,{asChild:!0,children:s(Ds,{variant:"destructive",className:"flex items-center",children:[n(Qi,{className:"mr-2 h-4 w-4"})," Delete Account"]})}),s(Dp,{children:[s(Ap,{children:[n(Pp,{children:"Are you absolutely sure?"}),n(Tp,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),s(Mp,{className:"mt-6",children:[n(Fp,{children:"Cancel"}),n(Rp,{onClick:async()=>{p(!0);try{if(!a)throw new Error("Authentication session is missing. Please log in again.");b({title:"Account Deleted",description:"Your account has been deleted. You will be signed out."}),setTimeout((()=>{t()}),2e3)}catch(e){b({title:"Error",description:e.message||"Failed to delete account. Please try again.",variant:"destructive"})}finally{p(!1)}},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:u,children:u?s(i,{children:[n("span",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Deleting..."]}):"Delete Account"})]})]})]})]})]})})]})]})}),n(Wm,{value:"applications",children:s(wm,{children:[s(xm,{className:"pb-6",children:[n(Nm,{children:"Your Adoption Applications"}),n(Cm,{children:"Track the status of your adoption applications"})]}),n(_m,{children:s("div",{className:"text-center py-12",children:[n("p",{className:"text-gray-500 mb-6",children:"You haven't submitted any adoption applications yet."}),n(Ds,{asChild:!0,variant:"meow",children:n("a",{href:"/cats",children:"Browse Adoptable Cats"})})]})})]})}),n(Wm,{value:"posts",children:s("div",{className:"grid grid-cols-1 gap-8",children:[s(wm,{children:[s(xm,{className:"pb-6",children:[s(Nm,{className:"flex items-center gap-2",children:[n(Ei,{className:"h-5 w-5"}),"Your Blog Posts"]}),n(Cm,{children:"Posts you've authored in our blog"})]}),n(_m,{children:k&&k.length>0?n("div",{className:"divide-y",children:k.map((e=>s("div",{className:"py-4",children:[n("h3",{className:"font-medium",children:e.title}),s("p",{className:"text-sm text-gray-500 mt-1",children:[e.is_published?"Published":"Draft"," ",e.published_at?` Published on ${new Date(e.published_at).toLocaleDateString()}`:` Created on ${new Date(e.created_at).toLocaleDateString()}`]})]},e.id)))}):n("p",{className:"text-center py-6 text-gray-500",children:"You haven't created any blog posts yet."})})]}),s(wm,{children:[s(xm,{className:"pb-6",children:[s(Nm,{className:"flex items-center gap-2",children:[n($i,{className:"h-5 w-5"}),"Your Lost & Found Posts"]}),n(Cm,{children:"Posts you've made in the lost & found section"})]}),n(_m,{children:_&&_.length>0?n("div",{className:"divide-y",children:_.map((e=>s("div",{className:"py-4",children:[n("h3",{className:"font-medium",children:e.title}),s("p",{className:"text-sm text-gray-500 mt-1",children:[e.status,"  Posted on ",new Date(e.created_at).toLocaleDateString()]})]},e.id)))}):n("p",{className:"text-center py-6 text-gray-500",children:"You haven't created any lost & found posts yet."})})]})]})}),n(Wm,{value:"donations",children:s(wm,{children:[s(xm,{className:"pb-6",children:[n(Nm,{children:"Donation History"}),n(Cm,{children:"Review your previous donations"})]}),n(_m,{children:s("div",{className:"text-center py-12",children:[n("p",{className:"text-gray-500 mb-6",children:"You haven't made any donations yet."}),n(Ds,{asChild:!0,variant:"meowSecondary",children:n("a",{href:"/donate",children:"Make a Donation"})})]})})]})})]})]})]})})},Ip=()=>n(jc,{children:s("div",{className:"container mx-auto px-4 py-12",children:[n(Vc,{title:"Privacy Policy",subtitle:"Last Updated: April 2025",centered:!0}),s("div",{className:"max-w-4xl mx-auto mt-12 prose prose-lg",children:[s("p",{className:"bg-yellow-100 p-4 rounded text-yellow-800 mb-8",children:[n("strong",{children:"DISCLAIMER:"})," This is a template privacy policy. You must have this document reviewed by a qualified attorney before using it on your website."]}),n("h2",{children:"Introduction"}),n("p",{children:'Meow Rescue ("we," "our," or "us") respects your privacy and is committed to protecting it through our compliance with this policy. This policy describes the types of information we may collect from you or that you may provide when you visit our website and our practices for collecting, using, maintaining, protecting, and disclosing that information.'}),n("h2",{children:"Information We Collect"}),n("p",{children:"We collect several types of information from and about users of our website, including information:"}),s("ul",{children:[n("li",{children:'By which you may be personally identified, such as name, postal address, e-mail address, telephone number, or any other identifier by which you may be contacted online or offline ("personal information");'}),n("li",{children:"That is about you but individually does not identify you; and/or"}),n("li",{children:"About your internet connection, the equipment you use to access our website, and usage details."})]}),n("h2",{children:"How We Use Your Information"}),n("p",{children:"We use information that we collect about you or that you provide to us, including any personal information:"}),s("ul",{children:[n("li",{children:"To present our website and its contents to you."}),n("li",{children:"To provide you with information, products, or services that you request from us."}),n("li",{children:"To fulfill any other purpose for which you provide it."}),n("li",{children:"To carry out our obligations and enforce our rights arising from any contracts entered into between you and us, including for billing and collection."}),n("li",{children:"To notify you about changes to our website or any products or services we offer or provide though it."}),n("li",{children:"In any other way we may describe when you provide the information."}),n("li",{children:"For any other purpose with your consent."})]}),n("h2",{children:"Disclosure of Your Information"}),n("p",{children:"We may disclose aggregated information about our users, and information that does not identify any individual, without restriction. We may disclose personal information that we collect or you provide as described in this privacy policy:"}),s("ul",{children:[n("li",{children:"To contractors, service providers, and other third parties we use to support our business."}),n("li",{children:"To a buyer or other successor in the event of a merger, divestiture, restructuring, reorganization, dissolution, or other sale or transfer of some or all of Meow Rescue's assets."}),n("li",{children:"To fulfill the purpose for which you provide it."}),n("li",{children:"For any other purpose disclosed by us when you provide the information."}),n("li",{children:"With your consent."})]}),n("h2",{children:"Data Security"}),n("p",{children:"We have implemented measures designed to secure your personal information from accidental loss and from unauthorized access, use, alteration, and disclosure."}),n("h2",{children:"Contact Information"}),n("p",{children:"To ask questions or comment about this privacy policy and our privacy practices, contact us at: info@meowrescue.org or (727) 257-0037."})]})]})}),qp=()=>n(jc,{children:s("div",{className:"container mx-auto px-4 py-12",children:[n(Vc,{title:"Terms of Service",subtitle:"Last Updated: April 2025",centered:!0}),s("div",{className:"max-w-4xl mx-auto mt-12 prose prose-lg",children:[s("p",{className:"bg-yellow-100 p-4 rounded text-yellow-800 mb-8",children:[n("strong",{children:"DISCLAIMER:"})," This is a template terms of service document. You must have this document reviewed by a qualified attorney before using it on your website."]}),n("h2",{children:"Agreement to Terms"}),n("p",{children:"By accessing or using the Meow Rescue website, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this site."}),n("h2",{children:"Use License"}),n("p",{children:"Permission is granted to temporarily view the materials on Meow Rescue's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),s("ul",{children:[n("li",{children:"Modify or copy the materials;"}),n("li",{children:"Use the materials for any commercial purpose, or for any public display (commercial or non-commercial);"}),n("li",{children:"Attempt to decompile or reverse engineer any software contained on Meow Rescue's website;"}),n("li",{children:"Remove any copyright or other proprietary notations from the materials; or"}),n("li",{children:'Transfer the materials to another person or "mirror" the materials on any other server.'})]}),n("h2",{children:"Disclaimer"}),n("p",{children:"The materials on Meow Rescue's website are provided on an 'as is' basis. Meow Rescue makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."}),n("h2",{children:"Limitations"}),n("p",{children:"In no event shall Meow Rescue or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Meow Rescue's website, even if Meow Rescue or a Meow Rescue authorized representative has been notified orally or in writing of the possibility of such damage."}),n("h2",{children:"Adoption Process"}),n("p",{children:"Our website provides information about cats available for adoption. By submitting an adoption application, you are not guaranteed approval. All adoption decisions are made at the sole discretion of Meow Rescue, and we reserve the right to deny any application without providing a reason."}),n("h2",{children:"Governing Law"}),n("p",{children:"These terms and conditions are governed by and construed in accordance with the laws of Florida and you irrevocably submit to the exclusive jurisdiction of the courts in that State."}),n("h2",{children:"Contact Information"}),n("p",{children:"For any questions regarding these Terms of Service, please contact us at: info@meowrescue.org or (727) 257-0037."})]})]})}),Op=({filter:e,setFilter:t})=>s("div",{className:"flex flex-wrap gap-2",children:[n(Ds,{variant:"all"===e?"default":"outline",size:"sm",onClick:()=>t("all"),children:"All Posts"}),n(Ds,{variant:"lost"===e?"default":"outline",size:"sm",onClick:()=>t("lost"),children:"Lost Pets"}),n(Ds,{variant:"found"===e?"default":"outline",size:"sm",onClick:()=>t("found"),children:"Found Pets"}),n(Ds,{variant:"reunited"===e?"default":"outline",size:"sm",onClick:()=>t("reunited"),children:"Reunited"})]}),jp=({searchTerm:e,setSearchTerm:t})=>s("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[s("div",{className:"relative w-full sm:w-auto flex-grow max-w-md",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),n(od,{type:"text",placeholder:"Search posts...",value:e,onChange:e=>t(e.target.value),className:"pl-9 w-full"})]}),n(Ds,{asChild:!0,variant:"meow",className:"whitespace-nowrap",children:s(X,{to:"/lost-found/new",children:[n(Li,{className:"mr-1",size:16})," New Post"]})})]}),$p=e=>{switch(null==e?void 0:e.toLowerCase()){case"lost":return"bg-red-100 text-red-800 border-red-200";case"found":return"bg-amber-100 text-amber-800 border-amber-200";case"reunited":return"bg-green-100 text-green-800 border-green-200";case"archived":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},zp=e=>{switch(null==e?void 0:e.toLowerCase()){case"lost":return d.createElement($n,{size:16,strokeWidth:2});case"found":return d.createElement($i,{size:16,strokeWidth:2});case"reunited":return d.createElement(zn,{size:16,strokeWidth:2});case"archived":return d.createElement(fn,{size:16,strokeWidth:2});default:return null}},Up=({post:e})=>s(X,{to:`/lost-found/${e.id}`,className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[s("div",{className:"relative",children:[e.photos_urls&&e.photos_urls.length>0?n("img",{src:e.photos_urls[0],alt:e.title,className:"w-full h-48 object-cover"}):n("div",{className:"w-full h-48 bg-gray-200 flex items-center justify-center",children:n("span",{className:"text-gray-500",children:"No image available"})}),s("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${$p(e.status)}`,children:[zp(e.status),e.status.charAt(0).toUpperCase()+e.status.slice(1)]})]}),s("div",{className:"p-4",children:[n("h3",{className:"text-lg font-bold mb-2 text-gray-800 line-clamp-1",children:e.title}),n("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),s("div",{className:"flex items-start mb-2",children:[n(Ni,{size:16,className:"text-gray-400 mr-1 mt-0.5 flex-shrink-0"}),n("span",{className:"text-sm text-gray-500 line-clamp-1",children:e.location})]}),s("div",{className:"flex items-start",children:[n(Dn,{size:16,className:"text-gray-400 mr-1 mt-0.5 flex-shrink-0"}),n("span",{className:"text-sm text-gray-500",children:new Date(e.date_occurred).toLocaleDateString()})]})]})]}),Vp=({posts:e,isLoading:t,filter:a})=>t?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map((e=>s("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[n("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),n("div",{className:"h-24 bg-gray-200 rounded mb-4"}),n("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),n("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]},e)))}):0===e.length?s("div",{className:"text-center py-12",children:[n("div",{className:"text-5xl mb-4",children:""}),n("h3",{className:"text-xl font-medium mb-2",children:"No posts found"}),n("p",{className:"text-gray-600 mb-6",children:"all"!==a?`There are no ${a} pets posts available. Try another filter or check back later.`:"There are no posts available at the moment. Be the first to create one!"}),n(Ds,{asChild:!0,variant:"meow",children:n(X,{to:"/lost-found/new",children:"Create a Post"})})]}):n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>n(Up,{post:e},e.id)))}),Bp=()=>{const{user:e}=At(),{toast:t}=xr(),[a,r]=h([]),[i,o]=h(!0),[l,c]=h(null),[d,m]=h("all"),[u,g]=h("");p((()=>{f()}),[d]);const f=async()=>{o(!0),c(null);try{let e=supabase.from("lost_found_posts").select("*").neq("status","archived").order("created_at",{ascending:!1});"all"!==d&&(e=e.eq("status",d));const{data:a,error:n}=await e;if(n)return console.error("Error fetching posts:",n),c(n.message),void t({title:"Error fetching posts",description:n.message,variant:"destructive"});r(a)}catch(e){console.error("Unexpected error:",e),c(e.message||"An unexpected error occurred")}finally{o(!1)}},y=async()=>{o(!0),c(null);try{let e=supabase.from("lost_found_posts").select("*").neq("status","archived").order("created_at",{ascending:!1});"all"!==d&&(e=e.eq("status",d));const{data:a,error:n}=await e;if(n)return console.error("Error refetching posts:",n),c(n.message),void t({title:"Error refetching posts",description:n.message,variant:"destructive"});r(a)}catch(e){console.error("Unexpected error:",e),c(e.message||"An unexpected error occurred")}finally{o(!1)}};p((()=>{const e=supabase.channel("lost-found-updates").on("postgres_changes",{event:"*",schema:"public",table:"lost_found_posts"},(e=>{console.log("Lost and found update received:",e),y()})).subscribe();return()=>{e.unsubscribe()}}),[y]);const v=u?(null==a?void 0:a.filter((e=>e.title.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase())||e.pet_type.toLowerCase().includes(u.toLowerCase())||e.pet_name&&e.pet_name.toLowerCase().includes(u.toLowerCase())||e.location.toLowerCase().includes(u.toLowerCase()))))??[]:a??[],b={"@context":"https://schema.org","@type":"CollectionPage",name:"Lost & Found Pets",description:"Help reunite lost pets with their families. Report lost or found pets in our community.",url:"https://meowrescue.org/lost-found",mainEntity:{"@type":"ItemList",itemListElement:null==a?void 0:a.map(((e,t)=>({"@type":"ListItem",position:t+1,item:{"@type":"Article",name:e.title,description:e.description,url:`https://meowrescue.org/lost-found/${e.id}`}})))}};return s(jc,{children:[n($c,{title:"Lost & Found Pets | Meow Rescue",description:"Help reunite lost pets with their families. Report lost or found pets in our community.",keywords:"lost pets, found pets, missing cats, missing pets, pet reunification, animal rescue",canonicalUrl:"/lost-found",structuredData:b}),n(id,{title:"Lost & Found Pets",subtitle:"Help reunite lost pets with their families"}),s("div",{className:"container mx-auto px-4 py-8 mt-2",children:[s("div",{className:"flex flex-col gap-6 mb-8",children:[n(Op,{filter:d,setFilter:m}),n(jp,{searchTerm:u,setSearchTerm:g})]}),l&&s("div",{className:"text-center py-8",children:[n("p",{className:"text-red-500 mb-4",children:l}),n(Ds,{onClick:f,children:"Try Again"})]}),n(Vp,{posts:v,isLoading:i,filter:d})]})]})},Hp=()=>{const{id:e}=J(),t=Z(),{user:a}=At();xr();const[r,o]=h(0),{data:l,isLoading:c,error:d,refetch:m}=S({queryKey:["lost-found-post",e,r],queryFn:async()=>{console.log(`Fetching lost & found post with ID: ${e}`);try{const t=xt(),{data:a,error:r}=await t.from("lost_found_posts").select("*").eq("id",e).single();if(r)throw r;let n=null;if(a.profile_id){const{data:e,error:r}=await t.from("profiles").select("first_name, last_name, email").eq("id",a.profile_id).single();!r&&e&&(n=e)}return{...a,profiles:n}}catch(t){throw console.error("Error fetching lost & found post:",t),t}},retry:!1});p((()=>{if(!e)return;const t=xt().channel(`lost-found-${e}-updates`).on("postgres_changes",{event:"*",schema:"public",table:"lost_found_posts",filter:`id=eq.${e}`},(e=>{console.log("Lost and found update received:",e),window.location.reload()})).subscribe();return()=>{t.unsubscribe()}}),[e]);const u=()=>{o((e=>e+1))},g=()=>{t("/lost-found")},f=a&&(null==l?void 0:l.profile_id)===a.id;return c?n(jc,{children:n("div",{className:"container mx-auto px-4 py-8",children:s("div",{className:"max-w-4xl mx-auto animate-pulse",children:[n("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),n("div",{className:"h-64 bg-gray-200 rounded mb-6"}),s("div",{className:"space-y-4",children:[n("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),n("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),n("div",{className:"h-6 bg-gray-200 rounded w-1/4"})]})]})})}):d?n(jc,{children:n("div",{className:"container mx-auto px-4 py-8",children:s("div",{className:"flex flex-col items-center justify-center text-center py-12",children:[n($n,{className:"w-16 h-16 text-red-500 mb-4"}),n("h2",{className:"text-2xl font-bold mb-2",children:"Error loading post details"}),n("p",{className:"text-gray-600 mb-6",children:"Please try again later."}),s("div",{className:"flex gap-4",children:[s(Ds,{onClick:u,className:"flex items-center gap-2",children:[n(qi,{size:16}),"Try Again"]}),n(Ds,{variant:"outline",onClick:g,children:"Return to Lost & Found"})]})]})})}):s(jc,{children:[n($c,{title:`${l.title} | Lost & Found`,description:l.description}),s("div",{className:"container mx-auto px-4 py-8",children:[n(Ds,{asChild:!0,variant:"outline",className:"mb-6",size:"sm",children:s(X,{to:"/lost-found",children:[n(qn,{className:"mr-1",size:16})," Back to Lost & Found"]})}),s("div",{className:"max-w-4xl mx-auto",children:[n("h1",{className:"text-3xl font-bold text-meow-primary mb-4",children:l.title}),n("div",{className:"mb-4",children:n(Wc,{variant:"lost"===l.status?"destructive":"found"===l.status?"outline":"reunited"===l.status?"default":"secondary",children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})}),l.photos_urls&&l.photos_urls.length>0&&n("div",{className:"mb-6",children:n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.photos_urls.map(((e,t)=>n("img",{src:e,alt:`${l.pet_type} ${t+1}`,className:"rounded-md w-full h-64 object-cover"},t)))})}),s("div",{className:"space-y-4",children:[s("div",{children:[n("h2",{className:"text-xl font-semibold mb-2",children:"Details"}),s("p",{children:[n("span",{className:"font-medium",children:"Pet Type:"})," ",l.pet_type]}),l.pet_name&&s("p",{children:[n("span",{className:"font-medium",children:"Pet Name:"})," ",l.pet_name]}),s("p",{children:[n("span",{className:"font-medium",children:"Location:"})," ",l.location]}),s("p",{children:[n("span",{className:"font-medium",children:"Date:"})," ",new Date(l.date_occurred).toLocaleDateString()]})]}),s("div",{children:[n("h2",{className:"text-xl font-semibold mb-2",children:"Description"}),n("p",{className:"whitespace-pre-wrap",children:l.description})]}),s("div",{children:[n("h2",{className:"text-xl font-semibold mb-2",children:"Contact Information"}),l.profiles?s(i,{children:[s("p",{children:[n("span",{className:"font-medium",children:"Name:"})," ",l.profiles.first_name," ",l.profiles.last_name]}),s("p",{children:[n("span",{className:"font-medium",children:"Email:"})," ",l.profiles.email]}),l.contact_info&&s("p",{children:[n("span",{className:"font-medium",children:"Additional Contact Info:"})," ",l.contact_info]})]}):n("p",{children:"No contact information available."})]}),f&&n("div",{children:n(Ds,{asChild:!0,variant:"meow",children:n(X,{to:`/lost-found/edit/${e}`,children:"Edit Post"})})})]})]})]})]})},Kp=()=>{const{id:e}=J(),t=Boolean(e),{user:a}=At(),r=Z(),{toast:o}=xr(),[l,c]=h({title:"",description:"",location:"",status:"lost",pet_type:"",pet_name:"",date_occurred:(new Date).toISOString().split("T")[0],contact_info:""}),[d,m]=h([]),[u,g]=h([]),[f,y]=h([]),[v,b]=h(!1),[w,x]=h(t);p((()=>{if(!a)return o({title:"Authentication required",description:"Please log in to create or edit posts.",variant:"destructive"}),void r("/login");t&&e&&N()}),[a,e]);const N=async()=>{try{const{data:t,error:n}=await supabase.from("lost_found_posts").select("*").eq("id",e).single();if(n)throw n;const i=t;if(i.profile_id!==(null==a?void 0:a.id))return o({title:"Unauthorized",description:"You can only edit your own posts.",variant:"destructive"}),void r("/lost-found");const s=i.date_occurred?new Date(i.date_occurred).toISOString().split("T")[0]:"";c({title:i.title||"",description:i.description||"",location:i.location||"",status:i.status||"lost",pet_type:i.pet_type||"",pet_name:i.pet_name||"",date_occurred:s,contact_info:i.contact_info||""}),i.photos_urls&&g(i.photos_urls)}catch(t){console.error("Error fetching post:",t),o({title:"Error",description:"Failed to load post data. Please try again.",variant:"destructive"}),r("/lost-found")}finally{x(!1)}},C=e=>{const{id:t,value:a}=e.target;c((e=>({...e,[t]:a})))};return n(jc,w?{children:n("div",{className:"container mx-auto px-4 py-8",children:s("div",{className:"animate-pulse max-w-2xl mx-auto",children:[n("div",{className:"h-10 bg-gray-200 rounded w-1/3 mb-8"}),s("div",{className:"space-y-4",children:[[1,2,3,4,5,6].map((e=>s("div",{className:"space-y-2",children:[n("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),n("div",{className:"h-10 bg-gray-200 rounded w-full"})]},e))),n("div",{className:"h-10 bg-gray-200 rounded w-32 mt-6"})]})]})})}:{children:s("div",{className:"container mx-auto px-4 py-8",children:[n(Ds,{asChild:!0,variant:"outline",className:"mb-6",size:"sm",children:s(X,{to:"/lost-found",children:[n(qn,{className:"mr-1",size:16})," Back to Lost & Found"]})}),n(Vc,{title:t?"Edit Post":"Create New Post",subtitle:t?"Update your lost or found pet information":"Share information about a lost or found pet",centered:!0}),n("form",{onSubmit:async n=>{if(n.preventDefault(),!a)return o({title:"Authentication required",description:"Please log in to create or edit posts.",variant:"destructive"}),void r("/login");if(l.title&&l.description&&l.location&&l.pet_type&&l.date_occurred){b(!0);try{let n=[];d.length>0&&(n=await(async()=>{if(0===d.length)return[];const e=[];for(const t of d){const r=t.name.split(".").pop(),n=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${r}`,i=`${a.id}/${n}`,{data:s,error:o}=await xt().storage.from("lost_found_photos").upload(i,t);if(o)throw console.error("Error uploading photo:",o),new Error("Failed to upload one or more photos.");const{data:l}=xt().storage.from("lost_found_photos").getPublicUrl(i);e.push(l.publicUrl)}return e})());const i=[...u,...n];if(t&&e){f.length>0&&await(async()=>{if(0!==f.length)for(const e of f){const t=new URL(e).pathname.split("/"),a=t[2],r=t.slice(3).join("/");a&&r&&await xt().storage.from("lost_found_photos").remove([r])}})();const{error:t}=await supabase.from("lost_found_posts").update({title:l.title,description:l.description,location:l.location,status:l.status,pet_type:l.pet_type,pet_name:l.pet_name||null,date_occurred:l.date_occurred,contact_info:l.contact_info,photos_urls:i}).eq("id",e);if(t)throw t;o({title:"Post updated",description:"Your post has been updated successfully."})}else{const{data:e,error:t}=await supabase.from("lost_found_posts").insert({profile_id:a.id,title:l.title,description:l.description,location:l.location,status:l.status,pet_type:l.pet_type,pet_name:l.pet_name||null,date_occurred:l.date_occurred,contact_info:l.contact_info,photos_urls:i}).select();if(t)throw t;o({title:"Post created",description:"Your post has been created successfully."})}r(t?`/lost-found/${e}`:"/lost-found")}catch(i){console.error("Error saving post:",i),o({title:"Error",description:i.message||"Failed to save your post. Please try again.",variant:"destructive"})}finally{b(!1)}}else o({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"})},className:"max-w-2xl mx-auto",children:s("div",{className:"grid grid-cols-1 gap-6",children:[s("div",{children:[n(Zm,{htmlFor:"title",className:"block mb-1",children:"Title*"}),n(od,{id:"title",value:l.title,onChange:C,placeholder:"E.g., Lost black cat in Forest Hills",required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"status",className:"block mb-1",children:"Status*"}),s("select",{id:"status",value:l.status,onChange:C,className:"w-full h-10 rounded-md border border-input bg-background px-3 py-2",required:!0,children:[n("option",{value:"lost",children:"Lost Pet"}),n("option",{value:"found",children:"Found Pet"}),n("option",{value:"reunited",children:"Reunited"})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{children:[n(Zm,{htmlFor:"pet_type",className:"block mb-1",children:"Pet Type*"}),n(od,{id:"pet_type",value:l.pet_type,onChange:C,placeholder:"E.g., Cat, Dog, Bird, etc.",required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"pet_name",className:"block mb-1",children:"Pet Name (if known)"}),n(od,{id:"pet_name",value:l.pet_name,onChange:C,placeholder:"Pet's name"})]})]}),s("div",{children:[n(Zm,{htmlFor:"description",className:"block mb-1",children:"Description*"}),n(cu,{id:"description",value:l.description,onChange:C,placeholder:"Please provide a detailed description of the pet, including color, breed, size, distinctive features, etc.",rows:5,required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"location",className:"block mb-1",children:"Location*"}),n(od,{id:"location",value:l.location,onChange:C,placeholder:"E.g., Near Central Park, Main St & 5th Ave, etc.",required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"date_occurred",className:"block mb-1",children:"Date*"}),n(od,{type:"date",id:"date_occurred",value:l.date_occurred,onChange:C,max:(new Date).toISOString().split("T")[0],required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"contact_info",className:"block mb-1",children:"Contact Information"}),n(od,{id:"contact_info",value:l.contact_info,onChange:C,placeholder:"Your phone number or email (if different from account)"}),n("div",{className:"text-sm text-gray-500 mt-1",children:"If left blank, your account email will be used as contact information."})]}),s("div",{children:[n(Zm,{className:"block mb-1",children:"Photos (Max 5)"}),n("div",{className:"mt-2 mb-4",children:s(Zm,{htmlFor:"photo-upload",className:"cursor-pointer inline-flex items-center gap-2 border border-dashed border-gray-300 rounded-lg p-4 w-full justify-center text-gray-600 hover:bg-gray-50",children:[n(es,{size:20}),n("span",{children:"Click to upload photos"}),n(od,{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files.length>0){const t=Array.from(e.target.files);if(u.length+d.length-f.length+t.length>5)return void o({title:"Too many photos",description:"You can upload a maximum of 5 photos per post.",variant:"destructive"});m((e=>[...e,...t]))}},className:"hidden"})]})}),u.length>0&&s("div",{className:"mb-4",children:[n("h3",{className:"text-sm font-medium mb-2",children:"Current Photos:"}),n("div",{className:"flex flex-wrap gap-3",children:u.map(((e,t)=>s("div",{className:"relative w-20 h-20",children:[n("img",{src:e,alt:`Photo ${t+1}`,className:"w-full h-full object-cover rounded"}),n("button",{type:"button",onClick:()=>(e=>{g((t=>t.filter((t=>t!==e)))),y((t=>[...t,e]))})(e),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:n(ss,{size:14})})]},`existing-${t}`)))})]}),d.length>0&&s("div",{children:[n("h3",{className:"text-sm font-medium mb-2",children:"New Photos to Upload:"}),n("div",{className:"flex flex-wrap gap-3",children:d.map(((e,t)=>s("div",{className:"relative w-20 h-20",children:[n("img",{src:URL.createObjectURL(e),alt:`Photo ${t+1}`,className:"w-full h-full object-cover rounded"}),n("button",{type:"button",onClick:()=>(e=>{m((t=>t.filter(((t,a)=>a!==e))))})(t),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:n(ss,{size:14})})]},`new-${t}`)))})]})]}),n(Ds,{type:"submit",variant:"meow",size:"lg",disabled:v,className:"mt-4",children:v?s(i,{children:[n(vi,{className:"mr-2 h-4 w-4 animate-spin"})," ",t?"Updating...":"Submitting..."]}):t?"Update Post":"Create Post"})]})})]})})},Wp=({onMenuClick:e,isMenuOpen:t})=>n("header",{className:"bg-white shadow-sm h-16 flex items-center px-4 fixed top-0 right-0 left-0 z-30 md:pl-64",children:s("div",{className:"flex items-center justify-between w-full",children:[n("div",{className:"md:hidden",children:n(ws,{})}),n("div",{className:"md:hidden",children:n(Ds,{variant:"ghost",size:"icon",onClick:e,"aria-label":t?"Close menu":"Open menu",children:n(t?ss:ki,{className:"h-5 w-5"})})})]})}),Yp=[{id:"dashboard",label:null,items:[{to:"/admin/dashboard",icon:n(gi,{className:"w-5 h-5"}),label:"Dashboard"}]},{id:"animals",label:"ANIMALS",items:[{to:"/admin/cats",icon:n(Pi,{className:"w-5 h-5"}),label:"Cats"},{to:"/admin/applications",icon:n(ri,{className:"w-5 h-5"}),label:"Applications"},{to:"/admin/lost-found",icon:n($i,{className:"w-5 h-5"}),label:"Lost & Found"}]},{id:"content",label:"CONTENT",items:[{to:"/admin/blog",icon:n(kn,{className:"w-5 h-5"}),label:"Blog"},{to:"/admin/events",icon:n(An,{className:"w-5 h-5"}),label:"Events"},{to:"/admin/success-stories",icon:n(Cn,{className:"w-5 h-5"}),label:"Success Stories"}]},{id:"users",label:"USERS",items:[{to:"/admin/users",icon:n(ns,{className:"w-5 h-5"}),label:"User Management"},{to:"/admin/messages",icon:n(xi,{className:"w-5 h-5"}),label:"Contact Form"},{to:"/admin/chat",icon:n(zi,{className:"w-5 h-5"}),label:"Live Chat"},{to:"/admin/direct-messages",icon:n(Ei,{className:"w-5 h-5"}),label:"Direct Messages"}]},{id:"finance",label:"FINANCE",items:[{to:"/admin/finance",icon:n(Gn,{className:"w-5 h-5"}),label:"Finances"},{to:"/admin/budget",icon:n(Tn,{className:"w-5 h-5"}),label:"Budget Planning"},{to:"/admin/finance/campaigns",icon:n(ri,{className:"w-5 h-5"}),label:"Campaigns"}]},{id:"inventory",label:"INVENTORY",items:[{to:"/admin/supplies",icon:n(Mi,{className:"w-5 h-5"}),label:"Supplies"},{to:"/admin/orders",icon:n(Zi,{className:"w-5 h-5"}),label:"Orders"}]},{id:"documents",label:"DOCUMENTS",items:[{to:"/admin/documents",icon:n(si,{className:"w-5 h-5"}),label:"Documents"},{to:"/admin/business-licenses",icon:n(Wn,{className:"w-5 h-5"}),label:"Business Licenses"}]},{id:"system",label:"SYSTEM",items:[{to:"/admin/security",icon:n(Hi,{className:"w-5 h-5"}),label:"Security"},{to:"/admin/settings",icon:n(Ui,{className:"w-5 h-5"}),label:"Settings"}]}],Gp=({user:e,isActive:t})=>n(i,{children:Yp.map((a=>s(d.Fragment,{children:[a.label&&n("li",{className:"mt-4 mb-1 px-2",children:n("span",{className:"uppercase tracking-widest text-xs font-semibold text-gray-400",children:a.label})}),a.items.map((a=>n("li",{children:s(te,{to:a.to,className:"flex items-center p-2 text-base text-gray-700 rounded-lg transition-colors hover:bg-gray-100 font-medium "+(t(a.to)?"bg-meow-primary/10 text-meow-primary font-bold":""),children:[a.icon,n("span",{className:"ml-3",children:a.label}),"Live Chat"===a.label&&(null==e?void 0:e.unread_chat_count)?n("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:e.unread_chat_count>99?"99+":e.unread_chat_count}):null,"Contact Form"===a.label&&(null==e?void 0:e.unread_message_count)?n("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:e.unread_message_count>99?"99+":e.unread_message_count}):null]})},a.to)))]},a.id)))}),Qp=({onLogout:e})=>n("div",{className:"p-4 border-t border-gray-200 mt-auto",children:s("button",{onClick:e,className:"w-full flex items-center p-2 text-gray-600 rounded-lg hover:bg-gray-100 font-medium",children:[n(wi,{className:"w-5 h-5"}),n("span",{className:"ml-3",children:"Logout"})]})}),Xp=()=>{const e=Z(),{signOut:t,user:a}=At(),r=Q();return s("div",{className:"bg-white border-r z-40 shadow-md h-full min-h-screen w-64 flex flex-col fixed top-0 left-0",children:[n("div",{className:"p-4 border-b border-gray-200",children:s(X,{to:"/",className:"flex items-center gap-2",children:[n("div",{className:"bg-meow-primary rounded-full p-1 flex items-center justify-center",style:{width:32,height:32},children:n(Pn,{className:"h-5 w-5 text-white"})}),s("span",{className:"font-bold text-xl",children:[n("span",{className:"text-meow-primary",children:"Meow"}),n("span",{className:"text-meow-secondary",children:"Rescue"})]})]})}),n("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:n("ul",{className:"space-y-1",children:n(Gp,{user:a,isActive:e=>r.pathname===e||r.pathname.startsWith(`${e}/`)})})}),n(Qp,{onLogout:async()=>{try{await t(),e("/")}catch(a){console.error("Logout error:",a)}}})]})},Zp=({children:e,className:t="",style:a})=>n("div",{className:`bg-white fixed left-0 right-0 z-50 max-h-[calc(100vh-4rem)] overflow-y-auto \n        animate-fade-in drop-shadow-lg ${t}`.replace(/\s+/g," "),style:{borderTopWidth:"0px",...a},onClick:e=>{e.stopPropagation()},"data-mobile-menu-panel":!0,children:n("div",{className:"container mx-auto px-4 py-4",children:n("ul",{className:"flex flex-col space-y-4",onClick:e=>e.stopPropagation(),children:e})})}),Jp=[{id:"dashboard",label:null,items:[{label:"Dashboard",path:"/admin/dashboard",icon:gi}]},{id:"animals",label:"Animals",icon:Pi,items:[{label:"Cats",path:"/admin/cats",icon:Pi},{label:"Applications",path:"/admin/applications",icon:ri},{label:"Lost & Found",path:"/admin/lost-found",icon:$i}]},{id:"content",label:"Content",icon:ri,items:[{label:"Blog",path:"/admin/blog",icon:ri},{label:"Events",path:"/admin/events",icon:An},{label:"Success Stories",path:"/admin/success-stories",icon:Cn}]},{id:"users",label:"Users",icon:ns,items:[{label:"User Management",path:"/admin/users",icon:ns},{label:"Contact Form",path:"/admin/messages",icon:xi},{label:"Live Chat",path:"/admin/chat",icon:zi},{label:"Direct Messages",path:"/admin/direct-messages",icon:Ei}]},{id:"finance",label:"Finance",icon:Gn,items:[{label:"Finances",path:"/admin/finance",icon:Gn},{label:"Budget Planning",path:"/admin/budget",icon:Tn},{label:"Campaigns",path:"/admin/finance/campaigns",icon:ri}]},{id:"inventory",label:"Inventory",icon:Mi,items:[{label:"Supplies",path:"/admin/supplies",icon:Mi},{label:"Orders",path:"/admin/orders",icon:Zi}]},{id:"documents",label:"Documents",icon:si,items:[{label:"Documents",path:"/admin/documents",icon:si},{label:"Business Licenses",path:"/admin/business-licenses",icon:Wn}]},{id:"system",label:"System",icon:Ui,items:[{label:"Security",path:"/admin/security",icon:Hi},{label:"Settings",path:"/admin/settings",icon:Ui}]}],eg=({onNav:e})=>n(i,{children:Jp.flatMap((t=>[t.label&&n("li",{className:"mt-2 mb-1 px-2",children:n("span",{className:"uppercase tracking-widest text-xs font-semibold text-gray-400",children:t.label})},t.id+"-label"),...t.items.map((t=>n("li",{children:s("button",{type:"button",className:"flex items-center w-full text-gray-700 px-2 py-2 rounded-lg font-medium hover:bg-meow-primary/10 hover:text-meow-primary transition justify-start text-base",onClick:a=>{a.preventDefault(),a.stopPropagation(),console.log("Admin menu item clicked:",t.path),e(t.path)},children:[n("span",{className:"mr-3",children:d.createElement(t.icon,{size:20})}),n("span",{children:t.label})]})},t.path)))]))}),tg=({open:e,onOpenChange:t})=>{const a=Z(),{signOut:r}=At();return e?s(Zp,{className:"top-16 border-t-0",style:{marginTop:0},children:[n(eg,{onNav:e=>{console.log("Admin mobile menu navigating to:",e),a(e),setTimeout((()=>{console.log("Closing admin mobile menu"),t(!1)}),200)}}),n("li",{className:"border-t border-gray-200 mt-2 pt-2",children:s("button",{type:"button",className:"flex items-center w-full text-gray-700 px-2 py-2 rounded-lg font-medium hover:text-meow-primary transition text-base",onClick:async e=>{e.preventDefault(),e.stopPropagation();try{console.log("Admin logout initiated"),await r(),t(!1),setTimeout((()=>a("/")),200)}catch(n){console.error("Logout error:",n)}},children:[n(wi,{size:20,className:"mr-3"}),n("span",{className:"text-base",children:"Logout"})]})})]}):null},ag=u(void 0);function rg({children:e}){const[t,a]=h(!0),r={isSidebarOpen:t,toggleSidebar:w((()=>{a((e=>!e))}),[])};return n(ag.Provider,{value:r,children:e})}const ng=({children:e,title:t})=>{const[a,r]=h(!1);return n(rg,{children:s("div",{className:"flex min-h-screen bg-gray-50",children:[n("div",{className:"hidden md:block",children:n(Xp,{})}),s("div",{className:"flex flex-col flex-1 md:pl-64",children:[n(Wp,{onMenuClick:()=>{r((e=>!e))},isMenuOpen:a}),n(tg,{open:a,onOpenChange:r}),n("main",{className:"flex-1 pt-16",children:e})]})]})})},ig=()=>{const{data:e}=S({queryKey:["cats-count"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("cats").select("*",{count:"exact",head:!0});if(t)throw t;return e||0}}),{data:t}=S({queryKey:["adoptions-count"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("applications").select("*",{count:"exact",head:!0}).eq("status","approved");if(t)throw t;return e||0}}),{data:a}=S({queryKey:["pending-applications"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("applications").select("*",{count:"exact",head:!0}).eq("status","pending");if(t)throw t;return e||0}}),{data:r}=S({queryKey:["unread-messages"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("contact_messages").select("*",{count:"exact",head:!0}).eq("status","New");if(t)throw t;return e||0}});return s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n(wm,{className:"border-l-4 border-l-meow-primary",children:s(_m,{className:"p-4 flex justify-between items-center",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Available Cats"}),n("h3",{className:"text-3xl font-bold",children:e||0})]}),n("div",{className:"p-3 rounded-full bg-meow-primary/10",children:n(Pn,{className:"h-6 w-6 text-meow-primary"})})]})}),n(wm,{className:"border-l-4 border-l-green-500",children:s(_m,{className:"p-4 flex justify-between items-center",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Adoptions"}),n("h3",{className:"text-3xl font-bold",children:t||0})]}),n("div",{className:"p-3 rounded-full bg-green-500/10",children:n(ci,{className:"h-6 w-6 text-green-500"})})]})}),n(wm,{className:"border-l-4 border-l-blue-500",children:s(_m,{className:"p-4 flex justify-between items-center",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Applications"}),n("h3",{className:"text-3xl font-bold",children:a||0})]}),n("div",{className:"p-3 rounded-full bg-blue-500/10",children:n(ri,{className:"h-6 w-6 text-blue-500"})})]})}),n(wm,{className:"border-l-4 border-l-amber-500",children:s(_m,{className:"p-4 flex justify-between items-center",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Messages"}),n("h3",{className:"text-3xl font-bold",children:r||0})]}),n("div",{className:"p-3 rounded-full bg-amber-500/10",children:n(Ei,{className:"h-6 w-6 text-amber-500"})})]})})]})},sg=()=>s("div",{className:"mb-6",children:[n("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s(X,{to:"/admin/cats/new",className:"flex flex-col items-center justify-center p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors",children:[n("div",{className:"p-3 rounded-full bg-meow-primary/10 mb-2",children:n(Pn,{className:"h-6 w-6 text-meow-primary"})}),n("span",{className:"font-medium",children:"Add New Cat"})]}),s(X,{to:"/admin/events",className:"flex flex-col items-center justify-center p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors",children:[n("div",{className:"p-3 rounded-full bg-blue-500/10 mb-2",children:n(An,{className:"h-6 w-6 text-blue-500"})}),n("span",{className:"font-medium",children:"Schedule Event"})]}),s(X,{to:"/admin/blog/new",className:"flex flex-col items-center justify-center p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors",children:[n("div",{className:"p-3 rounded-full bg-green-500/10 mb-2",children:n(ri,{className:"h-6 w-6 text-green-500"})}),n("span",{className:"font-medium",children:"Create Blog Post"})]}),s(X,{to:"/admin/lost-found",className:"flex flex-col items-center justify-center p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors",children:[n("div",{className:"p-3 rounded-full bg-amber-500/10 mb-2",children:n(Ci,{className:"h-6 w-6 text-amber-500"})}),n("span",{className:"font-medium",children:"Lost & Found"})]})]})]}),og=()=>{const{data:e,isLoading:t,error:a}=S({queryKey:["recent-activity"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("activity_logs").select("\n          *,\n          user:user_id (\n            email\n          )\n        ").order("created_at",{ascending:!1}).limit(10);if(t)throw t;return e}});return s(wm,{children:[s(xm,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n(Nm,{className:"text-sm font-medium",children:"Recent Activity"}),n(X,{to:"/admin/security",className:"text-sm text-meow-primary hover:underline",children:"View all"})]}),n(_m,{children:t?n("div",{className:"flex justify-center py-4",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-meow-primary"})}):a?n("div",{className:"py-4 text-center text-red-500",children:"Failed to load activity"}):e&&e.length>0?e.slice(0,5).map((e=>n("div",{className:"py-2",children:s("div",{className:"flex items-start gap-3",children:[s("div",{className:"p-2 rounded-full bg-gray-100/80 backdrop-blur-sm",children:["login"===e.activity_type&&n(rs,{className:"h-4 w-4 text-blue-500"}),"logout"===e.activity_type&&n(rs,{className:"h-4 w-4 text-gray-500"}),"create"===e.activity_type&&n(Li,{className:"h-4 w-4 text-green-500"}),"update"===e.activity_type&&n(ri,{className:"h-4 w-4 text-yellow-500"}),"delete"===e.activity_type&&n(ri,{className:"h-4 w-4 text-red-500"}),!e.activity_type&&n(ri,{className:"h-4 w-4 text-purple-500"})]}),s("div",{className:"flex-1",children:[n("p",{className:"font-medium text-gray-800",children:e.description}),s("div",{className:"flex flex-wrap items-center gap-x-4 mt-1 text-sm text-gray-500",children:[s("span",{className:"flex items-center",children:[n(An,{className:"h-3 w-3 mr-1"}),ce(new Date(e.created_at),{addSuffix:!0})]}),e.user&&s("span",{className:"flex items-center",children:[n(rs,{className:"h-3 w-3 mr-1"}),e.user.email]}),n(Wc,{variant:"outline",className:"capitalize bg-gray-100/80 text-gray-700 hover:bg-gray-100 hover:text-gray-700",children:e.activity_type})]})]})]})},e.id))):n("div",{className:"py-4 text-center text-gray-500",children:"No recent activity"})})]})},lg=()=>{const{data:e}=S({queryKey:["upcoming-events"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("events").select("*",{count:"exact",head:!0}).gt("date_start",(new Date).toISOString());if(t)throw t;return e||0}});return s(wm,{children:[s(xm,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n(Nm,{className:"text-sm font-medium",children:"Upcoming Events"}),n(X,{to:"/admin/events",className:"text-sm text-meow-primary hover:underline",children:"View all"})]}),s(_m,{className:"pb-6",children:[s("div",{className:"text-sm text-gray-500 mb-4",children:["You have ",n("span",{className:"font-semibold text-meow-primary",children:e||0})," upcoming events"]}),s(X,{to:"/admin/events",className:"w-full inline-flex justify-center items-center gap-2 bg-meow-primary/10 text-meow-primary font-medium rounded-lg px-4 py-2 hover:bg-meow-primary/20 transition-colors",children:[n(An,{className:"h-4 w-4"})," Manage Events"]})]})]})},cg=async({startDate:e,endDate:t}={})=>{try{const a=xt(),r=new Date,n=new Date(r.getFullYear(),0,1),i=e||n,s=t||r;console.log("[Donations] Querying donations from",i.toISOString(),"to",s.toISOString());const{data:o,error:l}=await a.from("donations").select("amount").eq("status","completed").gte("donation_date",i.toISOString()).lte("donation_date",s.toISOString());if(l){console.log("[Donations] Status filter error:",l);const{data:e,error:t}=await a.from("donations").select("amount").gte("donation_date",i.toISOString()).lte("donation_date",s.toISOString());return t?(console.error("[Donations] Error fetching donations:",t),0):(e||[]).reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}return(o||[]).reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}catch(a){return console.error("[Donations] Failed to fetch donations:",a),0}},dg=async()=>{try{xt();const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),1);console.log("Fetching previous month donations..."),console.log("Date range:",le(t,"yyyy-MM-dd"),"to",le(a,"yyyy-MM-dd"));const{data:r,error:n}=await xt().from("donations").select("amount").eq("status","completed").gte("donation_date",t.toISOString()).lt("donation_date",a.toISOString());if(n)throw console.error("Error fetching previous month donations:",n),n;if(console.log("Previous month donations data received:",r),!r||0===r.length){console.log("No completed donations found for previous month. Trying direct sum query...");const{data:e,error:r}=await xt().from("donations").select("sum(amount)").eq("status","completed").gte("donation_date",t.toISOString()).lt("donation_date",a.toISOString()).single();if(r)console.error("Error with direct sum query for previous month:",r);else if(console.log("Direct sum query result for previous month:",e),e&&null!==e.sum)return console.log("Using direct sum for previous month:",e.sum),e.sum;return 0}return r.reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}catch(e){return console.error("Failed to fetch previous month donations:",e),0}},mg=async()=>{try{console.log("Fetching total donations...");xt();const e=new Date,t=new Date(e.getFullYear(),0,1);console.log("Date range:",le(t,"yyyy-MM-dd"),"to",le(e,"yyyy-MM-dd"));const{data:a,error:r}=await xt().from("donations").select("amount").eq("status","completed").gte("donation_date",t.toISOString()).lte("donation_date",e.toISOString());if(r)throw console.error("Error fetching total donations:",r),r;if(console.log("Total donations data received:",a),!a||0===a.length){console.log("No completed donations found for year. Trying direct sum query...");const{data:a,error:r}=await xt().from("donations").select("sum(amount)").eq("status","completed").gte("donation_date",t.toISOString()).lte("donation_date",e.toISOString()).single();if(r)console.error("Error with direct sum query for total:",r);else if(console.log("Direct sum query result for total:",a),a&&null!==a.sum)return console.log("Using direct sum for total donations:",a.sum),a.sum;return 0}return a.reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}catch(e){return console.error("Failed to fetch total donations:",e),0}},ug=async({startDate:e,endDate:t}={})=>{try{const a=xt(),r=new Date,n=new Date(r.getFullYear(),0,1),i=e||n,s=t||r,{data:o,error:l}=await a.from("expenses").select("amount").gte("expense_date",i.toISOString()).lte("expense_date",s.toISOString());if(l)return console.error("[Expenses] Error fetching YTD sum:",l),0;return(o||[]).reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}catch(a){return console.error("[Expenses] Failed unified sum:",a),0}},hg=async()=>{try{xt();const e=de(me(new Date,-1)),t=ue(me(new Date,-1));console.log("Fetching previous month expenses..."),console.log("Date range:",le(e,"yyyy-MM-dd"),"to",le(t,"yyyy-MM-dd"));const{data:a,error:r}=await xt().from("expenses").select("amount").gte("expense_date",e.toISOString()).lte("expense_date",t.toISOString());if(r)throw console.error("Error fetching previous month expenses:",r),r;if(console.log("Previous month expenses data received:",a),!a||0===a.length){console.log("No expenses found for previous month. Trying direct sum query...");const{data:a,error:r}=await xt().from("expenses").select("sum(amount)").gte("expense_date",e.toISOString()).lte("expense_date",t.toISOString()).single();if(r)console.error("Error with direct sum query for previous month expenses:",r);else if(console.log("Direct sum query result for previous month expenses:",a),a&&null!==a.sum)return console.log("Using direct sum for previous month expenses:",a.sum),a.sum;return 0}return a.reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0)}catch(e){return console.error("Error fetching previous month expenses:",e),0}},pg=async()=>{try{console.log("Fetching total budget...");const e=(new Date).getFullYear(),{data:t,error:a}=await xt().from("budget_categories").select("amount").eq("year",e);if(a)throw console.error("Error getting total budget:",a),a;if(console.log("Budget categories data received:",t),!t||0===t.length)return console.log("No budget categories found for the current year, returning 0"),0;const r=t.reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0);return console.log("Calculated total budget for current year:",r),r}catch(e){return console.error("Error calculating total budget:",e),0}},gg=async()=>{try{console.log("Fetching budget categories (all years)");const e=xt(),{data:t,error:a}=await e.from("budget_categories").select("*").order("name");return a?(console.error("Error fetching budget categories:",a),[]):t&&0!==t.length?(console.log(`Retrieved ${t.length} budget categories`,t),t):(console.log("No budget categories found in the database"),[])}catch(e){return console.error("Failed to fetch budget categories:",e),[]}},fg=async()=>{try{const e=xt(),{data:t,error:a}=await e.from("fundraising_campaigns").select("*").eq("is_active",!0).order("start_date",{ascending:!1});if(a)return console.error("Error fetching campaigns:",a),[];return t.map((e=>{const t="string"==typeof e.target_amount?parseFloat(e.target_amount):e.target_amount||0,a="string"==typeof e.amount_raised?parseFloat(e.amount_raised):e.amount_raised||0,r=t>0?a/t*100:0;return{id:e.id,name:e.name,description:e.description,targetAmount:t,amountRaised:a,percentComplete:r,startDate:e.start_date,endDate:e.end_date,campaignType:e.campaign_type}}))}catch(e){return console.error("Failed to fetch campaigns:",e),[]}},yg=()=>{E();const e={staleTime:3e4,retry:3,refetchOnMount:!0,refetchOnWindowFocus:!0},t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),{data:r=0,isLoading:n}=S({queryKey:["ytd-donations"],queryFn:()=>cg(),...e}),{data:i=0,isLoading:s}=S({queryKey:["ytd-expenses"],queryFn:()=>ug(),...e}),{data:o=0,isLoading:l}=S({queryKey:["monthly-donations"],queryFn:()=>cg({startDate:a,endDate:t}),...e}),{data:c=0,isLoading:d}=S({queryKey:["monthly-expenses"],queryFn:()=>ug({startDate:a,endDate:t}),...e}),{data:m=0,isLoading:u}=S({queryKey:["prev-monthly-donations"],queryFn:dg,...e}),{data:h=0,isLoading:p}=S({queryKey:["prev-monthly-expenses"],queryFn:hg,...e}),{data:g=0,isLoading:f}=S({queryKey:["total-budget"],queryFn:pg,...e}),{data:y=[],isLoading:v}=S({queryKey:["budget-categories-base"],queryFn:gg,...e,meta:{onError:e=>{console.error("Error fetching budget categories base:",e)}}}),b=Array.isArray(y)&&y.length>0,{data:w=[],isLoading:x}=S({queryKey:["budget-categories",y],queryFn:()=>(async e=>{try{return e&&0!==e.length?(console.log(`Calculating spending for ${e.length} categories`),await Promise.all(e.map((async e=>{const t=xt(),{data:a,error:r}=await t.from("expenses").select("amount").eq("category",e.name);if(r)return console.error(`Error fetching expenses for category ${e.name}:`,r),{...e,spent:0,remaining:e.amount,percentUsed:0,amountSpent:0,budgetAmount:e.amount};const n=a?a.reduce(((e,t)=>{const a="string"==typeof t.amount?parseFloat(t.amount):t.amount;return e+(isNaN(a)?0:a)}),0):0,i=Math.max(0,e.amount-n),s=e.amount>0?Math.min(100,n/e.amount*100):0;return console.log(`Category ${e.name}: spent ${n}, remaining ${i}, percent ${s.toFixed(2)}%`),{...e,spent:n,remaining:i,percentUsed:s,amountSpent:n,budgetAmount:e.amount}})))):(console.log("No categories provided to calculate spending"),[])}catch(t){return console.error("Failed to calculate category spending:",t),e.map((e=>({...e,spent:0,remaining:e.amount,percentUsed:0,amountSpent:0,budgetAmount:e.amount})))}})(y||[]),enabled:b,...e,meta:{onError:e=>{console.error("Error calculating categories spending:",e)}}}),{data:N=0,isLoading:C}=S({queryKey:["total-donations"],queryFn:mg,...e}),{data:_=[],isLoading:k}=S({queryKey:["current-campaigns"],queryFn:fg,...e});return console.log({monthlyDonations:Number(r),monthlyExpenses:Number(i),totalBudget:Number(g),budgetCategoriesCount:null==w?void 0:w.length,baseBudgetCategoriesCount:null==y?void 0:y.length,totalDonations:Number(N),campaignsCount:null==_?void 0:_.length}),{financialStats:{totalIncome:r,totalExpenses:i,totalBudget:g,monthlyIncome:o,monthlyExpenses:c,previousMonthIncome:m,previousMonthExpenses:h,budgetCategories:w||[],campaigns:_||[],isLoading:{monthlyIncome:l,monthlyExpenses:d,previousMonthIncome:u,previousMonthExpenses:p,totalBudget:f,budgetCategories:x||v,totalIncome:n,totalExpenses:s,campaigns:k}}}},vg=(e,t)=>0===t?e>0?100:0:(e-t)/Math.abs(t)*100,bg=(e,t,a,r=365)=>Math.ceil(e*t*a*r*1.1),wg=({title:e,amount:t,percentageChange:a,bgColor:r,textColor:i})=>s("div",{className:`flex flex-col items-center ${r} rounded-lg p-4 flex-1`,children:[n("div",{className:"mb-2 text-sm text-gray-600",children:e}),s("div",{className:"flex items-center",children:[n(Gn,{className:`h-5 w-5 ${i} mr-1`}),n("span",{className:`text-2xl font-bold ${i}`,children:dr(t)})]}),void 0!==a&&s("div",{className:"flex items-center mt-1 text-xs",children:[n(wn,{className:`h-3 w-3 ${i} mr-1`}),s("span",{className:i,children:[a>0?"+":"",a.toFixed(1),"% from last month"]})]})]}),xg=()=>{const{monthlyDonations:e,monthlyExpenses:t,previousMonthDonations:a}=yg(),r=void 0!==a&&void 0!==e?vg(e,a):0;return s(wm,{children:[s(xm,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n(Nm,{className:"text-sm font-medium",children:"Finance Overview"}),n(X,{to:"/admin/finance",className:"text-sm text-meow-primary hover:underline",children:"View details"})]}),n(_m,{children:s("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[n(wg,{title:"Monthly Donations",amount:e||0,percentageChange:r,bgColor:"bg-green-50",textColor:"text-green-600"}),n(wg,{title:"Monthly Income",amount:e||0,percentageChange:r,bgColor:"bg-blue-50",textColor:"text-blue-600"}),n(wg,{title:"Expenses",amount:t||0,percentageChange:2.7,bgColor:"bg-amber-50",textColor:"text-amber-600"})]})})]})},Ng=()=>n(ng,{title:"Dashboard",children:s("div",{className:"container mx-auto px-4 py-8",children:[n("h1",{className:"text-3xl font-bold mb-6 text-meow-primary",children:"Admin Dashboard"}),n(ig,{}),n(sg,{}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n(og,{}),n(lg,{})]}),n("div",{className:"mt-6",children:n(xg,{})})]})}),Cg=c.forwardRef((({className:e,...t},a)=>n("div",{className:"relative w-full overflow-auto",children:n("table",{ref:a,className:cr("w-full caption-bottom text-sm",e),...t})})));Cg.displayName="Table";const _g=c.forwardRef((({className:e,...t},a)=>n("thead",{ref:a,className:cr("[&_tr]:border-b",e),...t})));_g.displayName="TableHeader";const kg=c.forwardRef((({className:e,...t},a)=>n("tbody",{ref:a,className:cr("[&_tr:last-child]:border-0",e),...t})));kg.displayName="TableBody";c.forwardRef((({className:e,...t},a)=>n("tfoot",{ref:a,className:cr("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}))).displayName="TableFooter";const Sg=c.forwardRef((({className:e,...t},a)=>n("tr",{ref:a,className:cr("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})));Sg.displayName="TableRow";const Eg=c.forwardRef((({className:e,...t},a)=>n("th",{ref:a,className:cr("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})));Eg.displayName="TableHead";const Dg=c.forwardRef((({className:e,...t},a)=>n("td",{ref:a,className:cr("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t})));Dg.displayName="TableCell";const Ag=c.forwardRef((({className:e,...t},a)=>n("caption",{ref:a,className:cr("mt-4 text-sm text-muted-foreground",e),...t})));function Mg(e,[t,a]){return Math.min(a,Math.max(t,e))}Ag.displayName="TableCaption";var Pg=[" ","Enter","ArrowUp","ArrowDown"],Tg=[" ","Enter"],Rg="Select",[Fg,Lg,Ig]=Nr(Rg),[qg,Og]=Ft(Rg,[Ig,ma]),jg=ma(),[$g,zg]=qg(Rg),[Ug,Vg]=qg(Rg),Bg=e=>{const{__scopeSelect:t,children:a,open:r,defaultOpen:i,onOpenChange:o,value:l,defaultValue:d,onValueChange:m,dir:u,name:h,autoComplete:p,disabled:g,required:f,form:y}=e,v=jg(t),[b,w]=c.useState(null),[x,N]=c.useState(null),[C,_]=c.useState(!1),k=Ms(u),[S,E]=La({prop:r,defaultProp:i??!1,onChange:o,caller:Rg}),[D,A]=La({prop:l,defaultProp:d,onChange:m,caller:Rg}),M=c.useRef(null),P=!b||(y||!!b.closest("form")),[T,R]=c.useState(new Set),F=Array.from(T).map((e=>e.props.value)).join(";");return n(Ea,{...v,children:s($g,{required:f,scope:t,trigger:b,onTriggerChange:w,valueNode:x,onValueNodeChange:N,valueNodeHasChildren:C,onValueNodeHasChildrenChange:_,contentId:ia(),value:D,onValueChange:A,open:S,onOpenChange:E,dir:k,triggerPointerDownPosRef:M,disabled:g,children:[n(Fg.Provider,{scope:t,children:n(Ug,{scope:e.__scopeSelect,onNativeOptionAdd:c.useCallback((e=>{R((t=>new Set(t).add(e)))}),[]),onNativeOptionRemove:c.useCallback((e=>{R((t=>{const a=new Set(t);return a.delete(e),a}))}),[]),children:a})}),P?s(Pf,{"aria-hidden":!0,required:f,tabIndex:-1,name:h,autoComplete:p,value:D,onChange:e=>A(e.target.value),disabled:g,form:y,children:[void 0===D?n("option",{value:""}):null,Array.from(T)]},F):null]})})};Bg.displayName=Rg;var Hg="SelectTrigger",Kg=c.forwardRef(((e,t)=>{const{__scopeSelect:a,disabled:r=!1,...i}=e,s=jg(a),o=zg(Hg,a),l=o.disabled||r,d=Rt(t,o.onTriggerChange),m=Lg(a),u=c.useRef("touch"),[h,p,g]=Rf((e=>{const t=m().filter((e=>!e.disabled)),a=t.find((e=>e.value===o.value)),r=Ff(t,e,a);void 0!==r&&o.onValueChange(r.value)})),f=e=>{l||(o.onOpenChange(!0),g()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return n(Da,{asChild:!0,...s,children:n(Ut.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Tf(o.value)?"":void 0,...i,ref:d,onClick:Mt(i.onClick,(e=>{e.currentTarget.focus(),"mouse"!==u.current&&f(e)})),onPointerDown:Mt(i.onPointerDown,(e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())})),onKeyDown:Mt(i.onKeyDown,(e=>{const t=""!==h.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||Pg.includes(e.key)&&(f(),e.preventDefault())}))})})}));Kg.displayName=Hg;var Wg="SelectValue",Yg=c.forwardRef(((e,t)=>{const{__scopeSelect:a,className:r,style:s,children:o,placeholder:l="",...c}=e,d=zg(Wg,a),{onValueNodeHasChildrenChange:m}=d,u=void 0!==o,h=Rt(t,d.onValueNodeChange);return aa((()=>{m(u)}),[m,u]),n(Ut.span,{...c,ref:h,style:{pointerEvents:"none"},children:Tf(d.value)?n(i,{children:l}):o})}));Yg.displayName=Wg;var Gg=c.forwardRef(((e,t)=>{const{__scopeSelect:a,children:r,...i}=e;return n(Ut.span,{"aria-hidden":!0,...i,ref:t,children:r||""})}));Gg.displayName="SelectIcon";var Qg=e=>n(Pa,{asChild:!0,...e});Qg.displayName="SelectPortal";var Xg="SelectContent",Zg=c.forwardRef(((e,t)=>{const a=zg(Xg,e.__scopeSelect),[r,i]=c.useState();if(aa((()=>{i(new DocumentFragment)}),[]),!a.open){const t=r;return t?T.createPortal(n(ef,{scope:e.__scopeSelect,children:n(Fg.Slot,{scope:e.__scopeSelect,children:n("div",{children:e.children})})}),t):null}return n(rf,{...e,ref:t})}));Zg.displayName=Xg;var Jg=10,[ef,tf]=qg(Xg),af=It("SelectContent.RemoveScroll"),rf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:d,align:m,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:f,hideWhenDetached:y,avoidCollisions:v,...b}=e,w=zg(Xg,a),[x,N]=c.useState(null),[C,_]=c.useState(null),k=Rt(t,(e=>N(e))),[S,E]=c.useState(null),[D,A]=c.useState(null),M=Lg(a),[P,T]=c.useState(!1),R=c.useRef(!1);c.useEffect((()=>{if(x)return ne(x)}),[x]),Ts();const F=c.useCallback((e=>{const[t,...a]=M().map((e=>e.ref.current)),[r]=a.slice(-1),n=document.activeElement;for(const i of e){if(i===n)return;if(null==i||i.scrollIntoView({block:"nearest"}),i===t&&C&&(C.scrollTop=0),i===r&&C&&(C.scrollTop=C.scrollHeight),null==i||i.focus(),document.activeElement!==n)return}}),[M,C]),L=c.useCallback((()=>F([S,x])),[F,S,x]);c.useEffect((()=>{P&&L()}),[P,L]);const{onOpenChange:I,triggerPointerDownPosRef:q}=w;c.useEffect((()=>{if(x){let e={x:0,y:0};const t=t=>{var a,r;e={x:Math.abs(Math.round(t.pageX)-((null==(a=q.current)?void 0:a.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=q.current)?void 0:r.y)??0))}},a=a=>{e.x<=10&&e.y<=10?a.preventDefault():x.contains(a.target)||I(!1),document.removeEventListener("pointermove",t),q.current=null};return null!==q.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",a,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",a,{capture:!0})}}}),[x,I,q]),c.useEffect((()=>{const e=()=>I(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}}),[I]);const[O,j]=Rf((e=>{const t=M().filter((e=>!e.disabled)),a=t.find((e=>e.ref.current===document.activeElement)),r=Ff(t,e,a);r&&setTimeout((()=>r.ref.current.focus()))})),$=c.useCallback(((e,t,a)=>{const r=!R.current&&!a;(void 0!==w.value&&w.value===t||r)&&(E(e),r&&(R.current=!0))}),[w.value]),z=c.useCallback((()=>null==x?void 0:x.focus()),[x]),U=c.useCallback(((e,t,a)=>{const r=!R.current&&!a;(void 0!==w.value&&w.value===t||r)&&A(e)}),[w.value]),V="popper"===r?sf:nf,B=V===sf?{side:l,sideOffset:d,align:m,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:f,hideWhenDetached:y,avoidCollisions:v}:{};return n(ef,{scope:a,content:x,viewport:C,onViewportChange:_,itemRefCallback:$,selectedItem:S,onItemLeave:z,itemTextRefCallback:U,focusSelectedItem:L,selectedItemText:D,position:r,isPositioned:P,searchRef:O,children:n(ie,{as:af,allowPinchZoom:!0,children:n(qs,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Mt(i,(e=>{var t;null==(t=w.trigger)||t.focus({preventScroll:!0}),e.preventDefault()})),children:n(Qt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:n(V,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...b,...B,onPlaced:()=>T(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Mt(b.onKeyDown,(e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||j(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=M().filter((e=>!e.disabled)).map((e=>e.ref.current));if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const a=e.target,r=t.indexOf(a);t=t.slice(r+1)}setTimeout((()=>F(t))),e.preventDefault()}}))})})})})})}));rf.displayName="SelectContentImpl";var nf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,onPlaced:r,...i}=e,s=zg(Xg,a),o=tf(Xg,a),[l,d]=c.useState(null),[m,u]=c.useState(null),h=Rt(t,(e=>u(e))),p=Lg(a),g=c.useRef(!1),f=c.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=o,x=c.useCallback((()=>{if(s.trigger&&s.valueNode&&l&&m&&y&&v&&b){const e=s.trigger.getBoundingClientRect(),t=m.getBoundingClientRect(),a=s.valueNode.getBoundingClientRect(),n=b.getBoundingClientRect();if("rtl"!==s.dir){const r=n.left-t.left,i=a.left-r,s=e.left-i,o=e.width+s,c=Math.max(o,t.width),d=window.innerWidth-Jg,m=Mg(i,[Jg,Math.max(Jg,d-c)]);l.style.minWidth=o+"px",l.style.left=m+"px"}else{const r=t.right-n.right,i=window.innerWidth-a.right-r,s=window.innerWidth-e.right-i,o=e.width+s,c=Math.max(o,t.width),d=window.innerWidth-Jg,m=Mg(i,[Jg,Math.max(Jg,d-c)]);l.style.minWidth=o+"px",l.style.right=m+"px"}const i=p(),o=window.innerHeight-2*Jg,c=y.scrollHeight,d=window.getComputedStyle(m),u=parseInt(d.borderTopWidth,10),h=parseInt(d.paddingTop,10),f=parseInt(d.borderBottomWidth,10),w=u+h+c+parseInt(d.paddingBottom,10)+f,x=Math.min(5*v.offsetHeight,w),N=window.getComputedStyle(y),C=parseInt(N.paddingTop,10),_=parseInt(N.paddingBottom,10),k=e.top+e.height/2-Jg,S=o-k,E=v.offsetHeight/2,D=u+h+(v.offsetTop+E),A=w-D;if(D<=k){const e=i.length>0&&v===i[i.length-1].ref.current;l.style.bottom="0px";const t=m.clientHeight-y.offsetTop-y.offsetHeight,a=D+Math.max(S,E+(e?_:0)+t+f);l.style.height=a+"px"}else{const e=i.length>0&&v===i[0].ref.current;l.style.top="0px";const t=Math.max(k,u+y.offsetTop+(e?C:0)+E)+A;l.style.height=t+"px",y.scrollTop=D-k+y.offsetTop}l.style.margin=`${Jg}px 0`,l.style.minHeight=x+"px",l.style.maxHeight=o+"px",null==r||r(),requestAnimationFrame((()=>g.current=!0))}}),[p,s.trigger,s.valueNode,l,m,y,v,b,s.dir,r]);aa((()=>x()),[x]);const[N,C]=c.useState();aa((()=>{m&&C(window.getComputedStyle(m).zIndex)}),[m]);const _=c.useCallback((e=>{e&&!0===f.current&&(x(),null==w||w(),f.current=!1)}),[x,w]);return n(of,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:_,children:n("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n(Ut.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})}));nf.displayName="SelectItemAlignedPosition";var sf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,align:r="start",collisionPadding:i=Jg,...s}=e,o=jg(a);return n(Aa,{...o,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})}));sf.displayName="SelectPopperPosition";var[of,lf]=qg(Xg,{}),cf="SelectViewport",df=c.forwardRef(((e,t)=>{const{__scopeSelect:a,nonce:r,...o}=e,l=tf(cf,a),d=lf(cf,a),m=Rt(t,l.onViewportChange),u=c.useRef(0);return s(i,{children:[n("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n(Fg.Slot,{scope:a,children:n(Ut.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Mt(o.onScroll,(e=>{const t=e.currentTarget,{contentWrapper:a,shouldExpandOnScrollRef:r}=d;if((null==r?void 0:r.current)&&a){const e=Math.abs(u.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Jg,n=parseFloat(a.style.minHeight),i=parseFloat(a.style.height),s=Math.max(n,i);if(s<r){const n=s+e,i=Math.min(r,n),o=n-i;a.style.height=i+"px","0px"===a.style.bottom&&(t.scrollTop=o>0?o:0,a.style.justifyContent="flex-end")}}}u.current=t.scrollTop}))})})]})}));df.displayName=cf;var mf="SelectGroup",[uf,hf]=qg(mf);c.forwardRef(((e,t)=>{const{__scopeSelect:a,...r}=e,i=ia();return n(uf,{scope:a,id:i,children:n(Ut.div,{role:"group","aria-labelledby":i,...r,ref:t})})})).displayName=mf;var pf="SelectLabel",gf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,...r}=e,i=hf(pf,a);return n(Ut.div,{id:i.id,...r,ref:t})}));gf.displayName=pf;var ff="SelectItem",[yf,vf]=qg(ff),bf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,value:r,disabled:i=!1,textValue:s,...o}=e,l=zg(ff,a),d=tf(ff,a),m=l.value===r,[u,h]=c.useState(s??""),[p,g]=c.useState(!1),f=Rt(t,(e=>{var t;return null==(t=d.itemRefCallback)?void 0:t.call(d,e,r,i)})),y=ia(),v=c.useRef("touch"),b=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n(yf,{scope:a,value:r,disabled:i,textId:y,isSelected:m,onItemTextChange:c.useCallback((e=>{h((t=>t||((null==e?void 0:e.textContent)??"").trim()))}),[]),children:n(Fg.ItemSlot,{scope:a,value:r,disabled:i,textValue:u,children:n(Ut.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":m&&p,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:f,onFocus:Mt(o.onFocus,(()=>g(!0))),onBlur:Mt(o.onBlur,(()=>g(!1))),onClick:Mt(o.onClick,(()=>{"mouse"!==v.current&&b()})),onPointerUp:Mt(o.onPointerUp,(()=>{"mouse"===v.current&&b()})),onPointerDown:Mt(o.onPointerDown,(e=>{v.current=e.pointerType})),onPointerMove:Mt(o.onPointerMove,(e=>{var t;v.current=e.pointerType,i?null==(t=d.onItemLeave)||t.call(d):"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})})),onPointerLeave:Mt(o.onPointerLeave,(e=>{var t;e.currentTarget===document.activeElement&&(null==(t=d.onItemLeave)||t.call(d))})),onKeyDown:Mt(o.onKeyDown,(e=>{var t;""!==(null==(t=d.searchRef)?void 0:t.current)&&" "===e.key||(Tg.includes(e.key)&&b()," "===e.key&&e.preventDefault())}))})})})}));bf.displayName=ff;var wf="SelectItemText",xf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,className:r,style:o,...l}=e,d=zg(wf,a),m=tf(wf,a),u=vf(wf,a),h=Vg(wf,a),[p,g]=c.useState(null),f=Rt(t,(e=>g(e)),u.onItemTextChange,(e=>{var t;return null==(t=m.itemTextRefCallback)?void 0:t.call(m,e,u.value,u.disabled)})),y=null==p?void 0:p.textContent,v=c.useMemo((()=>n("option",{value:u.value,disabled:u.disabled,children:y},u.value)),[u.disabled,u.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=h;return aa((()=>(b(v),()=>w(v))),[b,w,v]),s(i,{children:[n(Ut.span,{id:u.textId,...l,ref:f}),u.isSelected&&d.valueNode&&!d.valueNodeHasChildren?T.createPortal(l.children,d.valueNode):null]})}));xf.displayName=wf;var Nf="SelectItemIndicator",Cf=c.forwardRef(((e,t)=>{const{__scopeSelect:a,...r}=e;return vf(Nf,a).isSelected?n(Ut.span,{"aria-hidden":!0,...r,ref:t}):null}));Cf.displayName=Nf;var _f="SelectScrollUpButton",kf=c.forwardRef(((e,t)=>{const a=tf(_f,e.__scopeSelect),r=lf(_f,e.__scopeSelect),[i,s]=c.useState(!1),o=Rt(t,r.onScrollButtonChange);return aa((()=>{if(a.viewport&&a.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[a.viewport,a.isPositioned]),i?n(Df,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null}));kf.displayName=_f;var Sf="SelectScrollDownButton",Ef=c.forwardRef(((e,t)=>{const a=tf(Sf,e.__scopeSelect),r=lf(Sf,e.__scopeSelect),[i,s]=c.useState(!1),o=Rt(t,r.onScrollButtonChange);return aa((()=>{if(a.viewport&&a.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,a=Math.ceil(t.scrollTop)<e;s(a)};const t=a.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}}),[a.viewport,a.isPositioned]),i?n(Df,{...e,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=a;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null}));Ef.displayName=Sf;var Df=c.forwardRef(((e,t)=>{const{__scopeSelect:a,onAutoScroll:r,...i}=e,s=tf("SelectScrollButton",a),o=c.useRef(null),l=Lg(a),d=c.useCallback((()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)}),[]);return c.useEffect((()=>()=>d()),[d]),aa((()=>{var e;const t=l().find((e=>e.ref.current===document.activeElement));null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})}),[l]),n(Ut.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Mt(i.onPointerDown,(()=>{null===o.current&&(o.current=window.setInterval(r,50))})),onPointerMove:Mt(i.onPointerMove,(()=>{var e;null==(e=s.onItemLeave)||e.call(s),null===o.current&&(o.current=window.setInterval(r,50))})),onPointerLeave:Mt(i.onPointerLeave,(()=>{d()}))})})),Af=c.forwardRef(((e,t)=>{const{__scopeSelect:a,...r}=e;return n(Ut.div,{"aria-hidden":!0,...r,ref:t})}));Af.displayName="SelectSeparator";var Mf="SelectArrow";c.forwardRef(((e,t)=>{const{__scopeSelect:a,...r}=e,i=jg(a),s=zg(Mf,a),o=tf(Mf,a);return s.open&&"popper"===o.position?n(Ma,{...i,...r,ref:t}):null})).displayName=Mf;var Pf=c.forwardRef((({__scopeSelect:e,value:t,...a},r)=>{const i=c.useRef(null),s=Rt(r,i),o=du(t);return c.useEffect((()=>{const e=i.current;if(!e)return;const a=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==t&&r){const a=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(a)}}),[o,t]),n(Ut.select,{...a,style:{...Ia,...a.style},ref:s,defaultValue:t})}));function Tf(e){return""===e||void 0===e}function Rf(e){const t=Bt(e),a=c.useRef(""),r=c.useRef(0),n=c.useCallback((e=>{const n=a.current+e;t(n),function e(t){a.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout((()=>e("")),1e3))}(n)}),[t]),i=c.useCallback((()=>{a.current="",window.clearTimeout(r.current)}),[]);return c.useEffect((()=>()=>window.clearTimeout(r.current)),[]),[a,n,i]}function Ff(e,t,a){const r=t.length>1&&Array.from(t).every((e=>e===t[0]))?t[0]:t,n=a?e.indexOf(a):-1;let i=(s=e,o=Math.max(n,0),s.map(((e,t)=>s[(o+t)%s.length])));var s,o;1===r.length&&(i=i.filter((e=>e!==a)));const l=i.find((e=>e.textValue.toLowerCase().startsWith(r.toLowerCase())));return l!==a?l:void 0}Pf.displayName="SelectBubbleInput";var Lf=Kg,If=Gg,qf=Qg,Of=Zg,jf=df,$f=gf,zf=bf,Uf=xf,Vf=Cf,Bf=kf,Hf=Ef,Kf=Af;const Wf=Bg,Yf=Yg,Gf=c.forwardRef((({className:e,children:t,...a},r)=>s(Lf,{ref:r,className:cr("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,n(If,{asChild:!0,children:n(In,{className:"h-4 w-4 opacity-50"})})]})));Gf.displayName=Lf.displayName;const Qf=c.forwardRef((({className:e,...t},a)=>n(Bf,{ref:a,className:cr("flex cursor-default items-center justify-center py-1",e),...t,children:n(jn,{className:"h-4 w-4"})})));Qf.displayName=Bf.displayName;const Xf=c.forwardRef((({className:e,...t},a)=>n(Hf,{ref:a,className:cr("flex cursor-default items-center justify-center py-1",e),...t,children:n(In,{className:"h-4 w-4"})})));Xf.displayName=Hf.displayName;const Zf=c.forwardRef((({className:e,children:t,position:a="popper",...r},i)=>n(qf,{children:s(Of,{ref:i,className:cr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[n(Qf,{}),n(jf,{className:cr("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n(Xf,{})]})})));Zf.displayName=Of.displayName;c.forwardRef((({className:e,...t},a)=>n($f,{ref:a,className:cr("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=$f.displayName;const Jf=c.forwardRef((({className:e,children:t,...a},r)=>s(zf,{ref:r,className:cr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[n("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n(Vf,{children:n(Ln,{className:"h-4 w-4"})})}),n(Uf,{children:t})]})));Jf.displayName=zf.displayName;c.forwardRef((({className:e,...t},a)=>n(Kf,{ref:a,className:cr("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=Kf.displayName;const ey=()=>{const e=Z(),{toast:t}=xr(),[a,r]=h(""),[i,o]=h("all"),[l,c]=h("all"),[d,m]=h("all"),{user:u}=At(),{data:p,isLoading:g,error:f,refetch:y}=S({queryKey:["cats"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("cats").select("*").order("name",{ascending:!0});if(t)throw t;return e}}),v="admin"===(null==u?void 0:u.role),b=null==p?void 0:p.filter((e=>{var t,r,n,s;const o=(null==(t=e.name)?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null==(r=e.breed)?void 0:r.toLowerCase().includes(a.toLowerCase()))||((null==(n=e.description)?void 0:n.toLowerCase())||"").includes(a.toLowerCase()),c="all"===i||e.status===i,m="all"===l||e.internal_status===l,u="all"===d||((null==(s=e.gender)?void 0:s.toLowerCase())||"")===d.toLowerCase();return o&&c&&m&&u})),w=e=>{switch(e){case"Available":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Adopted":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{if(!e)return"bg-gray-100 text-gray-800";switch(e){case"Alive":return"bg-green-100 text-green-800";case"Deceased":return"bg-red-100 text-red-800";case"Missing":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return s(ng,{title:"Cats",children:[n($c,{title:"Cats | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10 pt-20 sm:pt-10",children:[" ",s("div",{className:"flex items-center justify-between mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Cats"}),s("div",{className:"flex items-center space-x-4",children:[n(od,{placeholder:"Search cats...",value:a,onChange:e=>r(e.target.value),className:"max-w-sm"}),s(Ds,{onClick:()=>e("/admin/cats/new"),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add Cat"]})]})]}),n("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:s("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[n("div",{className:"w-full sm:w-auto",children:s(Wf,{value:i,onValueChange:o,children:[n(Gf,{className:"w-full sm:w-[180px]",children:n(Yf,{placeholder:"Status"})}),s(Zf,{children:[n(Jf,{value:"all",children:"All Statuses"}),n(Jf,{value:"Available",children:"Available"}),n(Jf,{value:"Pending",children:"Pending"}),n(Jf,{value:"Adopted",children:"Adopted"}),n(Jf,{value:"NotListed",children:"Not Listed"})]})]})}),n("div",{className:"w-full sm:w-auto",children:s(Wf,{value:l,onValueChange:c,children:[n(Gf,{className:"w-full sm:w-[180px]",children:n(Yf,{placeholder:"Internal Status"})}),s(Zf,{children:[n(Jf,{value:"all",children:"All Internal Statuses"}),n(Jf,{value:"Alive",children:"Alive"}),n(Jf,{value:"Deceased",children:"Deceased"}),n(Jf,{value:"Missing",children:"Missing"})]})]})}),n("div",{className:"w-full sm:w-auto",children:s(Wf,{value:d,onValueChange:m,children:[n(Gf,{className:"w-full sm:w-[180px]",children:n(Yf,{placeholder:"Gender"})}),s(Zf,{children:[n(Jf,{value:"all",children:"All Genders"}),n(Jf,{value:"male",children:"Male"}),n(Jf,{value:"female",children:"Female"})]})]})}),n(Ds,{variant:"outline",size:"sm",onClick:()=>{r(""),o("all"),c("all"),m("all")},className:"w-full sm:w-auto",children:"Clear Filters"})]})}),n("div",g?{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}:f?{className:"text-center py-12",children:n("p",{className:"text-red-500",children:"Error loading cats. Please try again later."})}:{className:"overflow-x-auto",children:s(Cg,{children:[n(Ag,{children:"A list of all cats in our shelter."}),n(_g,{children:s(Sg,{children:[n(Eg,{children:"Name"}),n(Eg,{children:"Age"}),n(Eg,{children:"Breed"}),n(Eg,{children:"Public Status"}),n(Eg,{children:"Internal Status"}),n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:0===(null==b?void 0:b.length)?n(Sg,{children:n(Dg,{colSpan:6,className:"h-24 text-center",children:"No cats found with the current filters."})}):null==b?void 0:b.map((a=>{return s(Sg,{onClick:()=>{return t=a.id,void e(`/admin/cats/edit/${t}`);var t},className:"cursor-pointer hover:bg-gray-50",children:[n(Dg,{children:a.name}),n(Dg,{children:a.age_estimate||"Unknown"}),n(Dg,{children:a.breed||"Unknown"}),n(Dg,{children:n(Wc,{className:w(a.status),children:(r=a.status,"NotListed"===r?"Not Listed":r)})}),n(Dg,{children:a.internal_status&&n(Wc,{className:x(a.internal_status),children:a.internal_status})}),s(Dg,{className:"text-right",children:[n(Ds,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),e(`/admin/cats/edit/${a.id}`)},children:n(Ki,{className:"h-4 w-4"})}),v&&n(Ds,{variant:"ghost",size:"icon",onClick:e=>(async(e,a)=>{if(a.stopPropagation(),v){if(window.confirm("Are you sure you want to delete this cat?"))try{const{error:a}=await supabase.from("cats").delete().eq("id",e);if(a)throw a;t({title:"Cat Deleted",description:"The cat has been successfully deleted."}),y()}catch(r){t({title:"Error Deleting Cat",description:r.message,variant:"destructive"})}}else t({title:"Permission Denied",description:"Only administrators can delete cats.",variant:"destructive"})})(a.id,e),children:n(Qi,{className:"h-4 w-4"})})]})]},a.id);var r}))})]})})]})]})},ty=({onImageUploaded:e,currentImage:t,bucketName:a="profile-photos",folderPath:r="",showThumbnailOnly:i=!1})=>{const[o,l]=h(!1),[c,d]=h(t||null),[m,u]=h(null),{toast:p}=xr();return s("div",{className:"relative w-full max-w-md group",children:[s("div",c?{className:"relative overflow-hidden rounded-lg shadow-md",children:[n("img",{src:c,alt:"Preview",className:i?"w-32 h-32 object-cover rounded-lg":"w-full h-60 object-cover rounded-lg"}),n("button",{type:"button",className:"absolute -top-2 -right-2 bg-red-500 text-white p-1.5 rounded-full shadow-md hover:bg-red-600 transition-colors",onClick:async()=>{try{if(!c)return;const t=c.split("/"),r=t.slice(t.indexOf(a)+1).join("/");if(!r)throw new Error("Could not determine file path");const{error:n}=await xt().storage.from(a).remove([r]);if(n)throw n;d(null),e(""),p({title:"Image deleted",description:"The image was successfully deleted."})}catch(t){console.error("Error deleting image:",t),p({title:"Delete failed",description:t.message||"There was an error deleting your image.",variant:"destructive"})}},children:n(ss,{className:"h-4 w-4"})})]}:{className:"border-2 border-dashed border-meow-primary/40 rounded-lg p-6 flex flex-col items-center w-full",children:[n("div",{className:"bg-meow-primary/10 p-4 rounded-full mb-4",children:n(mi,{className:"h-8 w-8 text-meow-primary"})}),n("p",{className:"text-sm text-gray-500 text-center mb-4",children:"Drag and drop your file here or click to browse"}),n(Ds,{type:"button",variant:"outline",disabled:o,onClick:()=>{var e;return null==(e=document.getElementById("file-upload"))?void 0:e.click()},className:"border-meow-primary/50 text-meow-primary hover:text-meow-primary hover:bg-meow-primary/10",children:o?"Uploading...":"Upload Image"})]}),n("input",{id:"file-upload",type:"file",accept:"image/*",onChange:t=>{const n=t.target.files;n&&n.length>0&&(async t=>{l(!0);try{const n=t.name.split(".").pop(),i=`${Date.now()}.${n}`,s=r?`${r}/${i}`:i,{data:o,error:l}=await xt().storage.from(a).upload(s,t,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:{publicUrl:c}}=xt().storage.from(a).getPublicUrl(s);d(c),e(c),p({title:"Image uploaded",description:"Your image was uploaded successfully."})}catch(n){console.error("Error uploading image:",n),n.message&&n.message.includes("bucket not found")?p({title:"Storage bucket not found",description:`The "${a}" storage bucket doesn't exist. Please contact the administrator.`,variant:"destructive"}):p({title:"Upload failed",description:n.message||"There was an error uploading your image.",variant:"destructive"})}finally{l(!1)}})(n[0])},className:"hidden"})]})};var ay="Popover",[ry,ny]=Ft(ay,[ma]),iy=ma(),[sy,oy]=ry(ay),ly=e=>{const{__scopePopover:t,children:a,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=e,l=iy(t),d=c.useRef(null),[m,u]=c.useState(!1),[h,p]=La({prop:r,defaultProp:i??!1,onChange:s,caller:ay});return n(Ea,{...l,children:n(sy,{scope:t,contentId:ia(),triggerRef:d,open:h,onOpenChange:p,onOpenToggle:c.useCallback((()=>p((e=>!e))),[p]),hasCustomAnchor:m,onCustomAnchorAdd:c.useCallback((()=>u(!0)),[]),onCustomAnchorRemove:c.useCallback((()=>u(!1)),[]),modal:o,children:a})})};ly.displayName=ay;var cy="PopoverAnchor";c.forwardRef(((e,t)=>{const{__scopePopover:a,...r}=e,i=oy(cy,a),s=iy(a),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return c.useEffect((()=>(o(),()=>l())),[o,l]),n(Da,{...s,...r,ref:t})})).displayName=cy;var dy="PopoverTrigger",my=c.forwardRef(((e,t)=>{const{__scopePopover:a,...r}=e,i=oy(dy,a),s=iy(a),o=Rt(t,i.triggerRef),l=n(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Cy(i.open),...r,ref:o,onClick:Mt(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:n(Da,{asChild:!0,...s,children:l})}));my.displayName=dy;var uy="PopoverPortal",[hy,py]=ry(uy,{forceMount:void 0}),gy=e=>{const{__scopePopover:t,forceMount:a,children:r,container:i}=e,s=oy(uy,t);return n(hy,{scope:t,forceMount:a,children:n(Ta,{present:a||s.open,children:n(Pa,{asChild:!0,container:i,children:r})})})};gy.displayName=uy;var fy="PopoverContent",yy=c.forwardRef(((e,t)=>{const a=py(fy,e.__scopePopover),{forceMount:r=a.forceMount,...i}=e,s=oy(fy,e.__scopePopover);return n(Ta,{present:r||s.open,children:s.modal?n(by,{...i,ref:t}):n(wy,{...i,ref:t})})}));yy.displayName=fy;var vy=It("PopoverContent.RemoveScroll"),by=c.forwardRef(((e,t)=>{const a=oy(fy,e.__scopePopover),r=c.useRef(null),i=Rt(t,r),s=c.useRef(!1);return c.useEffect((()=>{const e=r.current;if(e)return ne(e)}),[]),n(ie,{as:vy,allowPinchZoom:!0,children:n(xy,{...e,ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Mt(e.onCloseAutoFocus,(e=>{var t;e.preventDefault(),s.current||null==(t=a.triggerRef.current)||t.focus()})),onPointerDownOutside:Mt(e.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey,r=2===t.button||a;s.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:Mt(e.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),wy=c.forwardRef(((e,t)=>{const a=oy(fy,e.__scopePopover),r=c.useRef(!1),i=c.useRef(!1);return n(xy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,s;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(r.current||null==(s=a.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var n,s;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target;(null==(s=a.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})})),xy=c.forwardRef(((e,t)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:m,...u}=e,h=oy(fy,a),p=iy(a);return Ts(),n(qs,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:n(Qt,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:n(Aa,{"data-state":Cy(h.open),role:"dialog",id:h.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),Ny="PopoverClose";c.forwardRef(((e,t)=>{const{__scopePopover:a,...r}=e,i=oy(Ny,a);return n(Ut.button,{type:"button",...r,ref:t,onClick:Mt(e.onClick,(()=>i.onOpenChange(!1)))})})).displayName=Ny;function Cy(e){return e?"open":"closed"}c.forwardRef(((e,t)=>{const{__scopePopover:a,...r}=e,i=iy(a);return n(Ma,{...i,...r,ref:t})})).displayName="PopoverArrow";var _y=gy,ky=yy;const Sy=ly,Ey=my,Dy=c.forwardRef((({className:e,align:t="center",sideOffset:a=4,...r},i)=>n(_y,{children:n(ky,{ref:i,align:t,sideOffset:a,className:cr("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})})));function Ay({className:e,classNames:t,showOutsideDays:a=!0,...r}){return n(Ne,{showOutsideDays:a,className:cr("p-3 pointer-events-auto",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:cr("h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:cr("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent","range"===r.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:cr("h-8 w-8 p-0 font-normal aria-selected:opacity-100 hover:bg-accent hover:text-accent-foreground"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},...r})}Dy.displayName=ky.displayName;const My=["Spay/Neuter","Vaccination","Microchipping","Deworming","Flea Treatment","Dental Cleaning","X-Ray","Blood Test","Urinalysis","Physical Exam","Ear Cleaning","Nail Trimming","Wound Treatment","Eye Examination","Abscess Treatment","Skin Scraping","Allergy Testing","Ear Mite Treatment","Fecal Test","Rabies Vaccination","FVRCP Vaccination","FeLV Vaccination","FIV Testing","Ultrasound","Surgery - Other"],Py=({catId:e,editMode:t})=>{var a;E();const{toast:r}=xr(),[i,o]=h(new Date),[l,c]=h({cat_id:e,procedure_type:"",description:"",veterinarian:"",cost:0,notes:"",record_date:(new Date).toISOString().split("T")[0]}),{data:d,isLoading:m,refetch:u}=S({queryKey:["cat-medical-records",e],queryFn:async()=>{const{data:t,error:a}=await supabase.from("cat_medical_records").select("*").eq("cat_id",e).order("record_date",{ascending:!1});if(a)throw a;return t},enabled:!!e}),p=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("cat_medical_records").insert([e]).select();if(a)throw a;return t},onSuccess:()=>{r({title:"Medical Record Added",description:"The medical record has been successfully added."}),u(),c({cat_id:e,procedure_type:"",description:"",veterinarian:"",cost:0,notes:"",record_date:(new Date).toISOString().split("T")[0]}),o(new Date)},onError:e=>{r({title:"Error Adding Medical Record",description:e.message,variant:"destructive"})}}),g=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("cat_medical_records").delete().eq("id",e);if(a)throw a;return t},onSuccess:()=>{r({title:"Medical Record Deleted",description:"The medical record has been successfully deleted."}),u()},onError:e=>{r({title:"Error Deleting Medical Record",description:e.message,variant:"destructive"})}}),f=e=>{c({...l,[e.target.name]:e.target.value})};return s("div",{className:"space-y-4",children:[n("h3",{className:"text-xl font-semibold mb-4",children:"Medical Records"}),s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,{children:"Date"}),n(Eg,{children:"Procedure"}),n(Eg,{children:"Description"}),n(Eg,{children:"Veterinarian"}),n(Eg,{children:"Cost"}),t&&n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:d&&0===d.length?n(Sg,{children:n(Dg,{colSpan:t?6:5,className:"text-center py-6",children:"No medical records found for this cat."})}):d&&d.map((e=>s(Sg,{children:[n(Dg,{children:le(new Date(e.record_date),"MMM d, yyyy")}),n(Dg,{children:e.procedure_type}),n(Dg,{children:e.description}),n(Dg,{children:e.veterinarian||"N/A"}),n(Dg,{children:e.cost?`$${e.cost.toFixed(2)}`:"N/A"}),t&&n(Dg,{className:"text-right",children:n(Ds,{variant:"ghost",size:"icon",onClick:()=>(async e=>{t&&window.confirm("Are you sure you want to delete this medical record?")&&g.mutate(e)})(e.id),children:n(Qi,{className:"h-4 w-4"})})})]},e.id)))})]}),t&&s("form",{onSubmit:async e=>{e.preventDefault(),t&&p.mutate(l)},className:"space-y-4 bg-gray-50 p-6 rounded-lg border border-gray-100 mt-6",children:[n("h4",{className:"text-lg font-semibold",children:"Add New Medical Record"}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{children:[n(Zm,{htmlFor:"record_date",children:"Record Date"}),s(Sy,{children:[n(Ey,{asChild:!0,children:s(Ds,{variant:"outline",className:cr("w-full justify-start text-left font-normal",!i&&"text-muted-foreground"),children:[n(An,{className:"mr-2 h-4 w-4"}),i?le(i,"PPP"):n("span",{children:"Pick a date"})]})}),n(Dy,{className:"w-auto p-0",align:"start",children:n(Ay,{mode:"single",selected:i,onSelect:e=>{e&&(o(e),c({...l,record_date:e.toISOString().split("T")[0]}))},initialFocus:!0})})]})]}),s("div",{children:[n(Zm,{htmlFor:"procedure_type",children:"Procedure Type"}),s(Wf,{value:l.procedure_type,onValueChange:e=>((e,t)=>{c({...l,[e]:t})})("procedure_type",e),children:[n(Gf,{children:n(Yf,{placeholder:"Select procedure type"})}),n(Zf,{children:My.map((e=>n(Jf,{value:e,children:e},e)))})]})]}),s("div",{children:[n(Zm,{htmlFor:"veterinarian",children:"Veterinarian"}),n(od,{type:"text",id:"veterinarian",name:"veterinarian",value:l.veterinarian||"",onChange:f})]}),s("div",{children:[n(Zm,{htmlFor:"cost",children:"Cost"}),s("div",{className:"relative",children:[n("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500",children:"$"}),n(od,{type:"number",id:"cost",name:"cost",value:(null==(a=l.cost)?void 0:a.toString())||"",onChange:f,className:"pl-8",step:"0.01",min:"0"})]})]})]}),s("div",{children:[n(Zm,{htmlFor:"description",children:"Description"}),n(cu,{id:"description",name:"description",value:l.description,onChange:f,rows:3,placeholder:"Provide details about the procedure"})]}),s("div",{children:[n(Zm,{htmlFor:"notes",children:"Notes"}),n(cu,{id:"notes",name:"notes",value:l.notes||"",onChange:f,rows:3,placeholder:"Any additional notes or follow-up instructions"})]}),n(Ds,{type:"submit",className:"bg-meow-primary hover:bg-meow-primary/90",children:"Add Record"})]})]})},Ty=({photos:e,onSelectPrimary:t,primaryIndex:a,onRemovePhoto:r,editMode:i})=>s("div",{className:"space-y-4",children:[i&&n("p",{className:"text-sm text-gray-500",children:"Click the star icon to set a photo as primary."}),n("div",{className:"flex flex-wrap gap-3",children:e.map(((e,o)=>s("div",{className:"relative group",children:[n("img",{src:e,alt:`Cat photo ${o+1}`,className:"w-24 h-24 object-cover rounded-md shadow-sm cursor-pointer hover:opacity-90 transition-opacity"}),s("div",{className:"absolute top-2 right-2 flex gap-2",children:[i&&n(Ds,{type:"button",variant:a===o?"default":"secondary",size:"icon",className:"h-6 w-6 p-0 rounded-full shadow-sm opacity-90",onClick:()=>t(o),children:n(Wi,{className:"h-3 w-3",fill:a===o?"currentColor":"none"})}),i&&n(Ds,{type:"button",variant:"destructive",size:"icon",className:"h-6 w-6 p-0 rounded-full shadow-sm opacity-0 group-hover:opacity-90 transition-opacity",onClick:()=>r(o),children:""})]}),a===o&&!i&&n("div",{className:"absolute top-2 right-2",children:n(Wi,{className:"h-4 w-4 text-yellow-400 fill-current"})})]},o)))})]}),Ry=()=>{const{id:e}=J(),t=Z(),{toast:a}=xr(),r=!!e,[o,l]=h(!e);Zu();const[c,d]=h(""),[m,u]=h(""),[g,f]=h(""),[y,v]=h(""),[b,w]=h(""),[x,N]=h(""),[C,_]=h(""),[k,E]=h("Available"),[A,M]=h([]),[P,T]=h([]),[R,F]=h(!1),[L,I]=h(!0),[q,O]=h(null),[j,$]=h(0),[z,U]=h(void 0),[V,B]=h(""),[H,K]=h(""),[W,Y]=h(""),[G,Q]=h(""),[X,ee]=h(""),{data:te,isLoading:ae}=S({queryKey:["cat",e],queryFn:async()=>{if(!e)return null;const{data:t,error:a}=await supabase.from("cats").select("*").eq("id",e).single();if(a)throw a;return t},enabled:r});p((()=>{te&&(d(te.name||""),u(te.age_estimate||""),v(te.breed||""),w(te.gender||""),N(te.description||""),_(te.medical_notes||""),E(te.status||"Available"),M(te.photos_urls||[]),T(te.photos_urls||[]),I("Available"===te.status),U(te.birthday?new Date(te.birthday):void 0),$(0),B(te.color||""),K(te.pattern||""),Y(te.eye_color||""),Q(te.coat_type||""),ee(te.weight||""))}),[te]),p((()=>{if(z){const e=he(new Date,z),t=pe(new Date,z)%12;let a="";e>0&&(a+=`${e} ${1===e?"year":"years"}`),t>0&&(a+=`${e>0?", ":""}${t} ${1===t?"month":"months"}`),a||(a="Less than 1 month"),f(a),u(a)}}),[z]);const re=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("cats").insert([e]).select();if(a)throw a;return t[0]},onSuccess:()=>{a({title:"Cat Added",description:"The cat has been successfully added."}),t("/admin/cats")},onError:e=>{a({title:"Error Adding Cat",description:e.message,variant:"destructive"})}}),ne=D({mutationFn:async({id:e,catData:t})=>{const{data:a,error:r}=await supabase.from("cats").update(t).eq("id",e).select();if(r)throw r;return a[0]},onSuccess:()=>{a({title:"Cat Updated",description:"The cat has been successfully updated."}),l(!1)},onError:e=>{a({title:"Error Updating Cat",description:e.message,variant:"destructive"})}});return s(ng,{title:r?o?"Edit Cat":"View Cat":"Add Cat",children:[n($c,{title:(r?o?"Edit":"View":"Add")+" Cat | Meow Rescue Admin"}),s("div",{className:"max-w-5xl mx-auto py-4",children:[s(Ds,{variant:"outline",onClick:()=>t("/admin/cats"),className:"mb-6 flex items-center gap-2",children:[n(vn,{className:"h-4 w-4"}),"Back to Cats"]}),s(wm,{className:"shadow-md border border-gray-200/50",children:[s(xm,{className:"flex flex-row items-center justify-between bg-gradient-to-r from-meow-primary/10 to-transparent",children:[n(Nm,{className:"text-2xl font-bold text-meow-primary",children:r?`${o?"Edit":"View"} ${(null==te?void 0:te.name)||"Cat"}`:"Add New Cat"}),r&&n(Ds,{variant:o?"outline":"default",onClick:()=>l(!o),className:"flex items-center gap-2",children:s(i,o?{children:[n(ss,{className:"h-4 w-4"}),"Cancel"]}:{children:[n(Ki,{className:"h-4 w-4"}),"Edit"]})})]}),n(_m,{className:"p-6",children:ae?n("div",{className:"flex justify-center py-12",children:n(vi,{className:"animate-spin h-12 w-12 text-meow-primary"})}):s(Bm,{defaultValue:"details",className:"w-full",children:[s(Hm,{className:"mb-6 grid grid-cols-4 w-full",children:[s(Km,{value:"details",className:"flex items-center gap-2",children:[n(ri,{className:"h-4 w-4"}),"Basic Information"]}),s(Km,{value:"appearance",className:"flex items-center gap-2",children:[n(Ki,{className:"h-4 w-4"}),"Appearance"]}),s(Km,{value:"photos",className:"flex items-center gap-2",children:[n(mi,{className:"h-4 w-4"}),"Photos"]}),s(Km,{value:"medical",className:"flex items-center gap-2",children:[n(Yi,{className:"h-4 w-4"}),"Medical"]})]}),s("form",{onSubmit:async t=>{t.preventDefault(),F(!0);try{const t=L?"Available":"NotListed",a=[...P];if(a.length>0){const e=a.splice(j,1)[0];a.unshift(e)}const n={name:c,age_estimate:m,breed:y,gender:b,description:x,medical_notes:C,status:t,photos_urls:a,birthday:z?z.toISOString().split("T")[0]:null,color:V,pattern:H,eye_color:W,coat_type:G,weight:X};r&&e?ne.mutate({id:e,catData:n}):re.mutate(n)}catch(n){console.error("Error:",n),a({title:"Error",description:n.message,variant:"destructive"})}finally{F(!1)}},children:[n(Wm,{value:"details",className:"space-y-6",children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{className:"space-y-4",children:[s("div",{children:[n(Zm,{htmlFor:"name",className:"text-sm font-medium",children:"Name *"}),n(od,{id:"name",value:c,onChange:e=>d(e.target.value),required:!0,placeholder:"Cat's name",disabled:!o,className:"mt-1"})]}),s("div",{children:[n(Zm,{htmlFor:"birthday",className:"text-sm font-medium",children:"Birthday (if known)"}),s(Sy,{children:[n(Ey,{asChild:!0,children:s(Ds,{id:"birthday",variant:"outline",className:cr("w-full justify-start text-left font-normal mt-1",!z&&"text-muted-foreground"),disabled:!o,children:[n(An,{className:"mr-2 h-4 w-4"}),z?le(z,"PPP"):n("span",{children:"Pick a date"})]})}),n(Dy,{className:"w-auto p-0",align:"start",children:n(Ay,{mode:"single",selected:z,onSelect:U,initialFocus:!0,disabled:!o,className:"pointer-events-auto"})})]})]}),s("div",{children:[n(Zm,{htmlFor:"ageEstimate",className:"text-sm font-medium",children:"Age Estimate"}),n(od,{id:"ageEstimate",value:m,onChange:e=>u(e.target.value),placeholder:"e.g. 2 years, 6 months",disabled:!o||!!z,className:"mt-1"}),z&&s("p",{className:"text-xs text-gray-500 mt-1",children:["Age calculated from birthday: ",g]})]}),s("div",{children:[n(Zm,{htmlFor:"breed",className:"text-sm font-medium",children:"Breed"}),s(Wf,{value:y,onValueChange:v,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select breed"})}),n(Zf,{children:["Domestic Shorthair","Domestic Longhair","Siamese","Persian","Maine Coon","American Shorthair","Ragdoll","British Shorthair","Bengal","Sphynx","Scottish Fold","Abyssinian","Norwegian Forest Cat","Oriental Shorthair","Burmese","Russian Blue","Siberian","Devon Rex","Cornish Rex","Turkish Van","Manx","Bombay","Himalayan","Egyptian Mau","Mixed Breed"].map((e=>n(Jf,{value:e,children:e},e)))})]})]})]}),s("div",{className:"space-y-4",children:[s("div",{children:[n(Zm,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),s(Wf,{value:b,onValueChange:w,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select gender"})}),s(Zf,{children:[n(Jf,{value:"Male",children:"Male"}),n(Jf,{value:"Female",children:"Female"})]})]})]}),s("div",{children:[n(Zm,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),n(cu,{id:"description",value:x,onChange:e=>N(e.target.value),placeholder:"Cat's personality, preferences, etc.",rows:3,disabled:!o,className:"mt-1"})]}),s("div",{children:[n(Zm,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),s(Wf,{value:k,onValueChange:E,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select status"})}),n(Zf,{children:["Available","Pending","Adopted","NotListed","Deceased","Missing"].map((e=>n(Jf,{value:e,children:"NotListed"===e?"Not Listed":e},e)))})]})]}),s("div",{className:"flex items-center space-x-2 pt-4",children:[n(Xu,{id:"showOnAdoptablePage",checked:L,onCheckedChange:e=>I(e),disabled:!o}),n(Zm,{htmlFor:"showOnAdoptablePage",className:"font-medium cursor-pointer "+(o?"":"opacity-70"),children:"Show on Adoptable Cats page"})]}),s("div",{children:[n(Zm,{htmlFor:"medicalNotes",className:"text-sm font-medium",children:"Special Care Notes"}),n(cu,{id:"medicalNotes",value:C,onChange:e=>_(e.target.value),placeholder:"Any special care requirements or notes",rows:3,disabled:!o,className:"mt-1"})]})]})]})}),n(Wm,{value:"appearance",className:"space-y-6",children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{className:"space-y-4",children:[s("div",{children:[n(Zm,{htmlFor:"color",className:"text-sm font-medium",children:"Color"}),s(Wf,{value:V,onValueChange:B,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select color"})}),n(Zf,{children:["Black","White","Gray","Orange","Brown","Cream","Black & White","Gray & White","Orange & White","Calico","Tortoiseshell","Tabby","Tuxedo","Blue","Lilac","Chocolate","Cinnamon","Fawn","Colorpoint","Silver","Red","Cream & White","Tricolor","Bicolor","Spotted"].map((e=>n(Jf,{value:e,children:e},e)))})]})]}),s("div",{children:[n(Zm,{htmlFor:"pattern",className:"text-sm font-medium",children:"Pattern"}),s(Wf,{value:H,onValueChange:K,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select pattern"})}),n(Zf,{children:["Solid","Tabby","Striped","Spotted","Tortoiseshell","Calico","Bicolor","Tuxedo","Pointed","Colorpoint","Tricolor","Harlequin","Van","Mackerel Tabby","Classic Tabby","Spotted Tabby","Ticked Tabby","Patched Tabby","Smoke","Shaded","Chinchilla","Mink","Lynx Point","Marble","Tortie"].map((e=>n(Jf,{value:e,children:e},e)))})]})]})]}),s("div",{className:"space-y-4",children:[s("div",{children:[n(Zm,{htmlFor:"eyeColor",className:"text-sm font-medium",children:"Eye Color"}),s(Wf,{value:W,onValueChange:Y,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select eye color"})}),n(Zf,{children:["Green","Blue","Yellow","Gold","Amber","Copper","Orange","Hazel","Brown","Odd-eyed (Different Colors)","Aqua","Green-Yellow","Blue-Green","Yellow-Green","Copper-Green","Amber-Green","Gold-Green","Pale Blue","Deep Blue","Sapphire","Pale Gold","Deep Gold","Light Copper","Dark Copper","Amber-Gold"].map((e=>n(Jf,{value:e,children:e},e)))})]})]}),s("div",{children:[n(Zm,{htmlFor:"coatType",className:"text-sm font-medium",children:"Coat Type"}),s(Wf,{value:G,onValueChange:Q,disabled:!o,children:[n(Gf,{className:"mt-1",children:n(Yf,{placeholder:"Select coat type"})}),n(Zf,{children:["Short","Medium","Long","Hairless","Curly","Wavy","Wire","Rex","Silky","Smooth","Dense","Double-coat","Sparse","Plush","Woolly","Crimped","Fine","Coarse","Fluffy","Soft","Downy","Sleek","Flat-lying","Thick","Thin"].map((e=>n(Jf,{value:e,children:e},e)))})]})]}),s("div",{children:[n(Zm,{htmlFor:"weight",className:"text-sm font-medium",children:"Weight"}),s("div",{className:"flex items-center mt-1",children:[n(od,{id:"weight",type:"number",value:X,onChange:e=>ee(e.target.value),placeholder:"e.g. 8",disabled:!o,className:"rounded-r-none",step:"0.1"}),n("div",{className:"bg-gray-100 border border-l-0 border-input px-3 py-2 text-sm rounded-r-md text-gray-600",children:"lbs"})]})]})]})]})}),s(Wm,{value:"photos",className:"space-y-6",children:[o&&n(wm,{className:"border border-dashed border-gray-300 bg-gray-50/50",children:n(_m,{className:"pt-6",children:n(ty,{onImageUploaded:e=>{e&&T((t=>[...t,e]))},bucketName:"cat-photos",folderPath:"cat-photos"})})}),P.length>0&&s("div",{className:"mt-6",children:[n(Zm,{className:"text-sm font-medium mb-2 block",children:"Photo Gallery"}),n(Ty,{photos:P,onSelectPrimary:e=>{$(e)},primaryIndex:j,onRemovePhoto:e=>{T((t=>t.filter(((t,a)=>a!==e))))},editMode:o})]})]}),n(Wm,{value:"medical",children:r&&e?n(Py,{catId:e,editMode:o}):s("div",{className:"text-center py-8 text-gray-500",children:[n(Yi,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),n("p",{children:"Save the cat first to add medical records"})]})}),o&&s("div",{className:"flex justify-end gap-4 mt-8",children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{r?(T(A),l(!1)):t("/admin/cats")},disabled:R,children:"Cancel"}),s(Ds,{type:"submit",disabled:R,className:"flex items-center gap-2",children:[R&&n(vi,{className:"h-4 w-4 animate-spin"}),n(ji,{className:"h-4 w-4"}),r?"Save Changes":"Add Cat"]})]})]})]})})]})]}),n(dm,{open:!!q,onOpenChange:e=>{e||O(null)},children:n(pm,{className:"max-w-4xl p-0 bg-transparent border-0",children:s("div",{className:"relative bg-black/80 p-1 rounded-lg",children:[n("div",{className:"flex justify-center items-center",children:n("img",{src:q||"",alt:"Cat photo",className:"max-h-[80vh] max-w-[90vw] object-contain rounded"})}),n(Ds,{className:"absolute top-2 right-2 h-8 w-8 p-0 rounded-full bg-black/50 hover:bg-black/70 text-white",variant:"ghost",size:"sm",onClick:()=>O(null),children:""})]})})})]})},Fy=()=>{const e=Z(),{toast:t}=xr(),[a,r]=h(""),[o,l]=h(null),[c,d]=h(!1),{data:m,isLoading:u,refetch:p}=S({queryKey:["adminBlogPosts"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("blog_posts").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}}),g=m?m.filter((e=>e.title.toLowerCase().includes(a.toLowerCase())||e.content.toLowerCase().includes(a.toLowerCase())||e.meta_description&&e.meta_description.toLowerCase().includes(a.toLowerCase())||e.keywords&&e.keywords.toLowerCase().includes(a.toLowerCase()))):[];return s(ng,{title:"Blog Management",children:[n($c,{title:"Blog Management | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Blog Posts"}),s("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s("div",{className:"relative w-full md:w-auto",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400","aria-hidden":"true"}),n(od,{placeholder:"Search blog posts...",value:a,onChange:e=>r(e.target.value),className:"pl-10 w-full md:w-64","aria-label":"Search blog posts"})]}),s(Ds,{onClick:()=>e("/admin/blog/new"),className:"w-full md:w-auto",children:[n(Li,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Create New Post"]})]})]}),u?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):g.length>0?n("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s(Cg,{children:[n(Ag,{children:"All blog posts."}),n(_g,{children:s(Sg,{children:[n(Eg,{children:"Title"}),n(Eg,{children:"Status"}),n(Eg,{children:"SEO"}),n(Eg,{children:"Date"}),n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:g.map((e=>{const a=(e=>{let t=0;return e.meta_description&&e.meta_description.length>50&&(t+=1),e.keywords&&e.keywords.length>10&&(t+=1),e.featured_image_url&&(t+=1),3===t?{label:"Good",color:"bg-green-500 hover:bg-green-600"}:2===t?{label:"Fair",color:"bg-yellow-500 hover:bg-yellow-600"}:{label:"Poor",color:"bg-red-500 hover:bg-red-600"}})(e);return s(Sg,{children:[n(Dg,{className:"font-medium",children:s("div",{className:"flex items-center gap-2",children:[e.is_featured&&n(Wc,{className:"bg-meow-secondary",children:"Featured"}),e.title]})}),n(Dg,{children:n(Wc,{variant:e.is_published?"default":"outline",className:e.is_published?"bg-green-500 hover:bg-green-600":"",children:e.is_published?"Published":"Draft"})}),n(Dg,{children:n(Wc,{variant:"default",className:a.color,children:a.label})}),n(Dg,{children:e.is_published&&e.published_at?new Date(e.published_at).toLocaleDateString():new Date(e.created_at).toLocaleDateString()+" (Created)"}),n(Dg,{className:"text-right",children:s("div",{className:"flex items-center justify-end gap-2",children:[n(Ds,{variant:"ghost",size:"sm",onClick:()=>(async(e,a)=>{const r=(new Date).toISOString(),n={is_published:!a,published_at:a?null:r,updated_at:r};try{const{error:r}=await supabase.from("blog_posts").update(n).eq("id",e);if(r)throw r;t({title:"Success",description:`Blog post ${a?"unpublished":"published"} successfully`}),p()}catch(i){t({title:"Error",description:i.message||"Failed to update publish status",variant:"destructive"})}})(e.id,e.is_published),children:e.is_published?s(i,{children:[n(Zn,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Unpublish"]}):s(i,{children:[n(Jn,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Publish"]})}),n(X,{to:`/admin/blog/edit/${e.id}`,children:s(Ds,{variant:"ghost",size:"sm",children:[n(Ki,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Edit"]})}),e.is_published&&n(X,{to:`/blog/${e.slug}`,target:"_blank",children:s(Ds,{variant:"ghost",size:"sm",children:[n(Xn,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," View"]})}),s(Ds,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",onClick:()=>{l(e.id),d(!0)},children:[n(Qi,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Delete"]})]})})]},e.id)}))})]})}):n("div",{className:"bg-white p-6 rounded-lg shadow",children:s("div",{className:"text-center py-12",children:[n(ri,{className:"h-12 w-12 mx-auto text-gray-400 mb-4","aria-hidden":"true"}),n("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"No Blog Posts"}),n("p",{className:"text-gray-500 mb-8",children:"There are no blog posts in the database yet. Create your first post to get started."}),s(Ds,{onClick:()=>e("/admin/blog/new"),children:[n(Li,{className:"h-4 w-4 mr-2","aria-hidden":"true"})," Create Your First Post"]})]})})]}),n(_p,{open:c,onOpenChange:d,children:s(Dp,{children:[s(Ap,{children:[n(Pp,{children:"Are you absolutely sure?"}),n(Tp,{children:"This action cannot be undone. This will permanently delete the blog post and all of its content."})]}),s(Mp,{children:[n(Fp,{children:"Cancel"}),n(Rp,{onClick:async()=>{var e;if(o)try{const{error:a}=await supabase.from("blog_posts").delete().eq("id",o);if(a)throw a;await xt().from("activity_logs").insert({user_id:null==(e=(await xt().auth.getUser()).data.user)?void 0:e.id,activity_type:"Delete",description:"Deleted blog post"}),t({title:"Success",description:"Blog post deleted successfully"}),d(!1),l(null),setTimeout((()=>{p()}),100)}catch(a){t({title:"Error",description:a.message||"Failed to delete blog post",variant:"destructive"}),d(!1),l(null)}},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})};var Ly="Switch",[Iy,qy]=Ft(Ly),[Oy,jy]=Iy(Ly),$y=c.forwardRef(((e,t)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:o,required:l,disabled:d,value:m="on",onCheckedChange:u,form:h,...p}=e,[g,f]=c.useState(null),y=Rt(t,(e=>f(e))),v=c.useRef(!1),b=!g||(h||!!g.closest("form")),[w,x]=La({prop:i,defaultProp:o??!1,onChange:u,caller:Ly});return s(Oy,{scope:a,checked:w,disabled:d,children:[n(Ut.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":By(w),"data-disabled":d?"":void 0,disabled:d,value:m,...p,ref:y,onClick:Mt(e.onClick,(e=>{x((e=>!e)),b&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())}))}),b&&n(Vy,{control:g,bubbles:!v.current,name:r,value:m,checked:w,required:l,disabled:d,form:h,style:{transform:"translateX(-100%)"}})]})}));$y.displayName=Ly;var zy="SwitchThumb",Uy=c.forwardRef(((e,t)=>{const{__scopeSwitch:a,...r}=e,i=jy(zy,a);return n(Ut.span,{"data-state":By(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})}));Uy.displayName=zy;var Vy=c.forwardRef((({__scopeSwitch:e,control:t,checked:a,bubbles:r=!0,...i},s)=>{const o=c.useRef(null),l=Rt(o,s),d=du(a),m=la(t);return c.useEffect((()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(d!==a&&n){const t=new Event("click",{bubbles:r});n.call(e,a),e.dispatchEvent(t)}}),[d,a,r]),n("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})}));function By(e){return e?"checked":"unchecked"}Vy.displayName="SwitchBubbleInput";var Hy=$y,Ky=Uy;const Wy=c.forwardRef((({className:e,...t},a)=>n(Hy,{className:cr("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:n(Ky,{className:cr("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})));Wy.displayName=Hy.displayName;const Yy=xe.object({title:xe.string().min(5,{message:"Title must be at least 5 characters"}),slug:xe.string().min(3,{message:"Slug must be at least 3 characters"}),content:xe.string().min(50,{message:"Content must be at least 50 characters"}),featured_image_url:xe.string().optional(),is_published:xe.boolean().default(!1),meta_description:xe.string().max(160,{message:"Meta description should be under 160 characters"}).optional(),keywords:xe.string().optional(),canonical_url:xe.string().optional(),is_featured:xe.boolean().default(!1)}),Gy=()=>{const{id:e}=J(),t=Z(),{toast:a}=xr(),{user:r}=At(),[i,o]=h(!1),[l,c]=h(null),[d,m]=h(null),u=Boolean(e),[g,f]=h("content"),y=ve({resolver:be(Yy),defaultValues:{title:"",slug:"",content:"",featured_image_url:"",is_published:!1,meta_description:"",keywords:"",canonical_url:"",is_featured:!1}});p((()=>{(async()=>{if(e){o(!0);try{const{data:t,error:a}=await supabase.from("blog_posts").select("*").eq("id",e).single();if(a)throw a;if(t){const e=Array.isArray(t.keywords)?t.keywords.join(", "):t.keywords||"";y.reset({title:t.title,slug:t.slug,content:t.content,featured_image_url:t.featured_image_url||"",is_published:t.is_published,meta_description:t.meta_description||"",keywords:e,canonical_url:t.canonical_url||"",is_featured:t.is_featured}),t.featured_image_url&&m(t.featured_image_url)}}catch(t){console.error("Error fetching post:",t),a({title:"Error",description:"Failed to load blog post data",variant:"destructive"})}finally{o(!1)}}})()}),[e,y,a]);const v=()=>{const e=y.getValues("title");if(e){const t=e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");y.setValue("slug",t)}},b=()=>{const e=y.getValues("content");if(e){const t=e.replace(/<[^>]*>/g,""),a=t.substring(0,157)+(t.length>157?"...":"");y.setValue("meta_description",a)}},w=e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];if(!a)return;const r=new FileReader;r.onloadend=()=>{m(r.result)},r.readAsDataURL(a),c(a)};return s(ng,{title:u?"Edit Blog Post":"Create Blog Post",children:[n("div",{className:"mb-6 flex items-center justify-between",children:s(Ds,{variant:"ghost",onClick:()=>t("/admin/blog"),className:"flex items-center",children:[n(vn,{className:"mr-2 h-4 w-4"})," Back to Blog Posts"]})}),n(wm,{children:n(_m,{className:"p-6",children:n(Jm,{...y,children:s("form",{onSubmit:y.handleSubmit((async n=>{o(!0);try{let i=n.featured_image_url;if(l){const e=l.name.split(".").pop(),t=`${`${Date.now()}.${e}`}`,{error:a,data:r}=await xt().storage.from("blog-images").upload(t,l);if(a)throw a;const{data:n}=xt().storage.from("blog-images").getPublicUrl(t);i=n.publicUrl}const s=(new Date).toISOString(),o=n.keywords?n.keywords.split(",").map((e=>e.trim())).filter(Boolean):null;n.is_featured&&await supabase.from("blog_posts").update({is_featured:!1}).eq("is_featured",!0);const c={title:n.title,slug:n.slug,content:n.content,featured_image_url:i,is_published:n.is_published,published_at:n.is_published?u?void 0:s:null,author_profile_id:null==r?void 0:r.id,updated_at:s,meta_description:n.meta_description,keywords:o,canonical_url:n.canonical_url,is_featured:n.is_featured};let d;if(d=u?await supabase.from("blog_posts").update(c).eq("id",e):await supabase.from("blog_posts").insert([{...c,created_at:s}]),d.error)throw d.error;a({title:"Success",description:u?"Blog post updated successfully":"Blog post created successfully"}),t("/admin/blog")}catch(i){console.error("Error saving post:",i),a({title:"Error",description:i.message||"Failed to save blog post",variant:"destructive"})}finally{o(!1)}})),className:"space-y-6",children:[s(Bm,{value:g,onValueChange:f,children:[s(Hm,{className:"mb-4",children:[n(Km,{value:"content",children:"Content"}),n(Km,{value:"seo",children:"SEO & Metadata"})]}),n(Wm,{value:"content",className:"space-y-6",children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{className:"space-y-6",children:[n(tu,{control:y.control,name:"title",render:({field:e})=>s(nu,{children:[n(iu,{children:"Post Title"}),n(su,{children:n(od,{placeholder:"Enter post title",...e,onChange:t=>{e.onChange(t),y.getValues("slug")&&u||setTimeout(v,300)}})}),n(lu,{})]})}),n(tu,{control:y.control,name:"slug",render:({field:e})=>s(nu,{children:[n(iu,{children:"URL Slug"}),n(su,{children:s("div",{className:"flex gap-2",children:[n(od,{placeholder:"url-friendly-slug",...e}),n(Ds,{type:"button",variant:"outline",onClick:v,className:"whitespace-nowrap",children:"Generate"})]})}),n(ou,{children:"Used in the URL: /blog/your-slug"}),n(lu,{})]})}),n(tu,{control:y.control,name:"featured_image_url",render:({field:e})=>s(nu,{children:[n(iu,{children:"Featured Image"}),n(su,{children:s("div",{className:"space-y-4",children:[n(od,{type:"file",accept:"image/*",onChange:w,className:"cursor-pointer"}),n("div",d?{className:"relative w-full h-48 bg-gray-100 rounded-md overflow-hidden",children:n("img",{src:d,alt:"Preview",className:"w-full h-full object-cover"})}:{className:"w-full h-48 flex items-center justify-center bg-gray-100 rounded-md border-2 border-dashed border-gray-300",children:s("div",{className:"text-center",children:[n(mi,{className:"w-10 h-10 mx-auto text-gray-400"}),n("p",{className:"mt-2 text-sm text-gray-500",children:"No image selected"})]})}),e.value&&!l&&n(od,{type:"hidden",...e})]})}),n(ou,{children:"Upload an image to feature at the top of your post"}),n(lu,{})]})}),n(tu,{control:y.control,name:"is_published",render:({field:e})=>s(nu,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[s("div",{className:"space-y-0.5",children:[n(iu,{className:"text-base",children:"Published Status"}),n(ou,{children:"Toggle to make this post publicly visible"})]}),n(su,{children:n(Wy,{checked:e.value,onCheckedChange:e.onChange})})]})}),n(tu,{control:y.control,name:"is_featured",render:({field:e})=>s(nu,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[s("div",{className:"space-y-0.5",children:[n(iu,{className:"text-base",children:"Featured Post"}),n(ou,{children:"Toggle to make this post appear as the featured story on the blog page"})]}),n(su,{children:n(Wy,{checked:e.value,onCheckedChange:e.onChange})})]})})]}),n(tu,{control:y.control,name:"content",render:({field:e})=>s(nu,{className:"col-span-1 md:col-span-1 h-full",children:[n(iu,{children:"Content"}),n(su,{children:n(cu,{placeholder:"Write your post content here...",className:"h-[400px] resize-none",...e,onChange:t=>{e.onChange(t),y.getValues("meta_description")||setTimeout(b,1e3)}})}),n(lu,{})]})})]})}),n(Wm,{value:"seo",className:"space-y-6",children:s(wm,{children:[n(xm,{children:n(Nm,{children:"SEO & Metadata"})}),s(_m,{className:"space-y-6",children:[n(tu,{control:y.control,name:"meta_description",render:({field:e})=>{var t;return s(nu,{children:[n(iu,{children:"Meta Description"}),n(su,{children:s("div",{className:"flex gap-2",children:[n(cu,{placeholder:"Brief description for search engines (max 160 characters)",className:"resize-none",...e}),n(Ds,{type:"button",variant:"outline",onClick:b,className:"whitespace-nowrap",children:"Generate"})]})}),s(ou,{children:[(null==(t=e.value)?void 0:t.length)||0,"/160 characters - Used in search engine results"]}),n(lu,{})]})}}),n(tu,{control:y.control,name:"keywords",render:({field:e})=>s(nu,{children:[n(iu,{children:"Keywords"}),n(su,{children:n(od,{placeholder:"cat rescue, adoption, feline care (comma separated)",...e})}),n(ou,{children:"Keywords help with SEO (separate with commas)"}),n(lu,{})]})}),n(tu,{control:y.control,name:"canonical_url",render:({field:e})=>s(nu,{children:[n(iu,{children:"Canonical URL (optional)"}),n(su,{children:n(od,{placeholder:"https://example.com/original-content",...e})}),n(ou,{children:"Only needed if this content exists elsewhere and you want to avoid duplicate content issues"}),n(lu,{})]})})]})]})})]}),s("div",{className:"flex justify-end gap-4",children:[n(Ds,{type:"button",variant:"outline",onClick:()=>t("/admin/blog"),disabled:i,children:"Cancel"}),s(Ds,{type:"submit",disabled:i,className:"gap-2",children:[i&&n("div",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}),n(ji,{className:"h-4 w-4 mr-1"}),u?"Update":"Create"," Post"]})]})]})})})})]})},Qy=({user:e,onRoleChange:t,onStatusChange:a,refetchUsers:r})=>{var o,l;const{toast:c}=xr(),[d,m]=h(!1),[u,p]=h(e.role_title||""),[g,f]=h(e.show_in_team||!1),[y,v]=h(e.first_name||""),[b,w]=h(e.last_name||""),[x,N]=h(e.bio||""),[C,_]=h(e.avatar_url||""),k=e=>e?n(Ln,{className:"h-4 w-4 text-green-500"}):n(ss,{className:"h-4 w-4 text-red-500"});return s(wm,{className:"h-full",children:[n(xm,{className:"pb-2",children:s("div",{className:"flex justify-between items-start",children:[s("div",{className:"flex items-center gap-4",children:[s(Ec,{className:"h-14 w-14",children:[n(Dc,{src:C||"/placeholder.svg"}),s(Ac,{children:[(null==(o=e.first_name)?void 0:o.charAt(0))||"",(null==(l=e.last_name)?void 0:l.charAt(0))||"?"]})]}),s("div",{children:[s(Nm,{className:"text-lg",children:[e.first_name||""," ",e.last_name||""]}),s(Cm,{className:"flex items-center mt-1",children:[n(xi,{className:"h-3.5 w-3.5 mr-1"}),e.email]})]})]}),n(Wc,{className:`${{admin:"bg-red-100 text-red-800",volunteer:"bg-blue-100 text-blue-800",foster:"bg-green-100 text-green-800",user:"bg-gray-100 text-gray-800"}[e.role]}`,children:e.role.charAt(0).toUpperCase()+e.role.slice(1)})]})}),s(_m,{className:"pb-2",children:[s("div",{className:"grid gap-2",children:[s("div",{className:"flex justify-between text-sm",children:[n("span",{className:"text-gray-500",children:"Team Member:"}),s("span",{className:"flex items-center font-medium",children:[k(e.show_in_team),n("span",{className:"ml-1",children:e.show_in_team?"Yes":"No"})]})]}),e.role_title&&s("div",{className:"flex justify-between text-sm",children:[n("span",{className:"text-gray-500",children:"Role Title:"}),n("span",{className:"font-medium",children:e.role_title})]}),s("div",{className:"flex justify-between text-sm",children:[n("span",{className:"text-gray-500",children:"Status:"}),s("span",{className:"flex items-center font-medium",children:[k(e.is_active),n("span",{className:"ml-1",children:e.is_active?"Active":"Inactive"})]})]}),s("div",{className:"flex justify-between text-sm",children:[n("span",{className:"text-gray-500",children:"Joined:"}),n("span",{className:"font-medium",children:le(new Date(e.created_at),"MMM d, yyyy")})]})]}),d&&s("div",{className:"mt-4 border-t pt-4 space-y-4",children:[s("div",{className:"space-y-2",children:[n(Zm,{children:"First Name"}),n(od,{value:y,onChange:e=>v(e.target.value),placeholder:"First Name"})]}),s("div",{className:"space-y-2",children:[n(Zm,{children:"Last Name"}),n(od,{value:b,onChange:e=>w(e.target.value),placeholder:"Last Name"})]}),s("div",{className:"space-y-2",children:[n(Zm,{children:"Role Title (shown on About page)"}),n(od,{value:u,onChange:e=>p(e.target.value),placeholder:"e.g. Volunteer Coordinator"})]}),s("div",{className:"space-y-2",children:[n(Zm,{children:"Bio"}),n(od,{value:x,onChange:e=>N(e.target.value),placeholder:"Short bio for team page"})]}),s("div",{className:"space-y-2",children:[n(Zm,{children:"Profile Photo"}),n(ty,{currentImage:C,onImageUploaded:e=>_(e),bucketName:"profile-photos",folderPath:e.id,showThumbnailOnly:!0}),n(od,{value:C||"",onChange:e=>_(e.target.value),placeholder:"URL to profile image",className:"mt-2"})]}),s("div",{className:"flex items-center justify-between",children:[n(Zm,{children:"Show on Team Page"}),n(Wy,{checked:g,onCheckedChange:f})]})]})]}),n(km,{className:"pt-0 flex justify-between",children:s("div",d?{className:"flex gap-2 w-full",children:[n(Ds,{variant:"outline",size:"sm",onClick:()=>m(!1),className:"flex-1",children:"Cancel"}),n(Ds,{size:"sm",onClick:async()=>{try{const{error:t}=await supabase.from("profiles").update({role_title:u,show_in_team:g,first_name:y,last_name:b,bio:x,avatar_url:C}).eq("id",e.id);if(t)throw t;c({title:"Profile Updated",description:"Team member settings updated successfully."}),m(!1),r()}catch(t){c({title:"Update Failed",description:t.message||"There was an error updating the profile.",variant:"destructive"})}},className:"flex-1",children:"Save"})]}:{className:"flex gap-2 w-full",children:[n(Ds,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"flex-1",children:"Edit Team Settings"}),s(sc,{children:[n(oc,{asChild:!0,children:n(Ds,{variant:"outline",size:"sm",className:"flex-1",children:"Actions"})}),s(lc,{children:[n(dc,{children:"User Actions"}),n(mc,{}),n(cc,{onClick:()=>a(!e.is_active),children:e.is_active?s(i,{children:[n(as,{className:"mr-2 h-4 w-4"}),n("span",{children:"Deactivate User"})]}):s(i,{children:[n(ts,{className:"mr-2 h-4 w-4"}),n("span",{children:"Activate User"})]})}),n(mc,{}),n(dc,{children:"Change Role"}),s(cc,{onClick:()=>t("admin"),children:[n(Hi,{className:"mr-2 h-4 w-4"}),n("span",{children:"Set as Admin"})]}),s(cc,{onClick:()=>t("volunteer"),children:[n(Yn,{className:"mr-2 h-4 w-4"}),n("span",{children:"Set as Volunteer"})]}),s(cc,{onClick:()=>t("foster"),children:[n(Pn,{className:"mr-2 h-4 w-4"}),n("span",{children:"Set as Foster"})]}),s(cc,{onClick:()=>t("user"),children:[n(ts,{className:"mr-2 h-4 w-4"}),n("span",{children:"Set as Regular User"})]})]})]})]})})]})},Xy=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(""),[i,o]=h("all"),[l,c]=h("all"),[d,m]=h(!1),[u,p]=h(!1),[g,f]=h({email:"",password:"",first_name:"",last_name:"",role:"user"}),{data:y,isLoading:v}=S({queryKey:["admin-users"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("profiles").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}}),b=D({mutationFn:async e=>{const{data:t,error:a}=await xt().auth.signUp({email:e.email,password:e.password,options:{data:{first_name:e.first_name,last_name:e.last_name}}});if(a)throw a;const{error:r}=await supabase.from("profiles").update({role:e.role}).eq("id",t.user.id);if(r)throw r;return t.user},onSuccess:()=>{e({title:"User Created",description:"New user has been created successfully."}),t.invalidateQueries({queryKey:["admin-users"]}),_(),m(!1)},onError:t=>{e({title:"Error",description:t.message||"Failed to create user",variant:"destructive"})}}),w=D({mutationFn:async({userId:e,role:t})=>{const{error:a}=await supabase.from("profiles").update({role:t}).eq("id",e);if(a)throw a;return{userId:e,role:t}},onSuccess:a=>(e({title:"Role Updated",description:`User role has been updated to ${a.role}.`}),t.invalidateQueries({queryKey:["admin-users"]}),Promise.resolve()),onError:t=>(e({title:"Error",description:t.message||"Failed to update role",variant:"destructive"}),Promise.reject(t))}),x=D({mutationFn:async({userId:e,isActive:t})=>{const{error:a}=await supabase.from("profiles").update({is_active:t}).eq("id",e);if(a)throw a;return{userId:e,isActive:t}},onSuccess:a=>(e({title:"Status Updated",description:`User has been ${a.isActive?"activated":"deactivated"}.`}),t.invalidateQueries({queryKey:["admin-users"]}),Promise.resolve()),onError:t=>(e({title:"Error",description:t.message||"Failed to update status",variant:"destructive"}),Promise.reject(t))}),N=null==y?void 0:y.filter((e=>{const t=""===a||e.email.toLowerCase().includes(a.toLowerCase())||e.first_name&&e.first_name.toLowerCase().includes(a.toLowerCase())||e.last_name&&e.last_name.toLowerCase().includes(a.toLowerCase()),r="all"===i||e.role===i,n="all"===l||"active"===l&&e.is_active||"inactive"===l&&!e.is_active;return t&&r&&n})),C=null==y?void 0:y.reduce(((e,t)=>{const a=t.role;return e[a]||(e[a]=0),e[a]++,e}),{}),_=()=>{f({email:"",password:"",first_name:"",last_name:"",role:"user"})};return s(ng,{title:"User Management",children:[n($c,{title:"User Management | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"User Management"}),s("div",{className:"flex gap-4",children:[n(Ds,{variant:"outline",size:"icon",onClick:()=>p(!u),className:u?"bg-gray-100":"",children:n(ii,{className:"h-4 w-4"})}),s("div",{className:"relative",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search users...",value:a,onChange:e=>r(e.target.value),className:"pl-10 md:w-80"})]}),s(Ds,{onClick:()=>m(!0),children:[n(ts,{className:"mr-2 h-4 w-4"}),"Add User"]})]})]}),u&&n(wm,{className:"mb-6",children:n(_m,{className:"pt-6",children:s("div",{className:"flex flex-wrap gap-4",children:[s("div",{className:"w-full md:w-auto",children:[n("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),s(Wf,{value:i,onValueChange:o,children:[n(Gf,{className:"w-full md:w-40",children:n(Yf,{placeholder:"All Roles"})}),s(Zf,{children:[n(Jf,{value:"all",children:"All Roles"}),n(Jf,{value:"admin",children:"Admin"}),n(Jf,{value:"staff",children:"Staff"}),n(Jf,{value:"volunteer",children:"Volunteer"}),n(Jf,{value:"foster",children:"Foster"}),n(Jf,{value:"user",children:"User"})]})]})]}),s("div",{className:"w-full md:w-auto",children:[n("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s(Wf,{value:l,onValueChange:c,children:[n(Gf,{className:"w-full md:w-40",children:n(Yf,{placeholder:"All Status"})}),s(Zf,{children:[n(Jf,{value:"all",children:"All Status"}),n(Jf,{value:"active",children:"Active"}),n(Jf,{value:"inactive",children:"Inactive"})]})]})]})]})})}),s("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:n(ns,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),n("p",{className:"text-xl font-semibold",children:(null==y?void 0:y.length)||0})]})]})})}),n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600",children:n(Bi,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),n("p",{className:"text-xl font-semibold",children:(null==C?void 0:C.admin)||0})]})]})})}),n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-green-100 text-green-600",children:n(zn,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Active"}),n("p",{className:"text-xl font-semibold",children:(null==y?void 0:y.filter((e=>e.is_active)).length)||0})]})]})})}),n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-red-100 text-red-600",children:n(as,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Inactive"}),n("p",{className:"text-xl font-semibold",children:(null==y?void 0:y.filter((e=>!e.is_active)).length)||0})]})]})})})]}),s(wm,{children:[n(xm,{children:s(Nm,{className:"flex items-center",children:[n(ns,{className:"mr-2 h-5 w-5"}),"User List"]})}),n(_m,{children:v?n("div",{className:"flex justify-center py-8",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-meow-primary"})}):N&&N.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map((a=>n(Qy,{user:a,onRoleChange:t=>{return r=a.id,["admin","volunteer","foster","user"].includes(n=t)?w.mutateAsync({userId:r,role:n}).then((()=>{})):(e({title:"Invalid Role",description:`The role "${n}" is not valid.`,variant:"destructive"}),Promise.reject(new Error(`Invalid role: ${n}`)));var r,n},onStatusChange:e=>((e,t)=>x.mutateAsync({userId:e,isActive:t}).then((()=>{})))(a.id,e),refetchUsers:()=>t.invalidateQueries({queryKey:["admin-users"]})},a.id)))}):s("div",{className:"text-center py-8",children:[n(ns,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),n("p",{className:"text-gray-500",children:"No users found matching your filters."})]})})]})]}),n(dm,{open:d,onOpenChange:m,children:s(pm,{className:"sm:max-w-md",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(ts,{className:"mr-2 h-5 w-5"}),"Add New User"]})}),s("form",{onSubmit:e=>{e.preventDefault(),b.mutate(g)},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid gap-2",children:[s(Zm,{htmlFor:"email",children:[n(xi,{className:"h-4 w-4 inline mr-1"}),"Email"]}),n(od,{id:"email",type:"email",placeholder:"user@example.com",value:g.email,onChange:e=>f({...g,email:e.target.value}),required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"password",children:"Password"}),n(od,{id:"password",type:"password",placeholder:"Minimum 8 characters",value:g.password,onChange:e=>f({...g,password:e.target.value}),required:!0,minLength:8})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"first_name",children:"First Name"}),n(od,{id:"first_name",placeholder:"John",value:g.first_name,onChange:e=>f({...g,first_name:e.target.value})})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"last_name",children:"Last Name"}),n(od,{id:"last_name",placeholder:"Doe",value:g.last_name,onChange:e=>f({...g,last_name:e.target.value})})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"role",children:"Role"}),s(Wf,{value:g.role,onValueChange:e=>f({...g,role:e}),children:[n(Gf,{children:n(Yf,{placeholder:"Select role"})}),s(Zf,{children:[n(Jf,{value:"user",children:"User"}),n(Jf,{value:"volunteer",children:"Volunteer"}),n(Jf,{value:"foster",children:"Foster"}),n(Jf,{value:"admin",children:"Admin"})]})]})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{_(),m(!1)},children:"Cancel"}),n(Ds,{type:"submit",disabled:b.isPending,children:b.isPending?"Creating...":"Create User"})]})]})]})})]})},Zy=e=>{let t=e;try{let a=new Date(e);if(!isNaN(a.getTime())){const e=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0");t=`${e}/${r}/${a.getFullYear()}`}}catch(a){console.error("Error formatting date:",a)}return t},Jy=e=>{const t=1e3,a=(new Date).getFullYear();return S({queryKey:["expenses",t,a],queryFn:async()=>{try{console.log("Fetching expenses...");let e=xt().from("expenses").select("*, cats(name)").order("expense_date",{ascending:!1});e=e.limit(t);const{data:a,error:r}=await e;if(r)throw console.error("Error fetching expenses:",r),new Error(r.message);console.log(`Retrieved ${(null==a?void 0:a.length)||0} expense records`);return(a||[]).map((e=>{var t;return{...e,date:Zy(e.expense_date),cat_name:null==(t=e.cats)?void 0:t.name}}))}catch(e){throw console.error("Error in useExpenses:",e),e}},refetchInterval:15e3,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,...e})},ev=({monthlyDonations:e,monthlyDonationsChange:t,isLoading:a})=>s(wm,{children:[n(xm,{className:"pb-2",children:s(Nm,{className:"flex items-center",children:[n(Gn,{className:"h-4 w-4 text-green-500 mr-2"}),"Monthly Revenue"]})}),n(_m,{children:a?n("div",{className:"h-6 bg-gray-200 animate-pulse rounded"}):s(i,{children:[n("div",{className:"text-2xl font-bold",children:dr(e)}),s("div",{className:"flex items-center text-xs mt-1",children:[n(xn,{className:"h-3 w-3 mr-1"}),s("span",{className:t>=0?"text-green-500":"text-red-500",children:[t>0?"+":"",t===1/0?"100+":Math.abs(t)>1e3?"1000+":t.toFixed(1),"% from last month"]})]})]})})]}),tv=({monthlyExpenses:e,monthlyExpensesChange:t,isLoading:a})=>s(wm,{children:[n(xm,{className:"pb-2",children:s(Nm,{className:"flex items-center",children:[n(Ii,{className:"h-4 w-4 text-amber-500 mr-2"}),"Monthly Expenses"]})}),n(_m,{children:a?n("div",{className:"h-6 bg-gray-200 animate-pulse rounded"}):s(i,{children:[n("div",{className:"text-2xl font-bold",children:dr(e)}),s("div",{className:"flex items-center text-xs mt-1",children:[n(xn,{className:"h-3 w-3 mr-1"}),s("span",{className:t<=0?"text-green-500":"text-red-500",children:[t>0?"+":"",t===1/0?"100+":Math.abs(t)>1e3?"1000+":t.toFixed(1),"% from last month"]})]})]})})]}),av=()=>s(wm,{children:[n(xm,{className:"pb-2",children:s(Nm,{className:"flex items-center",children:[n(An,{className:"h-4 w-4 text-blue-500 mr-2"}),"Upcoming Tax Deadlines"]})}),n(_m,{children:s("div",{className:"text-sm text-muted-foreground",children:["Form 990-EZ due in ",n("span",{className:"font-semibold",children:"32 days"})]})})]}),rv={light:"",dark:".dark"},nv=c.createContext(null);function iv(){const e=c.useContext(nv);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const sv=c.forwardRef((({id:e,className:t,children:a,config:r,...i},o)=>{const l=c.useId(),d=`chart-${e||l.replace(/:/g,"")}`;return n(nv.Provider,{value:{config:r},children:s("div",{"data-chart":d,ref:o,className:cr("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...i,children:[n(ov,{id:d,config:r}),n(Ce.ResponsiveContainer,{children:a})]})})}));sv.displayName="Chart";const ov=({id:e,config:t})=>{const a=Object.entries(t).filter((([e,t])=>t.theme||t.color));return a.length?n("style",{dangerouslySetInnerHTML:{__html:Object.entries(rv).map((([t,r])=>`\n${r} [data-chart=${e}] {\n${a.map((([e,a])=>{var r;const n=(null==(r=a.theme)?void 0:r[t])||a.color;return n?`  --color-${e}: ${n};`:null})).join("\n")}\n}\n`)).join("\n")}}):null},lv=Ce.Tooltip,cv=c.forwardRef((({active:e,payload:t,className:a,indicator:r="dot",hideLabel:o=!1,hideIndicator:l=!1,label:d,labelFormatter:m,labelClassName:u,formatter:h,color:p,nameKey:g,labelKey:f},y)=>{const{config:v}=iv(),b=c.useMemo((()=>{var e;if(o||!(null==t?void 0:t.length))return null;const[a]=t,r=`${f||a.dataKey||a.name||"value"}`,i=dv(v,a,r),s=f||"string"!=typeof d?null==i?void 0:i.label:(null==(e=v[d])?void 0:e.label)||d;return m?n("div",{className:cr("font-medium",u),children:m(s,t)}):s?n("div",{className:cr("font-medium",u),children:s}):null}),[d,m,t,o,u,v,f]);if(!e||!(null==t?void 0:t.length))return null;const w=1===t.length&&"dot"!==r;return s("div",{ref:y,className:cr("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",a),children:[w?null:b,n("div",{className:"grid gap-1.5",children:t.map(((e,t)=>{const a=`${g||e.name||e.dataKey||"value"}`,o=dv(v,e,a),c=p||e.payload.fill||e.color;return n("div",{className:cr("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===r&&"items-center"),children:h&&void 0!==(null==e?void 0:e.value)&&e.name?h(e.value,e.name,e,t,e.payload):s(i,{children:[(null==o?void 0:o.icon)?n(o.icon,{}):!l&&n("div",{className:cr("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===r,"w-1":"line"===r,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===r,"my-0.5":w&&"dashed"===r}),style:{"--color-bg":c,"--color-border":c}}),s("div",{className:cr("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[s("div",{className:"grid gap-1.5",children:[w?b:null,n("span",{className:"text-muted-foreground",children:(null==o?void 0:o.label)||e.name})]}),e.value&&n("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)}))})]})}));cv.displayName="ChartTooltip";function dv(e,t,a){if("object"!=typeof t||null===t)return;const r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0;let n=a;return a in t&&"string"==typeof t[a]?n=t[a]:r&&a in r&&"string"==typeof r[a]&&(n=r[a]),n in e?e[n]:e[a]}c.forwardRef((({className:e,hideIcon:t=!1,payload:a,verticalAlign:r="bottom",nameKey:i},o)=>{const{config:l}=iv();return(null==a?void 0:a.length)?n("div",{ref:o,className:cr("flex items-center justify-center gap-4","top"===r?"pb-3":"pt-3",e),children:a.map((e=>{const a=`${i||e.dataKey||"value"}`,r=dv(l,e,a);return s("div",{className:cr("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!t?n(r.icon,{}):n("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)}))}):null})).displayName="ChartLegend";const mv={donations:{color:"#4ade80"},expenses:{color:"#f97316"},axis:{color:"#888888"}},uv=()=>{const{data:e,isLoading:t}=S({queryKey:["annual-financial-overview"],queryFn:async()=>{const e=(new Date).getFullYear(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a={};t.forEach(((e,t)=>{a[e]={name:e,donations:0,expenses:0}}));const r=new Date(e,0,1).toISOString(),n=new Date(e,11,31).toISOString(),{data:i,error:s}=await supabase.from("donations").select("amount, donation_date").gte("donation_date",r).lte("donation_date",n);s&&console.error("Error fetching donations:",s),i&&i.forEach((e=>{const r=new Date(e.donation_date),n=t[r.getMonth()],i="string"==typeof e.amount?parseFloat(e.amount):e.amount;a[n]&&(a[n].donations+=i)}));const{data:o,error:l}=await supabase.from("expenses").select("amount, expense_date").gte("expense_date",r).lte("expense_date",n);return l&&console.error("Error fetching expenses:",l),o&&o.forEach((e=>{const r=new Date(e.expense_date),n=t[r.getMonth()],i="string"==typeof e.amount?parseFloat(e.amount):e.amount;a[n]&&(a[n].expenses+=i)})),Object.values(a)}});return s(wm,{children:[s(xm,{children:[n(Nm,{children:"Annual Financial Overview"}),n(Cm,{children:"Compare monthly income and expenses throughout the year"})]}),n(_m,{children:n("div",{className:"h-[300px]",children:n(sv,{config:mv,children:n(_e,{width:"100%",height:"100%",children:t?n("div",{className:"flex h-full w-full items-center justify-center",children:n("div",{className:"animate-spin h-8 w-8 border-2 border-meow-primary border-t-transparent rounded-full"})}):s(ke,{data:e,margin:{top:5,right:30,left:20,bottom:5},barGap:0,barSize:15,children:[n(Se,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),n(Ee,{dataKey:"name",tick:{fontSize:12},tickLine:{stroke:mv.axis.color},axisLine:{stroke:mv.axis.color}}),n(De,{tickFormatter:e=>`$${e}`,tick:{fontSize:12},tickLine:{stroke:mv.axis.color},axisLine:{stroke:mv.axis.color}}),n(lv,{content:({active:e,payload:t})=>{var a,r;if(e&&t&&t.length){const e=null==(a=t[0])?void 0:a.value,i=null==(r=t[1])?void 0:r.value,o="number"==typeof e&&"number"==typeof i?e-i:0,l=o>=0;return n(cv,{children:s("div",{className:"grid grid-cols-2 gap-2",children:[s("div",{className:"flex flex-col",children:[n("span",{className:"text-[0.70rem] uppercase text-muted-foreground",children:"Donations"}),n("span",{className:"font-bold text-green-500",children:dr(e)})]}),s("div",{className:"flex flex-col",children:[n("span",{className:"text-[0.70rem] uppercase text-muted-foreground",children:"Expenses"}),n("span",{className:"font-bold text-orange-500",children:dr(i)})]}),s("div",{className:"flex flex-col col-span-2 border-t pt-1 mt-1",children:[n("span",{className:"text-[0.70rem] uppercase text-muted-foreground",children:"Net"}),n("span",{className:"font-bold "+(l?"text-green-500":"text-red-500"),children:dr(o)})]})]})})}return null}}),n(Ae,{}),n(Me,{dataKey:"donations",name:"Donations",fill:mv.donations.color,radius:[4,4,0,0]}),n(Me,{dataKey:"expenses",name:"Expenses",fill:mv.expenses.color,radius:[4,4,0,0]})]})})})})})]})},hv=({monthlyDonations:e,monthlyExpenses:t})=>s("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n(uv,{}),s(wm,{children:[s(xm,{children:[n(Nm,{children:"Financial Health"}),n(Cm,{children:"Key performance indicators for your organization's finances"})]}),n(_m,{children:s("div",{className:"space-y-4",children:[s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-muted-foreground",children:"Cash on Hand"}),n("p",{className:"text-2xl font-bold",children:dr((e||0)-(t||0))})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-muted-foreground",children:"Monthly Burn Rate"}),n("p",{className:"text-2xl font-bold",children:dr(t)})]})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-muted-foreground",children:"Donor Retention"}),n("p",{className:"text-2xl font-bold",children:"-"})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg. Donation"}),n("p",{className:"text-2xl font-bold",children:"-"})]})]}),s("div",{className:"pt-4",children:[n("h4",{className:"text-sm font-semibold mb-2",children:"Recommendations"}),s("ul",{className:"text-xs space-y-1 text-muted-foreground",children:[s("li",{className:"flex",children:[n("span",{className:"text-green-500 mr-1",children:""}),e&&e<1e3?"Consider launching a fundraising campaign":"Continue with current fundraising efforts"]}),s("li",{className:"flex",children:[n("span",{className:"text-amber-500 mr-1",children:""}),t&&t>1e3?"Review expenses - potential savings may be found":"Expenses are well-managed"]})]})]})]})})]})]}),pv=["Individual Donation","Corporate Donation","Grant","Adoption Fee","Event Revenue","Monthly Sponsorship","Merchandise Sales","Facebook Fundraiser","GoFundMe","Membership Dues","In-Kind Donation","Veterinary Sponsorship","Corporate Matching","Bequest/Legacy Gift","Amazon Smile","eBay for Charity","Kroger Community Rewards","Scrip Program","Chewy Affiliate","PetSmart Charity Partnership","Thrift Store Proceeds","Cat Cafe Revenue","Calendar Sales","Workplace Giving","Other"],gv=()=>{const{toast:e}=xr(),[t,a]=h(!1),[r,i]=h({amount:"",income_date:le(new Date,"yyyy-MM-dd"),description:"",income_type:"",receipt_url:"",notes:""}),o=e=>{const{name:t,value:a}=e.target;i((e=>({...e,[t]:a})))};return s(wm,{children:[s(xm,{children:[s(Nm,{className:"flex items-center gap-2",children:[n(Gn,{className:"h-5 w-5 text-green-600"}),"Record New Income"]}),n(Cm,{children:"Enter details of a new donation or income"})]}),n(_m,{children:s("form",{onSubmit:async t=>{var n;t.preventDefault(),a(!0);try{const t=parseFloat(mr(r.amount)),{data:a,error:s}=await xt().from("donations").insert({amount:Number(t.toFixed(2)),donation_date:new Date(r.income_date).toISOString(),notes:r.description+(r.notes?"\n\n"+r.notes:""),income_type:r.income_type,status:"completed",is_recurring:!1,donor_profile_id:xt().auth.getUser()?null==(n=(await xt().auth.getUser()).data.user)?void 0:n.id:null});if(s)throw s;e({title:"Income Recorded",description:`${dr(t)} income has been recorded successfully.`}),i({amount:"",income_date:le(new Date,"yyyy-MM-dd"),description:"",income_type:"",receipt_url:"",notes:""})}catch(s){console.error("Error submitting income:",s),e({title:"Error",description:"There was a problem recording the income.",variant:"destructive"})}finally{a(!1)}},className:"space-y-4",children:[s("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s("div",{className:"space-y-2",children:[s(Zm,{htmlFor:"amount",className:"flex items-center gap-1",children:[n(Gn,{className:"h-4 w-4"})," Amount"]}),s("div",{className:"relative",children:[n("span",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:"$"}),n(od,{id:"amount",name:"amount",type:"text",inputMode:"decimal",pattern:"\\d*(\\.\\d{0,2})?",step:"0.01",min:"0",placeholder:"0.00",value:r.amount,onChange:e=>{let t=function(e){let t=e.replace(/[^0-9.]/g,"");const a=t.split(".");if(a.length>2&&(t=a[0]+"."+a[1]),t.includes(".")){const[e,a]=t.split(".");t=e+"."+((null==a?void 0:a.slice(0,2))||"")}return t=t.replace(/^0+(?!\.)/,""),t}(e.target.value);i((e=>({...e,amount:t})))},onBlur:e=>{const t=mr(e.target.value);i((e=>({...e,amount:t})))},className:"pl-8",required:!0,autoComplete:"off"})]})]}),s("div",{className:"space-y-2",children:[s(Zm,{htmlFor:"income_date",className:"flex items-center gap-1",children:[n(An,{className:"h-4 w-4"})," Date"]}),n(od,{id:"income_date",name:"income_date",type:"date",value:r.income_date,onChange:o,required:!0})]})]}),s("div",{className:"space-y-2",children:[s(Zm,{htmlFor:"income_type",className:"flex items-center gap-1",children:[n(ui,{className:"h-4 w-4"})," Income Type"]}),s("select",{id:"income_type",name:"income_type",value:r.income_type,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[n("option",{value:"",children:"Select income type"}),pv.map((e=>n("option",{value:e,children:e},e)))]})]}),s("div",{className:"space-y-2",children:[s(Zm,{htmlFor:"description",className:"flex items-center gap-1",children:[n(ri,{className:"h-4 w-4"})," Description"]}),n("textarea",{id:"description",name:"description",value:r.description,onChange:o,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Brief description of the income",required:!0})]}),s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"notes",children:"Additional Notes (optional)"}),n("textarea",{id:"notes",name:"notes",value:r.notes,onChange:o,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Any additional information"})]}),n("div",{className:"pt-2",children:n(Ds,{type:"submit",className:"w-full",disabled:t,children:t?"Recording Income...":"Record Income"})})]})})]})},fv=({recentDonations:e,isLoadingDonations:t})=>s("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n("div",{className:"lg:col-span-1",children:n(gv,{})}),n("div",{className:"lg:col-span-2",children:s(wm,{children:[s(xm,{children:[n(Nm,{children:"Recent Income"}),n(Cm,{children:"Latest donations and income received by your organization"})]}),n(_m,{children:t?n("div",{className:"space-y-2",children:[...Array(3)].map(((e,t)=>n("div",{className:"h-10 bg-gray-100 animate-pulse rounded"},t)))}):e.length>0?n("div",{className:"divide-y",children:e.map((e=>s("div",{className:"py-3 flex justify-between items-center",children:[s("div",{children:[n("p",{className:"font-medium",children:e.profiles&&`${e.profiles.first_name||""} ${e.profiles.last_name||""}`.trim()||"Anonymous"}),n("p",{className:"text-sm text-gray-500",children:new Date(e.donation_date).toLocaleDateString()})]}),s("span",{className:"text-lg font-semibold text-green-600",children:["$","number"==typeof e.amount?e.amount.toFixed(2):e.amount]})]},e.id)))}):n("p",{className:"text-center py-6 text-gray-500",children:"No recent donations found. Start recording income to see it here."})})]})})]}),yv=({expenseData:e,isSubmitting:t,showAdvanced:a,setShowAdvanced:r,handleChange:o,handleCheckboxChange:l,handleFileChange:c,handleSubmit:d,categories:m=[],requireCategory:u})=>{const h=bs(),p=m.map((e=>({...e,name:e.name})));return s(wm,{children:[n(xm,{children:n(Nm,{className:"text-xl",children:"Record Expense"})}),s("form",{onSubmit:d,children:[s(_m,{className:"space-y-4 "+(h?"px-2":""),children:[s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"description",children:"Description"}),n(cu,{id:"description",name:"description",value:e.description,onChange:o,placeholder:"Brief description of expense",required:!0})]}),s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"amount",children:"Amount ($)"}),n(od,{id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:e.amount,onChange:o,onBlur:e=>{e.target.value=mr(e.target.value),o({...e,target:{...e.target,value:e.target.value}})},placeholder:"0.00",required:!0,inputMode:"decimal",pattern:"\\d*(\\.\\d{0,2})?"})]}),s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"category",children:"Category"}),s(Wf,{name:"category",value:e.category,onValueChange:e=>{o({target:{name:"category",value:e}})},required:u,children:[n(Gf,{children:n(Yf,{placeholder:"Select a category"})}),n(Zf,{className:"z-50 bg-white",children:p.length>0?p.map((e=>n(Jf,{value:e.name,children:e.name},e.id))):n(Jf,{value:"no-categories",disabled:!0,children:"No budget categories"})})]})]}),s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"vendor",children:"Vendor/Supplier"}),n(od,{id:"vendor",name:"vendor",value:e.vendor,onChange:o,placeholder:"Name of vendor or supplier",required:!0})]}),s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"date",children:"Date"}),n(od,{id:"date",name:"date",type:"date",value:e.date,onChange:o,required:!0})]}),a&&s(i,{children:[s("div",{className:"space-y-2",children:[n(Zm,{htmlFor:"paymentMethod",children:"Payment Method"}),s(Wf,{name:"paymentMethod",value:e.paymentMethod,onValueChange:e=>{o({target:{name:"paymentMethod",value:e}})},children:[n(Gf,{children:n(Yf,{placeholder:"Select payment method"})}),n(Zf,{children:["Cash","Credit Card","Debit Card","Check","Bank Transfer","PayPal","Other"].map((e=>n(Jf,{value:e,children:e},e)))})]})]}),s("div",{className:"space-y-2",children:[s(Zm,{htmlFor:"receiptFile",className:"flex items-center gap-2",children:[n(Ii,{className:"h-4 w-4"})," Receipt Image"]}),n(od,{id:"receiptFile",name:"receiptFile",type:"file",accept:"image/*",onChange:c,className:"cursor-pointer"}),n("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a photo or scan of your receipt (optional)"})]})]}),n(Ds,{type:"button",variant:"ghost",size:"sm",className:"w-full mt-2",onClick:()=>r(!a),children:s(i,a?{children:[n(jn,{className:"h-4 w-4 mr-2"})," Hide advanced options"]}:{children:[n(In,{className:"h-4 w-4 mr-2"})," Show advanced options"]})})]}),n(km,{children:n(Ds,{type:"submit",className:"w-full",disabled:t,children:t?"Saving...":"Record Expense"})})]})]})},vv=({onSuccess:e,categories:t=[]})=>{const{expenseData:a,isSubmitting:r,showAdvanced:i,setShowAdvanced:s,handleChange:o,handleCheckboxChange:l,handleFileChange:c,handleSubmit:d}=(({onSuccess:e}={})=>{const t=le(new Date,"yyyy-MM-dd"),[a,r]=h({description:"",amount:"",category:"",vendor:"",paymentMethod:"Credit Card",date:t,receiptFile:null}),[n,i]=h(!1),[s,o]=h(!1);return{expenseData:a,isSubmitting:n,showAdvanced:s,setShowAdvanced:o,handleChange:e=>{const{name:t,value:a}=e.target;r((e=>({...e,[t]:a})))},handleCheckboxChange:(e,t)=>{r((a=>({...a,[e]:t})))},handleFileChange:e=>{e.target.files&&e.target.files.length>0&&r((t=>{var a;return{...t,receiptFile:(null==(a=e.target.files)?void 0:a[0])||null}}))},handleSubmit:async n=>{n.preventDefault(),i(!0);try{const n=(s=a.description)?s.split(" ").map((e=>function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}(e))).join(" "):"",{amount:o,category:l,vendor:c}=a;if(!l)return Y.error("Please assign this expense to a budget category."),void i(!1);if(!o||isNaN(Number(o))||Number(o)<=0)return Y.error("Please enter a valid, non-zero amount."),void i(!1);if(!n||!c)return Y.error("Please fill out all required fields."),void i(!1);const{data:d,error:m}=await supabase.from("expenses").insert({description:n,amount:parseFloat(o),category:l,vendor:c,payment_method:a.paymentMethod,expense_date:a.date,cat_id:a.catId||null}).select().single();if(m)throw m;if(a.receiptFile&&d){const e=a.receiptFile.name.split(".").pop(),t=`${d.id}-${Date.now()}.${e}`,{error:r}=await xt().storage.from("expense-receipts").upload(t,a.receiptFile);if(r)throw r;const{data:n}=xt().storage.from("expense-receipts").getPublicUrl(t),{error:i}=await supabase.from("expenses").update({receipt_url:n.publicUrl}).eq("id",d.id);if(i)throw i}Y.success("Expense recorded successfully"),r({description:"",amount:"",category:"",vendor:"",paymentMethod:"Credit Card",date:t,receiptFile:null}),e&&e()}catch(o){console.error("Error recording expense:",o),Y.error("Problem recording expense. Please try again.")}finally{i(!1)}var s}}})({onSuccess:e}),{data:m,isLoading:u}=S({queryKey:["budget-categories-base"],queryFn:gg}),p=t.length>0?t:(m||[]).map((e=>({id:e.id,name:e.name})));return n(yv,{expenseData:a,isSubmitting:r,showAdvanced:i,setShowAdvanced:s,handleChange:o,handleCheckboxChange:l,handleFileChange:c,handleSubmit:async t=>{await d(t),e&&e()},categories:p,requireCategory:!0})},bv=({categories:e,value:t,onChange:a})=>s("div",{className:"flex items-center space-x-2",children:[n("span",{className:"font-medium",children:"Filter:"}),s("select",{value:t,onChange:e=>a(e.target.value),className:"border border-gray-300 rounded px-2 py-1 h-10",children:[n("option",{value:"",children:"All Categories"}),e.map((e=>n("option",{value:e,children:e},e)))]})]}),wv=({expense:e,onViewDetails:t,onViewReceipt:a})=>s("div",{className:"flex justify-center items-center gap-2 min-w-[56px] h-6",children:[n("button",{className:"p-1 hover:text-meow-primary cursor-pointer",title:"View Details",tabIndex:-1,"aria-hidden":"true",onClick:()=>t(e),children:n(Jn,{className:"h-4 w-4"})}),e.receipt_url&&n("button",{className:"p-1 hover:text-meow-primary",onClick:t=>{t.stopPropagation(),a(e)},title:"View Receipt",children:n(Ii,{className:"h-4 w-4"})}),!e.receipt_url&&n("div",{className:"w-5 h-4"})]}),xv=({expense:e,open:t,onOpenChange:a,onViewReceipt:r})=>e?n(dm,{open:t,onOpenChange:a,children:s(pm,{className:"max-w-md",children:[s(gm,{children:[n(ym,{children:"Expense Details"}),n(vm,{children:"View detailed information about this expense"})]}),s("div",{className:"space-y-3 pt-4",children:[s("div",{className:"flex justify-between items-center border-b pb-2",children:[n("span",{className:"font-medium",children:"Amount:"}),n("span",{className:"text-lg font-bold text-meow-primary",children:dr(e.amount)})]}),s("div",{className:"flex justify-between",children:[n("span",{className:"font-medium",children:"Date:"}),n("span",{children:e.date})]}),s("div",{className:"flex justify-between",children:[n("span",{className:"font-medium",children:"Category:"}),n("span",{children:e.category})]}),s("div",{className:"flex justify-between",children:[n("span",{className:"font-medium",children:"Vendor:"}),n("span",{children:e.vendor})]}),s("div",{className:"flex justify-between",children:[n("span",{className:"font-medium",children:"Payment Method:"}),n("span",{children:e.payment_method})]}),e.cat_name&&s("div",{className:"flex justify-between",children:[n("span",{className:"font-medium",children:"Cat:"}),n("span",{children:e.cat_name})]}),s("div",{className:"pt-2",children:[n("span",{className:"font-medium block",children:"Description:"}),n("p",{className:"mt-1 text-gray-600 bg-gray-50 p-2 rounded",children:e.description})]}),e.receipt_url&&n("div",{className:"pt-2 flex justify-center",children:s("button",{className:"flex items-center space-x-2 px-3 py-2 bg-meow-primary text-white rounded-md hover:bg-meow-primary/80 transition-colors",onClick:r,children:[n(Ii,{className:"h-4 w-4"}),n("span",{children:"View Receipt"})]})})]})]})}):null,Nv=({expense:e,open:t,onOpenChange:a})=>e?n(dm,{open:t,onOpenChange:a,children:s(pm,{className:"max-w-3xl h-[80vh]",children:[s(gm,{children:[n(ym,{children:"Receipt"}),s(vm,{children:[e.vendor," - ",e.date," - ",dr(e.amount)]})]}),n("div",{className:"h-full overflow-auto pt-4",children:e.receipt_url?n("iframe",{src:e.receipt_url,className:"w-full h-[60vh] border border-gray-200 rounded-md",title:"Receipt"}):s("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[n(Ii,{className:"h-12 w-12 mb-4"}),n("p",{children:"No receipt available for this expense."})]})})]})}):null,Cv=(e,t,a)=>!e||a?null:n("span","asc"===t?{className:"inline-block align-middle ml-1 text-meow-primary",children:""}:{className:"inline-block align-middle ml-1 text-meow-primary",children:""}),_v=({expenses:e,expensesLoading:t})=>{const[a,r]=h(null),[i,o]=h(!1),{category:l,setCategory:c,categories:d,filtered:m,resetFilter:u}=(e=>{const[t,a]=h(""),r=x((()=>e?Array.from(new Set(e.map((e=>e.category)).filter(Boolean))).sort():[]),[e]),n=x((()=>e?t?e.filter((e=>e.category===t)):e:[]),[t,e]);return{category:t,setCategory:a,categories:r,filtered:n,resetFilter:()=>a("")}})(e),{sortCol:p,sortDir:g,sortedExpenses:f,handleSort:y,resetSort:v}=((e=[],t={})=>{const[a,r]=h(t.initialSortCol||null),[n,i]=h(t.initialSortDir||"desc"),s=[...e];return a&&s.length>0&&s.sort(((e,t)=>{if("amount"===a)return"asc"===n?(e.amount||0)-(t.amount||0):(t.amount||0)-(e.amount||0);if("category"===a){const a=(e.category||"").toLowerCase(),r=(t.category||"").toLowerCase();return a<r?"asc"===n?-1:1:a>r?"asc"===n?1:-1:0}return"date"===a?e.date?t.date?e.date<t.date?"asc"===n?-1:1:e.date>t.date?"asc"===n?1:-1:0:-1:1:0})),{sortCol:a,sortDir:n,sortedExpenses:s,handleSort:e=>{a===e?i("asc"===n?"desc":"asc"):(r(e),i("amount"===e?"desc":"asc"))},resetSort:()=>{r(t.initialSortCol||null),i(t.initialSortDir||"desc")}}})(m,{initialSortCol:"date",initialSortDir:"desc"}),b=e=>{r(e),o(!1)},w=e=>{r(e),o(!0)},N=e=>"date"===e&&"desc"===g&&"date"===p;return s(wm,{className:"shadow-md",children:[s(xm,{className:"pb-2 border-b flex flex-row items-center justify-between gap-2",children:[n(Nm,{className:"text-xl text-meow-primary",children:"Expense Records"}),s("div",{className:"flex items-center gap-4",children:[n(bv,{categories:d,value:l,onChange:c}),n("button",{onClick:()=>{u(),v()},className:"text-meow-secondary border border-meow-secondary rounded px-3 py-2 h-10 hover:bg-meow-secondary/10 transition text-sm font-medium","aria-label":"Clear filters",children:"Clear Filters"})]})]}),n(_m,{className:"pt-6",children:t?n("div",{className:"h-52 bg-gray-200 animate-pulse rounded-md"}):f.length?n("div",{className:"overflow-x-auto",children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[s(Eg,{className:"cursor-pointer select-none",onClick:()=>y("date"),children:["Date",Cv("date"===p,"date"===p?g:null,N("date"))]}),s(Eg,{className:"cursor-pointer select-none",onClick:()=>y("category"),children:["Category",Cv("category"===p,"category"===p?g:null,N("category"))]}),n(Eg,{children:"Description"}),s(Eg,{className:"text-right cursor-pointer select-none",onClick:()=>y("amount"),children:["Amount",Cv("amount"===p,"amount"===p?g:null,N("amount"))]}),n(Eg,{className:"text-center",children:"Actions"})]})}),n(kg,{children:f.map((e=>s(Sg,{className:"hover:bg-gray-50 cursor-pointer",tabIndex:0,onClick:()=>b(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||b(e)},"aria-label":`View details for expense: ${e.description}`,children:[n(Dg,{className:"font-medium",children:e.date}),n(Dg,{children:e.category}),n(Dg,{className:"max-w-xs truncate",children:e.description}),n(Dg,{className:"text-right",children:dr(e.amount)}),n(Dg,{className:"text-center",children:n(wv,{expense:e,onViewDetails:b,onViewReceipt:w})})]},e.id)))})]})}):s("div",{className:"text-center text-gray-500 py-8 bg-gray-50 rounded-lg",children:[n("p",{children:"No expense records found."}),n("p",{className:"text-sm mt-2",children:"Expenses will appear here once they are recorded in the system."})]})}),n(xv,{expense:a,open:!!a&&!i,onOpenChange:e=>{e||r(null)},onViewReceipt:()=>o(!0)}),n(Nv,{expense:a,open:!!a&&i,onOpenChange:e=>{e||(r(null),o(!1))}})]})},kv=H("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Sv=c.forwardRef((({className:e,variant:t,...a},r)=>n("div",{ref:r,role:"alert",className:cr(kv({variant:t}),e),...a})));Sv.displayName="Alert";const Ev=c.forwardRef((({className:e,...t},a)=>n("h5",{ref:a,className:cr("mb-1 font-medium leading-none tracking-tight",e),...t})));Ev.displayName="AlertTitle";const Dv=c.forwardRef((({className:e,...t},a)=>n("div",{ref:a,className:cr("text-sm [&_p]:leading-relaxed",e),...t})));Dv.displayName="AlertDescription";const Av=({expenses:e,expensesLoading:t,catExpenses:a,catExpensesLoading:r})=>{const{data:i,isLoading:o}=S({queryKey:["budget-categories-base"],queryFn:gg}),l=i?i.map((e=>({id:e.id,name:e.name}))):[];return s("div",{children:[s(Sv,{variant:"default",className:"mb-6",children:[n(ui,{className:"h-4 w-4"}),n(Ev,{children:"Expense Management"}),n(Dv,{children:"Record and track organization expenses. Add receipt images by uploading them in the expense form. All expenses will be visible on the financial transparency page."})]}),s("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[n("div",{children:n(vv,{onSuccess:()=>console.log("Expense added successfully"),categories:l})}),n("div",{className:"lg:col-span-2",children:n(_v,{expenses:e,expensesLoading:t})})]})]})},Mv=[{id:"monthly-summary",title:"Monthly Financial Summary",description:"Summary of donations, expenses, and balance",date:new Date(2025,2,15)},{id:"quarterly-report",title:"Q1 2025 Financial Report",description:"Detailed quarterly financial statement",date:new Date(2025,3,10)},{id:"annual-report",title:"2024 Annual Report",description:"Comprehensive annual financial report",date:new Date(2025,1,20)},{id:"tax-filings",title:"2024 Tax Documentation",description:"Documentation for tax filing purposes",date:new Date(2025,1,28)}],Pv=()=>{const[e,t]=h(null);return s("div",{className:"grid gap-6",children:[s(wm,{children:[n(xm,{className:"pb-3",children:n(Nm,{children:"Financial Reports"})}),n(_m,{className:"p-0",children:n("div",{className:"divide-y",children:Mv.map((a=>s("div",{className:"flex items-center justify-between p-4",children:[s("div",{className:"flex items-start gap-3",children:[n(ri,{className:"h-10 w-10 text-gray-400 mt-1"}),s("div",{children:[n("h3",{className:"font-medium",children:a.title}),n("p",{className:"text-sm text-gray-500",children:a.description}),s("p",{className:"text-xs text-gray-400 mt-1",children:["Generated on ",le(a.date,"MMM d, yyyy")]})]})]}),n(Ds,{size:"sm",onClick:()=>{return e=a.id,t(e),void setTimeout((()=>{t(null),Y.success("Report downloaded successfully")}),1500);var e},disabled:e===a.id,children:e===a.id?"Downloading...":s(i,{children:[n(Qn,{className:"h-4 w-4 mr-1"}),"Download"]})})]},a.id)))})})]}),s(wm,{children:[n(xm,{className:"pb-3",children:n(Nm,{children:"Generate Reports"})}),n(_m,{children:s("div",{className:"grid gap-4 md:grid-cols-2",children:[s(Ds,{variant:"outline",className:"h-auto py-4 px-6 flex-col items-center justify-center space-y-2",children:[n(ri,{className:"h-8 w-8 mb-2"}),n("div",{className:"text-base font-medium",children:"Monthly Statement"}),n("div",{className:"text-xs text-gray-500",children:"Generate current month's report"})]}),s(Ds,{variant:"outline",className:"h-auto py-4 px-6 flex-col items-center justify-center space-y-2",children:[n(ri,{className:"h-8 w-8 mb-2"}),n("div",{className:"text-base font-medium",children:"Custom Report"}),n("div",{className:"text-xs text-gray-500",children:"Generate a report for a custom timeframe"})]})]})})]})]})},Tv=()=>s("div",{className:"space-y-6",children:[s(Sv,{variant:"default",className:"mb-6",children:[n($n,{className:"h-4 w-4"}),n(Ev,{children:"Financial Reporting"}),n(Dv,{children:"Generate and download financial reports for your organization. Reports include donation summaries, expense breakdowns, and tax-related documentation."})]}),n(Pv,{})]}),Rv=()=>s(wm,{children:[s(xm,{children:[n(Nm,{children:"Tax Documents"}),n(Cm,{children:"Manage and prepare tax documents for your nonprofit organization"})]}),n(_m,{children:s("div",{className:"space-y-6",children:[s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Current Year Forms"}),s("p",{className:"text-sm text-muted-foreground",children:["Fiscal year ",(new Date).getFullYear()," forms and schedules"]}),s("div",{className:"mt-4 space-y-2",children:[s("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s("div",{className:"flex items-center",children:[n(ri,{className:"h-5 w-5 text-muted-foreground mr-3"}),s("div",{children:[n("p",{className:"font-medium",children:"Form 990-EZ"}),s("p",{className:"text-xs text-muted-foreground",children:["Due: May 15, ",(new Date).getFullYear()]})]})]}),n(Ds,{variant:"outline",size:"sm",children:"Prepare"})]}),s("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s("div",{className:"flex items-center",children:[n(ri,{className:"h-5 w-5 text-muted-foreground mr-3"}),s("div",{children:[n("p",{className:"font-medium",children:"Schedule A"}),n("p",{className:"text-xs text-muted-foreground",children:"Public Charity Status"})]})]}),n(Ds,{variant:"outline",size:"sm",children:"Prepare"})]})]})]}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-2",children:"Previous Years"}),n("div",{className:"mt-4 space-y-2",children:s("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s("div",{className:"flex items-center",children:[n(ri,{className:"h-5 w-5 text-green-500 mr-3"}),s("div",{children:[s("p",{className:"font-medium",children:[(new Date).getFullYear()-1," Form 990-EZ"]}),s("p",{className:"text-xs text-muted-foreground",children:["Filed: April 12, ",(new Date).getFullYear()-1]})]})]}),n(Ds,{variant:"outline",size:"sm",children:"View"})]})})]})]})})]}),Fv=()=>{const{data:e,isLoading:t}=Jy(),{data:a,isLoading:r}=S({queryKey:["catExpenses"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("expenses").select("\n            id,\n            amount,\n            expense_date,\n            description,\n            category,\n            cats:cat_id (\n              id,\n              name\n            )\n          ").not("cat_id","is",null).order("expense_date",{ascending:!1});if(t)throw t;const a={};return null==e||e.forEach((e=>{if(!e.cats||!e.cats.id)return;const t=e.cats.id,r=e.cats.name;a[t]||(a[t]={catId:t,catName:r,totalSpent:0,expenses:[]});const n="string"==typeof e.amount?parseFloat(e.amount):e.amount;a[t].expenses.push({date:new Date(e.expense_date).toLocaleDateString(),category:e.category,amount:n,description:e.description}),a[t].totalSpent+=n})),Object.values(a).sort(((e,t)=>t.totalSpent-e.totalSpent))}}),[i,o]=h("overview"),{monthlyDonations:l,monthlyExpenses:c,previousMonthDonations:d,previousMonthExpenses:m,isLoading:u}=yg(),[g,f]=h([]),[y,v]=h(!0);p((()=>{(async()=>{try{const{data:e,error:t}=await supabase.from("donations").select("\n            id,\n            amount,\n            donation_date,\n            profiles:donor_profile_id (\n              first_name,\n              last_name\n            )\n          ").order("donation_date",{ascending:!1}).limit(5);if(t)throw t;f(e||[])}catch(e){console.error("Error fetching recent donations:",e)}finally{v(!1)}})()}),[]);const b=(e,t)=>void 0===t||void 0===e?0:0===t||Math.abs(t)<.001?e>0?100:0:(e-t)/Math.abs(t)*100,w=b(l,d),x=b(c,m);return n(ng,{title:"Finance Management",children:s("div",{className:"container mx-auto py-4 px-6",children:[s("div",{className:"flex justify-between items-center mb-6",children:[s("div",{children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Finance Management"}),n("p",{className:"text-gray-600",children:"Comprehensive financial management and reporting tools"})]}),s("div",{className:"flex gap-2",children:[n(Ds,{asChild:!0,variant:"outline",children:s(X,{to:"/admin/budget",children:[n(Rn,{className:"mr-2 h-4 w-4"})," Budget Planning"]})}),n(Ds,{asChild:!0,variant:"outline",children:s(X,{to:"/admin/finance/campaigns",children:[n(ri,{className:"mr-2 h-4 w-4"})," Campaigns"]})}),n(Ds,{asChild:!0,children:s(X,{to:"/financial-transparency",children:[n(Gn,{className:"mr-2 h-4 w-4"})," View Public Dashboard"]})})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n(ev,{monthlyDonations:l,monthlyDonationsChange:w,isLoading:u.monthlyDonations}),n(tv,{monthlyExpenses:c,monthlyExpensesChange:x,isLoading:u.monthlyExpenses}),n(av,{})]}),s(Bm,{defaultValue:i,value:i,onValueChange:o,className:"mb-8",children:[s(Hm,{className:"grid w-full grid-cols-2 sm:grid-cols-5",children:[n(Km,{value:"overview",children:"Overview"}),n(Km,{value:"income",children:"Income"}),n(Km,{value:"expenses",children:"Expenses"}),n(Km,{value:"reports",children:"Reports"}),n(Km,{value:"tax",children:"Tax Documents"})]}),s("div",{className:"mt-6",children:[n(Wm,{value:"overview",className:"mt-0",children:n(hv,{monthlyDonations:l,monthlyExpenses:c})}),n(Wm,{value:"income",className:"mt-0",children:n(fv,{recentDonations:g,isLoadingDonations:y})}),n(Wm,{value:"expenses",className:"mt-0",children:n(Av,{expenses:e,expensesLoading:t,catExpenses:a,catExpensesLoading:r})}),n(Wm,{value:"reports",className:"mt-0",children:n(Tv,{})}),n(Wm,{value:"tax",className:"mt-0",children:n(Rv,{})})]})]})]})})},Lv=[{title:"Main Pages",pages:[{name:"Home",route:"/"},{name:"About",route:"/about"},{name:"Adoption",route:"/cats"},{name:"Contact",route:"/contact"}]},{title:"Informational Pages",pages:[{name:"Resources",route:"/resources"},{name:"Volunteer",route:"/volunteer"},{name:"Privacy Policy",route:"/privacy-policy"},{name:"Terms of Service",route:"/terms-of-service"}]}],Iv=()=>{const{data:e,isLoading:t,error:a}=S({queryKey:["content-blocks"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("content_blocks").select("*").order("page",{ascending:!0});if(t)throw t;return e}}),r=(null==e?void 0:e.reduce(((e,t)=>(e[t.page]||(e[t.page]=[]),e[t.page].push(t),e)),{}))||{};return s(ng,{title:"Pages",children:[n($c,{title:"Pages | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex items-center justify-between mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Pages"}),s(Ds,{children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add Content Block"]})]}),n("div",t?{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}:a?{className:"text-center py-12",children:n("p",{className:"text-red-500",children:"Error loading pages. Please try again later."})}:{className:"space-y-10",children:Lv.map(((e,t)=>s("div",{className:"space-y-6",children:[n("h2",{className:"text-xl font-semibold",children:e.title}),n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.pages.map((e=>{var t,a,i,o;return s(wm,{className:"overflow-hidden",children:[s(xm,{className:"bg-gray-50 pb-4",children:[s(Nm,{className:"flex items-center",children:[n(ri,{className:"h-5 w-5 mr-2 text-meow-primary"}),e.name]}),n(Cm,{children:e.route})]}),s(_m,{className:"pt-4",children:[s("p",{className:"text-sm text-gray-500",children:[(null==(t=r[e.name])?void 0:t.length)||0," content blocks"]}),s("div",{className:"mt-2",children:[null==(a=r[e.name])?void 0:a.slice(0,3).map((e=>s("div",{className:"text-xs text-gray-600 my-1 truncate",children:[" ",e.block_identifier]},e.id))),((null==(i=r[e.name])?void 0:i.length)||0)>3&&s("div",{className:"text-xs text-gray-600 my-1",children:[" ",r[e.name].length-3," more..."]}),!(null==(o=r[e.name])?void 0:o.length)&&n("div",{className:"text-xs text-gray-400 italic my-1",children:"No content blocks"})]})]}),n(km,{className:"bg-gray-50 border-t",children:s(Ds,{variant:"ghost",size:"sm",className:"w-full",children:[n(Ki,{className:"h-4 w-4 mr-2"}),"Manage Content"]})})]},e.route)}))})]},t)))})]})]})};function qv({className:e,classNames:t,showOutsideDays:a=!0,...r}){return n(Ne,{showOutsideDays:a,className:cr("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:cr(Es({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:cr(Es({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...e})=>n(qn,{className:"h-4 w-4"}),IconRight:({...e})=>n(On,{className:"h-4 w-4"})},...r})}qv.displayName="Calendar";var Ov="ScrollArea",[jv,$v]=Ft(Ov),[zv,Uv]=jv(Ov),Vv=c.forwardRef(((e,t)=>{const{__scopeScrollArea:a,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[l,d]=c.useState(null),[m,u]=c.useState(null),[h,p]=c.useState(null),[g,f]=c.useState(null),[y,v]=c.useState(null),[b,w]=c.useState(0),[x,N]=c.useState(0),[C,_]=c.useState(!1),[k,S]=c.useState(!1),E=Rt(t,(e=>d(e))),D=Ms(i);return n(zv,{scope:a,type:r,dir:D,scrollHideDelay:s,scrollArea:l,viewport:m,onViewportChange:u,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:f,scrollbarXEnabled:C,onScrollbarXEnabledChange:_,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:S,onCornerWidthChange:w,onCornerHeightChange:N,children:n(Ut.div,{dir:D,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})}));Vv.displayName=Ov;var Bv="ScrollAreaViewport",Hv=c.forwardRef(((e,t)=>{const{__scopeScrollArea:a,children:r,nonce:o,...l}=e,d=Uv(Bv,a),m=Rt(t,c.useRef(null),d.onViewportChange);return s(i,{children:[n("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),n(Ut.div,{"data-radix-scroll-area-viewport":"",...l,ref:m,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})}));Hv.displayName=Bv;var Kv="ScrollAreaScrollbar",Wv=c.forwardRef(((e,t)=>{const{forceMount:a,...r}=e,i=Uv(Kv,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l="horizontal"===e.orientation;return c.useEffect((()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)})),[l,s,o]),"hover"===i.type?n(Yv,{...r,ref:t,forceMount:a}):"scroll"===i.type?n(Gv,{...r,ref:t,forceMount:a}):"auto"===i.type?n(Qv,{...r,ref:t,forceMount:a}):"always"===i.type?n(Xv,{...r,ref:t}):null}));Wv.displayName=Kv;var Yv=c.forwardRef(((e,t)=>{const{forceMount:a,...r}=e,i=Uv(Kv,e.__scopeScrollArea),[s,o]=c.useState(!1);return c.useEffect((()=>{const e=i.scrollArea;let t=0;if(e){const a=()=>{window.clearTimeout(t),o(!0)},r=()=>{t=window.setTimeout((()=>o(!1)),i.scrollHideDelay)};return e.addEventListener("pointerenter",a),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",a),e.removeEventListener("pointerleave",r)}}}),[i.scrollArea,i.scrollHideDelay]),n(Ta,{present:a||s,children:n(Qv,{"data-state":s?"visible":"hidden",...r,ref:t})})})),Gv=c.forwardRef(((e,t)=>{const{forceMount:a,...r}=e,i=Uv(Kv,e.__scopeScrollArea),s="horizontal"===e.orientation,o=fb((()=>d("SCROLL_END")),100),[l,d]=(m="hidden",u={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},c.useReducer(((e,t)=>u[e][t]??e),m));var m,u;return c.useEffect((()=>{if("idle"===l){const e=window.setTimeout((()=>d("HIDE")),i.scrollHideDelay);return()=>window.clearTimeout(e)}}),[l,i.scrollHideDelay,d]),c.useEffect((()=>{const e=i.viewport,t=s?"scrollLeft":"scrollTop";if(e){let a=e[t];const r=()=>{const r=e[t];a!==r&&(d("SCROLL"),o()),a=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}}),[i.viewport,s,d,o]),n(Ta,{present:a||"hidden"!==l,children:n(Xv,{"data-state":"hidden"===l?"hidden":"visible",...r,ref:t,onPointerEnter:Mt(e.onPointerEnter,(()=>d("POINTER_ENTER"))),onPointerLeave:Mt(e.onPointerLeave,(()=>d("POINTER_LEAVE")))})})})),Qv=c.forwardRef(((e,t)=>{const a=Uv(Kv,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=c.useState(!1),l="horizontal"===e.orientation,d=fb((()=>{if(a.viewport){const e=a.viewport.offsetWidth<a.viewport.scrollWidth,t=a.viewport.offsetHeight<a.viewport.scrollHeight;o(l?e:t)}}),10);return yb(a.viewport,d),yb(a.content,d),n(Ta,{present:r||s,children:n(Xv,{"data-state":s?"visible":"hidden",...i,ref:t})})})),Xv=c.forwardRef(((e,t)=>{const{orientation:a="vertical",...r}=e,i=Uv(Kv,e.__scopeScrollArea),s=c.useRef(null),o=c.useRef(0),[l,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=db(l.viewport,l.content),u={...r,sizes:l,onSizesChange:d,hasThumb:Boolean(m>0&&m<1),onThumbChange:e=>s.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,a,r="ltr"){const n=mb(a),i=n/2,s=t||i,o=n-s,l=a.scrollbar.paddingStart+s,c=a.scrollbar.size-a.scrollbar.paddingEnd-o,d=a.content-a.viewport,m="ltr"===r?[0,d]:[-1*d,0];return hb([l,c],m)(e)}(e,o.current,l,t)}return"horizontal"===a?n(Zv,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const e=ub(i.viewport.scrollLeft,l,i.dir);s.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=h(e,i.dir))}}):"vertical"===a?n(Jv,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const e=ub(i.viewport.scrollTop,l);s.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=h(e))}}):null})),Zv=c.forwardRef(((e,t)=>{const{sizes:a,onSizesChange:r,...i}=e,s=Uv(Kv,e.__scopeScrollArea),[o,l]=c.useState(),d=c.useRef(null),m=Rt(t,d,s.onScrollbarXChange);return c.useEffect((()=>{d.current&&l(getComputedStyle(d.current))}),[d]),n(ab,{"data-orientation":"horizontal",...i,ref:m,sizes:a,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":mb(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,a)=>{if(s.viewport){const r=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),pb(r,a)&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:cb(o.paddingLeft),paddingEnd:cb(o.paddingRight)}})}})})),Jv=c.forwardRef(((e,t)=>{const{sizes:a,onSizesChange:r,...i}=e,s=Uv(Kv,e.__scopeScrollArea),[o,l]=c.useState(),d=c.useRef(null),m=Rt(t,d,s.onScrollbarYChange);return c.useEffect((()=>{d.current&&l(getComputedStyle(d.current))}),[d]),n(ab,{"data-orientation":"vertical",...i,ref:m,sizes:a,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":mb(a)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,a)=>{if(s.viewport){const r=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),pb(r,a)&&t.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:cb(o.paddingTop),paddingEnd:cb(o.paddingBottom)}})}})})),[eb,tb]=jv(Kv),ab=c.forwardRef(((e,t)=>{const{__scopeScrollArea:a,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:u,onResize:h,...p}=e,g=Uv(Kv,a),[f,y]=c.useState(null),v=Rt(t,(e=>y(e))),b=c.useRef(null),w=c.useRef(""),x=g.viewport,N=r.content-r.viewport,C=Bt(u),_=Bt(d),k=fb(h,10);function S(e){if(b.current){const t=e.clientX-b.current.left,a=e.clientY-b.current.top;m({x:t,y:a})}}return c.useEffect((()=>{const e=e=>{const t=e.target;(null==f?void 0:f.contains(t))&&C(e,N)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})}),[x,f,N,C]),c.useEffect(_,[r,_]),yb(f,k),yb(g.content,k),n(eb,{scope:a,scrollbar:f,hasThumb:i,onThumbChange:Bt(s),onThumbPointerUp:Bt(o),onThumbPositionChange:_,onThumbPointerDown:Bt(l),children:n(Ut.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:Mt(e.onPointerDown,(e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),b.current=f.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),S(e)}})),onPointerMove:Mt(e.onPointerMove,S),onPointerUp:Mt(e.onPointerUp,(e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null}))})})})),rb="ScrollAreaThumb",nb=c.forwardRef(((e,t)=>{const{forceMount:a,...r}=e,i=tb(rb,e.__scopeScrollArea);return n(Ta,{present:a||i.hasThumb,children:n(ib,{ref:t,...r})})})),ib=c.forwardRef(((e,t)=>{const{__scopeScrollArea:a,style:r,...i}=e,s=Uv(rb,a),o=tb(rb,a),{onThumbPositionChange:l}=o,d=Rt(t,(e=>o.onThumbChange(e))),m=c.useRef(void 0),u=fb((()=>{m.current&&(m.current(),m.current=void 0)}),100);return c.useEffect((()=>{const e=s.viewport;if(e){const t=()=>{if(u(),!m.current){const t=gb(e,l);m.current=t,l()}};return l(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[s.viewport,u,l]),n(Ut.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Mt(e.onPointerDownCapture,(e=>{const t=e.target.getBoundingClientRect(),a=e.clientX-t.left,r=e.clientY-t.top;o.onThumbPointerDown({x:a,y:r})})),onPointerUp:Mt(e.onPointerUp,o.onThumbPointerUp)})}));nb.displayName=rb;var sb="ScrollAreaCorner",ob=c.forwardRef(((e,t)=>{const a=Uv(sb,e.__scopeScrollArea),r=Boolean(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&r?n(lb,{...e,ref:t}):null}));ob.displayName=sb;var lb=c.forwardRef(((e,t)=>{const{__scopeScrollArea:a,...r}=e,i=Uv(sb,a),[s,o]=c.useState(0),[l,d]=c.useState(0),m=Boolean(s&&l);return yb(i.scrollbarX,(()=>{var e;const t=(null==(e=i.scrollbarX)?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),d(t)})),yb(i.scrollbarY,(()=>{var e;const t=(null==(e=i.scrollbarY)?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),o(t)})),m?n(Ut.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null}));function cb(e){return e?parseInt(e,10):0}function db(e,t){const a=e/t;return isNaN(a)?0:a}function mb(e){const t=db(e.viewport,e.content),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-a)*t;return Math.max(r,18)}function ub(e,t,a="ltr"){const r=mb(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-n,s=t.content-t.viewport,o=i-r,l=Mg(e,"ltr"===a?[0,s]:[-1*s,0]);return hb([0,s],[0,o])(l)}function hb(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(a-e[0])}}function pb(e,t){return e>0&&e<t}var gb=(e,t=()=>{})=>{let a={left:e.scrollLeft,top:e.scrollTop},r=0;return function n(){const i={left:e.scrollLeft,top:e.scrollTop},s=a.left!==i.left,o=a.top!==i.top;(s||o)&&t(),a=i,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function fb(e,t){const a=Bt(e),r=c.useRef(0);return c.useEffect((()=>()=>window.clearTimeout(r.current)),[]),c.useCallback((()=>{window.clearTimeout(r.current),r.current=window.setTimeout(a,t)}),[a,t])}function yb(e,t){const a=Bt(t);aa((()=>{let t=0;if(e){const r=new ResizeObserver((()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(a)}));return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}}),[e,a])}var vb=Vv,bb=Hv,wb=ob;const xb=c.forwardRef((({className:e,children:t,...a},r)=>s(vb,{ref:r,className:cr("relative overflow-hidden",e),...a,children:[n(bb,{className:"h-full w-full rounded-[inherit]",children:t}),n(Nb,{}),n(wb,{})]})));xb.displayName=vb.displayName;const Nb=c.forwardRef((({className:e,orientation:t="vertical",...a},r)=>n(Wv,{ref:r,orientation:t,className:cr("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:n(nb,{className:"relative flex-1 rounded-full bg-border"})})));Nb.displayName=Wv.displayName;const Cb=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(!1),[i,o]=h(!1),[l,c]=h(null),[d,m]=h(!1),[u,p]=h({id:"",title:"",description:"",date:new Date,location:"",image_url:""}),{data:g,isLoading:f}=S({queryKey:["events"],queryFn:async()=>{try{console.log("Fetching events");const{data:t,error:a}=await supabase.from("events").select("*").order("date",{ascending:!0});return a?(console.error("Error fetching events:",a),e({title:"Error Loading Events",description:a.message,variant:"destructive"}),[]):(console.log("Events fetched:",t),t)}catch(t){return console.error("Error in events query:",t),[]}},refetchInterval:6e4}),y=D({mutationFn:async e=>{try{console.log("Creating/updating event:",e);const t=!e.id,{data:a,error:r}=await supabase.from("events").upsert([{id:e.id||void 0,title:e.title,description:e.description,date:e.date,location:e.location,image_url:e.image_url}],{onConflict:"id"}).select();if(r)throw console.error("Error creating/updating event:",r),r;return console.log("Event created/updated successfully:",a),{data:a,isNewEvent:t}}catch(t){throw console.error("Error in create/update event mutation:",t),t}},onSuccess:a=>{e({title:a.isNewEvent?"Event Created":"Event Updated",description:`Event has been ${a.isNewEvent?"created":"updated"} successfully.`}),t.invalidateQueries({queryKey:["events"]}),b()},onError:t=>{console.error("Error in create/update event mutation:",t),e({title:"Error",description:t.message,variant:"destructive"})}}),v=D({mutationFn:async e=>{try{console.log("Deleting event:",e);const{error:t}=await supabase.from("events").delete().eq("id",e);if(t)throw console.error("Error deleting event:",t),t;console.log("Event deleted successfully")}catch(t){throw console.error("Error in delete event mutation:",t),t}},onSuccess:()=>{e({title:"Event Deleted",description:"Event has been deleted successfully."}),t.invalidateQueries({queryKey:["events"]})},onError:t=>{console.error("Error in delete event mutation:",t),e({title:"Error",description:t.message,variant:"destructive"})}}),b=()=>{r(!1)};return s(ng,{title:"Events",children:[n($c,{title:"Events | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex items-center justify-between mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Events"}),s(Ds,{onClick:()=>{o(!1),c(null),p({id:"",title:"",description:"",date:new Date,location:"",image_url:""}),r(!0)},children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add Event"]})]}),n("div",{className:"grid grid-cols-1 gap-6",children:n("div",{children:s(wm,{children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg font-semibold",children:"Upcoming Events"})}),n(_m,{className:"p-0",children:n(xb,{className:"h-[calc(100vh-20rem)]",children:f?n("div",{className:"flex justify-center py-6",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-meow-primary"})}):g&&g.length>0?n("div",{className:"divide-y divide-gray-200",children:g.map((e=>s("div",{className:"p-4 hover:bg-gray-50 flex items-center justify-between",children:[s("div",{children:[n("p",{className:"font-medium",children:e.title}),s("p",{className:"text-sm text-gray-500",children:[new Date(e.date).toLocaleDateString()," - ",e.location]})]}),s("div",{className:"flex gap-2",children:[n(Ds,{variant:"outline",size:"icon",onClick:()=>(e=>{o(!0),c(e),p({id:e.id,title:e.title,description:e.description,date:new Date(e.date),location:e.location,image_url:e.image_url}),r(!0)})(e),children:n(Ki,{className:"h-4 w-4"})}),n(Ds,{variant:"destructive",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this event?")&&v.mutate(t));var t},children:n(Qi,{className:"h-4 w-4"})})]})]},e.id)))}):n("div",{className:"p-6 text-center text-gray-500",children:n("p",{children:"No events found"})})})})]})})})]}),a&&n("div",{className:"fixed inset-0 z-50 overflow-auto bg-black/50",children:n("div",{className:"relative w-auto mx-auto max-w-2xl my-20",children:s(wm,{className:"bg-white rounded-lg shadow-xl",children:[n(xm,{className:"border-b",children:n(Nm,{className:"text-xl font-bold",children:i?"Edit Event":"Add Event"})}),n(_m,{className:"p-6",children:s("form",{onSubmit:async t=>{if(t.preventDefault(),!(u.title.trim()&&u.description.trim()&&u.location.trim()&&u.date&&u.image_url.trim()))return void e({title:"Missing Information",description:"Please fill out all fields.",variant:"destructive"});const a={id:u.id,title:u.title,description:u.description,date:u.date.toISOString(),location:u.location,image_url:u.image_url};y.mutate(a)},className:"space-y-4",children:[s("div",{children:[n(Zm,{htmlFor:"title",children:"Title"}),n(od,{type:"text",id:"title",value:u.title,onChange:e=>p({...u,title:e.target.value}),required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"description",children:"Description"}),n(cu,{id:"description",value:u.description,onChange:e=>p({...u,description:e.target.value}),rows:4,required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"location",children:"Location"}),n(od,{type:"text",id:"location",value:u.location,onChange:e=>p({...u,location:e.target.value}),required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"date",children:"Date"}),s(Sy,{children:[n(Ey,{asChild:!0,children:s(Ds,{variant:"outline",className:cr("w-[240px] justify-start text-left font-normal",!u.date&&"text-muted-foreground"),children:[n(An,{className:"mr-2 h-4 w-4"}),u.date?le(u.date,"PPP"):n("span",{children:"Pick a date"})]})}),n(Dy,{className:"w-auto p-0",align:"start",children:n(qv,{mode:"single",selected:u.date,onSelect:e=>p({...u,date:e||new Date}),disabled:e=>e<new Date,initialFocus:!0})})]})]}),s("div",{children:[n(Zm,{htmlFor:"image_url",children:"Image URL"}),n(od,{type:"text",id:"image_url",value:u.image_url,readOnly:!0}),n(od,{type:"file",id:"image_upload",accept:"image/*",onChange:t=>{var a;const r=null==(a=t.target.files)?void 0:a[0];r&&(async t=>{m(!0);const a=`event-${Date.now()}-${t.name.replace(/\s+/g,"-")}`;try{const{data:r,error:n}=await xt().storage.from("event-images").upload(a,t,{cacheControl:"3600",contentType:t.type});if(n)throw n;const i=xt().storage.from("event-images").getPublicUrl(r.path).data.publicUrl;p((e=>({...e,image_url:i}))),e({title:"Image Uploaded",description:"Event image has been uploaded successfully."})}catch(r){console.error("Error uploading image:",r),e({title:"Upload Failed",description:r.message||"Failed to upload image",variant:"destructive"})}finally{m(!1)}})(r)},className:"mt-2"}),d&&n("div",{className:"flex justify-center mt-2",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-meow-primary"})})]}),s("div",{className:"flex justify-end gap-4",children:[n(Ds,{type:"button",variant:"ghost",onClick:b,children:"Cancel"}),n(Ds,{type:"submit",disabled:y.isPending,children:y.isPending?"Saving...":"Save"})]})]})})]})})})]})},_b=({title:e,count:t,isSelected:a,onClick:r})=>n(wm,{className:"cursor-pointer "+(a?"bg-slate-100":""),onClick:r,children:n(_m,{className:"p-4",children:s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:e}),n("p",{className:"text-2xl font-bold",children:t})]})})}),kb=({post:e,isOpen:t,onClose:a,onDelete:r,onArchive:i,onRestore:o})=>{var l,c,d;return n(dm,{open:t,onOpenChange:a,children:s(pm,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[s(gm,{children:[n(ym,{children:e.title}),s(vm,{children:["Posted by ",null==(l=e.profiles)?void 0:l.first_name," ",null==(c=e.profiles)?void 0:c.last_name," on"," ",new Date(e.created_at).toLocaleDateString()]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{children:[n("h3",{className:"text-lg font-semibold mb-4",children:"Post Details"}),s("div",{className:"space-y-4",children:[s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),n(Wc,{variant:"lost"===e.status?"destructive":"found"===e.status?"outline":"reunited"===e.status?"default":"secondary",className:"mt-1",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Pet Type"}),n("p",{children:e.pet_type})]}),e.pet_name&&s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Pet Name"}),n("p",{children:e.pet_name})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Location"}),n("p",{children:e.location})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Date Occurred"}),n("p",{children:new Date(e.date_occurred).toLocaleDateString()})]}),s("div",{children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Contact Information"}),n("p",{children:e.contact_info||(null==(d=e.profiles)?void 0:d.email)})]})]})]}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-4",children:"Description"}),n("p",{className:"whitespace-pre-wrap",children:e.description}),e.photos_urls&&e.photos_urls.length>0&&s("div",{className:"mt-6",children:[n("h3",{className:"text-lg font-semibold mb-4",children:"Photos"}),n("div",{className:"grid grid-cols-2 gap-4",children:e.photos_urls.map(((t,a)=>n("img",{src:t,alt:`${e.pet_type} ${a+1}`,className:"rounded-md w-full h-40 object-cover"},a)))})]})]})]}),s(fm,{className:"flex-col sm:flex-row sm:justify-between gap-2",children:[s("div",{className:"flex gap-2",children:[s(Ds,{variant:"destructive",onClick:()=>r(e.id),children:[n(Qi,{className:"mr-2 h-4 w-4"}),"Delete"]}),"archived"!==e.status?s(Ds,{variant:"outline",onClick:()=>i(e.id),children:[n(fn,{className:"mr-2 h-4 w-4"}),"Archive"]}):s(Ds,{variant:"outline",onClick:()=>o(e.id),children:[n(Oi,{className:"mr-2 h-4 w-4"}),"Restore"]})]}),n(Ds,{variant:"outline",onClick:a,children:"Close"})]})]})})},Sb=({posts:e,onView:t,onArchive:a,onRestore:r,onDelete:i})=>n("div",{className:"overflow-x-auto",children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,{children:"Title"}),n(Eg,{children:"Status"}),n(Eg,{children:"Pet Type"}),n(Eg,{children:"Location"}),n(Eg,{children:"Date Posted"}),n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:e.map((e=>{var o,l;return s(Sg,{children:[s(Dg,{children:[n("div",{className:"font-medium",children:e.title}),s("div",{className:"text-sm text-gray-500",children:["by ",null==(o=e.profiles)?void 0:o.first_name," ",null==(l=e.profiles)?void 0:l.last_name]})]}),n(Dg,{children:n(Wc,{variant:"lost"===e.status?"destructive":"found"===e.status?"outline":"reunited"===e.status?"default":"secondary",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),n(Dg,{children:e.pet_type}),n(Dg,{children:e.location}),n(Dg,{children:new Date(e.created_at).toLocaleDateString()}),n(Dg,{className:"text-right",children:s("div",{className:"flex justify-end gap-2",children:[n(Ds,{variant:"outline",size:"icon",title:"View Details",onClick:()=>t(e),children:n(Jn,{className:"h-4 w-4"})}),"archived"!==e.status?n(Ds,{variant:"outline",size:"icon",title:"Archive Post",onClick:()=>a(e.id),children:n(fn,{className:"h-4 w-4"})}):n(Ds,{variant:"outline",size:"icon",title:"Restore Post",onClick:()=>r(e.id),children:n(Oi,{className:"h-4 w-4"})}),n(Ds,{variant:"destructive",size:"icon",title:"Delete Post",onClick:()=>i(e.id),children:n(Qi,{className:"h-4 w-4"})})]})})]},e.id)}))})]})}),Eb=({searchQuery:e,onSearchChange:t})=>n("div",{className:"flex items-center gap-4 w-full md:w-auto",children:s("div",{className:"relative w-full md:w-auto",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n(od,{placeholder:"Search posts...",value:e,onChange:e=>t(e.target.value),className:"pl-10 w-full md:w-64"})]})}),Db=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(""),[i,o]=h("all"),[l,c]=h(null),[d,m]=h(!1),{data:u,isLoading:p,error:g}=S({queryKey:["admin-lost-found-posts"],queryFn:async()=>{try{const{data:e,error:t}=await supabase.from("lost_found_posts").select("*").order("created_at",{ascending:!1});if(t)throw t;const a=e,r=[...new Set(a.map((e=>e.profile_id)))];let n={};if(r.length>0){const{data:e,error:t}=await supabase.from("profiles").select("id, first_name, last_name, email").in("id",r);t?console.error("Error fetching profiles:",t):e&&(n=e.reduce(((e,t)=>(e[t.id]=t,e)),{}))}return a.map((e=>({...e,profiles:n[e.profile_id]||null})))}catch(e){return console.error("Error fetching lost and found posts:",e),[]}}}),f=D({mutationFn:async e=>{const{error:t}=await supabase.from("lost_found_posts").update({status:"archived"}).eq("id",e);if(t)throw t;return e},onSuccess:a=>{e({title:"Post Archived",description:"The post has been archived successfully."}),t.invalidateQueries({queryKey:["admin-lost-found-posts"]}),(null==l?void 0:l.id)===a&&(m(!1),c(null))},onError:t=>{e({title:"Error",description:t.message||"Failed to archive post",variant:"destructive"})}}),y=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("lost_found_posts").select("*").eq("id",e).single();if(a)throw a;const{error:r}=await supabase.from("lost_found_posts").update({status:"lost"}).eq("id",e);if(r)throw r;return e},onSuccess:a=>{if(e({title:"Post Restored",description:"The post has been restored successfully."}),t.invalidateQueries({queryKey:["admin-lost-found-posts"]}),(null==l?void 0:l.id)===a){const e=null==u?void 0:u.find((e=>e.id===a));e&&c({...e,status:"lost"})}},onError:t=>{e({title:"Error",description:t.message||"Failed to restore post",variant:"destructive"})}}),v=D({mutationFn:async e=>{const{error:t}=await supabase.from("lost_found_posts").delete().eq("id",e);if(t)throw t;return e},onSuccess:a=>{e({title:"Post Deleted",description:"The post has been permanently deleted."}),t.invalidateQueries({queryKey:["admin-lost-found-posts"]}),(null==l?void 0:l.id)===a&&(m(!1),c(null))},onError:t=>{e({title:"Error",description:t.message||"Failed to delete post",variant:"destructive"})}}),b=null==u?void 0:u.filter((e=>("all"===i||e.status===i)&&(e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())||e.location.toLowerCase().includes(a.toLowerCase())||e.pet_type.toLowerCase().includes(a.toLowerCase())||e.pet_name&&e.pet_name.toLowerCase().includes(a.toLowerCase())))),w=(null==u?void 0:u.filter((e=>"lost"===e.status)).length)||0,x=(null==u?void 0:u.filter((e=>"found"===e.status)).length)||0;null==u||u.filter((e=>"reunited"===e.status)).length;const N=(null==u?void 0:u.filter((e=>"archived"===e.status)).length)||0,C=e=>{window.confirm("Are you sure you want to archive this post?")&&f.mutate(e)},_=e=>{window.confirm("Are you sure you want to restore this post?")&&y.mutate(e)},k=e=>{window.confirm("Are you sure you want to permanently delete this post? This action cannot be undone.")&&v.mutate(e)};return s(ng,{title:"Lost & Found",children:[n($c,{title:"Lost & Found | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row items-center justify-between mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Lost & Found Posts"}),n(Eb,{searchQuery:a,onSearchChange:r})]}),s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n(_b,{title:"All Posts",count:(null==u?void 0:u.length)||0,isSelected:"all"===i,onClick:()=>o("all")}),n(_b,{title:"Lost",count:w,isSelected:"lost"===i,onClick:()=>o("lost")}),n(_b,{title:"Found",count:x,isSelected:"found"===i,onClick:()=>o("found")}),n(_b,{title:"Archived",count:N,isSelected:"archived"===i,onClick:()=>o("archived")})]}),s(wm,{children:[n(xm,{children:n(Nm,{children:"all"===i?"All Posts":"lost"===i?"Lost Pets":"found"===i?"Found Pets":"reunited"===i?"Reunited Pets":"Archived Posts"})}),n(_m,{children:p?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):g?n("div",{className:"text-center py-12",children:n("p",{className:"text-red-500",children:"Error loading posts"})}):b&&b.length>0?n(Sb,{posts:b,onView:e=>{c(e),m(!0)},onArchive:C,onRestore:_,onDelete:k}):n("div",{className:"text-center py-12",children:n("p",{className:"text-xl text-gray-700",children:a?"No posts match your search.":"No posts found for this status."})})})]})]}),l&&n(kb,{post:l,isOpen:d,onClose:()=>m(!1),onDelete:k,onArchive:C,onRestore:_})]})},Ab=()=>{const{toast:e}=xr(),t=E(),[a,r]=h("new"),[i,o]=h(""),[l,c]=h(!1),[d,m]=h(null),[u,p]=h(""),{data:g,isLoading:f}=S({queryKey:["contact-messages"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("contact_messages").select("*").order("received_at",{ascending:!1});if(t)throw t;return e}}),y=D({mutationFn:async({messageId:e,reply:t})=>{const{data:a}=await xt().auth.getSession();if(!a.session)throw new Error("Not authenticated");const r=await fetch("/functions/v1/send-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.session.access_token}`},body:JSON.stringify({messageId:e,reply:t})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Failed to send email")}return await r.json()},onSuccess:()=>{e({title:"Reply Sent",description:"Your reply has been sent successfully."}),t.invalidateQueries({queryKey:["contact-messages"]}),c(!1),p(""),m(null)},onError:t=>{e({title:"Error",description:t.message||"Failed to send reply",variant:"destructive"})}}),v=null==g?void 0:g.filter((e=>{if("new"===a&&"New"!==e.status)return!1;if("replied"===a&&"Replied"!==e.status)return!1;if(i){const t=i.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.subject&&e.subject.toLowerCase().includes(t)||e.message.toLowerCase().includes(t)||e.response&&e.response.toLowerCase().includes(t)}return!0})),b=(null==g?void 0:g.filter((e=>"New"===e.status)).length)||0,w=(null==g?void 0:g.filter((e=>"Replied"===e.status)).length)||0,x=(null==g?void 0:g.length)||0;return s(ng,{title:"Contact Messages",children:[n($c,{title:"Contact Form | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Contact Form Messages"}),s("div",{className:"relative w-full md:w-64",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search messages...",value:i,onChange:e=>o(e.target.value),className:"pl-10 w-full"})]})]}),s(Bm,{defaultValue:"new",value:a,onValueChange:r,className:"w-full",children:[s(Hm,{className:"mb-6",children:[s(Km,{value:"all",children:["All",n("span",{className:"ml-2 bg-gray-100 text-gray-700 px-2 py-0.5 text-xs rounded-full",children:x})]}),s(Km,{value:"new",children:["New",n("span",{className:"ml-2 bg-blue-100 text-blue-700 px-2 py-0.5 text-xs rounded-full",children:b})]}),s(Km,{value:"replied",children:["Replied",n("span",{className:"ml-2 bg-green-100 text-green-700 px-2 py-0.5 text-xs rounded-full",children:w})]})]}),n(Wm,{value:a,children:f?n("div",{className:"flex justify-center py-10",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-meow-primary"})}):v&&v.length>0?n("div",{className:"space-y-6",children:v.map((e=>n(wm,{children:n(_m,{className:"p-6",children:n("div",{className:"flex flex-col md:flex-row gap-6",children:s("div",{className:"flex-grow",children:[s("div",{className:"flex justify-between items-start mb-4",children:[s("div",{children:[n("h3",{className:"text-lg font-semibold mb-1",children:e.subject||"No Subject"}),s("div",{className:"flex flex-wrap gap-x-4 text-sm text-gray-500",children:[s("div",{className:"flex items-center",children:[n(rs,{className:"h-4 w-4 mr-1"}),e.name]}),s("div",{className:"flex items-center",children:[n(xi,{className:"h-4 w-4 mr-1"}),e.email]}),e.phone&&s("div",{className:"flex items-center",children:[n(Ri,{className:"h-4 w-4 mr-1"}),e.phone]}),s("div",{className:"flex items-center",children:[n(An,{className:"h-4 w-4 mr-1"}),ce(new Date(e.received_at),{addSuffix:!0})]})]})]}),n("div",{children:"New"===e.status?s("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[n(Yn,{className:"h-3 w-3 mr-1"}),"New"]}):s("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center",children:[n(zn,{className:"h-3 w-3 mr-1"}),"Replied"]})})]}),n("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:n("p",{className:"whitespace-pre-wrap",children:e.message})}),e.response&&s("div",{className:"mb-4",children:[n("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Your Response:"}),s("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n("p",{className:"whitespace-pre-wrap",children:e.response}),s("p",{className:"text-xs text-gray-500 mt-2",children:["Sent ",e.responded_at?ce(new Date(e.responded_at),{addSuffix:!0}):""]})]})]}),n("div",{className:"mt-4",children:s(Ds,{onClick:()=>(e=>{m(e),p(e.response||""),c(!0)})(e),children:[n(zi,{className:"h-4 w-4 mr-2"}),e.response?"Send Another Reply":"Reply"]})})]})})})},e.id)))}):n(wm,{children:s(_m,{className:"p-10 text-center",children:[n(Ei,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n("p",{className:"text-gray-500",children:"No messages found in this category."})]})})})]})]}),d&&n(dm,{open:l,onOpenChange:c,children:s(pm,{className:"sm:max-w-lg",children:[n(gm,{children:s(ym,{children:["Reply to ",d.name]})}),s("div",{className:"space-y-4 py-4",children:[s("div",{className:"bg-gray-50 p-4 rounded-lg mb-2 text-sm",children:[s("p",{children:[n("strong",{children:"From:"})," ",d.name," (",d.email,")"]}),s("p",{children:[n("strong",{children:"Subject:"})," ",d.subject||"No Subject"]}),n("p",{className:"mt-2",children:n("strong",{children:"Message:"})}),n("p",{className:"whitespace-pre-wrap",children:d.message})]}),n(cu,{value:u,onChange:e=>p(e.target.value),placeholder:"Type your reply here...",rows:8})]}),s(fm,{children:[n(Ds,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n(Ds,{onClick:()=>{d&&u.trim()&&y.mutate({messageId:d.id,reply:u.trim()})},disabled:!u.trim()||y.isPending,children:y.isPending?"Sending...":"Send Reply"})]})]})})]})},Mb=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(null),[o,l]=h(""),c=N(null),[d,m]=h(!0),u=N(null),[g,f]=h(0),[y,v]=h(!1),b=(e=!1)=>{c.current&&(e||d)&&c.current.scrollIntoView({behavior:"smooth"})},{data:w,isLoading:x}=S({queryKey:["chat-sessions"],queryFn:async()=>{try{console.log("Fetching chat sessions");const{data:e,error:t}=await supabase.from("chat_sessions").select("*").eq("status","active").order("last_message_at",{ascending:!1});if(t)throw console.error("Error fetching chat sessions:",t),t;if(!e||0===e.length)return[];const a=await Promise.all(e.map((async e=>{if(e.user_id)try{const{data:t,error:a}=await supabase.from("profiles").select("id, first_name, last_name, email").eq("id",e.user_id).single();return a?(console.error("Error fetching user profile:",a),{...e,user_profile:void 0}):{...e,user_profile:t}}catch(t){return console.error("Error fetching profile for user:",e.user_id,t),{...e,user_profile:void 0}}return e})));return console.log("Chat sessions fetched and combined with profiles:",a),a}catch(t){return console.error("Error in chat sessions query:",t),e({title:"Error Loading Chats",description:t instanceof Error?t.message:"Failed to load chat sessions",variant:"destructive"}),[]}},refetchInterval:1e4}),{data:C,isLoading:_}=S({queryKey:["chat-messages",a],queryFn:async()=>{if(!a)return[];try{console.log("Fetching messages for chat:",a);const{data:r,error:n}=await supabase.from("chat_messages").select("*").eq("chat_session_id",a).order("created_at",{ascending:!0});if(n)return console.error("Error fetching chat messages:",n),e({title:"Error Loading Messages",description:n.message,variant:"destructive"}),[];console.log("Chat messages fetched:",null==r?void 0:r.length);const i=r.filter((e=>!e.is_admin&&!e.read_at));if(i.length>0){console.log("Marking messages as read:",i.length);const e=i.map((e=>e.id));await supabase.from("chat_messages").update({read_at:(new Date).toISOString()}).in("id",e),t.invalidateQueries({queryKey:["unreadCounts"]})}return r||[]}catch(r){return console.error("Error in chat messages query:",r),[]}},enabled:!!a,refetchInterval:!!a&&5e3});p((()=>{C&&C.length>0&&(y?setTimeout((()=>b()),100):(m(!0),v(!0),setTimeout((()=>b(!0)),100)))}),[C,a]),p((()=>{v(!1)}),[a]);const k=D({mutationFn:async e=>{var r;if(a&&e.trim())try{console.log("Sending admin message to chat:",a);const n=null==(r=(await xt().auth.getUser()).data.user)?void 0:r.id,i={chat_session_id:a,content:e.trim(),is_admin:!0,admin_id:n},s={...i,id:"temp-"+Date.now(),created_at:(new Date).toISOString()};t.setQueryData(["chat-messages",a],(e=>e?[...e,s]:[s]));const{error:o}=await supabase.from("chat_messages").insert(i);if(o)throw console.error("Error inserting message:",o),o;const{error:l}=await supabase.from("chat_sessions").update({last_message_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",a);if(l)throw console.error("Error updating chat session:",l),l;console.log("Message sent successfully")}catch(n){throw console.error("Error sending message:",n),n}},onSuccess:()=>{l(""),m(!0),t.invalidateQueries({queryKey:["chat-messages",a]}),t.invalidateQueries({queryKey:["chat-sessions"]}),setTimeout((()=>b(!0)),100)},onError:t=>{console.error("Error in send message mutation:",t),e({title:"Error Sending Message",description:t.message,variant:"destructive"})}}),A=()=>{o.trim()&&k.mutate(o)},M=D({mutationFn:async e=>{try{console.log("Closing chat session:",e);const{error:t}=await supabase.from("chat_sessions").update({status:"closed",updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw console.error("Error closing chat session:",t),t;console.log("Chat session closed successfully")}catch(t){throw console.error("Error in close chat mutation:",t),t}},onSuccess:()=>{r(null),v(!1),t.invalidateQueries({queryKey:["chat-sessions"]}),e({title:"Chat Closed",description:"The chat session has been closed."})},onError:t=>{console.error("Error closing chat:",t),e({title:"Error Closing Chat",description:t.message,variant:"destructive"})}}),P=e=>e.guest_name?`${e.guest_name} (Guest)`:e.user_profile&&`${e.user_profile.first_name||""} ${e.user_profile.last_name||""}`.trim()||"Anonymous User";return s(ng,{title:"Live Chat",children:[n($c,{title:"Live Chat | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[n("div",{className:"flex items-center justify-between mb-6",children:n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Live Chat"})}),s("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n("div",{className:"md:col-span-1",children:s(wm,{className:"h-[calc(100vh-12rem)]",children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg font-semibold",children:"Active Chats"})}),n(_m,{className:"p-0",children:n(xb,{className:"h-[calc(100vh-16rem)]",children:x?n("div",{className:"flex justify-center py-6",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-meow-primary"})}):w&&w.length>0?n("div",{className:"space-y-1",children:w.map((e=>n("div",{className:"p-3 hover:bg-gray-50 cursor-pointer "+(a===e.id?"bg-meow-primary/10":""),onClick:()=>r(e.id),children:s("div",{className:"flex items-center gap-2",children:[n("div",{className:"bg-gray-200 rounded-full p-2",children:n(rs,{size:16})}),s("div",{className:"flex-1 min-w-0",children:[n("p",{className:"font-medium truncate",children:P(e)}),e.guest_reason&&s("p",{className:"text-xs text-gray-500 truncate",children:["Reason: ",e.guest_reason]}),n("p",{className:"text-xs text-gray-500 truncate",children:new Date(e.last_message_at).toLocaleString()})]})]})},e.id)))}):s("div",{className:"p-6 text-center text-gray-500",children:[n(Si,{className:"mx-auto h-10 w-10 text-gray-300 mb-2"}),n("p",{children:"No active chat sessions"})]})})})]})}),n("div",{className:"md:col-span-3",children:s(wm,{className:"h-[calc(100vh-12rem)] flex flex-col",children:[s(xm,{className:"pb-2 border-b flex flex-row items-center justify-between",children:[n(Nm,{className:"text-lg font-semibold",children:a&&w?n(i,{children:P(w.find((e=>e.id===a)))}):"Select a Chat"}),a&&n(Ds,{variant:"outline",size:"sm",onClick:()=>M.mutate(a),children:"Close Chat"})]}),n(_m,{className:"flex-1 p-0 flex flex-col overflow-hidden",children:a?s(i,{children:[n("div",{className:"flex-1 overflow-hidden p-4 relative",children:n("div",{ref:u,onScroll:()=>{if(!u.current||!y)return;const{scrollTop:e,scrollHeight:t,clientHeight:a}=u.current,r=e+a;g-r>100&&m(!1),t-r<50&&m(!0),f(r)},className:"h-full overflow-y-auto pr-2",children:_?n("div",{className:"flex justify-center py-6",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-meow-primary"})}):C&&C.length>0?s("div",{className:"space-y-4",children:[C.map((e=>n("div",{className:"flex "+(e.is_admin?"justify-end":"justify-start"),children:s("div",{className:"max-w-[80%] p-3 rounded-lg overflow-hidden break-words "+(e.is_admin?"bg-meow-primary text-white":"bg-gray-100 text-gray-800"),children:[n("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),n("p",{className:"text-xs mt-1 opacity-70",children:new Date(e.created_at).toLocaleTimeString()})]})},e.id))),n("div",{ref:c})]}):n("div",{className:"h-full flex items-center justify-center text-gray-500",children:n("p",{children:"No messages yet"})})})}),n("div",{className:"px-3 py-1 border-t text-right",children:n("button",{onClick:()=>{m(!d),d||b(!0)},className:"text-xs "+(d?"text-meow-primary":"text-gray-500"),children:d?"Auto-scroll enabled":"Auto-scroll disabled (click to enable)"})}),n("div",{className:"p-3 border-t",children:s("div",{className:"flex gap-2",children:[n(cu,{value:o,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),A())},placeholder:"Type your message...",className:"min-h-[60px] resize-none flex-1"}),n(Ds,{type:"button",onClick:A,className:"self-end",disabled:k.isPending||!o.trim(),children:n(zi,{size:16})})]})})]}):n("div",{className:"h-full flex items-center justify-center text-gray-500",children:s("div",{className:"text-center",children:[n(Si,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),n("p",{children:"Select a chat from the sidebar to view messages"})]})})})]})})]})]})]})},Pb=()=>{const[e,t]=h(10),[a,r]=h("all"),[i,o]=h("all"),[l,c]=h(""),{data:d,isLoading:m,error:u}=S({queryKey:["activity-logs",e,a,i,l],queryFn:async()=>{let t=supabase.from("activity_logs").select("\n          *,\n          user:user_id (\n            email\n          )\n        ").order("created_at",{ascending:!1});"all"!==a&&(t=t.eq("activity_type",a)),"all"!==i&&(t=t.eq("user_id",i)),l&&(t=t.ilike("description",`%${l}%`)),t=t.limit(e);const{data:r,error:n}=await t;if(n)throw n;return r}}),{data:p}=S({queryKey:["security-users"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("profiles").select("id, email, first_name, last_name").order("email",{ascending:!0});if(t)throw t;return e}}),g=e=>{switch(e){case"login":return n(bi,{className:"h-5 w-5 text-blue-500"});case"logout":return n(wi,{className:"h-5 w-5 text-gray-500"});case"create":return n(Li,{className:"h-5 w-5 text-green-500"});case"update":return n(Ki,{className:"h-5 w-5 text-yellow-500"});case"delete":return n(Qi,{className:"h-5 w-5 text-red-500"});default:return n(ri,{className:"h-5 w-5 text-purple-500"})}},f=d?[...new Set(d.map((e=>e.activity_type)))]:[],y=d&&d.length>0;return s(ng,{title:"Security",children:[n($c,{title:"Security | Meow Rescue Admin"}),n("div",{className:"container mx-auto py-10",children:s("div",{className:"flex flex-col gap-6",children:[s("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[s("h1",{className:"text-3xl font-bold text-meow-primary flex items-center",children:[n(Hi,{className:"mr-2 h-7 w-7"}),"Security"]}),s("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[s("div",{className:"relative flex-1 sm:flex-none",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search logs...",value:l,onChange:e=>c(e.target.value),className:"pl-10 w-full sm:w-64 bg-white/10 backdrop-blur-sm border-gray-200/30"})]}),s("div",{className:"flex gap-3 w-full sm:w-auto",children:[s(Wf,{value:a,onValueChange:r,children:[s(Gf,{className:"w-full sm:w-32 bg-white/10 backdrop-blur-sm border-gray-200/30",children:[n(ii,{className:"h-4 w-4 mr-2"}),n(Yf,{placeholder:"Type"})]}),s(Zf,{children:[n(Jf,{value:"all",children:"All Types"}),f.map((e=>n(Jf,{value:e,children:e},e)))]})]}),s(Wf,{value:i,onValueChange:o,children:[s(Gf,{className:"w-full sm:w-32 bg-white/10 backdrop-blur-sm border-gray-200/30",children:[n(rs,{className:"h-4 w-4 mr-2"}),n(Yf,{placeholder:"User"})]}),s(Zf,{children:[n(Jf,{value:"all",children:"All Users"}),null==p?void 0:p.map((e=>n(Jf,{value:e.id,children:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.email},e.id)))]})]})]})]})]}),n(wm,{className:"overflow-hidden shadow-lg border-0 bg-gradient-to-br from-white to-gray-50",children:n(_m,{className:"p-0",children:m?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-meow-primary"})}):u?s("div",{className:"py-8 text-center",children:[n(gn,{className:"mx-auto h-8 w-8 text-red-500 mb-2"}),n("p",{className:"text-red-500 font-medium",children:"Failed to load security logs"}),n("p",{className:"text-gray-500 text-sm mt-1",children:"Please try refreshing the page"})]}):y?n("div",{className:"divide-y",children:d.map((e=>n("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:s("div",{className:"flex items-start gap-3",children:[n("div",{className:"p-2 rounded-full bg-gray-100/80 backdrop-blur-sm",children:g(e.activity_type)}),s("div",{className:"flex-1",children:[n("p",{className:"font-medium text-gray-800",children:e.description}),s("div",{className:"flex flex-wrap items-center gap-x-4 mt-1 text-sm text-gray-500",children:[s("span",{className:"flex items-center",children:[n(An,{className:"h-3 w-3 mr-1"}),ce(new Date(e.created_at),{addSuffix:!0})]}),e.user&&s("span",{className:"flex items-center",children:[n(rs,{className:"h-3 w-3 mr-1"}),e.user.email]}),n(Wc,{variant:"outline",className:"capitalize bg-gray-100/80 text-gray-700 hover:bg-gray-100 hover:text-gray-700",children:e.activity_type})]})]})]})},e.id)))}):s("div",{className:"py-12 text-center",children:[n(ri,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),n("p",{className:"text-lg font-medium text-gray-700 mb-1",children:"No activity logs found"}),n("p",{className:"text-gray-500 text-sm",children:l||"all"!==a||"all"!==i?"Try adjusting your filters to see more results":"Security activity will appear here when users perform actions"})]})})}),y&&d.length>=e&&n("div",{className:"flex justify-center mt-4",children:s(Ds,{variant:"outline",onClick:()=>t((e=>e+10)),className:"gap-2 bg-gradient-to-r from-white to-gray-50 hover:from-gray-50 hover:to-white border-gray-200 shadow-sm",children:[n(yn,{className:"h-4 w-4"}),"Load More Logs"]})})]})})]})},Tb=({application:e,onClose:t})=>{var a,r;const{toast:i}=xr(),o=E(),[l,c]=h(e.feedback||""),d=D({mutationFn:async({id:t,status:a,feedback:r})=>{var n;console.log(`Updating application ${t} to status: ${a} with feedback: ${r}`);try{if("adoption"===e.application_type){const{data:e,error:n}=await supabase.from("adoption_applications").update({status:a.charAt(0).toUpperCase()+a.slice(1),notes:r,reviewed_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",t).select();if(!n)return e;console.log("Could not update adoption_applications, falling back to applications table")}const{data:i,error:s}=await supabase.rpc("update_application_status",{p_application_id:t,p_status:a,p_feedback:r});if(s){console.error("Error updating application status with RPC:",s);const{data:e,error:i}=await supabase.from("applications").update({status:a,feedback:r,reviewed_at:(new Date).toISOString(),reviewer_id:null==(n=(await xt().auth.getUser()).data.user)?void 0:n.id,updated_at:(new Date).toISOString()}).eq("id",t).select();if(i)throw i;return e}return i}catch(i){throw console.error("Error in application status update:",i),i}},onSuccess:()=>{o.invalidateQueries({queryKey:["admin-applications"]}),i({title:"Application Updated",description:"The application status has been updated successfully."}),t()},onError:e=>{console.error("Error in updateApplicationStatus mutation:",e),i({title:"Error",description:e.message||"Failed to update application",variant:"destructive"})}}),m=t=>{d.mutate({id:e.id,status:t,feedback:l})};return n(dm,{open:!0,onOpenChange:t,children:s(pm,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[s(gm,{children:[s(ym,{children:[e.application_type.toUpperCase()," Application"]}),s(vm,{children:["Submitted on ",new Date(e.created_at).toLocaleDateString()," by ",e.form_data.firstName||(null==(a=e.profiles)?void 0:a.first_name)," ",e.form_data.lastName||(null==(r=e.profiles)?void 0:r.last_name)]})]}),n("div",{className:"grid gap-4 py-4",children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s("div",{children:[n("h3",{className:"text-lg font-semibold mb-4",children:"Applicant Information"}),(()=>{const t=e.form_data;return Object.entries(t).map((([e,t])=>{if(e.startsWith("_")||null===t||""===t)return null;const a=e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase()));return s("div",{className:"mb-4",children:[n("h4",{className:"text-sm font-medium text-gray-700",children:a}),n("p",{className:"mt-1 text-sm text-gray-900",children:t})]},e)}))})()]}),s("div",{children:[n("h3",{className:"text-lg font-semibold mb-4",children:"Application Review"}),s("div",{className:"mb-4",children:[n("h4",{className:"text-sm font-medium text-gray-700",children:"Current Status"}),n("p",{className:"mt-1 text-sm font-medium",children:n("span",{className:"px-2 py-1 rounded-full text-xs "+("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"in-review"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.status.toUpperCase()})})]}),s("div",{className:"mb-4",children:[n("h4",{className:"text-sm font-medium text-gray-700",children:"Feedback"}),n(cu,{className:"mt-1",placeholder:"Enter feedback or notes about this application",value:l,onChange:e=>c(e.target.value),rows:5})]})]})]})}),s(fm,{className:"flex-col sm:flex-row gap-2",children:[n(Ds,{variant:"outline",onClick:t,children:"Cancel"}),s("div",{className:"flex gap-2",children:[n(Ds,{variant:"destructive",onClick:()=>m("rejected"),disabled:"rejected"===e.status,children:"Reject"}),n(Ds,{variant:"outline",onClick:()=>m("in-review"),disabled:"in-review"===e.status,children:"Mark as In Review"}),n(Ds,{variant:"default",onClick:()=>m("approved"),disabled:"approved"===e.status,children:"Approve"})]})]})]})})},Rb=()=>{const[e,t]=h("all"),[a,r]=h(null),{toast:o}=xr(),{data:l,isLoading:c,error:d,refetch:m}=S({queryKey:["admin-applications"],queryFn:async()=>{console.log("Fetching applications data...");let e=[];try{const{data:t,error:a}=await supabase.from("adoption_applications").select("\n            *,\n            profiles:applicant_profile_id (\n              email,\n              first_name,\n              last_name\n            ),\n            cats:cat_id (\n              name\n            )\n          ").order("created_at",{ascending:!1});if(a)throw console.error("Error fetching adoption applications:",a),a;if(t&&t.length>0){console.log("Adoption applications data received:",t);const a=t.map((e=>{var t;return{id:e.id,user_id:e.applicant_profile_id,applicant_id:e.applicant_profile_id,application_type:"adoption",status:"string"==typeof e.status?e.status.toLowerCase():"pending",form_data:{...e.applicant_details||{},catName:(null==(t=e.cats)?void 0:t.name)||"Unknown"},created_at:e.created_at,updated_at:e.updated_at,reviewed_at:e.reviewed_at,reviewer_id:null,feedback:e.notes,profiles:e.profiles}}));e=[...e,...a]}else console.log("No adoption applications found");const{data:r,error:n}=await supabase.from("applications").select("\n            *,\n            profiles:applicant_id (\n              email,\n              first_name,\n              last_name\n            )\n          ").eq("application_type","foster").order("created_at",{ascending:!1});if(n)throw console.error("Error fetching foster applications:",n),n;r&&r.length>0?(console.log("Foster applications data received:",r),e=[...e,...r]):console.log("No foster applications found");const{data:i,error:s}=await supabase.from("applications").select("\n            *,\n            profiles:applicant_id (\n              email,\n              first_name,\n              last_name\n            )\n          ").eq("application_type","volunteer").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching volunteer applications:",s),s;i&&i.length>0?(console.log("Volunteer applications data received:",i),e=[...e,...i]):console.log("No volunteer applications found");const{data:l,error:c}=await supabase.from("applications").select("\n            *,\n            profiles:applicant_id (\n              email,\n              first_name,\n              last_name\n            )\n          ").not("application_type","in",'("foster","volunteer")').order("created_at",{ascending:!1});if(c)throw console.error("Error fetching other applications:",c),c;return l&&l.length>0&&(console.log("Other applications data received:",l),e=[...e,...l]),0===e.length?(console.warn("No applications found in any table."),o({title:"No Applications Found",description:"No applications were found in the database. This might be due to a connection issue.",variant:"destructive"})):console.log(`Total of ${e.length} applications loaded:`,e),e}catch(t){throw console.error("Error fetching applications:",t),o({title:"Error Loading Applications",description:t.message||"There was an error loading applications",variant:"destructive"}),t}}});p((()=>{l&&console.log(`${l.length} total applications loaded:`,l)}),[l]);const u=null==l?void 0:l.filter((t=>"all"===e||("adoption"===e?"adoption"===t.application_type:"foster"===e?"foster"===t.application_type:"volunteer"===e?"volunteer"===t.application_type:"pending"===e?"pending"===t.status||"submitted"===t.status:"in-review"===e?"in-review"===t.status:"approved"===e?"approved"===t.status:"rejected"!==e||"rejected"===t.status))),g={all:(null==l?void 0:l.length)||0,adoption:(null==l?void 0:l.filter((e=>"adoption"===e.application_type)).length)||0,foster:(null==l?void 0:l.filter((e=>"foster"===e.application_type)).length)||0,volunteer:(null==l?void 0:l.filter((e=>"volunteer"===e.application_type)).length)||0,pending:(null==l?void 0:l.filter((e=>"pending"===e.status||"submitted"===e.status)).length)||0,"in-review":(null==l?void 0:l.filter((e=>"in-review"===e.status)).length)||0,approved:(null==l?void 0:l.filter((e=>"approved"===e.status)).length)||0,rejected:(null==l?void 0:l.filter((e=>"rejected"===e.status)).length)||0},f=e=>{switch(e.toLowerCase()){case"pending":case"submitted":return n(Wc,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Pending"});case"in-review":return n(Wc,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"In Review"});case"approved":return n(Wc,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Approved"});case"rejected":return n(Wc,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Rejected"});default:return n(Wc,{variant:"outline",children:e})}};return s(ng,{title:"Applications",children:[n($c,{title:"Applications | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10 mt-16 sm:mt-0",children:[" ",s("div",{className:"flex justify-between items-center mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Application Management"}),n(Ds,{variant:"outline",onClick:()=>m(),children:"Refresh Applications"})]}),s(Bm,{defaultValue:"all",value:e,onValueChange:t,children:[s("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[s(Hm,{className:"mr-auto",children:[s(Km,{value:"all",children:["All",n("span",{className:"ml-2 bg-gray-100 text-gray-700 px-2 py-0.5 text-xs rounded-full",children:g.all})]}),s(Km,{value:"adoption",children:["Adoption",n("span",{className:"ml-2 bg-gray-100 text-gray-700 px-2 py-0.5 text-xs rounded-full",children:g.adoption})]}),s(Km,{value:"foster",children:["Foster",n("span",{className:"ml-2 bg-gray-100 text-gray-700 px-2 py-0.5 text-xs rounded-full",children:g.foster})]}),s(Km,{value:"volunteer",children:["Volunteer",n("span",{className:"ml-2 bg-gray-100 text-gray-700 px-2 py-0.5 text-xs rounded-full",children:g.volunteer})]})]}),s(Hm,{children:[s(Km,{value:"pending",children:["Pending",n("span",{className:"ml-2 bg-yellow-100 text-yellow-700 px-2 py-0.5 text-xs rounded-full",children:g.pending})]}),s(Km,{value:"in-review",children:["In Review",n("span",{className:"ml-2 bg-blue-100 text-blue-700 px-2 py-0.5 text-xs rounded-full",children:g["in-review"]})]}),s(Km,{value:"approved",children:["Approved",n("span",{className:"ml-2 bg-green-100 text-green-700 px-2 py-0.5 text-xs rounded-full",children:g.approved})]}),s(Km,{value:"rejected",children:["Rejected",n("span",{className:"ml-2 bg-red-100 text-red-700 px-2 py-0.5 text-xs rounded-full",children:g.rejected})]})]})]}),n(Wm,{value:e,children:c?n("div",{className:"flex justify-center py-10",children:n("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-meow-primary"})}):d?n(wm,{children:s(_m,{className:"py-10 text-center",children:[n(ri,{className:"h-12 w-12 text-red-300 mx-auto mb-3"}),n("p",{className:"text-red-500",children:"Error loading applications. Please try again."}),n("p",{className:"text-gray-500 text-sm mt-2",children:d.message})]})}):u&&u.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((e=>{var t,a,i,o,l,c,d,m;return s(wm,{className:`\n                    ${"approved"===e.status?"border-green-300 bg-green-50":""}\n                    ${"rejected"===e.status?"border-red-300 bg-red-50":""}\n                  `,children:[n(xm,{className:"pb-2",children:s("div",{className:"flex justify-between items-start",children:[s("div",{children:[s("div",{className:"flex items-center mb-1",children:["approved"===e.status&&n(Un,{className:"h-4 w-4 text-green-600 mr-1"}),"rejected"===e.status&&n(Bn,{className:"h-4 w-4 text-red-600 mr-1"}),s(Nm,{className:"text-lg capitalize",children:[e.application_type," Application",(null==(t=e.form_data)?void 0:t.catName)&&s("span",{className:"text-sm font-normal ml-1",children:["for ",e.form_data.catName]})]})]}),s(Cm,{children:["Submitted ",ce(new Date(e.created_at),{addSuffix:!0})]})]}),f(e.status)]})}),n(_m,{className:"pb-2",children:s("div",{className:"space-y-2",children:[s("div",{className:"flex items-center text-sm",children:[n(rs,{className:"h-4 w-4 mr-2 text-gray-500"}),s("span",{children:[(null==(a=e.form_data)?void 0:a.firstName)||(null==(i=e.profiles)?void 0:i.first_name)||""," ",(null==(o=e.form_data)?void 0:o.lastName)||(null==(l=e.profiles)?void 0:l.last_name)||""]})]}),s("div",{className:"flex items-center text-sm",children:[n(xi,{className:"h-4 w-4 mr-2 text-gray-500"}),n("span",{children:(null==(c=e.form_data)?void 0:c.email)||(null==(d=e.profiles)?void 0:d.email)||""})]}),(null==(m=e.form_data)?void 0:m.phone)&&s("div",{className:"flex items-center text-sm",children:[n(Ri,{className:"h-4 w-4 mr-2 text-gray-500"}),n("span",{children:e.form_data.phone})]}),e.reviewed_at&&s("div",{className:"flex items-center text-sm",children:[n(An,{className:"h-4 w-4 mr-2 text-gray-500"}),s("span",{children:["Reviewed on ",le(new Date(e.reviewed_at),"MMM d, yyyy")]})]})]})}),n(km,{children:s(Ds,{variant:"outline",className:"w-full mt-2",onClick:()=>r(e),children:[n(ri,{className:"h-4 w-4 mr-2"}),"View Application"]})})]},e.id)}))}):n(wm,{children:n(_m,{className:"py-10 text-center",children:l&&l.length>0?s(i,{children:[n($n,{className:"h-12 w-12 text-yellow-300 mx-auto mb-3"}),n("p",{className:"text-gray-500",children:"No applications found in this category."}),s("p",{className:"text-gray-400 text-sm mt-2",children:["There are ",l.length," total applications, but none match the current filter."]})]}):s(i,{children:[n(ri,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),n("p",{className:"text-gray-500",children:"No applications found."}),n("p",{className:"text-gray-400 text-sm mt-2",children:"No applications were found in the database. This could be because no applications have been submitted yet, or there may be an issue with the database connection."})]})})})})]})]}),a&&n(dm,{open:!!a,onOpenChange:e=>!e&&r(null),children:s(pm,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n(gm,{children:s(ym,{className:"text-xl",children:[a.application_type.charAt(0).toUpperCase()+a.application_type.slice(1)," Application"]})}),n(Tb,{application:a,onClose:()=>r(null)})]})})]})},Fb=()=>{const[e,t]=h(15);E();const{data:a,isLoading:r,refetch:o}=S({queryKey:["successStories"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("success_stories").select("*, cats(name, photos_urls)").order("created_at",{ascending:!1});if(t)throw t;return e||[]}});p((()=>{const e=supabase.channel("success-stories-updates").on("postgres_changes",{event:"*",schema:"public",table:"success_stories"},(e=>{console.log("Success story update received:",e),o()})).subscribe();return()=>{e.unsubscribe()}}),[o]);const l=(null==a?void 0:a.slice(0,e))||[],c=a&&e<a.length;return s(jc,{children:[n($c,{title:"Success Stories | Meow Rescue",description:"Read heartwarming stories of cats who found their forever homes through Meow Rescue."}),n(id,{title:"Success Stories",subtitle:"Heartwarming tales of cats who found their forever homes"}),n("div",{className:"container mx-auto px-4 py-16",children:r?n("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[...Array(6)].map(((e,t)=>n("div",{className:"bg-white rounded-lg min-h-[265px] shadow-md"},t)))}):l&&l.length>0?s(i,{children:[n("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.map((e=>{var t,a;return n(td,{photo_url:e.photo_url||(null==(t=e.cats)?void 0:t.photos_urls)&&e.cats.photos_urls[0],cat_name:null==(a=e.cats)?void 0:a.name,adoption_date:e.adoption_date,story_text:e.story_text},e.id)}))}),c&&n("div",{className:"flex justify-center mt-12",children:s(Ds,{onClick:()=>{t((e=>e+15))},variant:"outline",className:"border-meow-primary text-meow-primary hover:bg-meow-primary/10 flex items-center gap-2",children:["Load More Stories",n(In,{className:"h-4 w-4"})]})})]}):n("div",{className:"text-center py-12",children:n("p",{className:"text-lg text-gray-500",children:"No success stories found yet. Check back soon for heartwarming adoption tales!"})})})]})},Lb=({summary:e,summaryLoading:t})=>s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s(wm,{className:"shadow-md border-t-4 border-t-green-500",children:[n(xm,{className:"pb-2",children:s(Nm,{className:"text-lg flex items-center",children:[n(Gn,{className:"h-5 w-5 mr-2 text-green-500"}),"Total Income (YTD)"]})}),n(_m,{children:n("div",t?{className:"h-10 bg-gray-200 animate-pulse rounded-md"}:{className:"text-3xl font-bold text-green-600",children:dr((null==e?void 0:e.totalIncome)||0)})})]}),s(wm,{className:"shadow-md border-t-4 border-t-red-500",children:[n(xm,{className:"pb-2",children:s(Nm,{className:"text-lg flex items-center",children:[n(Gn,{className:"h-5 w-5 mr-2 text-red-500"}),"Total Expenses"]})}),n(_m,{children:n("div",t?{className:"h-10 bg-gray-200 animate-pulse rounded-md"}:{className:"text-3xl font-bold text-red-600",children:dr((null==e?void 0:e.totalExpenses)||0)})})]}),s(wm,{className:"shadow-md border-t-4 border-t-blue-500",children:[n(xm,{className:"pb-2",children:s(Nm,{className:"text-lg flex items-center",children:[e&&e.netBalance>=0?n(Nn,{className:"h-5 w-5 mr-2 text-green-500"}):n(yn,{className:"h-5 w-5 mr-2 text-red-500"}),"Net Balance"]})}),n(_m,{children:t?n("div",{className:"h-10 bg-gray-200 animate-pulse rounded-md"}):s("div",{className:"text-3xl font-bold "+(e&&e.netBalance>=0?"text-green-600":"text-red-600"),children:[dr((null==e?void 0:e.netBalance)||0),e&&s("span",{className:"text-sm ml-2 font-normal",children:["(",e.percentChange>=0?"+":"",e.percentChange,"%)"]})]})})]})]});var Ib="Progress",qb=100,[Ob,jb]=Ft(Ib),[$b,zb]=Ob(Ib),Ub=c.forwardRef(((e,t)=>{const{__scopeProgress:a,value:r=null,max:i,getValueLabel:s=Hb,...o}=e;!i&&0!==i||Yb(i)||console.error(`Invalid prop \`max\` of value \`${`${i}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const l=Yb(i)?i:qb;null===r||Gb(r,l)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${r}`,"Progress"));const c=Gb(r,l)?r:null,d=Wb(c)?s(c,l):void 0;return n($b,{scope:a,value:c,max:l,children:n(Ut.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Wb(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Kb(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})}));Ub.displayName=Ib;var Vb="ProgressIndicator",Bb=c.forwardRef(((e,t)=>{const{__scopeProgress:a,...r}=e,i=zb(Vb,a);return n(Ut.div,{"data-state":Kb(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})}));function Hb(e,t){return`${Math.round(e/t*100)}%`}function Kb(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Wb(e){return"number"==typeof e}function Yb(e){return Wb(e)&&!isNaN(e)&&e>0}function Gb(e,t){return Wb(e)&&!isNaN(e)&&e<=t&&e>=0}Bb.displayName=Vb;var Qb=Ub,Xb=Bb;const Zb=c.forwardRef((({className:e,value:t,barColor:a="#004080",trackColor:r="#e6eff7",...i},s)=>n(Qb,{ref:s,className:cr("relative h-3 w-full overflow-hidden rounded-full",e),style:{background:r},...i,children:n(Xb,{className:"h-full rounded-full transition-all",style:{width:`${t||0}%`,background:a,minWidth:void 0!==t?4:void 0}})})));Zb.displayName=Qb.displayName;const Jb="#004080",ew=({totalTarget:e,totalRaised:t,percentComplete:a,isLoading:r,year:o})=>{const l=bs(),c=e>0?t/e*100:0,d=Number.isNaN(c)?"0.00":c.toFixed(2),m=t>0?Math.max(.25,c):0;return console.log("Fundraising goal data:",{totalTarget:e,totalRaised:t,percentComplete:c}),n("div",{className:"max-w-5xl w-full mx-auto",children:s(wm,{className:"shadow-md mb-6 w-full bg-[#f7fafd] border border-[#e7f0f7] rounded-2xl p-0 overflow-hidden",children:[n(xm,{className:"bg-[#0C3878] text-white rounded-t-lg py-4 px-6",children:n(Nm,{className:"text-2xl font-serif font-bold",children:`Overall ${o} Fundraising Goal`})}),n(_m,{className:"px-4 sm:px-8 py-6",children:r?s("div",{className:"space-y-4",children:[n("div",{className:"h-10 bg-gray-200 animate-pulse rounded-md"}),n("div",{className:"h-6 bg-gray-200 animate-pulse rounded-md"})]}):s(i,{children:[s("div",{className:`flex flex-col ${l?"items-center gap-y-3":"md:flex-row justify-between items-center"} mb-4`,children:[s("div",{className:"flex flex-col md:flex-row md:items-end gap-x-2 items-center",children:[n("span",{className:"text-2xl md:text-3xl font-bold text-[#004080] font-sans leading-tight",children:dr(t)}),s("span",{className:"text-base md:text-lg font-semibold text-gray-500 ml-1",children:["raised of",n("span",{className:"font-bold text-[#193f6d] ml-2",children:dr(e)}),n("span",{className:"font-normal",children:"goal"})]})]}),n("div",{className:"md:pr-0 "+(l?"mt-2":"mt-4 md:mt-0"),children:s("span",{className:"px-4 py-1 rounded-full text-base md:text-lg font-bold font-sans",style:{background:"#e6eff7",color:Jb},children:[d,"% Complete"]})})]}),n("div",{className:"relative w-full h-12 md:h-10 mb-4",children:n(Zb,{value:m,max:100,className:"h-12 md:h-10 rounded-full bg-[#e6eff7]",barColor:Jb,trackColor:"#e6eff7"})}),n("div",{className:"mt-3 text-center text-sm text-[#4B5460] font-sans font-medium",children:"Help us reach our goal by donating today or supporting one of our specific campaigns below!"})]})})]})})},tw=({totalBudget:e,totalIncome:t,totalExpenses:a,monthlyIncome:r,monthlyExpenses:i,previousMonthIncome:o,previousMonthExpenses:l,isLoading:c})=>{const d=(new Date).getFullYear(),m=vg((t||0)-(a||0),(o||0)-(l||0)),u=e||0,h=u>0?(t||0)/u*100:0,p={totalIncome:t||0,totalExpenses:a||0,netBalance:(t||0)-(a||0),percentChange:Math.round(10*m)/10};return s("div",{className:"mb-8 w-full",children:[n(ew,{totalTarget:e,totalRaised:t,percentComplete:h,isLoading:c.totalBudget||c.totalIncome,year:d}),s("div",{className:"mb-8 w-full",children:[n("h2",{className:"text-xl font-semibold mb-4 text-meow-primary text-center md:text-left font-serif",children:"Financial Summary"}),n(Lb,{summary:p,summaryLoading:c.monthlyIncome||c.monthlyExpenses})]})]})};const aw=({budgetCategories:e,budgetLoading:t})=>{bs(),p((()=>{console.log("Budget Categories component received:",e)}),[e]);const a=[...Array.isArray(e)?e.filter((e=>e&&"object"==typeof e&&e.name)):[]].sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>{return{...e,name:(t=e.name,t.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))),spent:e.spent||e.amountSpent||0,amountSpent:e.spent||e.amountSpent||0,budgetAmount:e.amount||e.budgetAmount||0,percentUsed:e.percentUsed||0};var t}));return n("div",{className:"max-w-5xl mx-auto w-full",children:s(wm,{className:"w-full bg-[#f7fafd] border border-[#e7f0f7] shadow-sm rounded-2xl p-0",children:[n("div",{className:"border-b border-[#dde6ef] bg-[#f1f6fb] rounded-t-2xl px-4 sm:px-6 py-3",children:n("span",{className:"text-xl font-semibold text-[#004080] font-serif",children:"Budget vs. Actual Spending"})}),n("div",{className:"py-2 px-1 sm:px-6",children:t?n("div",{className:"space-y-4 py-6",children:[...Array(5)].map(((e,t)=>n("div",{className:"h-16 bg-gray-100 animate-pulse rounded-xl"},t)))}):0===a.length?n("div",{className:"p-6 text-center rounded-xl bg-white text-gray-500",children:"No budget categories found."}):n("div",{className:"flex flex-col gap-4 py-4",children:a.map((e=>s("div",{className:"bg-white rounded-xl px-3 sm:px-6 py-3 flex flex-col md:flex-row md:items-center justify-between shadow-sm",style:{border:"none"},children:[n("div",{className:"font-semibold text-base md:text-lg text-[#193f6d] mb-2 md:mb-0 md:w-1/3",children:e.name}),n("div",{className:"flex-1 flex flex-col gap-2 justify-center",children:n(Zb,{value:Math.min(e.percentUsed||0,100),max:100,barColor:"#004080",trackColor:"#e6eff7",className:"h-3 rounded-full bg-[#e6eff7] w-full"})}),s("div",{className:"flex flex-col items-end md:pl-6 mt-2 md:mt-0 min-w-[110px]",children:[s("span",{className:"text-gray-700 font-semibold text-right text-sm",children:[dr(e.amountSpent||0)," ",n("span",{className:"text-gray-400 font-normal",children:"of"})," ",dr(e.budgetAmount||0)]}),n("span",{className:"text-[#fff] bg-[#004080] rounded-lg px-3 py-1 mt-1 text-sm font-bold shadow-sm",style:{minWidth:42,textAlign:"center"},children:"number"==typeof e.percentUsed?`${Math.min(Math.round(10*e.percentUsed)/10,100)}%`:"0%"})]})]},e.id||e.name)))})})]})})},rw=({campaigns:e,campaignsLoading:t,onDonate:a})=>s(wm,{className:"shadow-md",children:[n(xm,{className:"pb-2 border-b",children:n(Nm,{className:"text-xl text-meow-primary",children:"Current Fundraising Campaigns"})}),n(_m,{className:"pt-6",children:t?n("div",{className:"space-y-6",children:[...Array(3)].map(((e,t)=>n("div",{className:"h-32 bg-gray-200 animate-pulse rounded-md"},t)))}):e&&e.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((e=>s(wm,{className:"overflow-hidden border-t-4 border-t-meow-primary",children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg",children:e.name})}),s(_m,{className:"space-y-4",children:[n("p",{className:"text-sm text-gray-600",children:e.description}),s("div",{children:[s("div",{className:"flex justify-between mb-1 text-sm",children:[s("span",{children:[dr(e.amountRaised)," raised"]}),s("span",{className:"font-medium",children:[e.percentComplete,"%"]})]}),n("div",{className:"h-6 relative",children:n(Zb,{value:e.percentComplete,max:100,className:"h-3"})}),s("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[s("span",{children:["Goal: ",dr(e.targetAmount)]}),e.endDate&&s("span",{children:["Ends: ",new Date(e.endDate).toLocaleDateString()]})]}),e.assignedBudgetCategory&&s("div",{className:"mt-2 text-xs text-meow-primary",children:["Applies to: ",n("span",{className:"font-semibold",children:e.assignedBudgetCategory})]})]})]}),n(km,{className:"bg-gray-50 pb-4 pt-3 px-6",children:n("button",{onClick:()=>a(e.id,e.assignedBudgetCategory),className:"w-full py-2 bg-meow-primary text-white rounded-md hover:bg-meow-primary/90 transition-colors",children:"Donate to this Campaign"})})]},e.id)))}):s("div",{className:"text-center text-gray-500 py-8 bg-gray-50 rounded-lg",children:[n("p",{children:"No active fundraising campaigns."}),n("p",{className:"text-sm mt-2",children:"Check back soon for upcoming fundraising initiatives!"})]})})]}),nw=({donors:e,loading:t,showPosition:a=!1})=>(console.log("DonorsTable rendering with data:",e),t?n("div",{className:"h-52 bg-gray-200 animate-pulse rounded-md"}):(null==e?void 0:e.length)?n("div",{className:"overflow-x-auto",children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,a?{children:"Position"}:{children:"Date"}),n(Eg,{children:"Donor"}),n(Eg,{children:"Amount"})]})}),n(kg,{children:e.map(((e,t)=>{const r=e.isAnonymous||e.is_anonymous?"Anonymous Donor":e.name;return s(Sg,{className:"hover:bg-gray-50 cursor-pointer",children:[n(Dg,{className:"font-medium",children:a?e.position:e.date}),n(Dg,{children:r}),n(Dg,{children:dr(e.amount)})]},t)}))})]})}):s("div",{className:"text-center text-gray-500 py-8 bg-gray-50 rounded-lg",children:[n("p",{children:"No donation records found."}),n("p",{className:"text-sm mt-2",children:"Donations will appear here once they are recorded in the system."})]})),iw=({recentDonors:e,donorsLoading:t,topDonors:a,topDonorsLoading:r})=>(console.log("DonorWall rendering with recent donors:",e),console.log("DonorWall rendering with top donors:",a),s(wm,{className:"shadow-md",children:[n(xm,{className:"pb-2 border-b flex flex-row items-center justify-between gap-2",children:n(Nm,{className:"text-xl text-meow-primary",children:"Donation Records"})}),n(_m,{className:"pt-6",children:s(Bm,{defaultValue:"recent",children:[s(Hm,{className:"grid w-full grid-cols-2 mb-4",children:[n(Km,{value:"recent",children:"Recent Donors"}),n(Km,{value:"top",children:"Top Donors"})]}),n(Wm,{value:"recent",children:n(nw,{donors:e,loading:t,showPosition:!1})}),n(Wm,{value:"top",children:n(nw,{donors:a,loading:r,showPosition:!0})})]})})]})),sw=({activeTab:e,setActiveTab:t,budgetCategories:a,campaigns:r,recentDonors:i,topDonors:o,expenses:l,isLoading:c,onDonate:d,"data-realtime":m})=>{const u="undefined"!=typeof window;return p((()=>{if(u){const t=document.getElementById(`tab-${e}`);t&&t.classList.remove("hidden")}}),[e,u]),n("div",{className:"mb-8 w-full","data-realtime":m,children:s(Bm,{defaultValue:"summary",value:e,onValueChange:e=>{if(t(e),u){document.querySelectorAll('[data-tab-content="financial-tabs"]').forEach((t=>{t.getAttribute("id")===`tab-${e}`?t.classList.remove("hidden"):t.classList.add("hidden")}))}},className:"w-full",children:[n("div",{className:"bg-white p-1 rounded-lg border shadow-sm mb-4",children:s(Hm,{className:"w-full grid grid-cols-2 sm:grid-cols-4 gap-1",children:[n(Km,{value:"summary",className:"text-sm","data-tab-toggle":"tab-summary","data-tab-group":"financial-tabs",children:"Budget"}),n(Km,{value:"campaigns",className:"text-sm","data-tab-toggle":"tab-campaigns","data-tab-group":"financial-tabs",children:"Fundraising"}),n(Km,{value:"donors",className:"text-sm","data-tab-toggle":"tab-donors","data-tab-group":"financial-tabs",children:"Donors"}),n(Km,{value:"expenses",className:"text-sm","data-tab-toggle":"tab-expenses","data-tab-group":"financial-tabs",children:"Expenses"})]})}),s("div",{className:"mt-4 w-full",children:[n(Wm,{value:"summary",className:"mt-0 w-full",id:"tab-summary","data-tab-content":"financial-tabs",children:n(aw,{budgetCategories:a,budgetLoading:c.budgetCategories})}),n(Wm,{value:"campaigns",className:"mt-0 w-full",id:"tab-campaigns","data-tab-content":"financial-tabs",children:n(rw,{campaigns:r,campaignsLoading:c.campaigns,onDonate:d})}),n(Wm,{value:"donors",className:"mt-0 w-full",id:"tab-donors","data-tab-content":"financial-tabs",children:n(iw,{recentDonors:i,donorsLoading:c.donorsLoading,topDonors:o,topDonorsLoading:c.topDonorsLoading})}),n(Wm,{value:"expenses",className:"mt-0 w-full",id:"tab-expenses","data-tab-content":"financial-tabs",children:n(_v,{expenses:l,expensesLoading:c.expensesLoading})})]})]})})},ow=e=>[...e].sort(((e,t)=>{const a=e=>{let t=Date.parse(e);if(!isNaN(t))return t;const a=e.match(/(\d{1,2})-(\d{1,2})-(\d{4})(?:[ T](\d{1,2}):(\d{2})(?::(\d{2}))?)?/);if(a){const[e,t,r,n,i,s,o]=a;return Date.UTC(Number(n),Number(t)-1,Number(r),i?Number(i):0,s?Number(s):0,o?Number(o):0)}return 0};return a(t.date)-a(e.date)})).map((e=>{const t=(e=>{let t=e;try{let a=new Date(e);if(isNaN(a.getTime())){const t=e.split("-");if(3===t.length){const e=parseInt(t[0]),r=parseInt(t[1]),n=parseInt(t[2]);if(isNaN(e)||isNaN(r)||isNaN(n)){const e=parseInt(t[0]),r=parseInt(t[1]),n=parseInt(t[2]);isNaN(r)||isNaN(n)||isNaN(e)||(a=new Date(e,r-1,n))}else a=new Date(n,e-1,r)}else{const t=e.split("/");if(3===t.length){const e=parseInt(t[0]),r=parseInt(t[1]),n=parseInt(t[2]);isNaN(e)||isNaN(r)||isNaN(n)||(a=new Date(n,e-1,r))}}}if(a&&!isNaN(a.getTime())){const e=String(a.getMonth()+1).padStart(2,"0");t=`${e}/${String(a.getDate()).padStart(2,"0")}/${a.getFullYear()}`}}catch(a){console.error("Error formatting date:",a)}return t})(e.date);return{...e,date:t,isAnonymous:e.is_anonymous}})),lw=e=>{const t=e%10,a=e%100;return 1==t&&11!=a?e+"st":2==t&&12!=a?e+"nd":3==t&&13!=a?e+"rd":e+"th"},cw=()=>{const[e,t]=h("summary"),[a,r]=h(10),i=Z(),{financialStats:o}=yg(),[l,c]=h(!1),{data:d=[],isLoading:m}=(e=>{const t=(null==e?void 0:e.limit)||10;return S({queryKey:["recent-donors",t],queryFn:async()=>{try{console.log("Fetching recent donors...");const e=xt(),{data:a,error:r}=await e.rpc("get_recent_donors",{limit_count:t});if(r){console.error("Error fetching recent donors with RPC:",r),console.log("Attempting fallback query for recent donors...");const{data:a,error:n}=await e.from("donations").select("id, name, amount, donation_date, is_anonymous").eq("status","completed").order("donation_date",{ascending:!1}).limit(t);if(n)throw console.error("Fallback query also failed:",n),new Error("Failed to fetch recent donors: "+r.message);if(!a||0===a.length)return console.log("No recent donors found in fallback query"),[];console.log("Got recent donors from fallback query:",a);const i=a.map((e=>({name:e.name,amount:e.amount,date:e.donation_date,is_anonymous:e.is_anonymous})));return ow(i)}return a&&0!==a.length?(console.log("Recent donors data received from RPC:",a),ow(a)):(console.log("No recent donors found from RPC"),[])}catch(e){throw console.error("Error in useRecentDonors:",e),e}},refetchInterval:15e3,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,...e})})({limit:a}),{data:u=[],isLoading:g}=(e=>{const t=(null==e?void 0:e.limit)||10;return S({queryKey:["top-donors",t],queryFn:async()=>{try{console.log("Fetching top donors...");const{data:e,error:a}=await xt().rpc("get_top_donors",{limit_count:t});if(a)throw console.error("Error fetching top donors:",a),new Error(a.message);return console.log("Top donors data received:",e),(e||[]).map(((e,t)=>{const a=lw(t+1);return{...e,position:a,isAnonymous:e.is_anonymous}}))}catch(e){throw console.error("Error in useTopDonors:",e),e}},...e})})({limit:a}),{data:f=[],isLoading:y}=Jy();p((()=>{c(!0)}),[]),p((()=>{"undefined"!=typeof window&&(async()=>{try{const e=await Nt();if(console.log("Supabase connection status on Financial Transparency page:",e),!e.connected)return void Y.error("Unable to connect to the database. Some data may not be available.");const t=await(async()=>{try{console.log("Checking financial data availability...");const e=xt(),{data:t,error:a}=await e.from("donations").select("id, amount, donation_date").limit(5);a?console.error("Error checking donations:",a):console.log("Sample donations:",t);const{data:r,error:n}=await e.from("expenses").select("id, amount, expense_date, category").limit(5);n?console.error("Error checking expenses:",n):console.log("Sample expenses:",r);const{data:i,error:s}=await e.from("budget_categories").select("id, name, amount, year").limit(5);return s?console.error("Error checking budgets:",s):console.log("Sample budgets:",i),{donations:t||[],expenses:r||[],budgets:i||[]}}catch(e){return console.error("Error checking financial data:",e),{donations:[],expenses:[],budgets:[]}}})();console.log("Financial data sample:",t),t.donations.length||t.expenses.length||t.budgets.length||console.warn("No financial data found in the database")}catch(e){console.error("Error initializing financial transparency page:",e)}})()}),[]),p((()=>{if("undefined"==typeof window)return;console.log("Setting up real-time subscription for financial data");const e=xt().channel("financial-data-updates").on("postgres_changes",{event:"*",schema:"public",table:"donations"},(e=>{console.log("Donation update received:",e)})).on("postgres_changes",{event:"*",schema:"public",table:"expenses"},(e=>{console.log("Expense update received:",e)})).subscribe();return document.querySelectorAll("[data-realtime]").forEach((e=>{e.setAttribute("data-initialized","true")})),()=>{console.log("Unsubscribing from financial data updates"),e.unsubscribe()}}),[l]);return p((()=>{"undefined"!=typeof window&&console.log("Financial Transparency Render Data:",{totalBudget:o.totalBudget,totalDonations:o.totalIncome,totalExpenses:o.totalExpenses,netBalance:o.totalIncome-o.totalExpenses,isLoading:{totalBudget:o.isLoading.totalBudget,totalDonations:o.isLoading.totalIncome,totalExpenses:o.isLoading.totalExpenses},isHydrated:l})}),[o,l]),s(jc,{children:[n($c,{title:"Financial Transparency | Meow Rescue"}),n(id,{title:"Financial Transparency",subtitle:"At Meow Rescue, we believe in complete transparency with our finances. This dashboard shows real-time data on our donations, expenses, and how funds are used to help cats in our care."}),n("div",{className:"container mx-auto py-8 px-2 sm:px-4",children:s("div",{className:"max-w-5xl mx-auto flex flex-col w-full items-center",children:[n(tw,{"data-realtime":"financial-overview",totalBudget:o.totalBudget||0,totalIncome:o.totalIncome||0,totalExpenses:o.totalExpenses||0,monthlyIncome:o.monthlyIncome||0,monthlyExpenses:o.monthlyExpenses||0,previousMonthIncome:o.previousMonthIncome||0,previousMonthExpenses:o.previousMonthExpenses||0,isLoading:{monthlyIncome:o.isLoading.monthlyIncome,monthlyExpenses:o.isLoading.monthlyExpenses,previousMonthIncome:o.isLoading.previousMonthIncome,previousMonthExpenses:o.isLoading.previousMonthExpenses,totalBudget:o.isLoading.totalBudget,budgetCategories:!1,totalIncome:o.isLoading.totalIncome,campaigns:!1,totalExpenses:o.isLoading.totalExpenses}}),n(sw,{"data-realtime":"financial-tabs",activeTab:e,setActiveTab:t,budgetCategories:o.budgetCategories||[],campaigns:o.campaigns||[],recentDonors:d,topDonors:u,expenses:f,isLoading:{budgetCategories:o.isLoading.budgetCategories,campaigns:o.isLoading.campaigns,donorsLoading:m,topDonorsLoading:g,expensesLoading:y},onDonate:(e,t)=>{Y.success("Redirecting to donation page...");let a=`/donate?campaign=${e}`;t&&(a+=`&category=${encodeURIComponent(t)}`),i(a)}}),s("div",{className:"mt-8 border-t border-gray-200 pt-4 text-center text-sm text-gray-500 w-full",children:[s("p",{className:"flex items-center justify-center",children:[n(ui,{className:"h-4 w-4 mr-2"}),"This dashboard updates automatically with our financial records. Last updated: ",(new Date).toLocaleDateString()]}),!l&&n("p",{className:"text-xs mt-2 text-yellow-600",children:"Loading real-time data..."})]})]})})]})},dw=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(!1),[i,o]=h({name:"",description:"",category:"",unit:"",minimumQuantity:0}),{data:l,isLoading:c,error:d}=S({queryKey:["admin-supplies"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("supplies").select("*").order("name",{ascending:!0});if(t)throw t;return e}}),m=D({mutationFn:async e=>{const{data:t,error:a}=await xt().rpc("add_supply",{p_name:e.name,p_description:e.description,p_category:e.category,p_unit:e.unit,p_minimum_quantity:e.minimumQuantity});if(a)throw a;return t},onSuccess:()=>{e({title:"Supply Added",description:"New supply item created successfully."}),t.invalidateQueries({queryKey:["admin-supplies"]}),r(!1),o({name:"",description:"",category:"",unit:"",minimumQuantity:0})},onError:t=>{e({title:"Error",description:t.message||"Failed to add supply",variant:"destructive"})}});return c?n("div",{children:"Loading..."}):d?n("div",{children:"Error loading supplies"}):n(ng,{title:"Supplies Management",children:s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex justify-between items-center mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Supplies Inventory"}),s(Ds,{onClick:()=>r(!0),children:[n(Li,{className:"mr-2 h-4 w-4"})," Add Supply"]})]}),n(wm,{children:n(_m,{children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,{children:"Name"}),n(Eg,{children:"Category"}),n(Eg,{children:"Quantity"}),n(Eg,{children:"Unit"}),n(Eg,{children:"Min. Quantity"}),n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:null==l?void 0:l.map((e=>s(Sg,{children:[n(Dg,{children:e.name}),n(Dg,{children:e.category}),n(Dg,{children:e.quantity}),n(Dg,{children:e.unit}),n(Dg,{children:e.minimum_quantity}),n(Dg,{className:"text-right",children:s("div",{className:"flex justify-end gap-2",children:[n(Ds,{variant:"outline",size:"icon",title:"Edit",children:n(Ti,{className:"h-4 w-4"})}),n(Ds,{variant:"destructive",size:"icon",title:"Delete",children:n(Qi,{className:"h-4 w-4"})})]})})]},e.id)))})]})})}),n(dm,{open:a,onOpenChange:r,children:s(pm,{children:[s(gm,{children:[n(ym,{children:"Add New Supply"}),n(vm,{children:"Create a new supply item for tracking inventory."})]}),s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"name",className:"text-right",children:"Name"}),n(od,{id:"name",value:i.name,onChange:e=>o({...i,name:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"description",className:"text-right",children:"Description"}),n(od,{id:"description",value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"category",className:"text-right",children:"Category"}),s(Wf,{value:i.category,onValueChange:e=>o({...i,category:e}),children:[n(Gf,{className:"col-span-3",children:n(Yf,{placeholder:"Select Category"})}),s(Zf,{children:[n(Jf,{value:"medical",children:"Medical"}),n(Jf,{value:"food",children:"Food"}),n(Jf,{value:"hygiene",children:"Hygiene"}),n(Jf,{value:"equipment",children:"Equipment"}),n(Jf,{value:"other",children:"Other"})]})]})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"unit",className:"text-right",children:"Unit"}),n(od,{id:"unit",value:i.unit,onChange:e=>o({...i,unit:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"minimumQuantity",className:"text-right",children:"Minimum Quantity"}),n(od,{id:"minimumQuantity",type:"number",value:i.minimumQuantity,onChange:e=>o({...i,minimumQuantity:Number(e.target.value)}),className:"col-span-3"})]})]}),n(fm,{children:n(Ds,{type:"submit",onClick:()=>{m.mutate(i)},children:"Add Supply"})})]})})]})})},mw={"image/jpeg":{icon:ti,color:"text-blue-500"},"image/png":{icon:ti,color:"text-blue-500"},"image/gif":{icon:ti,color:"text-blue-500"},"application/pdf":{icon:ri,color:"text-red-500"},"application/msword":{icon:ri,color:"text-blue-500"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:ri,color:"text-blue-500"},"application/vnd.ms-excel":{icon:ri,color:"text-green-500"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{icon:ri,color:"text-green-500"},"text/plain":{icon:ri,color:"text-gray-500"}},uw=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(""),[i,o]=h("all"),[l,c]=h(!1),[d,m]=h(!1),[u,p]=h(!1),[g,f]=h({title:"",description:"",category_id:"",cat_id:"",supply_id:"",file_path:""}),[y,v]=h({name:"",description:""}),{data:b,isLoading:w}=S({queryKey:["admin-documents"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("documents").select("\n          *,\n          category:category_id (name, description),\n          cat:cat_id (name),\n          supply:supply_id (name)\n        ").order("created_at",{ascending:!1});if(t)throw t;return e}}),{data:x,isLoading:N}=S({queryKey:["document-categories"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("document_categories").select("*").order("name");if(t)throw t;return e}}),{data:C}=S({queryKey:["cats-list"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("cats").select("id, name").order("name");if(t)throw t;return e}}),{data:_}=S({queryKey:["supplies-list"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("supplies").select("id, name").order("name");if(t)throw t;return e}}),k=D({mutationFn:async e=>{let t=e.file_path;const a={title:e.title,description:e.description||null,file_path:t,file_type:T(t),category_id:e.category_id||null,cat_id:e.cat_id||null,supply_id:e.supply_id||null},{data:r,error:n}=await supabase.from("documents").insert([a]).select();if(n)throw n;return r[0]},onSuccess:()=>{e({title:"Document Added",description:"The document was added successfully."}),t.invalidateQueries({queryKey:["admin-documents"]}),F(),c(!1)},onError:t=>{e({title:"Error",description:t.message||"Failed to add document",variant:"destructive"})}}),A=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("document_categories").insert([e]).select();if(a)throw a;return t[0]},onSuccess:()=>{e({title:"Category Added",description:"The category was added successfully."}),t.invalidateQueries({queryKey:["document-categories"]}),v({name:"",description:""}),m(!1)},onError:t=>{e({title:"Error",description:t.message||"Failed to add category",variant:"destructive"})}}),M=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("documents").select("file_path").eq("id",e).single();if(a)throw a;if(t.file_path.startsWith("documents/")){const{error:e}=await xt().storage.from("documents").remove([t.file_path.replace("documents/","")]);if(e)throw e}const{error:r}=await supabase.from("documents").delete().eq("id",e);if(r)throw r;return e},onSuccess:()=>{e({title:"Document Deleted",description:"The document was deleted successfully."}),t.invalidateQueries({queryKey:["admin-documents"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete document",variant:"destructive"})}}),P=null==b?void 0:b.filter((e=>{var t,r,n;const s=""===a||e.title.toLowerCase().includes(a.toLowerCase())||e.description&&e.description.toLowerCase().includes(a.toLowerCase())||(null==(t=e.category)?void 0:t.name)&&e.category.name.toLowerCase().includes(a.toLowerCase())||(null==(r=e.cat)?void 0:r.name)&&e.cat.name.toLowerCase().includes(a.toLowerCase())||(null==(n=e.supply)?void 0:n.name)&&e.supply.name.toLowerCase().includes(a.toLowerCase());return"all"===i||"cats"===i&&e.cat_id||"supplies"===i&&e.supply_id||"finances"===i&&(e.donation_id||e.expense_id)?s:"other"!==i||e.cat_id||e.supply_id||e.donation_id||e.expense_id?!(!(null==x?void 0:x.some((e=>e.id===i)))||e.category_id!==i)&&s:s})),T=e=>{var t;switch(null==(t=e.split(".").pop())?void 0:t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"pdf":return"application/pdf";case"doc":return"application/msword";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"txt":return"text/plain";default:return"application/octet-stream"}},R=e=>{const t=mw[e];if(t){const e=t.icon;return n(e,{className:`h-6 w-6 ${t.color}`})}return n(ni,{className:"h-6 w-6 text-gray-500"})},F=()=>{f({title:"",description:"",category_id:"",cat_id:"",supply_id:"",file_path:""})};return s(ng,{title:"Documents",children:[n($c,{title:"Documents | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Document Management"}),s("div",{className:"flex gap-4 w-full md:w-auto",children:[s("div",{className:"relative flex-grow md:flex-grow-0",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search documents...",value:a,onChange:e=>r(e.target.value),className:"pl-10 md:w-80"})]}),s(Ds,{onClick:()=>c(!0),children:[n(ai,{className:"mr-2 h-4 w-4"}),"Add Document"]})]})]}),s(Bm,{defaultValue:"all",value:i,onValueChange:o,children:[s("div",{className:"flex overflow-x-auto pb-2 mb-6",children:[s(Hm,{className:"mr-2",children:[n(Km,{value:"all",children:"All Documents"}),s(Km,{value:"cats",children:[n(Pi,{className:"h-4 w-4 mr-1"}),"Cats"]}),s(Km,{value:"supplies",children:[n(Mi,{className:"h-4 w-4 mr-1"}),"Supplies"]}),s(Km,{value:"finances",children:[n(Gn,{className:"h-4 w-4 mr-1"}),"Finances"]}),n(Km,{value:"other",children:"Other"})]}),x&&x.length>0&&n(Hm,{children:x.map((e=>n(Km,{value:e.id,children:e.name},e.id)))}),s(Ds,{variant:"ghost",size:"sm",className:"ml-2 whitespace-nowrap",onClick:()=>m(!0),children:[n(Li,{className:"h-4 w-4 mr-1"}),"Add Category"]})]}),n(Wm,{value:i,children:w?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):P&&P.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map((e=>{var t,a,r,i;return n(wm,{className:"overflow-hidden",children:s(_m,{className:"p-0",children:[s("div",{className:"p-6",children:[n("div",{className:"flex items-start justify-between",children:s("div",{className:"flex items-start",children:[n("div",{className:"p-3 bg-gray-100 rounded-lg mr-4",children:R(e.file_type)}),s("div",{children:[n("h3",{className:"font-medium",children:e.title}),n("p",{className:"text-sm text-gray-500",children:(null==(t=e.category)?void 0:t.name)||"Uncategorized"}),(null==(a=e.cat)?void 0:a.name)&&s("div",{className:"flex items-center mt-1 text-xs text-gray-500",children:[n(Pi,{className:"h-3 w-3 mr-1"}),e.cat.name]}),(null==(r=e.supply)?void 0:r.name)&&s("div",{className:"flex items-center mt-1 text-xs text-gray-500",children:[n(Mi,{className:"h-3 w-3 mr-1"}),e.supply.name]})]})]})}),e.description&&n("p",{className:"mt-3 text-sm text-gray-600",children:e.description}),s("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[n("span",{children:le(new Date(e.created_at),"MMM d, yyyy")}),n("span",{children:(i=e.file_size,null===i?"Unknown size":i<1024?`${i} B`:i<1048576?`${(i/1024).toFixed(1)} KB`:`${(i/1048576).toFixed(1)} MB`)})]})]}),s("div",{className:"flex border-t",children:[s("a",{href:e.file_path,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 text-center text-sm text-blue-600 hover:bg-blue-50 transition-colors",children:[n(Qn,{className:"h-4 w-4 inline mr-1"}),"Download"]}),s("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this document?")&&M.mutate(t));var t},className:"flex-1 py-2 text-center text-sm text-red-600 hover:bg-red-50 transition-colors",children:[n(Qi,{className:"h-4 w-4 inline mr-1"}),"Delete"]})]})]})},e.id)}))}):s(wm,{className:"p-8 text-center",children:[n(ri,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),n("p",{className:"text-gray-500",children:"No documents found. Upload your first document to get started."}),s(Ds,{className:"mt-4",onClick:()=>c(!0),children:[n(ai,{className:"mr-2 h-4 w-4"}),"Add Document"]})]})})]})]}),n(dm,{open:l,onOpenChange:c,children:s(pm,{className:"sm:max-w-lg",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(ai,{className:"mr-2 h-5 w-5"}),"Add New Document"]})}),s("form",{onSubmit:e=>{e.preventDefault(),k.mutate(g)},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"title",className:"text-right",children:"Title"}),n(od,{id:"title",value:g.title,onChange:e=>f({...g,title:e.target.value}),className:"col-span-3",required:!0})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"description",className:"text-right",children:"Description"}),n(cu,{id:"description",value:g.description,onChange:e=>f({...g,description:e.target.value}),className:"col-span-3",rows:3})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"category",className:"text-right",children:"Category"}),s(Wf,{value:g.category_id,onValueChange:e=>f({...g,category_id:e}),children:[n(Gf,{className:"col-span-3",children:n(Yf,{placeholder:"Select category"})}),s(Zf,{children:[n(Jf,{value:"",children:"None"}),null==x?void 0:x.map((e=>n(Jf,{value:e.id,children:e.name},e.id)))]})]})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"cat",className:"text-right",children:"Related Cat"}),s(Wf,{value:g.cat_id,onValueChange:e=>f({...g,cat_id:e}),children:[n(Gf,{className:"col-span-3",children:n(Yf,{placeholder:"Select cat (optional)"})}),s(Zf,{children:[n(Jf,{value:"",children:"None"}),null==C?void 0:C.map((e=>n(Jf,{value:e.id,children:e.name},e.id)))]})]})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"supply",className:"text-right",children:"Related Supply"}),s(Wf,{value:g.supply_id,onValueChange:e=>f({...g,supply_id:e}),children:[n(Gf,{className:"col-span-3",children:n(Yf,{placeholder:"Select supply (optional)"})}),s(Zf,{children:[n(Jf,{value:"",children:"None"}),null==_?void 0:_.map((e=>n(Jf,{value:e.id,children:e.name},e.id)))]})]})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"file",className:"text-right",children:"File"}),s("div",{className:"col-span-3",children:[n(od,{id:"file",type:"file",onChange:t=>{const a=t.target.files;if(!a||0===a.length)return;const r=a[0];p(!0);const n=r.name.split(".").pop(),i=`documents/${`${Date.now()}.${n}`}`;xt().storage.from("documents").upload(i,r).then((({data:t,error:a})=>{if(a)throw a;const{data:r}=xt().storage.from("documents").getPublicUrl(i);f({...g,file_path:r.publicUrl}),e({title:"File Uploaded",description:"Your file has been uploaded successfully."})})).catch((t=>{console.error("Error uploading file:",t),e({title:"Upload Failed",description:t.message||"There was an error uploading your file.",variant:"destructive"})})).finally((()=>{p(!1)}))},disabled:u,required:!g.file_path}),u&&s("div",{className:"mt-2 flex items-center",children:[n("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-b-transparent border-meow-primary rounded-full"}),n("span",{className:"text-sm text-gray-500",children:"Uploading..."})]}),g.file_path&&n("div",{className:"mt-2",children:n("a",{href:g.file_path,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View uploaded file"})})]})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{F(),c(!1)},children:"Cancel"}),n(Ds,{type:"submit",disabled:!g.title||!g.file_path||k.isPending,children:k.isPending?"Adding...":"Add Document"})]})]})]})}),n(dm,{open:d,onOpenChange:m,children:s(pm,{className:"sm:max-w-md",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Li,{className:"mr-2 h-5 w-5"}),"Add New Category"]})}),s("form",{onSubmit:e=>{e.preventDefault(),A.mutate(y)},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"name",className:"text-right",children:"Name"}),n(od,{id:"name",value:y.name,onChange:e=>v({...y,name:e.target.value}),className:"col-span-3",required:!0})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n(Zm,{htmlFor:"categoryDescription",className:"text-right",children:"Description"}),n(cu,{id:"categoryDescription",value:y.description,onChange:e=>v({...y,description:e.target.value}),className:"col-span-3",rows:3})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{v({name:"",description:""}),m(!1)},children:"Cancel"}),n(Ds,{type:"submit",disabled:!y.name||A.isPending,children:A.isPending?"Adding...":"Add Category"})]})]})]})})]})},hw=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(!1),[i,o]=h(!1),[l,c]=h({id:"",name:"",title:"",bio:"",photo_url:"",email:"",is_active:!0,display_order:0}),{data:d,isLoading:m}=S({queryKey:["team-members"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("team_members").select("*").order("display_order",{ascending:!0});if(t)throw t;return e}}),u=D({mutationFn:async e=>{if(i){const{id:t,...a}=e,{data:r,error:n}=await supabase.from("team_members").update(a).eq("id",t).select();if(n)throw n;return r[0]}{const{data:t,error:a}=await supabase.from("team_members").insert([e]).select();if(a)throw a;return t[0]}},onSuccess:()=>{e({title:i?"Member Updated":"Member Added",description:i?"The team member has been updated.":"New team member has been added."}),t.invalidateQueries({queryKey:["team-members"]}),f(),r(!1)},onError:t=>{e({title:"Error",description:t.message||"Failed to save team member.",variant:"destructive"})}}),p=D({mutationFn:async e=>{const{error:t}=await supabase.from("team_members").delete().eq("id",e);if(t)throw t;return e},onSuccess:()=>{e({title:"Member Deleted",description:"The team member has been deleted."}),t.invalidateQueries({queryKey:["team-members"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete team member.",variant:"destructive"})}}),g=D({mutationFn:async({id:e,newOrder:t})=>{const{error:a}=await supabase.from("team_members").update({display_order:t}).eq("id",e);if(a)throw a;return{id:e,newOrder:t}},onSuccess:()=>{t.invalidateQueries({queryKey:["team-members"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to update display order.",variant:"destructive"})}}),f=()=>{c({id:"",name:"",title:"",bio:"",photo_url:"",email:"",is_active:!0,display_order:(null==d?void 0:d.length)||0}),o(!1)},y=()=>{o(!1),c({name:"",title:"",bio:"",photo_url:"",email:"",is_active:!0,display_order:(null==d?void 0:d.length)||0}),r(!0)};return s(ng,{title:"Team Management",children:[n($c,{title:"Team Management | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex justify-between items-center mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Team Management"}),s(Ds,{onClick:y,children:[n(ts,{className:"mr-2 h-4 w-4"}),"Add Team Member"]})]}),s(wm,{className:"mb-6",children:[n(xm,{children:s(Nm,{className:"flex items-center",children:[n(ns,{className:"mr-2 h-5 w-5"}),"Team Members"]})}),n(_m,{children:m?n("div",{className:"flex justify-center py-8",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-meow-primary"})}):d&&d.length>0?n("div",{className:"overflow-x-auto",children:s("table",{className:"w-full",children:[n("thead",{children:s("tr",{className:"border-b",children:[n("th",{className:"pb-3 text-left",children:"Name"}),n("th",{className:"pb-3 text-left",children:"Title"}),n("th",{className:"pb-3 text-left",children:"Email"}),n("th",{className:"pb-3 text-center",children:"Status"}),n("th",{className:"pb-3 text-center",children:"Order"}),n("th",{className:"pb-3 text-right",children:"Actions"})]})}),n("tbody",{children:d.map(((e,t)=>s("tr",{className:"border-b",children:[n("td",{className:"py-4",children:s("div",{className:"flex items-center",children:[e.photo_url?n("img",{src:e.photo_url,alt:e.name,className:"w-10 h-10 rounded-full object-cover mr-3"}):n("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:n(ns,{className:"h-5 w-5 text-gray-500"})}),n("span",{className:"font-medium",children:e.name})]})}),n("td",{className:"py-4",children:e.title}),n("td",{className:"py-4",children:e.email||"-"}),n("td",{className:"py-4 text-center",children:n("span",{className:"px-2 py-1 rounded-full text-xs "+(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"})}),n("td",{className:"py-4 text-center",children:s("div",{className:"flex justify-center space-x-1",children:[n(Ds,{variant:"ghost",size:"icon",onClick:()=>((e,t)=>{if(0===t)return;const a=null==d?void 0:d[t-1];a&&(g.mutate({id:e.id,newOrder:a.display_order}),g.mutate({id:a.id,newOrder:e.display_order}))})(e,t),disabled:0===t,children:n(Ai,{className:"h-4 w-4"})}),n(Ds,{variant:"ghost",size:"icon",onClick:()=>((e,t)=>{if(!d||t===d.length-1)return;const a=d[t+1];a&&(g.mutate({id:e.id,newOrder:a.display_order}),g.mutate({id:a.id,newOrder:e.display_order}))})(e,t),disabled:t===d.length-1,children:n(Di,{className:"h-4 w-4"})})]})}),n("td",{className:"py-4 text-right",children:s("div",{className:"flex justify-end space-x-2",children:[n(Ds,{variant:"ghost",size:"icon",onClick:()=>(e=>{o(!0),c({id:e.id,name:e.name,title:e.title,bio:e.bio||"",photo_url:e.photo_url||"",email:e.email||"",is_active:e.is_active,display_order:e.display_order}),r(!0)})(e),children:n(Ti,{className:"h-4 w-4"})}),n(Ds,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this team member?")&&p.mutate(t));var t},children:n(Qi,{className:"h-4 w-4"})})]})})]},e.id)))})]})}):s("div",{className:"text-center py-8",children:[n(ns,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),n("p",{className:"text-gray-500",children:"No team members found. Add your first team member to get started."}),s(Ds,{className:"mt-4",onClick:y,children:[n(ts,{className:"mr-2 h-4 w-4"}),"Add Team Member"]})]})})]})]}),n(dm,{open:a,onOpenChange:r,children:s(pm,{className:"sm:max-w-lg",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(ts,{className:"mr-2 h-5 w-5"}),i?"Edit Team Member":"Add Team Member"]})}),s("form",{onSubmit:e=>{e.preventDefault(),u.mutate(l)},children:[s("div",{className:"grid gap-6 py-4",children:[n("div",{className:"flex justify-center",children:n(ty,{onImageUploaded:e=>{c({...l,photo_url:e})},currentImage:l.photo_url||void 0,bucketName:"images",folderPath:"team"})}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{children:[n(Zm,{htmlFor:"name",children:"Name"}),n(od,{id:"name",value:l.name,onChange:e=>c({...l,name:e.target.value}),required:!0})]}),s("div",{children:[n(Zm,{htmlFor:"title",children:"Title/Role"}),n(od,{id:"title",value:l.title,onChange:e=>c({...l,title:e.target.value}),required:!0})]})]}),s("div",{children:[n(Zm,{htmlFor:"email",children:"Email (Optional)"}),n(od,{id:"email",type:"email",value:l.email||"",onChange:e=>c({...l,email:e.target.value})})]}),s("div",{children:[n(Zm,{htmlFor:"bio",children:"Bio"}),n(cu,{id:"bio",value:l.bio||"",onChange:e=>c({...l,bio:e.target.value}),rows:4})]}),s("div",{className:"flex items-center space-x-2",children:[n(Wy,{id:"is_active",checked:l.is_active,onCheckedChange:e=>c({...l,is_active:e})}),n(Zm,{htmlFor:"is_active",children:"Show on website"})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{f(),r(!1)},children:"Cancel"}),n(Ds,{type:"submit",disabled:!l.name||!l.title||u.isPending,children:u.isPending?"Saving...":"Save"})]})]})]})})]})},pw=({story:e,onEdit:t,onDelete:a,onToggleHomepage:r,homepageStoriesCount:i})=>s("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[e.photo_url?n("div",{className:"h-48 overflow-hidden",children:n("img",{src:e.photo_url,alt:e.title,className:"w-full h-full object-cover"})}):n("div",{className:"h-48 bg-gray-100 flex items-center justify-center",children:n(mi,{className:"h-12 w-12 text-gray-300"})}),s("div",{className:"p-4",children:[s("div",{className:"flex justify-between items-start mb-2",children:[n("h3",{className:"font-medium text-lg",children:e.title}),s(Ds,{variant:e.show_on_homepage?"default":"outline",size:"sm",className:"ml-2 "+(e.show_on_homepage?"bg-meow-primary hover:bg-meow-primary/90":"border-gray-300"),onClick:()=>r(e),title:e.show_on_homepage?"Remove from homepage":"Show on homepage",children:[n(di,{className:"h-4 w-4"}),e.show_on_homepage&&n("span",{className:"ml-1 text-xs",children:"Homepage"})]})]}),n("p",{className:"text-gray-600 text-sm line-clamp-3 mb-4",children:e.story_text}),n("div",{className:"flex text-sm text-gray-500 mb-4",children:e.adoption_date&&s("span",{className:"flex items-center mr-4",children:[n(An,{className:"h-4 w-4 mr-1"}),le(new Date(e.adoption_date),"MMM d, yyyy")]})}),s("div",{className:"flex justify-end gap-2",children:[s(Ds,{variant:"outline",size:"sm",onClick:()=>t(e),children:[n(Ki,{className:"h-4 w-4 mr-2"}),"Edit"]}),s(Ds,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>a(e),children:[n(Qi,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),gw=({stories:e,onEdit:t,onDelete:a,onToggleHomepage:r,homepageStoriesCount:i})=>n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>n(pw,{story:e,onEdit:t,onDelete:a,onToggleHomepage:r,homepageStoriesCount:i},e.id)))}),fw=({formData:e,setFormData:t,onSubmit:a,onCancel:r,cats:i,homepageStoriesCount:o,isSubmitting:l,mode:c})=>{const{toast:d}=xr();return s("form",{onSubmit:a,className:"space-y-6",children:[s("div",{className:"grid gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"title",children:"Title"}),n(od,{id:"title",value:e.title,onChange:a=>t({...e,title:a.target.value}),placeholder:"e.g., Fluffy Found Her Forever Home!",required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"story_text",children:"Story"}),n(cu,{id:"story_text",value:e.story_text,onChange:a=>t({...e,story_text:a.target.value}),placeholder:"Share this success story...",rows:6,required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"photo",children:"Photo"}),n(ty,{onImageUploaded:a=>{t({...e,photo_url:a})},currentImage:e.photo_url,bucketName:"images",folderPath:"success-stories",showThumbnailOnly:!0}),n("p",{className:"text-xs text-gray-500",children:"Recommended size: 800x600 pixels"})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"cat_id",children:"Related Cat"}),s(Wf,{value:e.cat_id,onValueChange:a=>t({...e,cat_id:a}),children:[n(Gf,{children:n(Yf,{placeholder:"Select a cat (optional)"})}),s(Zf,{children:[n(Jf,{value:"none",children:"None"}),null==i?void 0:i.map((e=>n(Jf,{value:e.id,children:e.name},e.id)))]})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"adoption_date",children:"Adoption Date"}),n(od,{id:"adoption_date",type:"date",value:e.adoption_date,onChange:a=>t({...e,adoption_date:a.target.value})})]})]}),s("div",{className:"flex items-center space-x-2",children:[n(Wy,{id:"show_on_homepage",checked:e.show_on_homepage,onCheckedChange:a=>{a&&o>=3?d({title:"Limit Reached",description:"Only 3 stories can be shown on the homepage.",variant:"destructive"}):t({...e,show_on_homepage:a})}}),s(Zm,{htmlFor:"show_on_homepage",children:["Show on homepage (",o,"/3)"]})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),n(Ds,{type:"submit",disabled:l,children:l?"Saving...":"add"===c?"Save Story":"Update Story"})]})]})},yw=({isOpen:e,onOpenChange:t,onConfirm:a})=>n(_p,{open:e,onOpenChange:t,children:s(Dp,{children:[s(Ap,{children:[n(Pp,{children:"Are you sure?"}),n(Tp,{children:"This will permanently delete this success story. This action cannot be undone."})]}),s(Mp,{children:[n(Fp,{children:"Cancel"}),n(Rp,{onClick:a,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),vw=()=>{const{toast:e}=xr(),{stories:t,isLoading:a,addStoryMutation:r,updateStoryMutation:i,deleteStoryMutation:o,toggleHomepageDisplayMutation:l}=(()=>{const{toast:e}=xr(),t=E(),{data:a,isLoading:r}=S({queryKey:["success-stories"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("success_stories").select("*, cats(name)").order("created_at",{ascending:!1});if(t)throw t;return e}});return{stories:a,isLoading:r,addStoryMutation:D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("success_stories").insert([e]).select();if(a)throw a;return t},onSuccess:()=>{e({title:"Success",description:"Success story added successfully"}),t.invalidateQueries({queryKey:["success-stories"]}),t.invalidateQueries({queryKey:["homepageSuccessStories"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to add success story",variant:"destructive"})}}),updateStoryMutation:D({mutationFn:async({id:e,story:t})=>{const{data:a,error:r}=await supabase.from("success_stories").update(t).eq("id",e).select();if(r)throw r;return a},onSuccess:()=>{e({title:"Success",description:"Success story updated successfully"}),t.invalidateQueries({queryKey:["success-stories"]}),t.invalidateQueries({queryKey:["homepageSuccessStories"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to update success story",variant:"destructive"})}}),deleteStoryMutation:D({mutationFn:async e=>{const{error:t}=await supabase.from("success_stories").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e({title:"Success",description:"Success story deleted successfully"}),t.invalidateQueries({queryKey:["success-stories"]}),t.invalidateQueries({queryKey:["homepageSuccessStories"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete success story",variant:"destructive"})}}),toggleHomepageDisplayMutation:D({mutationFn:async({id:e,showOnHomepage:t})=>{const{data:a,error:r}=await supabase.from("success_stories").update({show_on_homepage:t}).eq("id",e).select();if(r)throw r;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["success-stories"]}),t.invalidateQueries({queryKey:["homepageSuccessStories"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to update homepage display setting",variant:"destructive"})}})}})(),{cats:c}=(()=>{const{data:e}=S({queryKey:["cats-for-stories"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("cats").select("id, name, status");if(t)throw t;return e}});return{cats:e}})(),[d,m]=h(""),[u,p]=h(!1),[g,f]=h(!1),[y,v]=h(!1),[b,w]=h(null),[x,N]=h({title:"",story_text:"",photo_url:"",cat_id:"",adoption_date:"",show_on_homepage:!1}),C=()=>{N({title:"",story_text:"",photo_url:"",cat_id:"",adoption_date:"",show_on_homepage:!1})},_=null==t?void 0:t.filter((e=>{if(!d)return!0;const t=d.toLowerCase();return e.title.toLowerCase().includes(t)||e.story_text.toLowerCase().includes(t)})),k=(null==t?void 0:t.filter((e=>e.show_on_homepage)).length)||0;return s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Success Stories"}),s("div",{className:"flex gap-4",children:[s("div",{className:"relative",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search stories...",value:d,onChange:e=>m(e.target.value),className:"pl-10 w-64"})]}),s(Ds,{onClick:()=>p(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add Success Story"]})]})]}),a?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):s(wm,{children:[n(xm,{children:s(Nm,{className:"flex items-center",children:[n(Cn,{className:"mr-2 h-5 w-5"}),"Success Stories"]})}),n(_m,{children:_&&_.length>0?n(gw,{stories:_,onEdit:e=>{w(e),N({title:e.title,story_text:e.story_text,photo_url:e.photo_url||"",cat_id:e.cat_id||"none",adoption_date:e.adoption_date?new Date(e.adoption_date).toISOString().substring(0,10):"",show_on_homepage:e.show_on_homepage}),f(!0)},onDelete:e=>{w(e),v(!0)},onToggleHomepage:a=>{!a.show_on_homepage&&(null==t?void 0:t.filter((e=>e.show_on_homepage)).length)>=3?e({title:"Limit Reached",description:"Only 3 stories can be shown on the homepage. Please remove one before adding another.",variant:"destructive"}):l.mutate({id:a.id,showOnHomepage:!a.show_on_homepage})},homepageStoriesCount:k}):s("div",{className:"text-center py-12",children:[n(Cn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No success stories found"}),n("p",{className:"text-gray-500 mb-6",children:"Share your adoption success stories to inspire others."}),s(Ds,{onClick:()=>p(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add Success Story"]})]})})]}),n(dm,{open:u,onOpenChange:p,children:s(pm,{className:"sm:max-w-xl",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Li,{className:"mr-2 h-5 w-5"}),"Add Success Story"]})}),n(fw,{formData:x,setFormData:N,onSubmit:a=>{a.preventDefault(),x.show_on_homepage&&(null==t?void 0:t.filter((e=>e.show_on_homepage)).length)>=3?e({title:"Limit Reached",description:"Only 3 stories can be shown on the homepage. Please remove one before adding another.",variant:"destructive"}):(r.mutate(x),p(!1),C())},onCancel:()=>{C(),p(!1)},cats:c,homepageStoriesCount:k,isSubmitting:r.isPending,mode:"add"})]})}),n(dm,{open:g,onOpenChange:f,children:s(pm,{className:"sm:max-w-xl",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Li,{className:"mr-2 h-5 w-5"}),"Edit Success Story"]})}),n(fw,{formData:x,setFormData:N,onSubmit:a=>{if(a.preventDefault(),b){if(x.show_on_homepage&&!b.show_on_homepage&&(null==t?void 0:t.filter((e=>e.show_on_homepage)).length)>=3)return void e({title:"Limit Reached",description:"Only 3 stories can be shown on the homepage. Please remove one before adding another.",variant:"destructive"});i.mutate({id:b.id,story:x}),f(!1),w(null)}},onCancel:()=>{f(!1),w(null)},cats:c,homepageStoriesCount:k,isSubmitting:i.isPending,mode:"edit"})]})}),n(yw,{isOpen:y,onOpenChange:v,onConfirm:()=>{b&&(o.mutate(b.id),v(!1),w(null))}})]})},bw=()=>s(ng,{title:"Success Stories",children:[n($c,{title:"Success Stories | Meow Rescue Admin"}),n(vw,{})]}),ww=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(""),[o,l]=h(!1),[c,d]=h(!1),[m,u]=h(null),[p,g]=h({license_type:"",license_number:"",issuing_authority:"",issue_date:"",expiry_date:"",notes:"",document_url:""}),{data:f,isLoading:y}=S({queryKey:["business-licenses"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("business_licenses").select("*").order("created_at",{ascending:!1});if(t)throw t;return e}}),v=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("business_licenses").insert([{license_type:e.license_type,license_number:e.license_number,issuing_authority:e.issuing_authority,issue_date:e.issue_date,expiry_date:e.expiry_date||null,notes:e.notes||null}]).select();if(a)throw a;return t},onSuccess:()=>{e({title:"Success",description:"License added successfully"}),t.invalidateQueries({queryKey:["business-licenses"]}),l(!1),w()},onError:t=>{e({title:"Error",description:t.message||"Failed to add license",variant:"destructive"})}}),b=D({mutationFn:async e=>{const{error:t}=await supabase.from("business_licenses").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e({title:"Success",description:"License deleted successfully"}),t.invalidateQueries({queryKey:["business-licenses"]}),d(!1),u(null)},onError:t=>{e({title:"Error",description:t.message||"Failed to delete license",variant:"destructive"})}}),w=()=>{g({license_type:"",license_number:"",issuing_authority:"",issue_date:"",expiry_date:"",notes:"",document_url:""})},x=null==f?void 0:f.filter((e=>{if(!a)return!0;const t=a.toLowerCase();return e.license_type.toLowerCase().includes(t)||e.license_number.toLowerCase().includes(t)||e.issuing_authority.toLowerCase().includes(t)||e.notes&&e.notes.toLowerCase().includes(t)})),N=null==f?void 0:f.filter((e=>{if(!e.expiry_date)return!1;const t=new Date(e.expiry_date),a=new Date,r=Math.ceil((t.getTime()-a.getTime())/864e5);return r>0&&r<=30})),C=null==f?void 0:f.filter((e=>{if(!e.expiry_date)return!1;return new Date(e.expiry_date)<new Date}));return s(ng,{title:"Business Licenses",children:[n($c,{title:"Business Licenses | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Business Licenses"}),s("div",{className:"flex gap-4",children:[s("div",{className:"relative",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search licenses...",value:a,onChange:e=>r(e.target.value),className:"pl-10 w-64"})]}),s(Ds,{onClick:()=>l(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add License"]})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600",children:n(Wn,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Total Licenses"}),n("p",{className:"text-xl font-semibold",children:(null==f?void 0:f.length)||0})]})]})})}),n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-amber-100 text-amber-600",children:n(Xi,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Expiring Soon"}),n("p",{className:"text-xl font-semibold",children:(null==N?void 0:N.length)||0})]})]})})}),n(wm,{children:n(_m,{className:"pt-6",children:s("div",{className:"flex items-center",children:[n("div",{className:"p-3 rounded-full bg-red-100 text-red-600",children:n(Xi,{className:"h-6 w-6"})}),s("div",{className:"ml-4",children:[n("p",{className:"text-sm font-medium text-gray-500",children:"Expired"}),n("p",{className:"text-xl font-semibold",children:(null==C?void 0:C.length)||0})]})]})})})]}),y?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):s(i,{children:[N&&N.length>0&&s(wm,{className:"mb-6 border-amber-200",children:[n(xm,{className:"pb-2",children:s(Nm,{className:"text-amber-700 flex items-center",children:[n(Xi,{className:"h-5 w-5 mr-2"}),"Licenses Expiring Soon"]})}),n(_m,{children:n("div",{className:"space-y-4",children:N.map((e=>{const t=Math.ceil((new Date(e.expiry_date).getTime()-(new Date).getTime())/864e5);return n("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:s("div",{className:"flex justify-between",children:[s("div",{children:[n("h3",{className:"font-medium",children:e.license_type}),s("p",{className:"text-sm text-gray-600",children:["License #",e.license_number,"  ",e.issuing_authority]})]}),s("div",{className:"text-right",children:[s("p",{className:"text-amber-700 font-medium",children:["Expires in ",t," days"]}),n("p",{className:"text-sm text-gray-600",children:e.expiry_date&&le(new Date(e.expiry_date),"MMM d, yyyy")})]})]})},e.id)}))})})]}),C&&C.length>0&&s(wm,{className:"mb-6 border-red-200",children:[n(xm,{className:"pb-2",children:s(Nm,{className:"text-red-700 flex items-center",children:[n(Xi,{className:"h-5 w-5 mr-2"}),"Expired Licenses"]})}),n(_m,{children:n("div",{className:"space-y-4",children:C.map((e=>{const t=Math.ceil(((new Date).getTime()-new Date(e.expiry_date).getTime())/864e5);return n("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:s("div",{className:"flex justify-between",children:[s("div",{children:[n("h3",{className:"font-medium",children:e.license_type}),s("p",{className:"text-sm text-gray-600",children:["License #",e.license_number,"  ",e.issuing_authority]})]}),s("div",{className:"text-right",children:[s("p",{className:"text-red-700 font-medium",children:["Expired ",t," days ago"]}),n("p",{className:"text-sm text-gray-600",children:e.expiry_date&&le(new Date(e.expiry_date),"MMM d, yyyy")})]})]})},e.id)}))})})]}),s(wm,{children:[n(xm,{children:s(Nm,{className:"flex items-center",children:[n(Wn,{className:"mr-2 h-5 w-5"}),"All Licenses"]})}),n(_m,{children:x&&x.length>0?n("div",{className:"space-y-6",children:x.map((e=>n("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:s("div",{className:"flex flex-col md:flex-row justify-between",children:[s("div",{children:[n("h3",{className:"font-medium text-lg",children:e.license_type}),s("p",{className:"text-gray-600",children:["License #",e.license_number]}),s("p",{className:"text-sm text-gray-500",children:["Issued by: ",e.issuing_authority]}),s("div",{className:"flex gap-4 text-sm text-gray-500 mt-2",children:[s("span",{className:"flex items-center",children:[n(An,{className:"h-4 w-4 mr-1"}),"Issued: ",le(new Date(e.issue_date),"MMM d, yyyy")]}),e.expiry_date&&s("span",{className:"flex items-center",children:[n(An,{className:"h-4 w-4 mr-1"}),"Expires: ",le(new Date(e.expiry_date),"MMM d, yyyy")]})]}),e.notes&&n("div",{className:"mt-2",children:n("p",{className:"text-sm text-gray-600",children:e.notes})})]}),s("div",{className:"mt-4 md:mt-0 md:ml-4 flex md:flex-col items-center gap-2",children:[s(Ds,{variant:"outline",size:"sm",children:[n(Ki,{className:"h-4 w-4 mr-2"}),"Edit"]}),s(Ds,{variant:"outline",size:"sm",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>{u(e),d(!0)},children:[n(Qi,{className:"h-4 w-4 mr-2"}),"Delete"]}),e.document_id&&s(Ds,{variant:"outline",size:"sm",children:[n(Qn,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})},e.id)))}):s("div",{className:"text-center py-12",children:[n(Wn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No licenses found"}),n("p",{className:"text-gray-500 mb-6",children:"Add your business licenses to keep track of them."}),s(Ds,{onClick:()=>l(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Add License"]})]})})]})]})]}),n(dm,{open:o,onOpenChange:l,children:s(pm,{className:"sm:max-w-xl",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Li,{className:"mr-2 h-5 w-5"}),"Add Business License"]})}),s("form",{onSubmit:e=>{e.preventDefault(),v.mutate(p)},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"license_type",children:"License Type"}),n(od,{id:"license_type",value:p.license_type,onChange:e=>g({...p,license_type:e.target.value}),placeholder:"e.g., Business Permit, Health Certificate",required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"license_number",children:"License Number"}),n(od,{id:"license_number",value:p.license_number,onChange:e=>g({...p,license_number:e.target.value}),placeholder:"e.g., BL-12345",required:!0})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"issuing_authority",children:"Issuing Authority"}),n(od,{id:"issuing_authority",value:p.issuing_authority,onChange:e=>g({...p,issuing_authority:e.target.value}),placeholder:"e.g., City of New York",required:!0})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"issue_date",children:"Issue Date"}),n(od,{id:"issue_date",type:"date",value:p.issue_date,onChange:e=>g({...p,issue_date:e.target.value}),required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"expiry_date",children:"Expiry Date"}),n(od,{id:"expiry_date",type:"date",value:p.expiry_date,onChange:e=>g({...p,expiry_date:e.target.value})})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"notes",children:"Notes"}),n(od,{id:"notes",value:p.notes,onChange:e=>g({...p,notes:e.target.value}),placeholder:"Additional information about this license"})]}),s("div",{className:"grid gap-2",children:[n(Zm,{children:"Upload Document"}),s("div",{className:"flex items-center gap-4",children:[s(Ds,{type:"button",variant:"outline",children:[n(es,{className:"h-4 w-4 mr-2"}),"Upload Document"]}),n("p",{className:"text-sm text-gray-500",children:"No file selected"})]}),n("p",{className:"text-xs text-gray-500",children:"Supported formats: PDF, JPG, PNG. Max size: 10MB"})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{w(),l(!1)},children:"Cancel"}),n(Ds,{type:"submit",disabled:v.isPending,children:v.isPending?"Saving...":"Save License"})]})]})]})}),n(_p,{open:c,onOpenChange:d,children:s(Dp,{children:[s(Ap,{children:[n(Pp,{children:"Are you sure?"}),n(Tp,{children:"This will permanently delete this license record. This action cannot be undone."})]}),s(Mp,{children:[n(Fp,{children:"Cancel"}),n(Rp,{onClick:()=>{m&&b.mutate(m.id)},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})},xw=()=>{const{toast:e}=xr(),t=E(),{user:a}=At(),[r,o]=h(""),[l,c]=h(!1),[m,u]=h(null),[g,f]=h(""),[y,v]=h(""),{data:b}=S({queryKey:["user-profiles"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("profiles").select("id, first_name, last_name, email, avatar_url, role").eq("is_active",!0).not("id","eq",(null==a?void 0:a.id)||"");if(t)throw t;return e},enabled:!!(null==a?void 0:a.id)}),{data:w,isLoading:x}=S({queryKey:["direct-messages",null==a?void 0:a.id],queryFn:async()=>{if(!(null==a?void 0:a.id))throw new Error("User not authenticated");const{data:e,error:t}=await supabase.from("direct_messages").select("\n          id, \n          sender_id, \n          recipient_id, \n          content, \n          created_at, \n          read_at,\n          sender:profiles!direct_messages_sender_id_fkey(id, first_name, last_name, email, avatar_url, role),\n          recipient:profiles!direct_messages_recipient_id_fkey(id, first_name, last_name, email, avatar_url, role)\n        ").or(`sender_id.eq.${a.id},recipient_id.eq.${a.id}`).order("created_at",{ascending:!1});if(t)throw t;return e.map((e=>({...e,sender:Array.isArray(e.sender)?e.sender[0]:e.sender,recipient:Array.isArray(e.recipient)?e.recipient[0]:e.recipient})))},enabled:!!(null==a?void 0:a.id)});p((()=>{if(m&&(null==a?void 0:a.id)){(async()=>{const{error:e}=await supabase.from("direct_messages").update({read_at:(new Date).toISOString()}).eq("sender_id",m).eq("recipient_id",a.id).is("read_at",null);e||t.invalidateQueries({queryKey:["direct-messages",a.id]})})()}}),[m,null==a?void 0:a.id,t]);const N=D({mutationFn:async({recipientId:e,content:t})=>{const{data:r,error:n}=await supabase.from("direct_messages").insert([{sender_id:null==a?void 0:a.id,recipient_id:e,content:t}]).select();if(n)throw n;return r},onSuccess:()=>{f(""),t.invalidateQueries({queryKey:["direct-messages",null==a?void 0:a.id]}),l&&(c(!1),u(y))},onError:t=>{e({title:"Error",description:t.message||"Failed to send message",variant:"destructive"})}}),C=d.useMemo((()=>{if(!w||!a)return[];const e=new Map;return w.forEach((t=>{const r=t.recipient_id===a.id,n=r?t.sender_id:t.recipient_id;if(t.sender_id===t.recipient_id)return;const i=r?t.sender:t.recipient;e.has(n)||e.set(n,{userId:n,userName:`${i.first_name} ${i.last_name}`,userRole:i.role,userAvatar:i.avatar_url,lastMessage:t.content,lastMessageTime:t.created_at,unreadCount:0});const s=e.get(n);new Date(t.created_at)>new Date(s.lastMessageTime)&&(s.lastMessage=t.content,s.lastMessageTime=t.created_at),r&&!t.read_at&&(s.unreadCount+=1)})),Array.from(e.values()).sort(((e,t)=>new Date(t.lastMessageTime).getTime()-new Date(e.lastMessageTime).getTime()))}),[w,a]),_=C.filter((e=>{if(!r)return!0;const t=r.toLowerCase();return e.userName.toLowerCase().includes(t)})),k=d.useMemo((()=>w&&m?w.filter((e=>e.sender_id===m&&e.recipient_id===(null==a?void 0:a.id)||e.sender_id===(null==a?void 0:a.id)&&e.recipient_id===m)).sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())):[]),[w,m,null==a?void 0:a.id]),A=d.useMemo((()=>C.find((e=>e.userId===m))),[C,m]),M=e=>{const t=e.split(" ").filter(Boolean);return t.length>1?`${t[0][0]}${t[1][0]}`.toUpperCase():t[0][0].toUpperCase()};return s(ng,{title:"Direct Messages",children:[n($c,{title:"Direct Messages | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex justify-between items-center mb-6",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Direct Messages"}),n("div",{className:"flex gap-4",children:s(Ds,{onClick:()=>c(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"New Message"]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8",children:[n("div",{className:"md:col-span-1",children:s(wm,{className:"h-[calc(100vh-240px)]",children:[n(xm,{className:"pb-2",children:s("div",{className:"flex justify-between items-center",children:[n(Nm,{className:"text-lg",children:"Conversations"}),s("div",{className:"relative w-full max-w-xs",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n(od,{placeholder:"Search users...",value:r,onChange:e=>o(e.target.value),className:"pl-10"})]})]})}),n(_m,{className:"p-0 overflow-hidden",children:n("div",{className:"overflow-y-auto h-[calc(100vh-340px)]",children:_.length>0?n("ul",{className:"divide-y",children:_.map((e=>n("li",{children:n("button",{className:"w-full text-left p-4 hover:bg-gray-50 transition-colors "+(m===e.userId?"bg-gray-50":""),onClick:()=>u(e.userId),children:s("div",{className:"flex items-center space-x-3",children:[s(Ec,{className:"h-10 w-10",children:[n(Dc,{src:e.userAvatar||"",alt:e.userName}),n(Ac,{children:M(e.userName)})]}),s("div",{className:"flex-1 min-w-0",children:[s("div",{className:"flex justify-between items-center mb-1",children:[n("p",{className:"text-sm font-medium truncate",children:e.userName}),n("p",{className:"text-xs text-gray-500",children:ce(new Date(e.lastMessageTime),{addSuffix:!0})})]}),s("div",{className:"flex justify-between items-center",children:[n("p",{className:"text-xs text-gray-500 truncate max-w-[180px]",children:e.lastMessage}),e.unreadCount>0&&n("span",{className:"inline-flex items-center justify-center h-5 w-5 text-xs font-medium text-white bg-meow-primary rounded-full",children:e.unreadCount})]})]})]})})},e.userId)))}):s("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[n(Ei,{className:"h-12 w-12 text-gray-300 mb-4"}),n("p",{className:"text-gray-500 text-center mb-4",children:r?"No conversations found with that name":"No conversations yet"}),!r&&s(Ds,{onClick:()=>c(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"Start a Conversation"]})]})})})]})}),n("div",{className:"md:col-span-2",children:n(wm,{className:"h-[calc(100vh-240px)] flex flex-col",children:m?s(i,{children:[n(xm,{className:"py-3 px-4 border-b",children:s("div",{className:"flex items-center",children:[s(Ec,{className:"h-8 w-8 mr-3",children:[n(Dc,{src:(null==A?void 0:A.userAvatar)||"",alt:(null==A?void 0:A.userName)||"User"}),n(Ac,{children:M((null==A?void 0:A.userName)||"User")})]}),s("div",{children:[n("p",{className:"font-medium",children:null==A?void 0:A.userName}),n("p",{className:"text-xs text-gray-500 capitalize",children:null==A?void 0:A.userRole})]})]})}),n(_m,{className:"flex-1 overflow-y-auto p-4",children:s("div",{className:"space-y-4",children:[k.map((e=>{const t=e.sender_id===(null==a?void 0:a.id);return n("div",{className:"flex "+(t?"justify-end":"justify-start"),children:s("div",{className:"flex items-end gap-2 max-w-[80%]",children:[!t&&s(Ec,{className:"h-8 w-8",children:[n(Dc,{src:e.sender.avatar_url||"",alt:`${e.sender.first_name} ${e.sender.last_name}`}),n(Ac,{children:M(`${e.sender.first_name} ${e.sender.last_name}`)})]}),s("div",{children:[n("div",{className:"p-3 rounded-lg "+(t?"bg-meow-primary text-white rounded-br-none":"bg-gray-100 rounded-bl-none"),children:n("p",{className:"text-sm",children:e.content})}),s("p",{className:"text-xs text-gray-500 mt-1",children:[ce(new Date(e.created_at),{addSuffix:!0}),t&&e.read_at&&n("span",{className:"ml-1 inline-flex items-center",children:n(Fn,{className:"h-3 w-3 text-meow-primary"})})]})]}),t&&s(Ec,{className:"h-8 w-8",children:[n(Dc,{src:(null==a?void 0:a.avatar_url)||"",alt:`${null==a?void 0:a.first_name} ${null==a?void 0:a.last_name}`}),n(Ac,{children:M(`${null==a?void 0:a.first_name} ${null==a?void 0:a.last_name}`)})]})]})},e.id)})),0===k.length&&s("div",{className:"flex flex-col items-center justify-center h-full",children:[n(bn,{className:"h-12 w-12 text-gray-300 mb-4"}),n("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})]})]})}),n("div",{className:"p-4 border-t",children:s("form",{onSubmit:e=>{e.preventDefault(),g.trim()&&m&&N.mutate({recipientId:m,content:g.trim()})},className:"flex gap-2",children:[n(od,{placeholder:"Type your message...",value:g,onChange:e=>f(e.target.value),className:"flex-1"}),s(Ds,{type:"submit",disabled:!g.trim()||N.isPending,children:[n(zi,{className:"h-4 w-4"}),n("span",{className:"sr-only",children:"Send"})]})]})})]}):s("div",{className:"flex flex-col items-center justify-center h-full",children:[n(Ei,{className:"h-16 w-16 text-gray-300 mb-4"}),n("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Your Messages"}),n("p",{className:"text-gray-500 mb-6",children:"Select a conversation or start a new one"}),s(Ds,{onClick:()=>c(!0),children:[n(Li,{className:"mr-2 h-4 w-4"}),"New Message"]})]})})})]})]}),n(dm,{open:l,onOpenChange:c,children:s(pm,{className:"sm:max-w-md",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Li,{className:"mr-2 h-5 w-5"}),"New Message"]})}),s("form",{onSubmit:e=>{e.preventDefault(),y&&g.trim()&&N.mutate({recipientId:y,content:g.trim()})},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"recipient",children:"To:"}),s(Wf,{value:y,onValueChange:v,children:[n(Gf,{children:n(Yf,{placeholder:"Select a recipient"})}),n(Zf,{children:null==b?void 0:b.map((e=>s(Jf,{value:e.id,children:[e.first_name," ",e.last_name," (",e.role,")"]},e.id)))})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"message",children:"Message:"}),n(cu,{id:"message",value:g,onChange:e=>f(e.target.value),placeholder:"Type your message here",rows:4})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{c(!1),f(""),v("")},children:"Cancel"}),s(Ds,{type:"submit",disabled:!y||!g.trim()||N.isPending,children:[n(zi,{className:"mr-2 h-4 w-4"}),"Send"]})]})]})]})})]})},Nw=()=>{const{toast:e}=xr(),t=E(),[a,r]=h(""),[i,o]=h("all"),[l,c]=h(!1),[m,u]=h(null),[p,g]=h(""),[f,y]=h(""),[v,b]=h(""),[w,x]=h(""),{data:N,isLoading:C}=S({queryKey:["foster-orders"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("supply_orders").select("\n          *,\n          items:supply_order_items(\n            *,\n            supply:supply_id(id, name, category, unit)\n          ),\n          foster:foster_id(id, first_name, last_name, email, avatar_url)\n        ").order("created_at",{ascending:!1});if(t)throw t;return e}}),_=D({mutationFn:async({orderId:e,status:t,trackingNumber:a,rejectedReason:r,notes:n})=>{var i;const s={status:t,updated_at:(new Date).toISOString()};"Approved"===t&&(s.approved_at=(new Date).toISOString(),s.approved_by=null==(i=(await xt().auth.getUser()).data.user)?void 0:i.id),a&&(s.tracking_number=a),r&&(s.rejected_reason=r),n&&(s.notes=n);const{data:o,error:l}=await supabase.from("supply_orders").update(s).eq("id",e).select();if(l)throw l;return o},onSuccess:()=>{e({title:"Success",description:"Order updated successfully"}),t.invalidateQueries({queryKey:["foster-orders"]}),c(!1),k()},onError:t=>{e({title:"Error",description:t.message||"Failed to update order",variant:"destructive"})}}),k=()=>{u(null),g(""),y(""),b(""),x("")},A=d.useMemo((()=>N?N.filter((e=>{if("all"!==i&&e.status!==i)return!1;if(a){const t=a.toLowerCase();return`${e.foster.first_name} ${e.foster.last_name}`.toLowerCase().includes(t)||e.tracking_number&&e.tracking_number.toLowerCase().includes(t)}return!0})):[]),[N,a,i]),M=d.useMemo((()=>N?N.reduce(((e,t)=>(e[t.status.toLowerCase()]=(e[t.status.toLowerCase()]||0)+1,e)),{}):{pending:0,approved:0,shipped:0,delivered:0,rejected:0}),[N]),P=e=>{switch(e){case"Pending":return n(Wc,{variant:"outline",className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:"Pending"});case"Approved":return n(Wc,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200",children:"Approved"});case"Shipped":return n(Wc,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:"Shipped"});case"Delivered":return n(Wc,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-200",children:"Delivered"});case"Rejected":return n(Wc,{variant:"outline",className:"bg-red-100 text-red-800 border-red-200",children:"Rejected"});default:return n(Wc,{variant:"outline",children:e})}};return s(ng,{title:"Supply Orders",children:[n($c,{title:"Supply Orders | Meow Rescue Admin"}),s("div",{className:"container mx-auto py-10",children:[s("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Supply Orders"}),s("div",{className:"flex gap-4",children:[s("div",{className:"relative",children:[n($i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n(od,{placeholder:"Search orders...",value:a,onChange:e=>r(e.target.value),className:"pl-10 w-64"})]}),s(Wf,{value:i,onValueChange:o,children:[s(Gf,{className:"w-40",children:[n(yi,{className:"h-4 w-4 mr-2"}),n(Yf,{placeholder:"Filter by status"})]}),s(Zf,{children:[n(Jf,{value:"all",children:"All Orders"}),n(Jf,{value:"Pending",children:"Pending"}),n(Jf,{value:"Approved",children:"Approved"}),n(Jf,{value:"Shipped",children:"Shipped"}),n(Jf,{value:"Delivered",children:"Delivered"}),n(Jf,{value:"Rejected",children:"Rejected"})]})]})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[n(wm,{onClick:()=>o("all"),className:"cursor-pointer hover:shadow-md transition-shadow",children:n(_m,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[n("div",{className:"p-2 rounded-full bg-gray-100",children:n(Mi,{className:"h-5 w-5 text-gray-700"})}),s("div",{className:"text-right",children:[n("p",{className:"text-xs text-gray-500",children:"All Orders"}),n("p",{className:"text-xl font-semibold",children:(null==N?void 0:N.length)||0})]})]})})}),n(wm,{onClick:()=>o("Pending"),className:"cursor-pointer hover:shadow-md transition-shadow",children:n(_m,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[n("div",{className:"p-2 rounded-full bg-yellow-100",children:n(Yn,{className:"h-5 w-5 text-yellow-700"})}),s("div",{className:"text-right",children:[n("p",{className:"text-xs text-gray-500",children:"Pending"}),n("p",{className:"text-xl font-semibold",children:M.pending||0})]})]})})}),n(wm,{onClick:()=>o("Approved"),className:"cursor-pointer hover:shadow-md transition-shadow",children:n(_m,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[n("div",{className:"p-2 rounded-full bg-green-100",children:n(Ln,{className:"h-5 w-5 text-green-700"})}),s("div",{className:"text-right",children:[n("p",{className:"text-xs text-gray-500",children:"Approved"}),n("p",{className:"text-xl font-semibold",children:M.approved||0})]})]})})}),n(wm,{onClick:()=>o("Shipped"),className:"cursor-pointer hover:shadow-md transition-shadow",children:n(_m,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[n("div",{className:"p-2 rounded-full bg-blue-100",children:n(Zi,{className:"h-5 w-5 text-blue-700"})}),s("div",{className:"text-right",children:[n("p",{className:"text-xs text-gray-500",children:"Shipped"}),n("p",{className:"text-xl font-semibold",children:M.shipped||0})]})]})})}),n(wm,{onClick:()=>o("Rejected"),className:"cursor-pointer hover:shadow-md transition-shadow",children:n(_m,{className:"p-4",children:s("div",{className:"flex items-center justify-between",children:[n("div",{className:"p-2 rounded-full bg-red-100",children:n(ss,{className:"h-5 w-5 text-red-700"})}),s("div",{className:"text-right",children:[n("p",{className:"text-xs text-gray-500",children:"Rejected"}),n("p",{className:"text-xl font-semibold",children:M.rejected||0})]})]})})})]}),C?n("div",{className:"flex justify-center py-12",children:n("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-meow-primary"})}):A.length>0?n("div",{className:"space-y-6",children:A.map((e=>s(wm,{className:"overflow-hidden",children:[n(xm,{className:"pb-2 border-b bg-gray-50",children:s("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[s("div",{className:"flex items-center gap-3",children:[s(Ec,{className:"h-10 w-10",children:[n(Dc,{src:e.foster.avatar_url||"",alt:`${e.foster.first_name} ${e.foster.last_name}`}),n(Ac,{children:`${e.foster.first_name.charAt(0)}${e.foster.last_name.charAt(0)}`})]}),s("div",{children:[s("h3",{className:"font-medium",children:["Order from ",e.foster.first_name," ",e.foster.last_name]}),n("p",{className:"text-sm text-gray-500",children:ce(new Date(e.created_at),{addSuffix:!0})})]})]}),s("div",{className:"flex items-center gap-4 mt-2 md:mt-0",children:[P(e.status),n(Ds,{variant:"outline",size:"sm",onClick:()=>(e=>{u(e),y(e.status),g(e.tracking_number||""),b(e.rejected_reason||""),x(e.notes||""),c(!0)})(e),children:"Update Status"})]})]})}),n(_m,{className:"p-4",children:s("div",{className:"space-y-4",children:[s("div",{children:[n("h4",{className:"text-sm font-medium mb-2",children:"Order Items"}),n("div",{className:"border rounded-md overflow-hidden",children:s("table",{className:"min-w-full divide-y divide-gray-200",children:[n("thead",{className:"bg-gray-50",children:s("tr",{children:[n("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),n("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),n("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),n("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items.map((e=>s("tr",{children:[n("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.supply.name}),n("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.supply.category}),s("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-right",children:[e.quantity," ",e.supply.unit]}),n("td",{className:"px-4 py-2 text-sm",children:e.notes||"-"})]},e.id)))})]})})]}),(e.tracking_number||e.notes||e.rejected_reason)&&s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.tracking_number&&s("div",{children:[n("h4",{className:"text-sm font-medium mb-1",children:"Tracking Number"}),n("p",{className:"text-sm p-2 bg-gray-50 rounded",children:e.tracking_number})]}),e.notes&&s("div",{children:[n("h4",{className:"text-sm font-medium mb-1",children:"Admin Notes"}),n("p",{className:"text-sm p-2 bg-gray-50 rounded",children:e.notes})]}),e.rejected_reason&&s("div",{className:"col-span-full",children:[n("h4",{className:"text-sm font-medium mb-1 text-red-600",children:"Rejection Reason"}),n("p",{className:"text-sm p-2 bg-red-50 text-red-700 rounded",children:e.rejected_reason})]})]})]})})]},e.id)))}):s(wm,{className:"p-10 text-center",children:[n(Mi,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No orders found"}),n("p",{className:"text-gray-500 mb-6",children:a||"all"!==i?"Try adjusting your filters to see more results":"Foster parents haven't placed any supply orders yet."}),(a||"all"!==i)&&n(Ds,{variant:"outline",onClick:()=>{r(""),o("all")},children:"Clear Filters"})]})]}),n(dm,{open:l,onOpenChange:c,children:s(pm,{className:"sm:max-w-md",children:[n(gm,{children:s(ym,{className:"flex items-center",children:[n(Mi,{className:"mr-2 h-5 w-5"}),"Update Order Status"]})}),s("form",{onSubmit:e=>{e.preventDefault(),m&&f&&_.mutate({orderId:m.id,status:f,trackingNumber:p||void 0,rejectedReason:"Rejected"===f?v:void 0,notes:w||void 0})},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"status",children:"Status"}),s(Wf,{value:f,onValueChange:y,children:[n(Gf,{children:n(Yf,{placeholder:"Select status"})}),s(Zf,{children:[n(Jf,{value:"Pending",children:"Pending"}),n(Jf,{value:"Approved",children:"Approved"}),n(Jf,{value:"Shipped",children:"Shipped"}),n(Jf,{value:"Delivered",children:"Delivered"}),n(Jf,{value:"Rejected",children:"Rejected"})]})]})]}),"Shipped"===f&&s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"tracking",children:"Tracking Number"}),n(od,{id:"tracking",value:p,onChange:e=>g(e.target.value),placeholder:"Enter tracking number"})]}),"Rejected"===f&&s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"rejection_reason",children:"Rejection Reason"}),n(cu,{id:"rejection_reason",value:v,onChange:e=>b(e.target.value),placeholder:"Enter reason for rejection",rows:3,required:"Rejected"===f})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"notes",children:"Additional Notes"}),n(cu,{id:"notes",value:w,onChange:e=>x(e.target.value),placeholder:"Any additional information",rows:3})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:()=>{c(!1),k()},children:"Cancel"}),n(Ds,{type:"submit",disabled:_.isPending,children:_.isPending?"Updating...":"Update Order"})]})]})]})})]})},Cw=()=>{const[e,t]=h([]),[a,r]=h(!0),[i,o]=h(!1),[l,c]=h(!1),[d,m]=h(null),{toast:u}=xr(),[g,f]=h({name:"",description:"",target_amount:"",start_date:le(new Date,"yyyy-MM-dd"),end_date:le(new Date((new Date).setMonth((new Date).getMonth()+3)),"yyyy-MM-dd"),campaign_type:"general",is_active:!0});p((()=>{y()}),[]);const y=async()=>{try{r(!0);const{data:e,error:a}=await supabase.from("fundraising_campaigns").select("*").order("start_date",{ascending:!1});if(a)throw a;t(e||[])}catch(e){console.error("Error fetching campaigns:",e),u({title:"Error",description:"Failed to fetch campaigns.",variant:"destructive"})}finally{r(!1)}},v=e=>{const{name:t,value:a}=e.target;f((e=>({...e,[t]:"is_active"===t?"true"===a:a})))},b=()=>{f({name:"",description:"",target_amount:"",start_date:le(new Date,"yyyy-MM-dd"),end_date:le(new Date((new Date).setMonth((new Date).getMonth()+3)),"yyyy-MM-dd"),campaign_type:"general",is_active:!0}),m(null),c(!1)},w=()=>{o(!1),b()},x=()=>{b(),o(!0)};return s(ng,{title:"Fundraising Campaigns",children:[s("div",{className:"container mx-auto py-4 px-4",children:[s("div",{className:"flex justify-between items-center mb-6",children:[s("div",{children:[n("h1",{className:"text-3xl font-bold text-meow-primary",children:"Fundraising Campaigns"}),n("p",{className:"text-gray-600",children:"Create and manage fundraising campaigns for your organization"})]}),s(Ds,{onClick:x,children:[n(Vn,{className:"mr-2 h-4 w-4"})," New Campaign"]})]}),a?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map((e=>s(wm,{className:"shadow-sm",children:[s(xm,{className:"pb-2",children:[n("div",{className:"h-6 bg-gray-200 animate-pulse rounded w-3/4 mb-2"}),n("div",{className:"h-4 bg-gray-200 animate-pulse rounded w-1/2"})]}),s(_m,{children:[n("div",{className:"h-4 bg-gray-200 animate-pulse rounded w-full mb-4"}),n("div",{className:"h-4 bg-gray-200 animate-pulse rounded w-3/4 mb-4"}),n("div",{className:"h-6 bg-gray-200 animate-pulse rounded w-full mb-2"})]})]},e)))}):e.length>0?n("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e=>{const t=new Date(e.start_date),a=new Date(e.end_date),r=e.target_amount>0?e.amount_raised/e.target_amount*100:0;return s(wm,{className:"shadow-sm overflow-hidden",children:[s(xm,{className:"pb-2",children:[s("div",{className:"flex justify-between items-start",children:[s("div",{children:[n(Nm,{className:"text-xl",children:e.name}),s(Cm,{children:[le(t,"MMM d, yyyy")," - ",le(a,"MMM d, yyyy")]})]}),s("div",{className:"flex space-x-1",children:[n(Ds,{variant:"ghost",size:"sm",onClick:()=>(e=>{m(e),f({name:e.name,description:e.description,target_amount:e.target_amount.toString(),start_date:le(new Date(e.start_date),"yyyy-MM-dd"),end_date:le(new Date(e.end_date),"yyyy-MM-dd"),campaign_type:e.campaign_type,is_active:e.is_active}),c(!0),o(!0)})(e),children:n(Ti,{className:"h-4 w-4"})}),n(Ds,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{const{error:t}=await supabase.from("fundraising_campaigns").delete().eq("id",e);if(t)throw t;u({title:"Success",description:"Campaign deleted successfully."}),y()}catch(t){console.error("Error deleting campaign:",t),u({title:"Error",description:"Failed to delete campaign.",variant:"destructive"})}})(e.id),children:n(Qi,{className:"h-4 w-4"})})]})]}),s("div",{className:"mt-1",children:[!e.is_active&&s("div",{className:"inline-flex items-center text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-1",children:[n(_n,{className:"h-3 w-3 mr-1"}),"Inactive"]}),n("div",{className:"inline-flex items-center text-xs bg-blue-100 text-blue-800 rounded-full px-2 py-1 ml-1",children:e.campaign_type})]})]}),s(_m,{children:[n("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:e.description}),s("div",{className:"flex justify-between items-center mb-1",children:[n("span",{className:"text-xs text-gray-600",children:"Progress"}),s("span",{className:"text-xs font-medium",children:[r.toFixed(1),"%"]})]}),n(Zb,{value:r,className:"h-2 mb-2"}),s("div",{className:"flex justify-between text-sm font-medium",children:[s("div",{className:"flex items-center",children:[n(Gn,{className:"h-4 w-4 text-green-600"}),n("span",{children:dr(e.amount_raised)})]}),s("span",{className:"text-gray-600",children:["of ",dr(e.target_amount)]})]})]})]},e.id)}))}):s("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[n(Gn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n("h3",{className:"text-lg font-semibold text-gray-600",children:"No campaigns yet"}),n("p",{className:"text-gray-500 mb-4",children:"Start creating fundraising campaigns for your organization"}),s(Ds,{onClick:x,children:[n(Vn,{className:"mr-2 h-4 w-4"})," Create a Campaign"]})]})]}),n(dm,{open:i,onOpenChange:e=>{e||w(),o(e)},children:s(pm,{className:"sm:max-w-md",children:[s(gm,{children:[n(ym,{children:l?"Edit Campaign":"Create New Campaign"}),n(vm,{children:l?"Update the details for this fundraising campaign.":"Create a new fundraising campaign for your organization."})]}),s("form",{onSubmit:async e=>{e.preventDefault();try{const e={name:g.name,description:g.description,target_amount:parseFloat(g.target_amount),start_date:new Date(g.start_date).toISOString(),end_date:new Date(g.end_date).toISOString(),campaign_type:g.campaign_type,is_active:g.is_active};if(l&&d){const{error:t}=await supabase.from("fundraising_campaigns").update(e).eq("id",d.id);if(t)throw t;u({title:"Success",description:"Campaign updated successfully."})}else{const{error:t}=await supabase.from("fundraising_campaigns").insert({...e,amount_raised:0});if(t)throw t;u({title:"Success",description:"Campaign created successfully."})}y(),w()}catch(t){console.error("Error submitting campaign:",t),u({title:"Error",description:"Failed to save campaign.",variant:"destructive"})}},children:[s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"name",children:"Campaign Name"}),n(od,{id:"name",name:"name",value:g.name,onChange:v,placeholder:"e.g. Summer Adoption Drive",required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"description",children:"Description"}),n("textarea",{id:"description",name:"description",value:g.description,onChange:v,className:"min-h-[100px] rounded-md border border-input bg-background px-3 py-2",placeholder:"Describe the purpose of this campaign",required:!0})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"target_amount",children:"Target Amount ($)"}),n(od,{id:"target_amount",name:"target_amount",type:"number",step:"0.01",min:"0",value:g.target_amount,onChange:v,placeholder:"5000.00",required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"campaign_type",children:"Campaign Type"}),s("select",{id:"campaign_type",name:"campaign_type",value:g.campaign_type,onChange:v,className:"rounded-md border border-input bg-background px-3 py-2",required:!0,children:[n("option",{value:"general",children:"General"}),n("option",{value:"emergency",children:"Emergency"}),n("option",{value:"medical",children:"Medical"}),n("option",{value:"adoption",children:"Adoption"}),n("option",{value:"facility",children:"Facility"}),n("option",{value:"equipment",children:"Equipment"}),n("option",{value:"seasonal",children:"Seasonal"})]})]})]}),s("div",{className:"grid grid-cols-2 gap-4",children:[s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"start_date",children:"Start Date"}),n(od,{id:"start_date",name:"start_date",type:"date",value:g.start_date,onChange:v,required:!0})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"end_date",children:"End Date"}),n(od,{id:"end_date",name:"end_date",type:"date",value:g.end_date,onChange:v,required:!0})]})]}),s("div",{className:"grid gap-2",children:[n(Zm,{htmlFor:"is_active",children:"Status"}),s("select",{id:"is_active",name:"is_active",value:g.is_active.toString(),onChange:v,className:"rounded-md border border-input bg-background px-3 py-2",children:[n("option",{value:"true",children:"Active"}),n("option",{value:"false",children:"Inactive"})]})]})]}),s(fm,{children:[n(Ds,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),n(Ds,{type:"submit",children:l?"Update Campaign":"Create Campaign"})]})]})]})})]})},_w=()=>{const{toast:e}=xr(),t=E(),a=(new Date).getFullYear(),[r,o]=h(!1),[l,c]=h(!1),[d,m]=h(!1),[u,g]=h(!1),[f,y]=h(null),[v,b]=h({name:"",description:"",amount:0,year:a}),[w,x]=h({catCount:1,costPerUnit:0,unitsPerDay:3,daysPerYear:365,categoryName:""}),{data:N,isLoading:C,error:_}=S({queryKey:["admin-budget-categories"],queryFn:async()=>{try{const{data:t,error:r}=await supabase.from("budget_categories").select("*").eq("year",a).order("name");if(r)throw r;if(t&&t.length>0)return t;await async function(){try{const{data:e,error:t}=await supabase.from("expenses").select("category").order("category");if(t)throw t;const r=new Set;null==e||e.forEach((e=>{e.category&&r.add(e.category)})),0===r.size&&["Medical","Food","Supplies","Transport","Operations","Veterinary","Medicines","Spay/Neuter","Vaccinations","Microchipping","Facilities","Administration"].forEach((e=>{r.add(e)}));const n=Array.from(r).map((e=>({name:e,description:`Budget for ${e.toLowerCase()} expenses`,amount:5e3,year:a}))),{error:i}=await supabase.from("budget_categories").insert(n);if(i)throw i}catch(t){console.error("Error creating default budget categories:",t),e({title:"Error",description:"Failed to create default budget categories",variant:"destructive"})}}();const{data:n,error:i}=await supabase.from("budget_categories").select("*").eq("year",a).order("name");if(i)throw i;return n}catch(t){return console.error("Error fetching budget categories:",t),[]}}}),{data:k}=S({queryKey:["cat-food-for-budget"],queryFn:async()=>{const{data:e,error:t}=await supabase.from("cat_food").select("id, brand, type, cost_per_unit").order("brand");if(t)throw t;return e}}),{data:A}=S({queryKey:["cat-count-for-budget"],queryFn:async()=>{const{count:e,error:t}=await supabase.from("cats").select("*",{count:"exact",head:!0});if(t)throw t;return e||0}}),{data:M,isLoading:P}=S({queryKey:["expense-summary"],queryFn:async()=>{const e=new Date(a,0,1).toISOString(),t=new Date(a,11,31).toISOString(),{data:r,error:n}=await supabase.from("expenses").select("category, amount").gte("expense_date",e).lte("expense_date",t);if(n)throw n;const i={};let s=0;return r&&r.forEach((e=>{const t="number"==typeof e.amount?e.amount:parseFloat(e.amount);isNaN(t)||(i[e.category]=(i[e.category]||0)+t,s+=t)})),Object.entries(i).map((([e,t])=>({category:e,amount:t,percentage:s>0?t/s*100:0})))}});p((()=>{void 0!==A&&x((e=>({...e,catCount:A})))}),[A]),p((()=>{if(M&&N&&0===N.length){const t=M.map((e=>({name:e.category,description:`Auto-generated from expense data for ${e.category}`,amount:Math.ceil(1.2*e.amount),year:a})));t.length>0&&e({title:"Auto-generating budget categories",description:`Created ${t.length} categories based on your expense data`})}}),[M,N]);const T=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("budget_categories").insert([e]).select().single();if(a)throw a;return t},onSuccess:()=>{e({title:"Category Added",description:"Budget category created successfully."}),t.invalidateQueries({queryKey:["admin-budget-categories"]}),o(!1),b({name:"",description:"",amount:0,year:a})},onError:t=>{e({title:"Error",description:t.message||"Failed to add budget category",variant:"destructive"})}}),R=D({mutationFn:async e=>{const{data:t,error:a}=await supabase.from("budget_categories").update({name:e.name,description:e.description,amount:e.amount,updated_at:(new Date).toISOString()}).eq("id",e.id).select();if(a)throw a;return t},onSuccess:()=>{e({title:"Category Updated",description:"Budget category updated successfully."}),t.invalidateQueries({queryKey:["admin-budget-categories"]}),c(!1),y(null)},onError:t=>{e({title:"Error",description:t.message||"Failed to update budget category",variant:"destructive"})}}),F=D({mutationFn:async e=>{const{error:t}=await supabase.from("budget_categories").delete().eq("id",e);if(t)throw t},onSuccess:()=>{e({title:"Category Deleted",description:"Budget category deleted successfully."}),t.invalidateQueries({queryKey:["admin-budget-categories"]})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete budget category",variant:"destructive"})}}),L=(null==N?void 0:N.reduce(((e,t)=>e+("number"==typeof t.amount?t.amount:0)),0))||0,I=N&&M?N.map((e=>{const t=M.find((t=>t.category.toLowerCase()===e.name.toLowerCase())),a=(null==t?void 0:t.amount)||0,r=e.amount,n=r-a,i=r>0?Math.min(100,a/r*100):0;let s="On track";return i>90?s="Critical":i>75&&(s="Warning"),{category:e.name,allocated:r,spent:a,remaining:n,percentUsed:i,status:s}})):[];return n(ng,{title:"Budget Planning",children:s("div",{className:"container mx-auto py-6",children:[s("div",{className:"flex justify-between items-center mb-6",children:[s("div",{children:[s("h1",{className:"text-3xl font-bold text-meow-primary",children:["Budget Planning ",a]}),s("p",{className:"text-gray-600",children:["Total Annual Budget: ",n("span",{className:"font-bold",children:dr(L)})]})]}),s("div",{className:"flex gap-2",children:[s(Ds,{onClick:()=>g(!0),variant:"outline",children:[n(Rn,{className:"mr-2 h-4 w-4"})," Budget Insights"]}),s(Ds,{onClick:()=>m(!0),variant:"outline",children:[n(En,{className:"mr-2 h-4 w-4"})," Budget Calculator"]}),s(Ds,{onClick:()=>o(!0),children:[n(Li,{className:"mr-2 h-4 w-4"})," Add Budget Category"]})]})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s(wm,{children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg font-medium",children:"Total Budget"})}),s(_m,{children:[n("div",{className:"text-2xl font-bold",children:dr(L)}),s("p",{className:"text-sm text-gray-500",children:["Annual budget for ",a]})]})]}),s(wm,{children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg font-medium",children:"Categories"})}),s(_m,{children:[n("div",{className:"text-2xl font-bold",children:(null==N?void 0:N.length)||0}),n("p",{className:"text-sm text-gray-500",children:"Budget categories"})]})]}),s(wm,{children:[n(xm,{className:"pb-2",children:n(Nm,{className:"text-lg font-medium",children:"Smart Recommendations"})}),s(_m,{children:[n("div",{className:"text-sm text-gray-700",children:I.filter((e=>"On track"!==e.status)).length>0?s("p",{children:[I.filter((e=>"Critical"===e.status)).length," categories need urgent attention"]}):n("p",{children:"Your budget is on track! No immediate actions needed."})}),s(Ds,{variant:"link",className:"p-0 h-auto text-sm text-meow-primary",onClick:()=>g(!0),children:["View all insights ",n(wn,{className:"h-3 w-3 ml-1"})]})]})]})]}),n(wm,{children:n(_m,{className:"p-0",children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,{children:"Category"}),n(Eg,{children:"Description"}),n(Eg,{className:"text-right",children:"Budget Amount"}),n(Eg,{className:"text-right",children:"Actions"})]})}),n(kg,{children:C?n(Sg,{children:n(Dg,{colSpan:4,className:"h-24 text-center",children:n("div",{className:"flex justify-center",children:n("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-meow-primary"})})})}):_?n(Sg,{children:n(Dg,{colSpan:4,className:"text-center text-red-500 py-8",children:"Error loading budget data"})}):(null==N?void 0:N.length)?N.map((e=>s(Sg,{children:[n(Dg,{className:"font-medium",children:e.name}),n(Dg,{children:e.description}),n(Dg,{className:"text-right",children:dr(e.amount)}),n(Dg,{className:"text-right",children:s("div",{className:"flex justify-end gap-2",children:[n(Ds,{variant:"outline",size:"icon",onClick:()=>(e=>{y(e),c(!0)})(e),children:n(Ti,{className:"h-4 w-4"})}),n(Ds,{variant:"destructive",size:"icon",onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this budget category?")&&F.mutate(t));var t},children:n(Qi,{className:"h-4 w-4"})})]})})]},e.id))):n(Sg,{children:n(Dg,{colSpan:4,className:"text-center py-8",children:"No budget categories found. Add your first budget category."})})})]})})}),n(dm,{open:r,onOpenChange:o,children:s(pm,{children:[s(gm,{children:[n(ym,{children:"Add Budget Category"}),n(vm,{children:"Create a new budget category for tracking planned expenses."})]}),s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"name",className:"text-right",children:"Name"}),n(od,{id:"name",value:v.name,onChange:e=>b({...v,name:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"description",className:"text-right",children:"Description"}),n(cu,{id:"description",value:v.description,onChange:e=>b({...v,description:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"amount",className:"text-right",children:"Amount ($)"}),s("div",{className:"flex items-center col-span-3",children:[n(Gn,{className:"h-4 w-4 mr-1 text-gray-500"}),n(od,{id:"amount",type:"number",value:v.amount,onChange:e=>b({...v,amount:parseFloat(e.target.value)})})]})]})]}),s(fm,{children:[n(Ds,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),n(Ds,{type:"submit",onClick:()=>{T.mutate(v)},disabled:!v.name||v.amount<=0,children:"Add Category"})]})]})}),n(dm,{open:l,onOpenChange:c,children:s(pm,{children:[s(gm,{children:[n(ym,{children:"Edit Budget Category"}),n(vm,{children:"Update this budget category's details."})]}),f&&s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"edit-name",className:"text-right",children:"Name"}),n(od,{id:"edit-name",value:f.name,onChange:e=>y({...f,name:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"edit-description",className:"text-right",children:"Description"}),n(cu,{id:"edit-description",value:f.description||"",onChange:e=>y({...f,description:e.target.value}),className:"col-span-3"})]}),s("div",{className:"grid grid-cols-4 items-center gap-4",children:[n("label",{htmlFor:"edit-amount",className:"text-right",children:"Amount ($)"}),s("div",{className:"flex items-center col-span-3",children:[n(Gn,{className:"h-4 w-4 mr-1 text-gray-500"}),n(od,{id:"edit-amount",type:"number",value:f.amount,onChange:e=>y({...f,amount:parseFloat(e.target.value)})})]})]})]}),s(fm,{children:[n(Ds,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n(Ds,{type:"submit",onClick:()=>{f&&R.mutate(f)},disabled:!(null==f?void 0:f.name)||((null==f?void 0:f.amount)||0)<=0,children:"Save Changes"})]})]})}),n(dm,{open:d,onOpenChange:m,children:s(pm,{className:"max-w-md",children:[s(gm,{children:[n(ym,{children:"Budget Calculator"}),n(vm,{children:"Calculate budget needs based on cat count and expenses."})]}),s("div",{className:"grid gap-4 py-4",children:[s("div",{className:"grid grid-cols-3 items-center gap-4",children:[n("label",{htmlFor:"category-name",className:"text-right text-sm",children:"Category Name"}),n(od,{id:"category-name",value:w.categoryName,onChange:e=>x({...w,categoryName:e.target.value}),placeholder:"Cat Food",className:"col-span-2"})]}),s("div",{className:"grid grid-cols-3 items-center gap-4",children:[n("label",{htmlFor:"cat-count",className:"text-right text-sm",children:"Number of Cats"}),n(od,{id:"cat-count",type:"number",value:w.catCount,onChange:e=>x({...w,catCount:parseInt(e.target.value)||0}),className:"col-span-2"})]}),s("div",{className:"grid grid-cols-3 items-center gap-4",children:[n("label",{htmlFor:"cost-per-unit",className:"text-right text-sm",children:"Cost per Unit ($)"}),n(od,{id:"cost-per-unit",type:"number",step:"0.01",value:w.costPerUnit,onChange:e=>x({...w,costPerUnit:parseFloat(e.target.value)||0}),className:"col-span-2"})]}),s("div",{className:"grid grid-cols-3 items-center gap-4",children:[n("label",{htmlFor:"units-per-day",className:"text-right text-sm",children:"Units per Day"}),n(od,{id:"units-per-day",type:"number",step:"0.5",value:w.unitsPerDay,onChange:e=>x({...w,unitsPerDay:parseFloat(e.target.value)||0}),className:"col-span-2"})]}),s("div",{className:"grid grid-cols-3 items-center gap-4",children:[n("label",{htmlFor:"days-per-year",className:"text-right text-sm",children:"Days in Budget"}),n(od,{id:"days-per-year",type:"number",value:w.daysPerYear,onChange:e=>x({...w,daysPerYear:parseInt(e.target.value)||0}),className:"col-span-2"})]}),s("div",{className:"bg-gray-50 p-4 rounded-md mt-4",children:[n("div",{className:"text-sm text-gray-500 mb-2",children:"Calculated Annual Budget:"}),n("div",{className:"text-2xl font-bold text-meow-primary",children:dr(bg(w.catCount,w.costPerUnit,w.unitsPerDay,w.daysPerYear))}),s("div",{className:"text-xs text-gray-500 mt-2",children:["Formula: ",w.catCount," cats  $",w.costPerUnit," cost  ",w.unitsPerDay," units/day  ",w.daysPerYear," days"]})]})]}),s(fm,{children:[n(Ds,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),s(Ds,{type:"submit",onClick:()=>{const e=bg(w.catCount,w.costPerUnit,w.unitsPerDay,w.daysPerYear),t=null==N?void 0:N.find((e=>e.name.toLowerCase()===w.categoryName.toLowerCase()));t?(y({...t,amount:e}),c(!0)):(b({name:w.categoryName||"Cat Food",description:`Budget calculated based on ${w.catCount} cats, $${w.costPerUnit} per unit, ${w.unitsPerDay} units per day`,amount:e,year:a}),o(!0)),m(!1)},disabled:w.costPerUnit<=0||w.unitsPerDay<=0,children:[n(ji,{className:"mr-2 h-4 w-4"}),"Save to Budget"]})]})]})}),n(dm,{open:u,onOpenChange:g,children:s(pm,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s(gm,{children:[n(ym,{children:"Budget Insights & Recommendations"}),n(vm,{children:"Analyzing your budget vs. actual expenses to provide actionable insights"})]}),s("div",{className:"grid gap-6 pt-4",children:[s("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-4",children:[n("h4",{className:"font-medium text-blue-700 mb-1",children:"Budget Advisor AI"}),n("p",{className:"text-sm text-blue-600",children:"Based on your current spending patterns and budget allocations, here are some recommendations:"}),s("ul",{className:"mt-2 space-y-1 text-sm text-blue-600",children:[I.some((e=>e.percentUsed>75))?s(i,{children:[n("li",{children:" Consider increasing budget for categories close to spending limits"}),n("li",{children:" Review spending in critical categories and reduce if possible"})]}):n("li",{children:" Your budget allocations appear to be well balanced"}),I.some((e=>e.percentUsed<25))&&n("li",{children:" Some categories have significant unused budget that could be reallocated"}),0===I.length&&n("li",{children:" Start tracking expenses to get personalized recommendations"})]})]}),n("h3",{className:"font-semibold text-lg",children:"Budget vs. Actual Spending"}),P?n("div",{className:"flex justify-center py-8",children:n("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-meow-primary"})}):I.length>0?n("div",{className:"overflow-x-auto",children:s(Cg,{children:[n(_g,{children:s(Sg,{children:[n(Eg,{children:"Category"}),n(Eg,{className:"text-right",children:"Budget"}),n(Eg,{className:"text-right",children:"Spent"}),n(Eg,{className:"text-right",children:"Remaining"}),n(Eg,{children:"Usage"}),n(Eg,{children:"Status"})]})}),n(kg,{children:I.map(((e,t)=>s(Sg,{children:[n(Dg,{className:"font-medium",children:e.category}),n(Dg,{className:"text-right",children:dr(e.allocated)}),n(Dg,{className:"text-right",children:dr(e.spent)}),n(Dg,{className:"text-right",children:dr(e.remaining)}),s(Dg,{children:[n("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n("div",{className:"h-2 rounded-full "+(e.percentUsed>90?"bg-red-500":e.percentUsed>75?"bg-amber-500":"bg-green-500"),style:{width:`${e.percentUsed}%`}})}),s("span",{className:"text-xs text-gray-500",children:[Math.round(e.percentUsed),"%"]})]}),n(Dg,{children:n("span",{className:"px-2 py-1 text-xs rounded-full "+("Critical"===e.status?"bg-red-100 text-red-800":"Warning"===e.status?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"),children:e.status})})]},t)))})]})}):n("div",{className:"text-center py-8 text-gray-500",children:"No expense data available to compare with budget categories."}),s("div",{className:"bg-gray-50 p-4 rounded-md",children:[n("h3",{className:"font-semibold mb-2",children:"Recommended Actions"}),s("ul",{className:"text-sm space-y-2",children:[I.filter((e=>"Critical"===e.status)).map(((e,t)=>s("li",{className:"flex gap-2",children:[n("span",{className:"text-red-500 font-medium",children:"URGENT:"}),s("span",{children:["Increase budget for ",e.category," or reduce spending - currently at ",Math.round(e.percentUsed),"% of budget"]})]},`critical-${t}`))),I.filter((e=>"Warning"===e.status)).map(((e,t)=>s("li",{className:"flex gap-2",children:[n("span",{className:"text-amber-500 font-medium",children:"WARNING:"}),s("span",{children:["Monitor spending on ",e.category," - currently at ",Math.round(e.percentUsed),"% of budget"]})]},`warning-${t}`)))]})]})]})]})})]})})},kw=new A;!function(){if("undefined"!=typeof window){const e=window.fetch;window.fetch=function(t,a){if("string"==typeof t&&t.includes("supabase.co")){const r=a||{};if(r.headers=r.headers||{},r.headers instanceof Headers){const e={};r.headers.forEach(((t,a)=>{e[a]=t})),r.headers=e}return r.headers.Accept="application/json",r.headers["Content-Type"]||r.headers["content-type"]||(r.headers["Content-Type"]="application/json"),e(t,r)}return e(t,a)},window.supabase||(console.log("Setting up global supabase instance for backward compatibility"),window.supabase=vs())}}();const Sw=()=>n(M,{client:kw,children:n(ut,{children:s(ur,{children:[n(ps,{}),n(gs,{}),n(Dt,{children:s(ae,{children:[n(re,{path:"/",element:n(rd,{})}),n(re,{path:"/about",element:n(sd,{})}),n(re,{path:"/cats",element:n(ld,{})}),n(re,{path:"/cats/:id",element:n(bm,{})}),n(re,{path:"/adopt",element:n(Ym,{})}),n(re,{path:"/adopt/apply",element:n(eh,{})}),n(re,{path:"/foster",element:n(zh,{})}),n(re,{path:"/foster/apply",element:n(Vh,{})}),n(re,{path:"/success-stories",element:n(Fb,{})}),n(re,{path:"/financial-transparency",element:n(cw,{})}),n(re,{path:"/blog",element:n(rh,{})}),n(re,{path:"/blog/:slug",element:n(ih,{})}),n(re,{path:"/events",element:n(oh,{})}),n(re,{path:"/events/:id",element:n(lh,{})}),n(re,{path:"/resources",element:n(gh,{})}),n(re,{path:"/contact",element:n(vh,{})}),n(re,{path:"/donate",element:n(_h,{})}),n(re,{path:"/volunteer",element:n(Fh,{})}),n(re,{path:"/volunteer/apply",element:n(qh,{})}),n(re,{path:"/login",element:n(Hh,{})}),n(re,{path:"/register",element:n(Wh,{})}),n(re,{path:"/reset-password",element:n(Qh,{})}),n(re,{path:"/privacy-policy",element:n(Ip,{})}),n(re,{path:"/terms-of-service",element:n(qp,{})}),n(re,{path:"/lost-found",element:n(Bp,{})}),n(re,{path:"/lost-found/:id",element:n(Hp,{})}),n(re,{path:"/profile",element:n(fs,{children:n(Lp,{})})}),n(re,{path:"/lost-found/new",element:n(fs,{children:n(Kp,{})})}),n(re,{path:"/lost-found/edit/:id",element:n(fs,{children:n(Kp,{})})}),n(re,{path:"/admin",element:n(fs,{requireAdmin:!0,children:n(G,{to:"/admin/dashboard",replace:!0})})}),n(re,{path:"/admin/dashboard",element:n(fs,{requireAdmin:!0,children:n(Ng,{})})}),n(re,{path:"/admin/cats",element:n(fs,{requireAdmin:!0,children:n(ey,{})})}),n(re,{path:"/admin/cats/new",element:n(fs,{requireAdmin:!0,children:n(Ry,{})})}),n(re,{path:"/admin/cats/edit/:id",element:n(fs,{requireAdmin:!0,children:n(Ry,{})})}),n(re,{path:"/admin/users",element:n(fs,{requireAdmin:!0,children:n(Xy,{})})}),n(re,{path:"/admin/finance",element:n(fs,{requireAdmin:!0,children:n(Fv,{})})}),n(re,{path:"/admin/finance/donations",element:n(fs,{requireAdmin:!0,children:n(Fv,{})})}),n(re,{path:"/admin/finance/income",element:n(fs,{requireAdmin:!0,children:n(Fv,{})})}),n(re,{path:"/admin/finance/expenses",element:n(fs,{requireAdmin:!0,children:n(Fv,{})})}),n(re,{path:"/admin/pages",element:n(fs,{requireAdmin:!0,children:n(Iv,{})})}),n(re,{path:"/admin/blog",element:n(fs,{requireAdmin:!0,children:n(Fy,{})})}),n(re,{path:"/admin/blog/new",element:n(fs,{requireAdmin:!0,children:n(Gy,{})})}),n(re,{path:"/admin/blog/edit/:id",element:n(fs,{requireAdmin:!0,children:n(Gy,{})})}),n(re,{path:"/admin/events",element:n(fs,{requireAdmin:!0,children:n(Cb,{})})}),n(re,{path:"/admin/lost-found",element:n(fs,{requireAdmin:!0,children:n(Db,{})})}),n(re,{path:"/admin/messages",element:n(fs,{requireAdmin:!0,children:n(Ab,{})})}),n(re,{path:"/admin/chat",element:n(fs,{requireAdmin:!0,children:n(Mb,{})})}),n(re,{path:"/admin/security",element:n(fs,{requireAdmin:!0,children:n(Pb,{})})}),n(re,{path:"/admin/applications",element:n(fs,{requireAdmin:!0,children:n(Rb,{})})}),n(re,{path:"/admin/supplies",element:n(fs,{requireAdmin:!0,children:n(dw,{})})}),n(re,{path:"/admin/documents",element:n(fs,{requireAdmin:!0,children:n(uw,{})})}),n(re,{path:"/admin/team",element:n(fs,{requireAdmin:!0,children:n(hw,{})})}),n(re,{path:"/admin/success-stories",element:n(fs,{requireAdmin:!0,children:n(bw,{})})}),n(re,{path:"/admin/business-licenses",element:n(fs,{requireAdmin:!0,children:n(ww,{})})}),n(re,{path:"/admin/direct-messages",element:n(fs,{requireAdmin:!0,children:n(xw,{})})}),n(re,{path:"/admin/orders",element:n(fs,{requireAdmin:!0,children:n(Nw,{})})}),n(re,{path:"/admin/help",element:n(fs,{requireAdmin:!0,children:n(Ng,{})})}),n(re,{path:"/admin/finance/campaigns",element:n(fs,{requireAdmin:!0,children:n(Cw,{})})}),n(re,{path:"/admin/budget",element:n(fs,{requireAdmin:!0,children:n(_w,{})})}),n(re,{path:"*",element:n(nh,{})})]})})]})})});async function Ew(e,t={}){console.log(`[SSR] Rendering URL: ${e}`);const a=new A({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1,gcTime:1/0,staleTime:1/0}}}),r=await async function(e){console.log(`[SSR] Fetching page data for URL: ${e}`);const t=new URL(e,"http://localhost").pathname;if(t.startsWith("/cats/")){const e=t.split("/").pop();if(e)try{const{data:t,error:a}=await Ct.from("cats").select("*").eq("id",e).single();if(a)throw a;const{data:r,error:n}=await Ct.from("cat_medical_records").select("*").eq("cat_id",e).order("record_date",{ascending:!1});return n&&console.error("Error fetching medical records:",n),{pageType:"catDetail",cat:t,medicalRecords:r||[]}}catch(a){console.error(`[SSR] Error fetching cat data for ${e}:`,a)}}else if(t.startsWith("/blog/")){const e=t.split("/").pop();if(e)try{const{data:t,error:a}=await Ct.from("blog_posts").select("*").eq("slug",e).eq("is_published",!0).single();if(a)throw a;const{data:r}=await Ct.from("blog_posts").select("*").eq("is_published",!0).neq("id",t.id).limit(3);return{pageType:"blogPost",post:t,relatedPosts:r||[]}}catch(a){console.error(`[SSR] Error fetching blog post data for ${e}:`,a)}}else if(t.startsWith("/events/")){const e=t.split("/").pop();if(e)try{const{data:t,error:a}=await Ct.from("events").select("*").eq("id",e).single();if(a)throw a;return{pageType:"eventDetail",event:t}}catch(a){console.error(`[SSR] Error fetching event data for ${e}:`,a)}}return null}(e);r&&console.log(`[SSR] Fetched page data for ${e}:`,JSON.stringify(r).substring(0,200)+"...");const{pathname:i}=new URL(e,"http://localhost");"/cats"===i?await a.prefetchQuery({queryKey:["adoptable-cats"],queryFn:async()=>{const{data:e,error:t}=await Ct.from("cats").select("*").eq("status","Available").order("name");if(t)throw t;return e}}):"/blog"===i?await a.prefetchQuery({queryKey:["blogPosts"],queryFn:async()=>{const{data:e,error:t}=await Ct.from("blog_posts").select("*").eq("is_published",!0).order("is_featured",{ascending:!1}).order("published_at",{ascending:!1});if(t)throw t;return e}}):"/events"===i&&await a.prefetchQuery({queryKey:["events"],queryFn:async()=>{const{data:e,error:t}=await Ct.from("events").select("*").order("date_start",{ascending:!0});if(t)throw t;return e}});const s={};return{html:o.renderToString(n(l,{location:e,children:n(ut,{context:s,children:n(M,{client:a,children:n(ur,{children:n(Dt,{children:n(dd,{initialData:r,children:n(Sw,{})})})})})})})),helmet:s.helmet||{base:{toString:()=>"",toComponent:()=>null},bodyAttributes:{toString:()=>"",toComponent:()=>null},htmlAttributes:{toString:()=>"",toComponent:()=>null},link:{toString:()=>"",toComponent:()=>null},meta:{toString:()=>"",toComponent:()=>null},noscript:{toString:()=>"",toComponent:()=>null},script:{toString:()=>"",toComponent:()=>null},style:{toString:()=>"",toComponent:()=>null},title:{toString:()=>"",toComponent:()=>null},titleAttributes:{toString:()=>"",toComponent:()=>null},priority:{toString:()=>"",toComponent:()=>null}},state:{queryClient:a.getQueryState(),pageData:r}}}async function Dw(e){const t=await Ew(e),a=t.html&&t.html.length>100;return function({html:e,helmet:t,state:a,url:r,hasContent:n}){var i,s,o,l,c,d,m;const u="https://meowrescue.org",h=`\n    <script>\n      window.__INITIAL_DATA__ = ${JSON.stringify(a).replace(/</g,"\\u003c")}\n    <\/script>\n  `,p=a.pageData?`\n    <script id="__PAGE_DATA__" type="application/json">\n      ${JSON.stringify(a.pageData).replace(/</g,"\\u003c")}\n    <\/script>\n  `:"";return`<!DOCTYPE html>\n<html ${(null==(i=null==t?void 0:t.htmlAttributes)?void 0:i.toString())||'lang="en"'}>\n  <head>\n    <meta charset="UTF-8" />\n    ${(null==(s=null==t?void 0:t.title)?void 0:s.toString())||"<title>MeowRescue - Cat Adoption & Foster Care</title>"}\n    ${(null==(o=null==t?void 0:t.meta)?void 0:o.toString())||'<meta name="description" content="MeowRescue is a home-based cat rescue in Pasco County, Florida, dedicated to rescuing, rehabilitating, and rehoming cats in need." />'}\n    ${(null==(l=null==t?void 0:t.link)?void 0:l.toString())||""}\n    ${(null==(c=null==t?void 0:t.style)?void 0:c.toString())||""}\n    ${(null==(d=null==t?void 0:t.script)?void 0:d.toString())||""}\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="icon" type="image/x-icon" href="/favicon.ico" />\n    <link rel="sitemap" type="application/xml" href="${u}/sitemap.xml" />\n    <link rel="canonical" href="${u}${r}" />\n    <style>\n      body { margin: 0; padding: 0; background-color: #F7F8FC; font-family: 'Open Sans', sans-serif; }\n      .site-header { background-color: rgba(255, 255, 255, 0.95); box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); }\n      h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; margin-top: 0; }\n      /* Hide fallback when SSG content is present */\n      #ssg-content ~ .fallback-content { display: none; }\n      .fallback-content { max-width: 1200px; margin: 0 auto; padding: 20px; }\n      .visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }\n      @media (max-width: 768px) { body { font-size: 16px; } h1 { font-size: 1.8rem; } h2 { font-size: 1.5rem; } }\n    </style>\n    <link rel="preload" as="style" href="/assets/index.css" />\n    <link rel="stylesheet" href="/assets/index.css" />\n    \n    <script>\n      // Initialize UI components before React hydration\n      (function() {\n        // Initialize dropdown toggles for navbar and other components\n        document.addEventListener('DOMContentLoaded', function() {\n          // Handle dropdowns\n          const dropdownToggles = document.querySelectorAll('[data-dropdown-toggle]');\n          dropdownToggles.forEach(toggle => {\n            toggle.addEventListener('click', function(e) {\n              e.preventDefault();\n              const targetId = this.getAttribute('data-dropdown-toggle');\n              const target = document.getElementById(targetId);\n              if (target) {\n                const isVisible = target.classList.contains('block');\n                target.classList.toggle('hidden', isVisible);\n                target.classList.toggle('block', !isVisible);\n              }\n            });\n          });\n\n          // Initialize filter toggles for transparency page\n          const filterToggles = document.querySelectorAll('[data-filter-toggle]');\n          filterToggles.forEach(toggle => {\n            toggle.addEventListener('click', function(e) {\n              e.preventDefault();\n              const targetId = this.getAttribute('data-filter-toggle');\n              const target = document.getElementById(targetId);\n              if (target) {\n                const isVisible = target.classList.contains('block');\n                target.classList.toggle('hidden', isVisible);\n                target.classList.toggle('block', !isVisible);\n              }\n            });\n          });\n\n          // Setup tabs for component initialization\n          const tabToggles = document.querySelectorAll('[data-tab-toggle]');\n          tabToggles.forEach(toggle => {\n            toggle.addEventListener('click', function(e) {\n              e.preventDefault();\n              const targetId = this.getAttribute('data-tab-toggle');\n              const tabGroup = this.closest('[data-tab-group]')?.getAttribute('data-tab-group');\n              \n              // Hide all tabs in the same group\n              if (tabGroup) {\n                document.querySelectorAll('[data-tab-content="' + tabGroup + '"]').forEach(tab => {\n                  tab.classList.add('hidden');\n                });\n                document.querySelectorAll('[data-tab-toggle][data-tab-group="' + tabGroup + '"]').forEach(btn => {\n                  btn.classList.remove('bg-primary', 'text-white');\n                  btn.classList.add('bg-gray-100', 'text-gray-700');\n                });\n              }\n              \n              // Show selected tab\n              const target = document.getElementById(targetId);\n              if (target) {\n                target.classList.remove('hidden');\n                this.classList.remove('bg-gray-100', 'text-gray-700');\n                this.classList.add('bg-primary', 'text-white');\n              }\n            });\n          });\n        });\n      })();\n    <\/script>\n  \n    ${p}\n  </head>\n  <body ${(null==(m=null==t?void 0:t.bodyAttributes)?void 0:m.toString())||""}>\n    <div id="ssg-content">${e}</div>\n    <div id="root"></div>\n    ${h}\n    <script type="module" src="/assets/main.js" defer><\/script>\n  </body>\n</html>`}({html:t.html,helmet:t.helmet,state:t.state,url:e,hasContent:a})}export{Ds as B,od as I,ss as X,pn as c,Ew as render,Dw as renderFullPage};
